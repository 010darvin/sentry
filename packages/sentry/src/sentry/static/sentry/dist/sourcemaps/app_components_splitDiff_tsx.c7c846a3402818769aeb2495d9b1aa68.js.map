{"version":3,"file":"chunks/app_components_splitDiff_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/splitDiff.tsx"],"sourcesContent":["import styled from '@emotion/styled';\nimport {Change, diffChars, diffLines, diffWords} from 'diff';\n\nconst diffFnMap = {\n  chars: diffChars,\n  words: diffWords,\n  lines: diffLines,\n} as const;\n\ntype Props = {\n  base: string;\n  target: string;\n  className?: string;\n  type?: keyof typeof diffFnMap;\n};\n\nconst SplitDiff = ({className, type = 'lines', base, target}: Props) => {\n  const diffFn = diffFnMap[type];\n\n  const baseLines = base.split('\\n');\n  const targetLines = target.split('\\n');\n  const [largerArray] =\n    baseLines.length > targetLines.length\n      ? [baseLines, targetLines]\n      : [targetLines, baseLines];\n  const results = largerArray.map((_line, index) =>\n    diffFn(baseLines[index] || '', targetLines[index] || '', {newlineIsToken: true})\n  );\n\n  return (\n    <SplitTable className={className} data-test-id=\"split-diff\">\n      <SplitBody>\n        {results.map((line, j) => {\n          const highlightAdded = line.find(result => result.added);\n          const highlightRemoved = line.find(result => result.removed);\n\n          return (\n            <tr key={j}>\n              <Cell isRemoved={highlightRemoved}>\n                <Line>\n                  {line\n                    .filter(result => !result.added)\n                    .map((result, i) => (\n                      <Word key={i} isRemoved={result.removed}>\n                        {result.value}\n                      </Word>\n                    ))}\n                </Line>\n              </Cell>\n\n              <Gap />\n\n              <Cell isAdded={highlightAdded}>\n                <Line>\n                  {line\n                    .filter(result => !result.removed)\n                    .map((result, i) => (\n                      <Word key={i} isAdded={result.added}>\n                        {result.value}\n                      </Word>\n                    ))}\n                </Line>\n              </Cell>\n            </tr>\n          );\n        })}\n      </SplitBody>\n    </SplitTable>\n  );\n};\n\nconst SplitTable = styled('table')`\n  table-layout: fixed;\n  border-collapse: collapse;\n  width: 100%;\n`;\n\nconst SplitBody = styled('tbody')`\n  font-family: ${p => p.theme.text.familyMono};\n  font-size: ${p => p.theme.fontSizeSmall};\n`;\n\nconst Cell = styled('td')<{isAdded?: Change; isRemoved?: Change}>`\n  vertical-align: top;\n  ${p => p.isRemoved && `background-color: ${p.theme.diff.removedRow}`};\n  ${p => p.isAdded && `background-color: ${p.theme.diff.addedRow}`};\n`;\n\nconst Gap = styled('td')`\n  width: 20px;\n`;\n\nconst Line = styled('div')`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst Word = styled('span')<{isAdded?: boolean; isRemoved?: boolean}>`\n  white-space: pre-wrap;\n  word-break: break-all;\n  ${p => p.isRemoved && `background-color: ${p.theme.diff.removed}`};\n  ${p => p.isAdded && `background-color: ${p.theme.diff.added}`};\n`;\n\nexport default SplitDiff;\n"],"names":["diffChars","diffLines","diffWords","diffFnMap","chars","words","lines","SplitDiff","className","type","base","target","diffFn","baseLines","split","targetLines","largerArray","length","results","map","_line","index","newlineIsToken","line","j","highlightAdded","find","result","added","highlightRemoved","removed","filter","i","value","SplitTable","SplitBody","p","theme","text","familyMono","fontSizeSmall","Cell","isRemoved","diff","removedRow","isAdded","addedRow","Gap","Line","Word"],"sourceRoot":""}