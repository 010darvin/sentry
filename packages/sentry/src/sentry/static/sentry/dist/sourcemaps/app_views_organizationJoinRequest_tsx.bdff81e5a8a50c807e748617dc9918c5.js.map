{"version":3,"file":"chunks/app_views_organizationJoinRequest_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/narrowLayout.tsx","webpack:///./app/views/organizationJoinRequest.tsx"],"sourcesContent":["import {useEffect} from 'react';\nimport styled from '@emotion/styled';\n\nimport {logout} from 'sentry/actionCreators/account';\nimport {IconSentry} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport useApi from 'sentry/utils/useApi';\n\ntype Props = {\n  children: React.ReactNode;\n  maxWidth?: string;\n  showLogout?: boolean;\n};\n\nfunction NarrowLayout({maxWidth, showLogout, children}: Props) {\n  const api = useApi();\n\n  useEffect(() => {\n    document.body.classList.add('narrow');\n\n    return () => document.body.classList.remove('narrow');\n  }, []);\n\n  async function handleLogout() {\n    await logout(api);\n    window.location.assign('/auth/login');\n  }\n\n  return (\n    <div className=\"app\">\n      <div className=\"pattern-bg\" />\n      <div className=\"container\" style={{maxWidth}}>\n        <div className=\"box box-modal\">\n          <div className=\"box-header\">\n            <a href=\"/\">\n              <IconSentry size=\"lg\" />\n            </a>\n            {showLogout && (\n              <a className=\"logout pull-right\" onClick={handleLogout}>\n                <Logout>{t('Sign out')}</Logout>\n              </a>\n            )}\n          </div>\n          <div className=\"box-content with-padding\">{children}</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nconst Logout = styled('span')`\n  font-size: ${p => p.theme.fontSizeLarge};\n`;\n\nexport default NarrowLayout;\n","import {Component} from 'react';\nimport {RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport {addErrorMessage} from 'sentry/actionCreators/indicator';\nimport EmailField from 'sentry/components/forms/emailField';\nimport Form from 'sentry/components/forms/form';\nimport NarrowLayout from 'sentry/components/narrowLayout';\nimport {IconMegaphone} from 'sentry/icons';\nimport {t, tct} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {trackAdhocEvent} from 'sentry/utils/analytics';\n\ntype Props = RouteComponentProps<{orgId: string}, {}>;\n\ntype State = {\n  submitSuccess: boolean | null;\n};\n\nclass OrganizationJoinRequest extends Component<Props, State> {\n  state: State = {\n    submitSuccess: null,\n  };\n\n  componentDidMount() {\n    const {orgId} = this.props.params;\n\n    trackAdhocEvent({\n      eventKey: 'join_request.viewed',\n      org_slug: orgId,\n    });\n  }\n\n  handleSubmitSuccess = () => {\n    this.setState({submitSuccess: true});\n  };\n\n  handleSubmitError() {\n    addErrorMessage(t('Request to join failed'));\n  }\n\n  handleCancel = e => {\n    e.preventDefault();\n\n    const {orgId} = this.props.params;\n    window.location.assign(`/auth/login/${orgId}/`);\n  };\n\n  render() {\n    const {orgId} = this.props.params;\n    const {submitSuccess} = this.state;\n\n    if (submitSuccess) {\n      return (\n        <NarrowLayout maxWidth=\"550px\">\n          <SuccessModal>\n            <StyledIconMegaphone size=\"5em\" />\n            <StyledHeader>{t('Request Sent')}</StyledHeader>\n            <StyledText>{t('Your request to join has been sent.')}</StyledText>\n            <ReceiveEmailMessage>\n              {tct('You will receive an email when your request is approved.', {orgId})}\n            </ReceiveEmailMessage>\n          </SuccessModal>\n        </NarrowLayout>\n      );\n    }\n\n    return (\n      <NarrowLayout maxWidth=\"650px\">\n        <StyledIconMegaphone size=\"5em\" />\n        <StyledHeader>{t('Request to Join')}</StyledHeader>\n        <StyledText>\n          {tct('Ask the admins if you can join the [orgId] organization.', {\n            orgId,\n          })}\n        </StyledText>\n        <Form\n          requireChanges\n          apiEndpoint={`/organizations/${orgId}/join-request/`}\n          apiMethod=\"POST\"\n          submitLabel={t('Request to Join')}\n          onSubmitSuccess={this.handleSubmitSuccess}\n          onSubmitError={this.handleSubmitError}\n          onCancel={this.handleCancel}\n        >\n          <StyledEmailField\n            name=\"email\"\n            inline={false}\n            label={t('Email Address')}\n            placeholder=\"name@example.com\"\n          />\n        </Form>\n      </NarrowLayout>\n    );\n  }\n}\n\nconst SuccessModal = styled('div')`\n  display: grid;\n  justify-items: center;\n  text-align: center;\n  padding-top: 10px;\n  padding-bottom: ${space(4)};\n`;\n\nconst StyledIconMegaphone = styled(IconMegaphone)`\n  padding-bottom: ${space(3)};\n`;\n\nconst StyledHeader = styled('h3')`\n  margin-bottom: ${space(1)};\n`;\n\nconst StyledText = styled('p')`\n  margin-bottom: 0;\n`;\n\nconst ReceiveEmailMessage = styled(StyledText)`\n  max-width: 250px;\n`;\n\nconst StyledEmailField = styled(EmailField)`\n  padding-top: ${space(2)};\n  padding-left: 0;\n`;\n\nexport default OrganizationJoinRequest;\n"],"names":["useEffect","logout","IconSentry","t","useApi","NarrowLayout","maxWidth","showLogout","children","api","document","body","classList","add","remove","handleLogout","window","location","assign","Logout","p","theme","fontSizeLarge","Component","addErrorMessage","EmailField","Form","IconMegaphone","tct","space","trackAdhocEvent","OrganizationJoinRequest","submitSuccess","setState","e","preventDefault","orgId","props","params","componentDidMount","eventKey","org_slug","handleSubmitError","render","state","handleSubmitSuccess","handleCancel","SuccessModal","StyledIconMegaphone","StyledHeader","StyledText","ReceiveEmailMessage","StyledEmailField"],"sourceRoot":""}