{"version":3,"file":"chunks/app_views_performance_transactionSummary_transactionReplays_index_tsx-node_modules_lodash_ass-dc0de2.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/views/performance/transactionSummary/transactionReplays/content.tsx","webpack:///./app/views/performance/transactionSummary/transactionReplays/index.tsx","webpack:///../node_modules/lodash/assign.js","webpack:///../node_modules/lodash/maxBy.js"],"sourcesContent":["import {browserHistory} from 'react-router';\nimport styled from '@emotion/styled';\nimport {Location} from 'history';\nimport omit from 'lodash/omit';\n\nimport DatePageFilter from 'sentry/components/datePageFilter';\nimport EnvironmentPageFilter from 'sentry/components/environmentPageFilter';\nimport SearchBar from 'sentry/components/events/searchBar';\nimport * as Layout from 'sentry/components/layouts/thirds';\nimport PageFilterBar from 'sentry/components/organizations/pageFilterBar';\nimport {normalizeDateTimeParams} from 'sentry/components/organizations/pageFilters/parse';\nimport Pagination from 'sentry/components/pagination';\nimport space from 'sentry/styles/space';\nimport type {Organization} from 'sentry/types';\nimport {defined} from 'sentry/utils';\nimport EventView from 'sentry/utils/discover/eventView';\nimport ReplayTable from 'sentry/views/replays/replayTable';\nimport type {ReplayListLocationQuery, ReplayListRecord} from 'sentry/views/replays/types';\n\ntype Props = {\n  eventView: EventView;\n  isFetching: boolean;\n  location: Location<ReplayListLocationQuery>;\n  organization: Organization;\n  pageLinks: string | null;\n  replays: ReplayListRecord[];\n};\n\nfunction ReplaysContent({\n  eventView,\n  isFetching,\n  location,\n  organization,\n  pageLinks,\n  replays,\n}: Props) {\n  const query = location.query;\n\n  function handleChange(key: string) {\n    return function (value: string | undefined) {\n      const queryParams = normalizeDateTimeParams({\n        ...(location.query || {}),\n        [key]: value,\n      });\n\n      // do not propagate pagination when making a new search\n      const toOmit = ['cursor'];\n      if (!defined(value)) {\n        toOmit.push(key);\n      }\n      const searchQueryParams = omit(queryParams, toOmit);\n\n      browserHistory.push({\n        ...location,\n        query: searchQueryParams,\n      });\n    };\n  }\n\n  return (\n    <Layout.Main fullWidth>\n      <FilterActions>\n        <PageFilterBar condensed>\n          <EnvironmentPageFilter />\n          <DatePageFilter alignDropdown=\"left\" />\n        </PageFilterBar>\n        <SearchBar\n          organization={organization}\n          projectIds={eventView.project}\n          query={query.query}\n          fields={eventView.fields}\n          onSearch={handleChange('query')}\n        />\n      </FilterActions>\n      <ReplayTable\n        isFetching={isFetching}\n        replays={replays}\n        showProjectColumn={false}\n        sort={eventView.sorts[0]}\n      />\n      <Pagination pageLinks={pageLinks} />\n    </Layout.Main>\n  );\n}\n\nconst FilterActions = styled('div')`\n  display: grid;\n  gap: ${space(2)};\n  margin-bottom: ${space(2)};\n\n  @media (min-width: ${p => p.theme.breakpoints.small}) {\n    grid-template-columns: auto 1fr;\n  }\n`;\n\nexport default ReplaysContent;\n","import {Fragment, useEffect} from 'react';\nimport {Location} from 'history';\n\nimport Feature from 'sentry/components/acl/feature';\nimport Alert from 'sentry/components/alert';\nimport * as Layout from 'sentry/components/layouts/thirds';\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport {t} from 'sentry/locale';\nimport {PageContent} from 'sentry/styles/organization';\nimport type {Organization, Project} from 'sentry/types';\nimport EventView from 'sentry/utils/discover/eventView';\nimport {isAggregateField} from 'sentry/utils/discover/fields';\nimport {decodeScalar} from 'sentry/utils/queryString';\nimport useReplayList, {\n  DEFAULT_SORT,\n  REPLAY_LIST_FIELDS,\n} from 'sentry/utils/replays/hooks/useReplayList';\nimport {MutableSearch} from 'sentry/utils/tokenizeSearch';\nimport withOrganization from 'sentry/utils/withOrganization';\nimport withProjects from 'sentry/utils/withProjects';\nimport type {ReplayListLocationQuery} from 'sentry/views/replays/types';\n\nimport PageLayout, {ChildProps} from '../pageLayout';\nimport Tab from '../tabs';\n\nimport ReplaysContent from './content';\n\ntype Props = {\n  location: Location<ReplayListLocationQuery>;\n  organization: Organization;\n  projects: Project[];\n};\n\nfunction TransactionReplays(props: Props) {\n  const {location, organization, projects} = props;\n\n  function renderNoAccess() {\n    return (\n      <PageContent>\n        <Alert type=\"warning\">{t(\"You don't have access to this feature\")}</Alert>\n      </PageContent>\n    );\n  }\n\n  return (\n    <Feature\n      features={['session-replay-ui']}\n      organization={organization}\n      renderDisabled={renderNoAccess}\n    >\n      <PageLayout\n        location={location}\n        organization={organization}\n        projects={projects}\n        tab={Tab.Replays}\n        getDocumentTitle={getDocumentTitle}\n        generateEventView={generateEventView}\n        childComponent={ReplaysContentWrapper}\n      />\n    </Feature>\n  );\n}\n\nfunction ReplaysContentWrapper({\n  eventView,\n  location,\n  organization,\n  setError,\n}: ChildProps) {\n  const {replays, pageLinks, isFetching, fetchError} = useReplayList({\n    organization,\n    eventView,\n  });\n\n  useEffect(() => {\n    setError(fetchError?.message);\n  }, [setError, fetchError]);\n\n  if (isFetching) {\n    return (\n      <Layout.Main fullWidth>\n        <LoadingIndicator />\n      </Layout.Main>\n    );\n  }\n  return replays ? (\n    <ReplaysContent\n      eventView={eventView}\n      isFetching={isFetching}\n      location={location}\n      organization={organization}\n      pageLinks={pageLinks}\n      replays={replays}\n    />\n  ) : (\n    <Fragment>{null}</Fragment>\n  );\n}\n\nfunction getDocumentTitle(transactionName: string): string {\n  const hasTransactionName =\n    typeof transactionName === 'string' && String(transactionName).trim().length > 0;\n\n  if (hasTransactionName) {\n    return [String(transactionName).trim(), t('Replays')].join(' \\u2014 ');\n  }\n\n  return [t('Summary'), t('Replays')].join(' \\u2014 ');\n}\n\nfunction generateEventView({\n  location,\n  transactionName,\n}: {\n  location: Location;\n  transactionName: string;\n}) {\n  const query = decodeScalar(location.query.query, '');\n  const conditions = new MutableSearch(query);\n\n  conditions.setFilterValues('transaction', [transactionName]);\n\n  Object.keys(conditions.filters).forEach(field => {\n    if (isAggregateField(field)) {\n      conditions.removeFilter(field);\n    }\n  });\n\n  return EventView.fromNewQueryWithLocation(\n    {\n      id: '',\n      name: transactionName,\n      version: 2,\n      fields: REPLAY_LIST_FIELDS,\n      projects: [],\n      query: conditions.formatString(),\n      orderby: decodeScalar(location.query.sort, DEFAULT_SORT),\n    },\n    location\n  );\n}\n\nexport default withProjects(withOrganization(TransactionReplays));\n","var assignValue = require('./_assignValue'),\n    copyObject = require('./_copyObject'),\n    createAssigner = require('./_createAssigner'),\n    isArrayLike = require('./isArrayLike'),\n    isPrototype = require('./_isPrototype'),\n    keys = require('./keys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own enumerable string keyed properties of source objects to the\n * destination object. Source objects are applied from left to right.\n * Subsequent sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @since 0.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assignIn\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assign({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3 }\n */\nvar assign = createAssigner(function(object, source) {\n  if (isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keys(source), object);\n    return;\n  }\n  for (var key in source) {\n    if (hasOwnProperty.call(source, key)) {\n      assignValue(object, key, source[key]);\n    }\n  }\n});\n\nmodule.exports = assign;\n","var baseExtremum = require('./_baseExtremum'),\n    baseGt = require('./_baseGt'),\n    baseIteratee = require('./_baseIteratee');\n\n/**\n * This method is like `_.max` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * the value is ranked. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {*} Returns the maximum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * _.maxBy(objects, function(o) { return o.n; });\n * // => { 'n': 2 }\n *\n * // The `_.property` iteratee shorthand.\n * _.maxBy(objects, 'n');\n * // => { 'n': 2 }\n */\nfunction maxBy(array, iteratee) {\n  return (array && array.length)\n    ? baseExtremum(array, baseIteratee(iteratee, 2), baseGt)\n    : undefined;\n}\n\nmodule.exports = maxBy;\n"],"names":["browserHistory","omit","DatePageFilter","EnvironmentPageFilter","SearchBar","Layout","PageFilterBar","normalizeDateTimeParams","Pagination","space","defined","ReplayTable","ReplaysContent","eventView","isFetching","location","organization","pageLinks","replays","query","handleChange","key","value","queryParams","toOmit","push","searchQueryParams","project","fields","sorts","FilterActions","p","theme","breakpoints","small","Fragment","useEffect","Feature","Alert","LoadingIndicator","t","PageContent","EventView","isAggregateField","decodeScalar","useReplayList","DEFAULT_SORT","REPLAY_LIST_FIELDS","MutableSearch","withOrganization","withProjects","PageLayout","Tab","TransactionReplays","props","projects","renderNoAccess","Replays","getDocumentTitle","generateEventView","ReplaysContentWrapper","setError","fetchError","message","transactionName","hasTransactionName","String","trim","length","join","conditions","setFilterValues","Object","keys","filters","forEach","field","removeFilter","fromNewQueryWithLocation","id","name","version","formatString","orderby","sort"],"sourceRoot":""}