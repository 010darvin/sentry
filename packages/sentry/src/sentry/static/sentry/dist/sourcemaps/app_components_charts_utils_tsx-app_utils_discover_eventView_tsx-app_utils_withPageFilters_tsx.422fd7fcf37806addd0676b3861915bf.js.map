{"version":3,"file":"chunks/app_components_charts_utils_tsx-app_utils_discover_eventView_tsx-app_utils_withPageFilters_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/actionCreators/discoverSavedQueries.tsx","webpack:///./app/actionCreators/guides.tsx","webpack:///./app/actionCreators/performance.tsx","webpack:///./app/actions/pageFiltersActions.tsx","webpack:///./app/components/actions/menuHeader.tsx","webpack:///./app/components/assistant/getGuidesContent.tsx","webpack:///./app/components/assistant/guideAnchor.tsx","webpack:///./app/components/autoSelectText.tsx","webpack:///./app/components/charts/utils.tsx","webpack:///./app/components/checkboxFancy/checkboxFancy.tsx","webpack:///./app/components/count.tsx","webpack:///./app/components/dateTime.tsx","webpack:///./app/components/duration.tsx","webpack:///./app/components/fileSize.tsx","webpack:///./app/components/gridEditable/index.tsx","webpack:///./app/components/gridEditable/styles.tsx","webpack:///./app/components/menuItem.tsx","webpack:///./app/components/organizations/pageFilters/parse.tsx","webpack:///./app/components/performance/teamKeyTransaction.tsx","webpack:///./app/components/performance/teamKeyTransactionsManager.tsx","webpack:///./app/components/performance/waterfall/constants.tsx","webpack:///./app/components/performance/waterfall/rowBar.tsx","webpack:///./app/components/performance/waterfall/utils.tsx","webpack:///./app/components/scoreBar.tsx","webpack:///./app/components/shortId.tsx","webpack:///./app/components/userMisery.tsx","webpack:///./app/components/version.tsx","webpack:///./app/stores/guideStore.tsx","webpack:///./app/stores/pageFiltersStore.tsx","webpack:///./app/types/utils.tsx","webpack:///./app/utils/dates.tsx","webpack:///./app/utils/discover/arrayValue.tsx","webpack:///./app/utils/discover/eventView.tsx","webpack:///./app/utils/discover/fieldRenderers.tsx","webpack:///./app/utils/discover/fields.tsx","webpack:///./app/utils/discover/styles.tsx","webpack:///./app/utils/discover/teamKeyTransactionField.tsx","webpack:///./app/utils/discover/types.tsx","webpack:///./app/utils/fields/index.ts","webpack:///./app/utils/isEqualWithDates.tsx","webpack:///./app/utils/metrics/fields.tsx","webpack:///./app/utils/performance/constants.tsx","webpack:///./app/utils/tokenizeSearch.tsx","webpack:///./app/utils/usePageFilters.tsx","webpack:///./app/utils/withPageFilters.tsx","webpack:///./app/views/dashboardsV2/types.tsx","webpack:///./app/views/dashboardsV2/widgetBuilder/releaseWidget/fields.tsx","webpack:///./app/views/eventsV2/data.tsx","webpack:///./app/views/eventsV2/savedQuery/utils.tsx","webpack:///./app/views/eventsV2/table/types.tsx","webpack:///./app/views/eventsV2/utils.tsx","webpack:///./app/views/performance/transactionSummary/filter.tsx","webpack:///./app/views/performance/transactionSummary/transactionOverview/latencyChart/utils.tsx"],"sourcesContent":["import {addErrorMessage} from 'sentry/actionCreators/indicator';\nimport {Client} from 'sentry/api';\nimport {t} from 'sentry/locale';\nimport {NewQuery, SavedQuery} from 'sentry/types';\n\nexport function fetchSavedQueries(\n  api: Client,\n  orgId: string,\n  query: string = ''\n): Promise<SavedQuery[]> {\n  const promise: Promise<SavedQuery[]> = api.requestPromise(\n    `/organizations/${orgId}/discover/saved/`,\n    {\n      method: 'GET',\n      query: {query: `version:2 ${query}`.trim()},\n    }\n  );\n\n  promise.catch(() => {\n    addErrorMessage(t('Unable to load saved queries'));\n  });\n  return promise;\n}\n\nexport function fetchSavedQuery(\n  api: Client,\n  orgId: string,\n  queryId: string\n): Promise<SavedQuery> {\n  const promise: Promise<SavedQuery> = api.requestPromise(\n    `/organizations/${orgId}/discover/saved/${queryId}/`,\n    {\n      method: 'GET',\n    }\n  );\n\n  promise.catch(() => {\n    addErrorMessage(t('Unable to load saved query'));\n  });\n  return promise;\n}\n\nexport function createSavedQuery(\n  api: Client,\n  orgId: string,\n  query: NewQuery\n): Promise<SavedQuery> {\n  const promise: Promise<SavedQuery> = api.requestPromise(\n    `/organizations/${orgId}/discover/saved/`,\n    {\n      method: 'POST',\n      data: query,\n    }\n  );\n\n  promise.catch(() => {\n    addErrorMessage(t('Unable to create your saved query'));\n  });\n  return promise;\n}\n\nexport function updateSavedQuery(\n  api: Client,\n  orgId: string,\n  query: NewQuery\n): Promise<SavedQuery> {\n  const promise: Promise<SavedQuery> = api.requestPromise(\n    `/organizations/${orgId}/discover/saved/${query.id}/`,\n    {\n      method: 'PUT',\n      data: query,\n    }\n  );\n\n  promise.catch(() => {\n    addErrorMessage(t('Unable to update your saved query'));\n  });\n  return promise;\n}\n\nexport function updateSavedQueryVisit(\n  orgId: string,\n  queryId: string | string[]\n): Promise<void> {\n  // Create a new client so the request is not cancelled\n  const api = new Client();\n  const promise = api.requestPromise(\n    `/organizations/${orgId}/discover/saved/${queryId}/visit/`,\n    {\n      method: 'POST',\n    }\n  );\n\n  return promise;\n}\n\nexport function deleteSavedQuery(\n  api: Client,\n  orgId: string,\n  queryId: string\n): Promise<void> {\n  const promise: Promise<void> = api.requestPromise(\n    `/organizations/${orgId}/discover/saved/${queryId}/`,\n    {method: 'DELETE'}\n  );\n\n  promise.catch(() => {\n    addErrorMessage(t('Unable to delete the saved query'));\n  });\n  return promise;\n}\n","import * as Sentry from '@sentry/react';\n\nimport {Client} from 'sentry/api';\nimport ConfigStore from 'sentry/stores/configStore';\nimport GuideStore from 'sentry/stores/guideStore';\nimport trackAdvancedAnalyticsEvent from 'sentry/utils/analytics/trackAdvancedAnalyticsEvent';\n\nconst api = new Client();\n\nexport async function fetchGuides() {\n  try {\n    const data = await api.requestPromise('/assistant/');\n    GuideStore.fetchSucceeded(data);\n  } catch (err) {\n    if (err.status !== 401 && err.status !== 403) {\n      Sentry.captureException(err);\n    }\n  }\n}\n\nexport function registerAnchor(target: string) {\n  GuideStore.registerAnchor(target);\n}\n\nexport function unregisterAnchor(target: string) {\n  GuideStore.unregisterAnchor(target);\n}\n\nexport function nextStep() {\n  GuideStore.nextStep();\n}\n\nexport function setForceHide(forceHide: boolean) {\n  GuideStore.setForceHide(forceHide);\n}\n\nexport function toStep(step: number) {\n  GuideStore.toStep(step);\n}\n\nexport function closeGuide(dismissed?: boolean) {\n  GuideStore.closeGuide(dismissed);\n}\n\nexport function dismissGuide(guide: string, step: number, orgId: string | null) {\n  recordDismiss(guide, step, orgId);\n  closeGuide(true);\n}\n\nexport function recordFinish(guide: string, orgId: string | null) {\n  api.request('/assistant/', {\n    method: 'PUT',\n    data: {\n      guide,\n      status: 'viewed',\n    },\n  });\n\n  const user = ConfigStore.get('user');\n  if (!user) {\n    return;\n  }\n\n  trackAdvancedAnalyticsEvent('assistant.guide_finished', {\n    organization: orgId,\n    guide,\n  });\n}\n\nexport function recordDismiss(guide: string, step: number, orgId: string | null) {\n  api.request('/assistant/', {\n    method: 'PUT',\n    data: {\n      guide,\n      status: 'dismissed',\n    },\n  });\n\n  const user = ConfigStore.get('user');\n  if (!user) {\n    return;\n  }\n  trackAdvancedAnalyticsEvent('assistant.guide_dismissed', {\n    organization: orgId,\n    guide,\n    step,\n  });\n}\n","import {\n  addErrorMessage,\n  addLoadingMessage,\n  clearIndicators,\n} from 'sentry/actionCreators/indicator';\nimport {Client} from 'sentry/api';\nimport {t} from 'sentry/locale';\nimport parseLinkHeader from 'sentry/utils/parseLinkHeader';\n\ntype KeyTransaction = {\n  project_id: string;\n  transaction: string;\n};\n\ntype TeamKeyTransaction = {\n  count: number;\n  keyed: KeyTransaction[];\n  team: string;\n};\n\nexport type TeamKeyTransactions = TeamKeyTransaction[];\n\nexport async function fetchTeamKeyTransactions(\n  api: Client,\n  orgSlug: string,\n  teams: string[],\n  projects?: string[]\n): Promise<TeamKeyTransaction[]> {\n  const url = `/organizations/${orgSlug}/key-transactions-list/`;\n\n  const datas: TeamKeyTransactions[] = [];\n  let cursor: string | undefined = undefined;\n  let hasMore = true;\n\n  while (hasMore) {\n    try {\n      const payload = {cursor, team: teams, project: projects};\n      if (!payload.cursor) {\n        delete payload.cursor;\n      }\n      if (!payload.project?.length) {\n        delete payload.project;\n      }\n\n      const [data, , resp] = await api.requestPromise(url, {\n        method: 'GET',\n        includeAllArgs: true,\n        query: payload,\n      });\n\n      datas.push(data);\n\n      const pageLinks = resp?.getResponseHeader('Link');\n      if (pageLinks) {\n        const paginationObject = parseLinkHeader(pageLinks);\n        hasMore = paginationObject?.next?.results ?? false;\n        cursor = paginationObject.next?.cursor;\n      } else {\n        hasMore = false;\n      }\n    } catch (err) {\n      addErrorMessage(\n        err.responseJSON?.detail ?? t('Error fetching team key transactions')\n      );\n      throw err;\n    }\n  }\n\n  return datas.flat();\n}\n\nexport function toggleKeyTransaction(\n  api: Client,\n  isKeyTransaction: boolean,\n  orgId: string,\n  projects: string[],\n  transactionName: string,\n  teamIds?: string[] // TODO(txiao): make this required\n): Promise<undefined> {\n  addLoadingMessage(t('Saving changes\\u2026'));\n\n  const promise: Promise<undefined> = api.requestPromise(\n    `/organizations/${orgId}/key-transactions/`,\n    {\n      method: isKeyTransaction ? 'DELETE' : 'POST',\n      query: {\n        project: projects.map(id => String(id)),\n      },\n      data: {\n        transaction: transactionName,\n        team: teamIds,\n      },\n    }\n  );\n\n  promise.then(clearIndicators);\n\n  promise.catch(response => {\n    const responseJSON = response?.responseJSON;\n    const errorDetails = responseJSON?.detail ?? responseJSON?.non_field_errors;\n\n    if (Array.isArray(errorDetails) && errorDetails.length && errorDetails[0]) {\n      addErrorMessage(errorDetails[0]);\n    } else {\n      addErrorMessage(errorDetails ?? t('Unable to update key transaction'));\n    }\n  });\n\n  return promise;\n}\n","import {createActions} from 'reflux';\n\nconst PageFiltersActions = createActions([\n  'reset',\n  'initializeUrlState',\n  'updateProjects',\n  'updateDateTime',\n  'updateEnvironments',\n  'updateDesyncedFilters',\n  'pin',\n]);\n\nexport default PageFiltersActions;\n","import styled from '@emotion/styled';\n\nimport MenuItem from 'sentry/components/menuItem';\nimport space from 'sentry/styles/space';\n\nconst MenuHeader = styled(MenuItem)`\n  text-transform: uppercase;\n  font-weight: 600;\n  color: ${p => p.theme.gray400};\n  border-bottom: 1px solid ${p => p.theme.innerBorder};\n  padding: ${space(1)};\n`;\n\nMenuHeader.defaultProps = {\n  header: true,\n};\n\nexport default MenuHeader;\n","import {GuidesContent} from 'sentry/components/assistant/types';\nimport ExternalLink from 'sentry/components/links/externalLink';\nimport Link from 'sentry/components/links/link';\nimport {t, tct} from 'sentry/locale';\nimport ConfigStore from 'sentry/stores/configStore';\n\nexport default function getGuidesContent(orgSlug: string | null): GuidesContent {\n  if (ConfigStore.get('demoMode')) {\n    return getDemoModeGuides();\n  }\n  return [\n    {\n      guide: 'issue',\n      requiredTargets: ['issue_number', 'exception'],\n      steps: [\n        {\n          title: t('Identify Your Issues'),\n          target: 'issue_number',\n          description: tct(\n            `You have Issues. That's fine. Use the Issue number in your commit message,\n                and we'll automatically resolve the Issue when your code is deployed. [link:Learn more]`,\n            {link: <ExternalLink href=\"https://docs.sentry.io/product/releases/\" />}\n          ),\n        },\n        {\n          title: t('Annoy the Right People'),\n          target: 'owners',\n          description: tct(\n            `Notification overload makes it tempting to hurl your phone into the ocean.\n                Define who is responsible for what, so alerts reach the right people and your\n                devices stay on dry land. [link:Learn more]`,\n            {\n              link: (\n                <ExternalLink href=\"https://docs.sentry.io/product/error-monitoring/issue-owners/\" />\n              ),\n            }\n          ),\n        },\n        {\n          title: t('Narrow Down Suspects'),\n          target: 'exception',\n          description: t(\n            `We've got stack trace. See the exact sequence of function calls leading to the error\n                in question, no detective skills necessary.`\n          ),\n        },\n        {\n          title: t('Retrace Your Steps'),\n          target: 'breadcrumbs',\n          description: t(\n            `Not sure how you got here? Sentry automatically captures breadcrumbs for events in web\n                frameworks to lead you straight to your error.`\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'issue_stream',\n      requiredTargets: ['issue_stream'],\n      steps: [\n        {\n          title: t('Issues'),\n          target: 'issue_stream',\n          description: tct(\n            `Sentry automatically groups similar events together into an issue. Similarity is\n            determined by stack trace and other factors. [link:Learn more].`,\n            {\n              link: (\n                <ExternalLink href=\"https://docs.sentry.io/platform-redirect/?next=/data-management/event-grouping/\" />\n              ),\n            }\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'alerts_write_owner',\n      requiredTargets: ['alerts_write_owner'],\n      steps: [\n        {\n          target: 'alerts_write_owner',\n          description: tct(\n            `Today only admins in your organization can create alert rules but we recommend [link:allowing members to create alerts], too.`,\n            {\n              link: <Link to={orgSlug ? `/settings/${orgSlug}` : `/settings`} />,\n            }\n          ),\n          nextText: t(`Allow`),\n          hasNextGuide: true,\n        },\n      ],\n    },\n    {\n      guide: 'trace_view',\n      requiredTargets: ['trace_view_guide_row', 'trace_view_guide_row_details'],\n      steps: [\n        {\n          title: t('Event Breakdown'),\n          target: 'trace_view_guide_breakdown',\n          description: t(\n            `The event breakdown shows you the breakdown of event types within a trace.`\n          ),\n        },\n        {\n          title: t('Transactions'),\n          target: 'trace_view_guide_row',\n          description: t(\n            `You can quickly see all the transactions in a trace alongside the project, transaction duration, and any related errors.`\n          ),\n        },\n        {\n          title: t('Transactions Details'),\n          target: 'trace_view_guide_row_details',\n          description: t(`Click on any transaction to see more details.`),\n        },\n      ],\n    },\n    {\n      guide: 'span_op_breakdowns_and_tag_explorer',\n      requiredTargets: ['span_op_breakdowns_filter'],\n      steps: [\n        {\n          title: t('Filter by Span Operation'),\n          target: 'span_op_breakdowns_filter',\n          description: t(\n            'You can now filter these transaction events based on http, db, browser or resource operation.'\n          ),\n        },\n        {\n          title: t('Suspect Tags'),\n          target: 'tag_explorer',\n          description: tct(\n            \"See which tags often correspond to slower transactions. You'll want to investigate these more. [link:Learn more]\",\n            {\n              link: (\n                <ExternalLink href=\"https://docs.sentry.io/product/performance/transaction-summary/#suspect-tags\" />\n              ),\n            }\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'project_transaction_threshold',\n      requiredTargets: ['project_transaction_threshold'],\n      steps: [\n        {\n          title: t('Project Thresholds'),\n          target: 'project_transaction_threshold',\n          description: t(\n            'Gauge performance using different metrics for each project. Set response time thresholds, per project, for the Apdex and User Misery Scores in each project’s Performance settings.'\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'project_transaction_threshold_override',\n      requiredTargets: ['project_transaction_threshold_override'],\n      steps: [\n        {\n          title: t('Response Time Thresholds'),\n          target: 'project_transaction_threshold_override',\n          description: t(\n            'Use this menu to adjust each transaction’s satisfactory response time threshold, which can vary across transactions. These thresholds are used to calculate Apdex and User Misery, metrics that indicate how satisfied and miserable users are, respectively.'\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'semver',\n      requiredTargets: ['releases_search'],\n      dateThreshold: new Date('2021-05-01'),\n      steps: [\n        {\n          title: t('Filter by Semver'),\n          target: 'releases_search',\n          description: tct(\n            'You can now filter releases by semver. For example: release.version:>14.0 [br] [link:View the docs]',\n            {\n              br: <br />,\n              link: (\n                <ExternalLink href=\"https://docs.sentry.io/product/releases/usage/sorting-filtering/#filtering-releases\" />\n              ),\n            }\n          ),\n          nextText: t('Leave me alone'),\n        },\n      ],\n    },\n    {\n      guide: 'new_page_filters',\n      requiredTargets: ['new_page_filter_button'],\n      expectedTargets: ['new_page_filter_pin'],\n      dateThreshold: new Date('2022-04-05'),\n      steps: [\n        {\n          title: t('Selection filters here now!'),\n          target: 'new_page_filter_button',\n          description: t(\n            \"Selection filters were at the top of the page. Now they're here. Because this is what's getting filtered. Obvi.\"\n          ),\n          nextText: t('Sounds Good'),\n        },\n        {\n          title: t('Pin your filters'),\n          target: 'new_page_filter_pin',\n          description: t(\n            \"Want to keep the same filters between searches and sessions? Click this button. Don't want to? Don't click this button.\"\n          ),\n          nextText: t('Got It'),\n        },\n      ],\n    },\n    {\n      guide: 'releases_widget',\n      requiredTargets: ['releases_widget'],\n      dateThreshold: new Date('2022-06-22'),\n      steps: [\n        {\n          title: t('Releases are here!'),\n          target: 'releases_widget',\n          description: t(\n            'Want to know how your latest release is doing? Monitor release health and crash rates in Dashboards.'\n          ),\n          nextText: t('Sounds Good'),\n        },\n      ],\n    },\n    {\n      guide: 'activate_sampling_rule',\n      requiredTargets: ['sampling_rule_toggle'],\n      dateThreshold: new Date('2022-07-05'),\n      steps: [\n        {\n          title: t('Activate your first rule'),\n          target: 'sampling_rule_toggle',\n          description: t(\n            'Activating a rule will take immediate effect, as well as any changes given to an active rule.'\n          ),\n          nextText: t('Activate Rule'),\n          dismissText: t('Later'),\n          hasNextGuide: true,\n        },\n      ],\n    },\n    {\n      guide: 'create_conditional_rule',\n      requiredTargets: ['add_conditional_rule'],\n      dateThreshold: new Date('2022-07-05'),\n      steps: [\n        {\n          title: t('Create a new sample rule'),\n          target: 'add_conditional_rule',\n          description: t(\n            'Sample transactions under specific conditions, keeping what you need and dropping what you don’t.'\n          ),\n          dismissText: t('Enough already'),\n        },\n      ],\n    },\n  ];\n}\n\nfunction getDemoModeGuides(): GuidesContent {\n  return [\n    {\n      guide: 'sidebar',\n      requiredTargets: ['projects', 'issues'],\n      priority: 1, // lower number means higher priority\n      markOthersAsSeen: true,\n      steps: [\n        {\n          title: t('Projects'),\n          target: 'projects',\n          description: t(\n            `Create a project for any type of application you want to monitor.`\n          ),\n        },\n        {\n          title: t('Issues'),\n          target: 'issues',\n          description: t(\n            `Here's a list of what's broken with your application. And everything you need to know to fix it.`\n          ),\n        },\n        {\n          title: t('Performance'),\n          target: 'performance',\n          description: t(\n            `See slow faster. Trace slow-loading pages back to their API calls as well as surface all related errors.`\n          ),\n        },\n        {\n          title: t('Releases'),\n          target: 'releases',\n          description: t(\n            `Track the health of every release, see differences between releases from crash analytics to adoption rates.`\n          ),\n        },\n        {\n          title: t('Discover'),\n          target: 'discover',\n          description: t(\n            `Query and unlock insights into the health of your entire system and get answers to critical business questions all in one place.`\n          ),\n          nextText: t(`Got it`),\n        },\n      ],\n    },\n    {\n      guide: 'issue_stream_v2',\n      requiredTargets: ['issue_stream_title'],\n      steps: [\n        {\n          title: t('Issue'),\n          target: 'issue_stream_title',\n          description: t(\n            `Click here to get a full error report down to the line of code that caused the error.`\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'issue_v2',\n      requiredTargets: ['issue_details', 'exception'],\n      steps: [\n        {\n          title: t('Details'),\n          target: 'issue_details',\n          description: t(`See the who, what, and where of every error right at the top`),\n        },\n        {\n          title: t('Exception'),\n          target: 'exception',\n          description: t(\n            `Source code right in the stack trace, so you don’t need to find it yourself.`\n          ),\n        },\n        {\n          title: t('Tags'),\n          target: 'tags',\n          description: t(\n            `Tags help you quickly access related events and view the tag distribution for a set of events.`\n          ),\n        },\n        {\n          title: t('Breadcrumbs'),\n          target: 'breadcrumbs',\n          description: t(\n            `Check out the play by play of what your user experienced till they encountered the exception.`\n          ),\n        },\n        {\n          title: t('Discover'),\n          target: 'open_in_discover',\n          description: t(\n            `Uncover trends with Discover — analyze errors by URL, geography, device, browser, etc.`\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'releases',\n      requiredTargets: ['release_version'],\n      steps: [\n        {\n          title: t('Release'),\n          target: 'release_version',\n          description: t(\n            `Click here to easily identify new issues, regressions, and track the health of every release.`\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'release_details',\n      requiredTargets: ['release_chart'],\n      steps: [\n        {\n          title: t('Chart'),\n          target: 'release_chart',\n          description: t(`Click and drag to zoom in on a specific section of the chart.`),\n        },\n        {\n          title: t('Discover'),\n          target: 'release_issues_open_in_discover',\n          description: t(`Analyze these errors by URL, geography, device, browser, etc.`),\n        },\n        {\n          title: t('Discover'),\n          target: 'release_transactions_open_in_discover',\n          description: t(\n            `Analyze these performance issues by URL, geography, device, browser, etc.`\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'discover_landing',\n      requiredTargets: ['discover_landing_header'],\n      steps: [\n        {\n          title: t('Discover'),\n          target: 'discover_landing_header',\n          description: t(\n            `Click into any of the queries below to identify trends in event data.`\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'discover_event_view',\n      requiredTargets: ['create_alert_from_discover'],\n      steps: [\n        {\n          title: t('Create Alert'),\n          target: 'create_alert_from_discover',\n          description: t(\n            `Create an alert based on this query to get notified when an event exceeds user-defined thresholds.`\n          ),\n        },\n        {\n          title: t('Columns'),\n          target: 'columns_header_button',\n          description: t(\n            `There's a whole lot more to... _discover_. View all the query conditions.`\n          ),\n        },\n      ],\n    },\n    {\n      guide: 'transaction_details',\n      requiredTargets: ['span_tree'],\n      steps: [\n        {\n          title: t('Span Tree'),\n          target: 'span_tree',\n          description: t(\n            `Expand the spans to see span details from start date, end date to the operation.`\n          ),\n        },\n        {\n          title: t('Breadcrumbs'),\n          target: 'breadcrumbs',\n          description: t(\n            `Check out the play by play of what your user experienced till they encountered the performance issue.`\n          ),\n        },\n      ],\n    },\n  ];\n}\n","import {Component, createRef, Fragment} from 'react';\nimport styled from '@emotion/styled';\nimport * as Sentry from '@sentry/react';\nimport {Query} from 'history';\n\nimport {\n  closeGuide,\n  dismissGuide,\n  nextStep,\n  recordFinish,\n  registerAnchor,\n  unregisterAnchor,\n} from 'sentry/actionCreators/guides';\nimport {Guide} from 'sentry/components/assistant/types';\nimport Button from 'sentry/components/button';\nimport {Body as HovercardBody, Hovercard} from 'sentry/components/hovercard';\nimport {t, tct} from 'sentry/locale';\nimport GuideStore, {GuideStoreState} from 'sentry/stores/guideStore';\nimport space from 'sentry/styles/space';\nimport theme from 'sentry/utils/theme';\n\ntype Props = {\n  target: string;\n  /**\n   * Hovercard renders the container\n   */\n  containerClassName?: string;\n  offset?: number;\n  /**\n   * Trigger when the guide is completed (all steps have been clicked through)\n   */\n  onFinish?: (e: React.MouseEvent) => void;\n  /**\n   * Triggered when any step is completed (including the last step)\n   */\n  onStepComplete?: (e: React.MouseEvent) => void;\n  position?: React.ComponentProps<typeof Hovercard>['position'];\n  to?: {\n    pathname: string;\n    query: Query;\n  };\n};\n\ntype State = {\n  active: boolean;\n  orgId: string | null;\n  step: number;\n  currentGuide?: Guide;\n};\n\nclass BaseGuideAnchor extends Component<Props, State> {\n  state: State = {\n    active: false,\n    step: 0,\n    orgId: null,\n  };\n\n  componentDidMount() {\n    const {target} = this.props;\n    registerAnchor(target);\n  }\n\n  componentDidUpdate(_prevProps: Props, prevState: State) {\n    if (this.containerElement.current && !prevState.active && this.state.active) {\n      try {\n        const {top} = this.containerElement.current.getBoundingClientRect();\n        const scrollTop = window.pageYOffset;\n        const centerElement = top + scrollTop - window.innerHeight / 2;\n        window.scrollTo({top: centerElement});\n      } catch (err) {\n        Sentry.captureException(err);\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    const {target} = this.props;\n    unregisterAnchor(target);\n    this.unsubscribe();\n  }\n\n  unsubscribe = GuideStore.listen(\n    (data: GuideStoreState) => this.onGuideStateChange(data),\n    undefined\n  );\n\n  containerElement = createRef<HTMLSpanElement>();\n\n  onGuideStateChange(data: GuideStoreState) {\n    const active =\n      data.currentGuide?.steps[data.currentStep]?.target === this.props.target &&\n      !data.forceHide;\n\n    this.setState({\n      active,\n      currentGuide: data.currentGuide ?? undefined,\n      step: data.currentStep,\n      orgId: data.orgId,\n    });\n  }\n\n  /**\n   * Terminology:\n   *\n   *  - A guide can be FINISHED by clicking one of the buttons in the last step\n   *  - A guide can be DISMISSED by x-ing out of it at any step except the last (where there is no x)\n   *  - In both cases we consider it CLOSED\n   */\n  handleFinish = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    this.props.onStepComplete?.(e);\n    this.props.onFinish?.(e);\n\n    const {currentGuide, orgId} = this.state;\n    if (currentGuide) {\n      recordFinish(currentGuide.guide, orgId);\n    }\n    closeGuide();\n  };\n\n  handleNextStep = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    this.props.onStepComplete?.(e);\n    nextStep();\n  };\n\n  handleDismiss = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    const {currentGuide, step, orgId} = this.state;\n    if (currentGuide) {\n      dismissGuide(currentGuide.guide, step, orgId);\n    }\n  };\n\n  getHovercardBody() {\n    const {to} = this.props;\n    const {currentGuide, step} = this.state;\n    if (!currentGuide) {\n      return null;\n    }\n\n    const totalStepCount = currentGuide.steps.length;\n    const currentStepCount = step + 1;\n    const currentStep = currentGuide.steps[step];\n    const lastStep = currentStepCount === totalStepCount;\n    const hasManySteps = totalStepCount > 1;\n\n    // to clear `#assistant` from the url\n    const href = window.location.hash === '#assistant' ? '#' : '';\n\n    const dismissButton = (\n      <DismissButton\n        size=\"sm\"\n        translucentBorder\n        href={href}\n        onClick={this.handleDismiss}\n        priority=\"link\"\n      >\n        {currentStep.dismissText || t('Dismiss')}\n      </DismissButton>\n    );\n\n    return (\n      <GuideContainer data-test-id=\"guide-container\">\n        <GuideContent>\n          {currentStep.title && <GuideTitle>{currentStep.title}</GuideTitle>}\n          <GuideDescription>{currentStep.description}</GuideDescription>\n        </GuideContent>\n        <GuideAction>\n          <div>\n            {lastStep ? (\n              <Fragment>\n                <StyledButton\n                  size=\"sm\"\n                  translucentBorder\n                  to={to}\n                  onClick={this.handleFinish}\n                >\n                  {currentStep.nextText ||\n                    (hasManySteps ? t('Enough Already') : t('Got It'))}\n                </StyledButton>\n                {currentStep.hasNextGuide && dismissButton}\n              </Fragment>\n            ) : (\n              <Fragment>\n                <StyledButton\n                  size=\"sm\"\n                  translucentBorder\n                  onClick={this.handleNextStep}\n                  to={to}\n                >\n                  {currentStep.nextText || t('Next')}\n                </StyledButton>\n                {!currentStep.cantDismiss && dismissButton}\n              </Fragment>\n            )}\n          </div>\n\n          {hasManySteps && (\n            <StepCount>\n              {tct('[currentStepCount] of [totalStepCount]', {\n                currentStepCount,\n                totalStepCount,\n              })}\n            </StepCount>\n          )}\n        </GuideAction>\n      </GuideContainer>\n    );\n  }\n\n  render() {\n    const {children, position, offset, containerClassName} = this.props;\n    const {active} = this.state;\n\n    if (!active) {\n      return children ? children : null;\n    }\n\n    return (\n      <StyledHovercard\n        forceVisible\n        body={this.getHovercardBody()}\n        tipColor=\"purple300\"\n        position={position}\n        offset={offset}\n        containerClassName={containerClassName}\n      >\n        <span ref={this.containerElement}>{children}</span>\n      </StyledHovercard>\n    );\n  }\n}\n\n/**\n * Wraps the GuideAnchor so we don't have to render it if it's disabled\n * Using a class so we automatically have children as a typed prop\n */\ntype WrapperProps = Props & {\n  children?: React.ReactNode;\n  disabled?: boolean;\n};\n\n/**\n * A GuideAnchor puts an informative hovercard around an element. Guide anchors\n * register with the GuideStore, which uses registrations from one or more\n * anchors on the page to determine which guides can be shown on the page.\n */\nfunction GuideAnchor({disabled, children, ...rest}: WrapperProps) {\n  if (disabled) {\n    return <Fragment>{children}</Fragment>;\n  }\n  return <BaseGuideAnchor {...rest}>{children}</BaseGuideAnchor>;\n}\n\nexport default GuideAnchor;\n\nconst GuideContainer = styled('div')`\n  display: grid;\n  grid-template-rows: repeat(2, auto);\n  gap: ${space(2)};\n  text-align: center;\n  line-height: 1.5;\n  background-color: ${p => p.theme.purple300};\n  border-color: ${p => p.theme.purple300};\n  color: ${p => p.theme.white};\n`;\n\nconst GuideContent = styled('div')`\n  display: grid;\n  grid-template-rows: repeat(2, auto);\n  gap: ${space(1)};\n\n  a {\n    color: ${p => p.theme.white};\n    text-decoration: underline;\n  }\n`;\n\nconst GuideTitle = styled('div')`\n  font-weight: bold;\n  font-size: ${p => p.theme.fontSizeExtraLarge};\n`;\n\nconst GuideDescription = styled('div')`\n  font-size: ${p => p.theme.fontSizeMedium};\n`;\n\nconst GuideAction = styled('div')`\n  display: grid;\n  grid-template-rows: repeat(2, auto);\n  gap: ${space(1)};\n`;\n\nconst StyledButton = styled(Button)`\n  font-size: ${p => p.theme.fontSizeMedium};\n  min-width: 40%;\n`;\n\nconst DismissButton = styled(StyledButton)`\n  margin-left: ${space(1)};\n\n  &:hover,\n  &:focus,\n  &:active {\n    color: ${p => p.theme.white};\n  }\n  color: ${p => p.theme.white};\n`;\n\nconst StepCount = styled('div')`\n  font-size: ${p => p.theme.fontSizeSmall};\n  font-weight: bold;\n  text-transform: uppercase;\n`;\n\nconst StyledHovercard = styled(Hovercard)`\n  ${HovercardBody} {\n    background-color: ${theme.purple300};\n    margin: -1px;\n    border-radius: ${theme.borderRadius};\n    width: 300px;\n  }\n`;\n","import {forwardRef, useImperativeHandle, useRef} from 'react';\nimport classNames from 'classnames';\n\nimport {selectText} from 'sentry/utils/selectText';\n\ntype Props = {\n  children: React.ReactNode;\n  className?: string;\n  style?: React.CSSProperties;\n};\n\ntype AutoSelectHandle = {\n  selectText: () => void;\n};\n\nconst AutoSelectText: React.ForwardRefRenderFunction<AutoSelectHandle, Props> = (\n  {children, className, ...props},\n  forwardedRef\n) => {\n  const element = useRef<HTMLSpanElement>(null);\n\n  // We need to expose a selectText method to parent components\n  // and need an imperative ref handle.\n  useImperativeHandle(forwardedRef, () => ({\n    selectText: () => handleClick(),\n  }));\n\n  function handleClick() {\n    if (!element.current) {\n      return;\n    }\n    selectText(element.current);\n  }\n\n  // use an inner span here for the selection as otherwise the selectText\n  // function will create a range that includes the entire part of the\n  // div (including the div itself) which causes newlines to be selected\n  // in chrome.\n  return (\n    <div\n      {...props}\n      onClick={handleClick}\n      className={classNames('auto-select-text', className)}\n    >\n      <span ref={element}>{children}</span>\n    </div>\n  );\n};\n\nexport default forwardRef(AutoSelectText);\n","import type {LegendComponentOption} from 'echarts';\nimport type {Location} from 'history';\nimport moment from 'moment';\n\nimport {DEFAULT_STATS_PERIOD} from 'sentry/constants';\nimport {EventsStats, MultiSeriesEventsStats, PageFilters} from 'sentry/types';\nimport {defined, escape} from 'sentry/utils';\nimport {parsePeriodToHours} from 'sentry/utils/dates';\nimport type {TableDataWithTitle} from 'sentry/utils/discover/discoverQuery';\nimport {decodeList} from 'sentry/utils/queryString';\n\nconst DEFAULT_TRUNCATE_LENGTH = 80;\n\n// In minutes\nexport const SIXTY_DAYS = 86400;\nexport const THIRTY_DAYS = 43200;\nexport const TWO_WEEKS = 20160;\nexport const ONE_WEEK = 10080;\nexport const TWENTY_FOUR_HOURS = 1440;\nexport const SIX_HOURS = 360;\nexport const ONE_HOUR = 60;\n\n/**\n * If there are more releases than this number we hide \"Releases\" series by default\n */\nexport const RELEASE_LINES_THRESHOLD = 50;\n\nexport type DateTimeObject = Partial<PageFilters['datetime']>;\n\nexport function truncationFormatter(\n  value: string,\n  truncate: number | boolean | undefined\n): string {\n  if (!truncate) {\n    return escape(value);\n  }\n  const truncationLength =\n    truncate && typeof truncate === 'number' ? truncate : DEFAULT_TRUNCATE_LENGTH;\n  const truncated =\n    value.length > truncationLength ? value.substring(0, truncationLength) + '…' : value;\n  return escape(truncated);\n}\n\n/**\n * Use a shorter interval if the time difference is <= 24 hours.\n */\nexport function useShortInterval(datetimeObj: DateTimeObject): boolean {\n  const diffInMinutes = getDiffInMinutes(datetimeObj);\n\n  return diffInMinutes <= TWENTY_FOUR_HOURS;\n}\n\nexport type Fidelity = 'high' | 'medium' | 'low';\n\nexport function getInterval(datetimeObj: DateTimeObject, fidelity: Fidelity = 'medium') {\n  const diffInMinutes = getDiffInMinutes(datetimeObj);\n\n  if (diffInMinutes >= SIXTY_DAYS) {\n    // Greater than or equal to 60 days\n    if (fidelity === 'high') {\n      return '4h';\n    }\n    if (fidelity === 'medium') {\n      return '1d';\n    }\n    return '2d';\n  }\n\n  if (diffInMinutes >= THIRTY_DAYS) {\n    // Greater than or equal to 30 days\n    if (fidelity === 'high') {\n      return '1h';\n    }\n    if (fidelity === 'medium') {\n      return '4h';\n    }\n    return '1d';\n  }\n\n  if (diffInMinutes >= TWO_WEEKS) {\n    if (fidelity === 'high') {\n      return '30m';\n    }\n    if (fidelity === 'medium') {\n      return '1h';\n    }\n    return '12h';\n  }\n\n  if (diffInMinutes > TWENTY_FOUR_HOURS) {\n    // Greater than 24 hours\n    if (fidelity === 'high') {\n      return '30m';\n    }\n    if (fidelity === 'medium') {\n      return '1h';\n    }\n    return '6h';\n  }\n\n  if (diffInMinutes > ONE_HOUR) {\n    // Between 1 hour and 24 hours\n    if (fidelity === 'high') {\n      return '5m';\n    }\n    if (fidelity === 'medium') {\n      return '15m';\n    }\n    return '1h';\n  }\n\n  // Less than or equal to 1 hour\n  if (fidelity === 'high') {\n    return '1m';\n  }\n  if (fidelity === 'medium') {\n    return '5m';\n  }\n  return '10m';\n}\n\n/**\n * Duplicate of getInterval, except that we do not support <1h granularity\n * Used by OrgStatsV2 API\n */\nexport function getSeriesApiInterval(datetimeObj: DateTimeObject) {\n  const diffInMinutes = getDiffInMinutes(datetimeObj);\n\n  if (diffInMinutes >= SIXTY_DAYS) {\n    // Greater than or equal to 60 days\n    return '1d';\n  }\n\n  if (diffInMinutes >= THIRTY_DAYS) {\n    // Greater than or equal to 30 days\n    return '4h';\n  }\n\n  return '1h';\n}\n\nexport function getDiffInMinutes(datetimeObj: DateTimeObject): number {\n  const {period, start, end} = datetimeObj;\n\n  if (start && end) {\n    return moment(end).diff(start, 'minutes');\n  }\n\n  return (\n    parsePeriodToHours(typeof period === 'string' ? period : DEFAULT_STATS_PERIOD) * 60\n  );\n}\n\n// Max period (in hours) before we can no long include previous period\nconst MAX_PERIOD_HOURS_INCLUDE_PREVIOUS = 45 * 24;\n\nexport function canIncludePreviousPeriod(\n  includePrevious: boolean | undefined,\n  period: string | null | undefined\n) {\n  if (!includePrevious) {\n    return false;\n  }\n\n  if (period && parsePeriodToHours(period) > MAX_PERIOD_HOURS_INCLUDE_PREVIOUS) {\n    return false;\n  }\n\n  // otherwise true\n  return !!includePrevious;\n}\n\nexport function shouldFetchPreviousPeriod({\n  includePrevious = true,\n  period,\n  start,\n  end,\n}: {\n  includePrevious?: boolean;\n} & Pick<DateTimeObject, 'start' | 'end' | 'period'>) {\n  return !start && !end && canIncludePreviousPeriod(includePrevious, period);\n}\n\n/**\n * Generates a series selection based on the query parameters defined by the location.\n */\nexport function getSeriesSelection(\n  location: Location\n): LegendComponentOption['selected'] {\n  const unselectedSeries = decodeList(location?.query.unselectedSeries);\n  return unselectedSeries.reduce((selection, series) => {\n    selection[series] = false;\n    return selection;\n  }, {});\n}\n\nfunction isSingleSeriesStats(\n  data: MultiSeriesEventsStats | EventsStats\n): data is EventsStats {\n  return (\n    (defined(data.data) || defined(data.totals)) &&\n    defined(data.start) &&\n    defined(data.end)\n  );\n}\n\nexport function isMultiSeriesStats(\n  data: MultiSeriesEventsStats | EventsStats | null | undefined,\n  isTopN?: boolean\n): data is MultiSeriesEventsStats {\n  return (\n    defined(data) &&\n    ((data.data === undefined && data.totals === undefined) ||\n      (defined(isTopN) && isTopN && defined(data) && !!!isSingleSeriesStats(data))) // the isSingleSeriesStats check is for topN queries returning null data\n  );\n}\n\n// If dimension is a number convert it to pixels, otherwise use dimension\n// without transform\nexport const getDimensionValue = (dimension?: number | string | null) => {\n  if (typeof dimension === 'number') {\n    return `${dimension}px`;\n  }\n\n  if (dimension === null) {\n    return undefined;\n  }\n\n  return dimension;\n};\n\nconst RGB_LIGHTEN_VALUE = 30;\nexport const lightenHexToRgb = (colors: string[]) =>\n  colors.map(hex => {\n    const rgb = [\n      Math.min(parseInt(hex.slice(1, 3), 16) + RGB_LIGHTEN_VALUE, 255),\n      Math.min(parseInt(hex.slice(3, 5), 16) + RGB_LIGHTEN_VALUE, 255),\n      Math.min(parseInt(hex.slice(5, 7), 16) + RGB_LIGHTEN_VALUE, 255),\n    ];\n    return `rgb(${rgb[0]}, ${rgb[1]}, ${rgb[2]})`;\n  });\n\nconst DEFAULT_GEO_DATA = {\n  title: '',\n  data: [],\n};\nexport const processTableResults = (tableResults?: TableDataWithTitle[]) => {\n  if (!tableResults || !tableResults.length) {\n    return DEFAULT_GEO_DATA;\n  }\n\n  const tableResult = tableResults[0];\n\n  const {data} = tableResult;\n\n  if (!data || !data.length) {\n    return DEFAULT_GEO_DATA;\n  }\n\n  const preAggregate = Object.keys(data[0]).find(column => {\n    return column !== 'geo.country_code';\n  });\n\n  if (!preAggregate) {\n    return DEFAULT_GEO_DATA;\n  }\n\n  return {\n    title: tableResult.title ?? '',\n    data: data.map(row => {\n      return {\n        name: row['geo.country_code'] as string,\n        value: row[preAggregate] as number,\n      };\n    }),\n  };\n};\n\nexport const getPreviousSeriesName = (seriesName: string) => {\n  return `previous ${seriesName}`;\n};\n","import {css} from '@emotion/react';\nimport styled from '@emotion/styled';\n\nimport {IconCheckmark, IconSubtract} from 'sentry/icons';\nimport {Theme} from 'sentry/utils/theme';\n\ninterface Props extends React.HTMLAttributes<HTMLDivElement> {\n  isChecked?: boolean;\n  isDisabled?: boolean;\n  isIndeterminate?: boolean;\n  size?: string;\n}\n\nconst disabledStyles = (p: Props & {theme: Theme}) =>\n  p.isDisabled &&\n  css`\n    background: ${p.isChecked || p.isIndeterminate\n      ? p.theme.gray200\n      : p.theme.backgroundSecondary};\n    border-color: ${p.theme.border};\n  `;\n\nconst hoverStyles = (p: Props & {theme: Theme}) =>\n  !p.isDisabled &&\n  css`\n    border: 2px solid\n      ${p.isChecked || p.isIndeterminate ? p.theme.active : p.theme.textColor};\n  `;\n\nconst CheckboxFancy = styled(\n  ({isDisabled, isChecked, isIndeterminate, size: _size, ...props}: Props) => (\n    <div\n      data-test-id=\"checkbox-fancy\"\n      role=\"checkbox\"\n      aria-disabled={isDisabled}\n      aria-checked={isIndeterminate ? 'mixed' : isChecked}\n      {...props}\n    >\n      {isIndeterminate && <IconSubtract size=\"70%\" color=\"white\" />}\n      {!isIndeterminate && isChecked && <IconCheckmark size=\"70%\" color=\"white\" />}\n    </div>\n  )\n)`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 1px 1px 5px 0px rgba(0, 0, 0, 0.05) inset;\n  width: ${p => p.size};\n  height: ${p => p.size};\n  border-radius: 5px;\n  background: ${p => (p.isChecked || p.isIndeterminate ? p.theme.active : 'transparent')};\n  border: 2px solid\n    ${p => (p.isChecked || p.isIndeterminate ? p.theme.active : p.theme.gray200)};\n  cursor: ${p => (p.isDisabled ? 'not-allowed' : 'pointer')};\n  ${p => (!p.isChecked || !p.isIndeterminate) && 'transition: 500ms border ease-out'};\n\n  &:hover {\n    ${hoverStyles}\n  }\n\n  ${disabledStyles}\n`;\n\nCheckboxFancy.defaultProps = {\n  size: '16px',\n  isChecked: false,\n  isIndeterminate: false,\n};\n\nexport default CheckboxFancy;\n","import {formatAbbreviatedNumber} from 'sentry/utils/formatters';\n\ntype Props = {\n  value: string | number;\n  className?: string;\n};\n\nfunction Count({value, className}: Props) {\n  return (\n    <span className={className} title={value?.toLocaleString()}>\n      {formatAbbreviatedNumber(value)}\n    </span>\n  );\n}\n\nexport default Count;\n","import moment from 'moment';\nimport momentTimezone from 'moment-timezone';\n\nimport ConfigStore from 'sentry/stores/configStore';\n\ninterface Props extends React.HTMLAttributes<HTMLTimeElement> {\n  /**\n   * Input date.\n   */\n  date: moment.MomentInput | momentTimezone.MomentInput;\n  /**\n   * If true, will only return the date part, e.g. \"Jan 1\".\n   */\n  dateOnly?: boolean;\n  /**\n   * Formatting string. If specified, this formatting string will override all\n   * other formatting props (dateOnly, timeOnly, year).\n   */\n  format?: string;\n  /**\n   * Whether to show the seconds. Is false by default.\n   */\n  seconds?: boolean;\n  /**\n   * If true, will only return the time part, e.g. \"2:50 PM\"\n   */\n  timeOnly?: boolean;\n  /**\n   * Whether to show the time zone. If not specified, the returned date string\n   * will not contain the time zone _unless_ the time is UTC, in which case\n   * the user would want to know that it's UTC and not their own time zone.\n   */\n  timeZone?: boolean;\n  /**\n   * Whether the date input is UTC time or not.\n   */\n  utc?: boolean;\n  /**\n   * Whether to show the year. If not specified, the returned date string will\n   * not contain the year _if_ the date is not in the current calendar year.\n   * For example: \"Feb 1\" (2022), \"Jan 1\" (2022), \"Dec 31, 2021\".\n   */\n  year?: boolean;\n}\n\nfunction getDateFormat({year}: Pick<Props, 'year'>) {\n  // \"Jan 1, 2022\" or \"Jan 1\"\n  return year ? 'MMM D, YYYY' : 'MMM D';\n}\n\nfunction getTimeFormat({clock24Hours, seconds, timeZone}) {\n  const substrings = [\n    clock24Hours ? 'HH' : 'h', // hour – \"23\" (24h format) or \"11\" (12h format)\n    ':mm', // minute\n    seconds ? ':ss' : '', // second\n    clock24Hours ? '' : ' A', // AM/PM\n    timeZone ? ' z' : '', // time zone\n  ];\n  return substrings.join('');\n}\n\nfunction getFormat({\n  dateOnly,\n  timeOnly,\n  year,\n  seconds,\n  timeZone,\n  clock24Hours,\n}: Pick<Props, 'dateOnly' | 'timeOnly' | 'year' | 'seconds' | 'timeZone'> & {\n  clock24Hours: boolean;\n}) {\n  if (dateOnly) {\n    return getDateFormat({year});\n  }\n\n  if (timeOnly) {\n    return getTimeFormat({clock24Hours, seconds, timeZone});\n  }\n\n  const dateFormat = getDateFormat({year});\n  const timeFormat = getTimeFormat({\n    clock24Hours,\n    seconds,\n    timeZone,\n  });\n\n  // If the year is shown, then there's already a comma in dateFormat (\"Jan 1, 2020\"),\n  // so we don't need to add another comma between the date and time\n  return year ? `${dateFormat} ${timeFormat}` : `${dateFormat}, ${timeFormat}`;\n}\n\nfunction DateTime({\n  format,\n  date,\n  utc,\n  dateOnly,\n  timeOnly,\n  year,\n  timeZone,\n  seconds = false,\n  ...props\n}: Props) {\n  const user = ConfigStore.get('user');\n  const options = user?.options;\n\n  const formatString =\n    format ??\n    getFormat({\n      dateOnly,\n      timeOnly,\n      // If the year prop is defined, then use it. Otherwise only show the year if `date`\n      // is in the current year.\n      year: year ?? moment().year() !== moment(date).year(),\n      // If timeZone is defined, use it. Otherwise only show the time zone if we're using\n      // UTC time.\n      timeZone: timeZone ?? utc,\n      seconds,\n      ...options,\n    });\n\n  return (\n    <time {...props}>\n      {utc\n        ? moment.utc(date as moment.MomentInput).format(formatString)\n        : momentTimezone.tz(date, options?.timezone ?? '').format(formatString)}\n    </time>\n  );\n}\n\nexport default DateTime;\n","import {getDuration, getExactDuration} from 'sentry/utils/formatters';\n\ninterface Props extends React.HTMLAttributes<HTMLSpanElement> {\n  seconds: number;\n  abbreviation?: boolean;\n  exact?: boolean;\n  fixedDigits?: number;\n}\n\nconst Duration = ({seconds, fixedDigits, abbreviation, exact, ...props}: Props) => (\n  <span {...props}>\n    {exact\n      ? getExactDuration(seconds, abbreviation)\n      : getDuration(seconds, fixedDigits, abbreviation)}\n  </span>\n);\n\nexport default Duration;\n","import styled from '@emotion/styled';\n\nimport {formatBytesBase2, formatBytesBase10} from 'sentry/utils';\nimport getDynamicText from 'sentry/utils/getDynamicText';\n\ntype Props = {\n  bytes: number;\n  base?: 2 | 10;\n  className?: string;\n};\n\nfunction FileSize(props: Props) {\n  const {className, bytes, base} = props;\n\n  return (\n    <Span className={className}>\n      {getDynamicText({\n        value: base === 10 ? formatBytesBase10(bytes) : formatBytesBase2(bytes),\n        fixed: 'xx KB',\n      })}\n    </Span>\n  );\n}\n\nconst Span = styled('span')`\n  font-variant-numeric: tabular-nums;\n`;\n\nexport default FileSize;\n","import {Component, createRef, Fragment, Profiler} from 'react';\nimport {Location} from 'history';\n\nimport EmptyStateWarning from 'sentry/components/emptyStateWarning';\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport {IconWarning} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport {onRenderCallback} from 'sentry/utils/performanceForSentry';\n\nimport {\n  Body,\n  Grid,\n  GridBody,\n  GridBodyCell,\n  GridBodyCellStatus,\n  GridHead,\n  GridHeadCell,\n  GridHeadCellStatic,\n  GridResizer,\n  GridRow,\n  Header,\n  HeaderButtonContainer,\n  HeaderTitle,\n} from './styles';\n\n// Auto layout width.\nexport const COL_WIDTH_UNDEFINED = -1;\n\n// Set to 90 as the edit/trash icons need this much space.\nexport const COL_WIDTH_MINIMUM = 90;\n\n// For GridEditable, there are 2 generic types for the component, T and K\n//\n// - T is an element/object that represents the data to be displayed\n// - K is a key of T/\n//   - columnKey should have the same set of values as K\n\ntype ObjectKey = React.ReactText;\n\nexport type GridColumn<K = ObjectKey> = {\n  key: K;\n  width?: number;\n};\n\nexport type GridColumnHeader<K = ObjectKey> = GridColumn<K> & {\n  name: string;\n};\n\nexport type GridColumnOrder<K = ObjectKey> = GridColumnHeader<K>;\n\nexport type GridColumnSortBy<K = ObjectKey> = GridColumn<K> & {\n  order: 'desc' | 'asc';\n};\n\n/**\n * Store state at the start of \"resize\" action\n */\nexport type ColResizeMetadata = {\n  columnIndex: number; // Column being resized\n  columnWidth: number; // Column width at start of resizing\n  cursorX: number; // X-coordinate of cursor on window\n};\n\ntype GridEditableProps<DataRow, ColumnKey> = {\n  columnOrder: GridColumnOrder<ColumnKey>[];\n  columnSortBy: GridColumnSortBy<ColumnKey>[];\n  data: DataRow[];\n\n  /**\n   * GridEditable allows the parent component to determine how to display the\n   * data within it. Note that this is optional.\n   */\n  grid: {\n    onResizeColumn?: (\n      columnIndex: number,\n      nextColumn: GridColumnOrder<ColumnKey>\n    ) => void;\n    prependColumnWidths?: string[];\n    renderBodyCell?: (\n      column: GridColumnOrder<ColumnKey>,\n      dataRow: DataRow,\n      rowIndex: number,\n      columnIndex: number\n    ) => React.ReactNode;\n    renderHeadCell?: (\n      column: GridColumnOrder<ColumnKey>,\n      columnIndex: number\n    ) => React.ReactNode;\n    renderPrependColumns?: (\n      isHeader: boolean,\n      dataRow?: DataRow,\n      rowIndex?: number\n    ) => React.ReactNode[];\n  };\n  location: Location;\n  error?: React.ReactNode | null;\n  /**\n   * Inject a set of buttons into the top of the grid table.\n   * The controlling component is responsible for handling any actions\n   * in these buttons and updating props to the GridEditable instance.\n   */\n  headerButtons?: () => React.ReactNode;\n  isLoading?: boolean;\n\n  /**\n   * GridEditable (mostly) do not maintain any internal state and relies on the\n   * parent component to tell it how/what to render and will mutate the view\n   * based on this 3 main props.\n   *\n   * - `columnOrder` determines the columns to show, from left to right\n   * - `columnSortBy` is not used at the moment, however it might be better to\n   *   move sorting into Grid for performance\n   */\n  title?: string;\n};\n\ntype GridEditableState = {\n  numColumn: number;\n};\n\nclass GridEditable<\n  DataRow extends {[key: string]: any},\n  ColumnKey extends ObjectKey\n> extends Component<GridEditableProps<DataRow, ColumnKey>, GridEditableState> {\n  // Static methods do not allow the use of generics bounded to the parent class\n  // For more info: https://github.com/microsoft/TypeScript/issues/14600\n  static getDerivedStateFromProps(\n    props: Readonly<GridEditableProps<Object, keyof Object>>,\n    prevState: GridEditableState\n  ): GridEditableState {\n    return {\n      ...prevState,\n      numColumn: props.columnOrder.length,\n    };\n  }\n\n  state: GridEditableState = {\n    numColumn: 0,\n  };\n\n  componentDidMount() {\n    window.addEventListener('resize', this.redrawGridColumn);\n    this.setGridTemplateColumns(this.props.columnOrder);\n  }\n\n  componentDidUpdate() {\n    // Redraw columns whenever new props are received\n    this.setGridTemplateColumns(this.props.columnOrder);\n  }\n\n  componentWillUnmount() {\n    this.clearWindowLifecycleEvents();\n    window.removeEventListener('resize', this.redrawGridColumn);\n  }\n\n  private refGrid = createRef<HTMLTableElement>();\n  private resizeMetadata?: ColResizeMetadata;\n  private resizeWindowLifecycleEvents: {\n    [eventName: string]: any[];\n  } = {\n    mousemove: [],\n    mouseup: [],\n  };\n\n  clearWindowLifecycleEvents() {\n    Object.keys(this.resizeWindowLifecycleEvents).forEach(e => {\n      this.resizeWindowLifecycleEvents[e].forEach(c => window.removeEventListener(e, c));\n      this.resizeWindowLifecycleEvents[e] = [];\n    });\n  }\n\n  onResetColumnSize = (e: React.MouseEvent, i: number) => {\n    e.stopPropagation();\n\n    const nextColumnOrder = [...this.props.columnOrder];\n    nextColumnOrder[i] = {\n      ...nextColumnOrder[i],\n      width: COL_WIDTH_UNDEFINED,\n    };\n    this.setGridTemplateColumns(nextColumnOrder);\n\n    const onResizeColumn = this.props.grid.onResizeColumn;\n    if (onResizeColumn) {\n      onResizeColumn(i, {\n        ...nextColumnOrder[i],\n        width: COL_WIDTH_UNDEFINED,\n      });\n    }\n  };\n\n  onResizeMouseDown = (e: React.MouseEvent, i: number = -1) => {\n    e.stopPropagation();\n\n    // Block right-click and other funky stuff\n    if (i === -1 || e.type === 'contextmenu') {\n      return;\n    }\n\n    // <GridResizer> is nested 1 level down from <GridHeadCell>\n    const cell = e.currentTarget!.parentElement;\n    if (!cell) {\n      return;\n    }\n\n    // HACK: Do not put into state to prevent re-rendering of component\n    this.resizeMetadata = {\n      columnIndex: i,\n      columnWidth: cell.offsetWidth,\n      cursorX: e.clientX,\n    };\n\n    window.addEventListener('mousemove', this.onResizeMouseMove);\n    this.resizeWindowLifecycleEvents.mousemove.push(this.onResizeMouseMove);\n\n    window.addEventListener('mouseup', this.onResizeMouseUp);\n    this.resizeWindowLifecycleEvents.mouseup.push(this.onResizeMouseUp);\n  };\n\n  onResizeMouseUp = (e: MouseEvent) => {\n    const metadata = this.resizeMetadata;\n    const onResizeColumn = this.props.grid.onResizeColumn;\n\n    if (metadata && onResizeColumn) {\n      const {columnOrder} = this.props;\n      const widthChange = e.clientX - metadata.cursorX;\n\n      onResizeColumn(metadata.columnIndex, {\n        ...columnOrder[metadata.columnIndex],\n        width: metadata.columnWidth + widthChange,\n      });\n    }\n\n    this.resizeMetadata = undefined;\n    this.clearWindowLifecycleEvents();\n  };\n\n  onResizeMouseMove = (e: MouseEvent) => {\n    const {resizeMetadata} = this;\n    if (!resizeMetadata) {\n      return;\n    }\n\n    window.requestAnimationFrame(() => this.resizeGridColumn(e, resizeMetadata));\n  };\n\n  resizeGridColumn(e: MouseEvent, metadata: ColResizeMetadata) {\n    const grid = this.refGrid.current;\n    if (!grid) {\n      return;\n    }\n\n    const widthChange = e.clientX - metadata.cursorX;\n\n    const nextColumnOrder = [...this.props.columnOrder];\n    nextColumnOrder[metadata.columnIndex] = {\n      ...nextColumnOrder[metadata.columnIndex],\n      width: Math.max(metadata.columnWidth + widthChange, 0),\n    };\n\n    this.setGridTemplateColumns(nextColumnOrder);\n  }\n\n  /**\n   * Recalculate the dimensions of Grid and Columns and redraws them\n   */\n  redrawGridColumn = () => {\n    this.setGridTemplateColumns(this.props.columnOrder);\n  };\n\n  /**\n   * Set the CSS for Grid Column\n   */\n  setGridTemplateColumns(columnOrder: GridColumnOrder[]) {\n    const grid = this.refGrid.current;\n    if (!grid) {\n      return;\n    }\n\n    const prependColumns = this.props.grid.prependColumnWidths || [];\n    const prepend = prependColumns.join(' ');\n    const widths = columnOrder.map((item, index) => {\n      if (item.width === COL_WIDTH_UNDEFINED) {\n        return `minmax(${COL_WIDTH_MINIMUM}px, auto)`;\n      }\n      if (typeof item.width === 'number' && item.width > COL_WIDTH_MINIMUM) {\n        if (index === columnOrder.length - 1) {\n          return `minmax(${item.width}px, auto)`;\n        }\n        return `${item.width}px`;\n      }\n      if (index === columnOrder.length - 1) {\n        return `minmax(${COL_WIDTH_MINIMUM}px, auto)`;\n      }\n      return `${COL_WIDTH_MINIMUM}px`;\n    });\n\n    // The last column has no resizer and should always be a flexible column\n    // to prevent underflows.\n\n    grid.style.gridTemplateColumns = `${prepend} ${widths.join(' ')}`;\n  }\n\n  renderGridHead() {\n    const {error, isLoading, columnOrder, grid, data} = this.props;\n\n    // Ensure that the last column cannot be removed\n    const numColumn = columnOrder.length;\n\n    const prependColumns = grid.renderPrependColumns\n      ? grid.renderPrependColumns(true)\n      : [];\n    return (\n      <GridRow data-test-id=\"grid-head-row\">\n        {prependColumns &&\n          prependColumns.map((item, i) => (\n            <GridHeadCellStatic key={`prepend-${i}`}>{item}</GridHeadCellStatic>\n          ))}\n        {\n          /* Note that this.onResizeMouseDown assumes GridResizer is nested\n            1 levels under GridHeadCell */\n          columnOrder.map((column, i) => (\n            <GridHeadCell\n              data-test-id=\"grid-head-cell\"\n              key={`${i}.${column.key}`}\n              isFirst={i === 0}\n            >\n              {grid.renderHeadCell ? grid.renderHeadCell(column, i) : column.name}\n              {i !== numColumn - 1 && (\n                <GridResizer\n                  dataRows={!error && !isLoading && data ? data.length : 0}\n                  onMouseDown={e => this.onResizeMouseDown(e, i)}\n                  onDoubleClick={e => this.onResetColumnSize(e, i)}\n                  onContextMenu={this.onResizeMouseDown}\n                />\n              )}\n            </GridHeadCell>\n          ))\n        }\n      </GridRow>\n    );\n  }\n\n  renderGridBody() {\n    const {data, error, isLoading} = this.props;\n\n    if (error) {\n      return this.renderError();\n    }\n\n    if (isLoading) {\n      return this.renderLoading();\n    }\n\n    if (!data || data.length === 0) {\n      return this.renderEmptyData();\n    }\n\n    return data.map(this.renderGridBodyRow);\n  }\n\n  renderGridBodyRow = (dataRow: DataRow, row: number) => {\n    const {columnOrder, grid} = this.props;\n    const prependColumns = grid.renderPrependColumns\n      ? grid.renderPrependColumns(false, dataRow, row)\n      : [];\n\n    return (\n      <GridRow key={row}>\n        {prependColumns &&\n          prependColumns.map((item, i) => (\n            <GridBodyCell data-test-id=\"grid-body-cell\" key={`prepend-${i}`}>\n              {item}\n            </GridBodyCell>\n          ))}\n        {columnOrder.map((col, i) => (\n          <GridBodyCell data-test-id=\"grid-body-cell\" key={`${col.key}${i}`}>\n            {grid.renderBodyCell\n              ? grid.renderBodyCell(col, dataRow, row, i)\n              : dataRow[col.key]}\n          </GridBodyCell>\n        ))}\n      </GridRow>\n    );\n  };\n\n  renderError() {\n    return (\n      <GridRow>\n        <GridBodyCellStatus>\n          <IconWarning color=\"gray300\" size=\"lg\" />\n        </GridBodyCellStatus>\n      </GridRow>\n    );\n  }\n\n  renderLoading() {\n    return (\n      <GridRow>\n        <GridBodyCellStatus>\n          <LoadingIndicator />\n        </GridBodyCellStatus>\n      </GridRow>\n    );\n  }\n\n  renderEmptyData() {\n    return (\n      <GridRow>\n        <GridBodyCellStatus>\n          <EmptyStateWarning>\n            <p>{t('No results found for your query')}</p>\n          </EmptyStateWarning>\n        </GridBodyCellStatus>\n      </GridRow>\n    );\n  }\n\n  render() {\n    const {title, headerButtons} = this.props;\n    const showHeader = title || headerButtons;\n    return (\n      <Fragment>\n        <Profiler id=\"GridEditable\" onRender={onRenderCallback}>\n          {showHeader && (\n            <Header>\n              {title && <HeaderTitle>{title}</HeaderTitle>}\n              {headerButtons && (\n                <HeaderButtonContainer>{headerButtons()}</HeaderButtonContainer>\n              )}\n            </Header>\n          )}\n          <Body>\n            <Grid data-test-id=\"grid-editable\" ref={this.refGrid}>\n              <GridHead>{this.renderGridHead()}</GridHead>\n              <GridBody>{this.renderGridBody()}</GridBody>\n            </Grid>\n          </Body>\n        </Profiler>\n      </Fragment>\n    );\n  }\n}\n\nexport default GridEditable;\n","import styled from '@emotion/styled';\n\nimport {Panel, PanelBody} from 'sentry/components/panels';\nimport space from 'sentry/styles/space';\n\nexport const GRID_HEAD_ROW_HEIGHT = 45;\nexport const GRID_BODY_ROW_HEIGHT = 40;\nexport const GRID_STATUS_MESSAGE_HEIGHT = GRID_BODY_ROW_HEIGHT * 4;\n\n/**\n * Local z-index stacking context\n * https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context\n */\n// Parent context is Panel\nconst Z_INDEX_PANEL = 1;\nconst Z_INDEX_GRID_STATUS = -1;\nconst Z_INDEX_GRID = 5;\n\n// Parent context is GridHeadCell\nconst Z_INDEX_GRID_RESIZER = 1;\n\nexport const Header = styled('div')`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: ${space(1)};\n`;\n\nexport const HeaderTitle = styled('h4')`\n  margin: 0;\n  font-size: ${p => p.theme.fontSizeMedium};\n  color: ${p => p.theme.subText};\n`;\n\nexport const HeaderButtonContainer = styled('div')`\n  display: grid;\n  gap: ${space(1)};\n  grid-auto-flow: column;\n  grid-auto-columns: auto;\n  justify-items: end;\n\n  /* Hovercard anchor element when features are disabled. */\n  & > span {\n    display: flex;\n    flex-direction: row;\n  }\n`;\n\nexport const Body = styled(({children, ...props}) => (\n  <Panel {...props}>\n    <PanelBody>{children}</PanelBody>\n  </Panel>\n))`\n  overflow: hidden;\n  z-index: ${Z_INDEX_PANEL};\n`;\n\n/**\n * Grid is the parent element for the tableResizable component.\n *\n * On newer browsers, it will use CSS Grids to implement its layout.\n *\n * However, it is based on <table>, which has a distinction between header/body\n * HTML elements, which allows CSS selectors to its full potential. This has\n * the added advantage that older browsers will still have a chance of\n * displaying the data correctly (but this is untested).\n *\n * <thead>, <tbody>, <tr> are ignored by CSS Grid.\n * The entire layout is determined by the usage of <th> and <td>.\n */\nexport const Grid = styled('table')`\n  position: inherit;\n  display: grid;\n\n  /* Overwritten by GridEditable.setGridTemplateColumns */\n  grid-template-columns: repeat(auto-fill, minmax(50px, auto));\n\n  box-sizing: border-box;\n  border-collapse: collapse;\n  margin: 0;\n\n  z-index: ${Z_INDEX_GRID};\n  overflow-x: auto;\n  overflow-y: hidden;\n`;\n\nexport const GridRow = styled('tr')`\n  display: contents;\n\n  &:last-child,\n  &:last-child > td:first-child,\n  &:last-child > td:last-child {\n    border-bottom-left-radius: ${p => p.theme.borderRadius};\n    border-bottom-right-radius: ${p => p.theme.borderRadius};\n  }\n`;\n\n/**\n * GridHead is the collection of elements that builds the header section of the\n * Grid. As the entirety of the add/remove/resize actions are performed on the\n * header, most of the elements behave different for each stage.\n */\nexport const GridHead = styled('thead')`\n  display: contents;\n`;\n\nexport const GridHeadCell = styled('th')<{isFirst: boolean}>`\n  /* By default, a grid item cannot be smaller than the size of its content.\n     We override this by setting min-width to be 0. */\n  position: relative; /* Used by GridResizer */\n  height: ${GRID_HEAD_ROW_HEIGHT}px;\n  display: flex;\n  align-items: center;\n  min-width: 24px;\n  padding: 0 ${space(2)};\n\n  border-right: 1px solid transparent;\n  border-left: 1px solid transparent;\n  background-color: ${p => p.theme.backgroundSecondary};\n  color: ${p => p.theme.subText};\n\n  font-size: ${p => p.theme.fontSizeSmall};\n  font-weight: 600;\n  text-transform: uppercase;\n  user-select: none;\n\n  a,\n  div,\n  span {\n    line-height: 1.1;\n    color: inherit;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n  }\n\n  &:first-child {\n    border-top-left-radius: ${p => p.theme.borderRadius};\n  }\n\n  &:last-child {\n    border-top-right-radius: ${p => p.theme.borderRadius};\n    border-right: none;\n  }\n\n  &:hover {\n    border-left-color: ${p => (p.isFirst ? 'transparent' : p.theme.border)};\n    border-right-color: ${p => p.theme.border};\n  }\n`;\n\n/**\n * Create spacing/padding similar to GridHeadCellWrapper but\n * without interactive aspects.\n */\nexport const GridHeadCellStatic = styled('th')`\n  height: ${GRID_HEAD_ROW_HEIGHT}px;\n  display: flex;\n  align-items: center;\n  padding: 0 ${space(2)};\n  background-color: ${p => p.theme.backgroundSecondary};\n  font-size: ${p => p.theme.fontSizeSmall};\n  font-weight: 600;\n  line-height: 1;\n  text-transform: uppercase;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n\n  &:first-child {\n    border-top-left-radius: ${p => p.theme.borderRadius};\n    padding: ${space(1)} 0 ${space(1)} ${space(3)};\n  }\n`;\n\n/**\n * GridBody are the collection of elements that contains and display the data\n * of the Grid. They are rather simple.\n */\nexport const GridBody = styled('tbody')`\n  display: contents;\n\n  > tr:first-child td {\n    border-top: 1px solid ${p => p.theme.border};\n  }\n`;\nexport const GridBodyCell = styled('td')`\n  /* By default, a grid item cannot be smaller than the size of its content.\n     We override this by setting min-width to be 0. */\n  min-width: 0;\n  /* Locking in the height makes calculation for resizer to be easier.\n     min-height is used to allow a cell to expand and this is used to display\n     feedback during empty/error state */\n  min-height: ${GRID_BODY_ROW_HEIGHT}px;\n  padding: ${space(1)} ${space(2)};\n\n  background-color: ${p => p.theme.background};\n  border-top: 1px solid ${p => p.theme.innerBorder};\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n\n  font-size: ${p => p.theme.fontSizeMedium};\n\n  &:first-child {\n    padding: ${space(1)} 0 ${space(1)} ${space(3)};\n  }\n\n  &:last-child {\n    border-right: none;\n    padding: ${space(1)} ${space(2)};\n  }\n`;\n\nconst GridStatusWrapper = styled(GridBodyCell)`\n  grid-column: 1 / -1;\n  width: 100%;\n  height: ${GRID_STATUS_MESSAGE_HEIGHT}px;\n  background-color: transparent;\n`;\nconst GridStatusFloat = styled('div')`\n  position: absolute;\n  top: 45px;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: ${GRID_STATUS_MESSAGE_HEIGHT}px;\n\n  z-index: ${Z_INDEX_GRID_STATUS};\n  background: ${p => p.theme.background};\n`;\nexport const GridBodyCellStatus = props => (\n  <GridStatusWrapper>\n    <GridStatusFloat>{props.children}</GridStatusFloat>\n  </GridStatusWrapper>\n);\n\n/**\n * We have a fat GridResizer and we use the ::after pseudo-element to draw\n * a thin 1px border.\n *\n * The right most cell does not have a resizer as resizing from that side does strange things.\n */\nexport const GridResizer = styled('div')<{dataRows: number}>`\n  position: absolute;\n  top: 0px;\n  right: -6px;\n  width: 11px;\n\n  height: ${p => {\n    const numOfRows = p.dataRows;\n    let height = GRID_HEAD_ROW_HEIGHT + numOfRows * GRID_BODY_ROW_HEIGHT;\n\n    if (numOfRows >= 1) {\n      // account for border-bottom height\n      height += numOfRows;\n    }\n\n    return height;\n  }}px;\n\n  padding-left: 5px;\n  padding-right: 5px;\n\n  cursor: col-resize;\n  z-index: ${Z_INDEX_GRID_RESIZER};\n\n  /**\n   * This element allows us to have a fat GridResizer that is easy to hover and\n   * drag, but still draws an appealing thin line for the border\n   */\n  &::after {\n    content: ' ';\n    display: block;\n    width: 100%; /* Equivalent to 1px */\n    height: 100%;\n  }\n\n  &:hover::after {\n    background-color: ${p => p.theme.gray200};\n  }\n\n  /**\n   * Ensure that this rule is after :hover, otherwise it will flicker when\n   * the GridResizer is dragged\n   */\n  &:active::after,\n  &:focus::after {\n    background-color: ${p => p.theme.purple300};\n  }\n\n  /**\n   * This element gives the resize handle a more visible knob to grab\n   */\n  &:hover::before {\n    position: absolute;\n    top: 0;\n    left: 2px;\n    content: ' ';\n    display: block;\n    width: 7px;\n    height: ${GRID_HEAD_ROW_HEIGHT}px;\n    background-color: ${p => p.theme.purple300};\n    opacity: 0.4;\n  }\n`;\n","import styled from '@emotion/styled';\nimport omit from 'lodash/omit';\n\nimport Link, {LinkProps} from 'sentry/components/links/link';\nimport space from 'sentry/styles/space';\nimport {callIfFunction} from 'sentry/utils/callIfFunction';\nimport {Theme} from 'sentry/utils/theme';\n\ntype MenuItemProps = {\n  /**\n   * Enable to allow default event on click\n   */\n  allowDefaultEvent?: boolean;\n  'aria-label'?: string;\n  className?: string;\n  /**\n   * Is the item disabled?\n   */\n  disabled?: boolean;\n  /**\n   * Should this item act as a divider\n   */\n  divider?: boolean;\n  /**\n   * Provided to the onSelect callback when this item is selected\n   */\n  eventKey?: any;\n  /**\n   * Should this item act as a header\n   */\n  header?: boolean;\n  /**\n   * A server rendered URL.\n   */\n  href?: string;\n  /**\n   * Renders an icon next to the item\n   */\n  icon?: React.ReactNode;\n  /**\n   * Is the item actively selected?\n   */\n  isActive?: boolean;\n  /**\n   * Enable to provide custom button/contents via children\n   */\n  noAnchor?: boolean;\n  /**\n   * Triggered when the item is clicked\n   */\n  onSelect?: (eventKey: any) => void;\n  /**\n   * Enable to stop event propagation on click\n   */\n  stopPropagation?: boolean;\n  /**\n   * The title/tooltip of the item\n   */\n  title?: string;\n\n  /**\n   * A router target destination\n   */\n  to?: LinkProps['to'];\n\n  /**\n   * Renders a bottom border (excludes the last item)\n   */\n  withBorder?: boolean;\n};\n\ninterface Props\n  extends MenuItemProps,\n    Omit<React.HTMLAttributes<HTMLLIElement>, 'onSelect'> {}\n\nconst MenuItem = ({\n  header,\n  icon,\n  divider,\n  isActive,\n  noAnchor,\n  className,\n  children,\n  ...props\n}: Props) => {\n  const {\n    to,\n    href,\n    title,\n    withBorder,\n    disabled,\n    onSelect,\n    eventKey,\n    allowDefaultEvent,\n    stopPropagation,\n  } = props;\n\n  const handleClick = (e: React.MouseEvent): void => {\n    if (disabled) {\n      return;\n    }\n    if (onSelect) {\n      if (allowDefaultEvent !== true) {\n        e.preventDefault();\n      }\n      if (stopPropagation) {\n        e.stopPropagation();\n      }\n      callIfFunction(onSelect, eventKey);\n    }\n  };\n\n  const renderAnchor = (): React.ReactNode => {\n    const linkProps = {\n      onClick: handleClick,\n      tabIndex: -1,\n      isActive,\n      disabled,\n      withBorder,\n    };\n\n    if (to) {\n      return (\n        <MenuLink to={to} {...linkProps} title={title} data-test-id=\"menu-item\">\n          {icon && <MenuIcon>{icon}</MenuIcon>}\n          {children}\n        </MenuLink>\n      );\n    }\n\n    if (href) {\n      return (\n        <MenuAnchor {...linkProps} href={href} data-test-id=\"menu-item\">\n          {icon && <MenuIcon>{icon}</MenuIcon>}\n          {children}\n        </MenuAnchor>\n      );\n    }\n\n    return (\n      <MenuTarget role=\"button\" {...linkProps} title={title} data-test-id=\"menu-item\">\n        {icon && <MenuIcon>{icon}</MenuIcon>}\n        {children}\n      </MenuTarget>\n    );\n  };\n\n  let renderChildren: React.ReactNode | null = null;\n  if (noAnchor) {\n    renderChildren = children;\n  } else if (header) {\n    renderChildren = children;\n  } else if (!divider) {\n    renderChildren = renderAnchor();\n  }\n\n  return (\n    <MenuListItem\n      className={className}\n      role=\"presentation\"\n      isActive={isActive}\n      divider={divider}\n      noAnchor={noAnchor}\n      header={header}\n      {...omit(props, ['href', 'title', 'onSelect', 'eventKey', 'to', 'as'])}\n    >\n      {renderChildren}\n    </MenuListItem>\n  );\n};\n\ninterface MenuListItemProps extends React.HTMLAttributes<HTMLLIElement> {\n  disabled?: boolean;\n  divider?: boolean;\n  header?: boolean;\n  isActive?: boolean;\n  noAnchor?: boolean;\n  withBorder?: boolean;\n}\n\nfunction getListItemStyles(props: MenuListItemProps & {theme: Theme}) {\n  const common = `\n    display: block;\n    padding: ${space(0.5)} ${space(2)};\n    &:focus {\n      outline: none;\n    }\n  `;\n\n  if (props.disabled) {\n    return `\n      ${common}\n      color: ${props.theme.disabled};\n      background: transparent;\n      cursor: not-allowed;\n    `;\n  }\n\n  if (props.isActive) {\n    return `\n      ${common}\n      color: ${props.theme.white};\n      background: ${props.theme.active};\n\n      &:hover {\n        background: ${props.theme.activeHover};\n      }\n    `;\n  }\n\n  return `\n    ${common}\n\n    &:hover {\n      background: ${props.theme.hover};\n    }\n  `;\n}\n\nfunction getChildStyles(props: MenuListItemProps & {theme: Theme}) {\n  if (!props.noAnchor) {\n    return '';\n  }\n\n  return `\n    & a {\n      ${getListItemStyles(props)}\n    }\n  `;\n}\n\nconst shouldForwardProp = (p: PropertyKey) =>\n  typeof p === 'string' && ['isActive', 'disabled', 'withBorder'].includes(p) === false;\n\nconst MenuAnchor = styled('a', {shouldForwardProp})<MenuListItemProps>`\n  ${getListItemStyles}\n`;\n\nconst MenuListItem = styled('li')<MenuListItemProps>`\n  display: block;\n\n  ${p =>\n    p.withBorder &&\n    `\n    border-bottom: 1px solid ${p.theme.innerBorder};\n\n    &:last-child {\n      border-bottom: none;\n    }\n  `};\n  ${p =>\n    p.divider &&\n    `\n    height: 1px;\n    margin: ${space(0.5)} 0;\n    overflow: hidden;\n    background-color: ${p.theme.innerBorder};\n  `}\n  ${p =>\n    p.header &&\n    `\n    padding: ${space(0.25)} ${space(0.5)};\n    font-size: ${p.theme.fontSizeSmall};\n    line-height: 1.4;\n    color: ${p.theme.gray300};\n  `}\n\n  ${getChildStyles}\n`;\n\nconst MenuTarget = styled('span')<MenuListItemProps>`\n  ${getListItemStyles}\n  display: flex;\n  align-items: center;\n`;\n\nconst MenuIcon = styled('div')`\n  display: flex;\n  align-items: center;\n  margin-right: ${space(1)};\n`;\n\nconst MenuLink = styled(Link, {shouldForwardProp})<MenuListItemProps>`\n  ${getListItemStyles}\n`;\n\nexport default MenuItem;\n","import {Location} from 'history';\nimport moment from 'moment';\n\nimport {DEFAULT_STATS_PERIOD} from 'sentry/constants';\nimport {DATE_TIME_KEYS, URL_PARAM} from 'sentry/constants/pageFilters';\nimport {IntervalPeriod, PageFilters} from 'sentry/types';\nimport {defined} from 'sentry/utils';\nimport {getUtcToLocalDateObject} from 'sentry/utils/dates';\n\nimport {PageFiltersState} from './types';\n\nexport type StatsPeriodType = 'h' | 'd' | 's' | 'm' | 'w';\n\ntype SingleParamValue = string | undefined | null;\ntype ParamValue = string[] | SingleParamValue;\n\nconst STATS_PERIOD_PATTERN = '^(\\\\d+)([hdmsw])?$';\n\n/**\n * Parses a stats period into `period` and `periodLength`\n */\nexport function parseStatsPeriod(input: string | IntervalPeriod) {\n  const result = input.match(STATS_PERIOD_PATTERN);\n\n  if (!result) {\n    return undefined;\n  }\n\n  const period = result[1];\n\n  // default to seconds. this behaviour is based on src/sentry/utils/dates.py\n  const periodLength = result[2] || 's';\n\n  return {period, periodLength};\n}\n\n/**\n * Normalizes a stats period string\n */\nfunction coerceStatsPeriod(input: string) {\n  const result = parseStatsPeriod(input);\n\n  return result ? `${result.period}${result.periodLength}` : undefined;\n}\n\n/**\n * Normalizes a string or string[] into a standard stats period string.\n *\n * Undefined and null inputs are returned as undefined.\n */\nfunction getStatsPeriodValue(maybe: ParamValue) {\n  if (Array.isArray(maybe)) {\n    const result = maybe.find(coerceStatsPeriod);\n\n    return result ? coerceStatsPeriod(result) : undefined;\n  }\n\n  if (typeof maybe === 'string') {\n    return coerceStatsPeriod(maybe);\n  }\n\n  return undefined;\n}\n\n/**\n * We normalize potential datetime strings into the form that would be valid if\n * it was to be parsed by datetime.strptime using the format\n * %Y-%m-%dT%H:%M:%S.%f\n *\n * This format was transformed to the form that moment.js understands using [0]\n *\n * [0]: https://gist.github.com/asafge/0b13c5066d06ae9a4446\n */\nexport function normalizeDateTimeString(input: Date | SingleParamValue) {\n  if (!input) {\n    return undefined;\n  }\n\n  const parsed = moment.utc(input);\n\n  if (!parsed.isValid()) {\n    return undefined;\n  }\n\n  return parsed.format('YYYY-MM-DDTHH:mm:ss.SSS');\n}\n\n/**\n * Normalizes a string or string[] into the date time string.\n *\n * Undefined and null inputs are returned as undefined.\n */\nfunction getDateTimeString(maybe: Date | ParamValue) {\n  const result = Array.isArray(maybe)\n    ? maybe.find(needle => moment.utc(needle).isValid())\n    : maybe;\n\n  return normalizeDateTimeString(result);\n}\n\n/**\n * Normalize a UTC parameter\n */\nfunction parseUtcValue(utc: boolean | SingleParamValue) {\n  if (!defined(utc)) {\n    return undefined;\n  }\n\n  return utc === true || utc === 'true' ? 'true' : 'false';\n}\n\n/**\n * Normalizes a string or string[] into the UTC parameter.\n *\n * Undefined and null inputs are returned as undefined.\n */\nfunction getUtcValue(maybe: boolean | ParamValue) {\n  const result = Array.isArray(maybe)\n    ? maybe.find(needle => !!parseUtcValue(needle))\n    : maybe;\n\n  return parseUtcValue(result);\n}\n\n/**\n * Normalizes a string or string[] into the project list parameter\n */\nfunction getProject(maybe: ParamValue) {\n  if (!defined(maybe)) {\n    return undefined;\n  }\n\n  if (Array.isArray(maybe)) {\n    return maybe.map(p => parseInt(p, 10));\n  }\n\n  const projectFromQueryIdInt = parseInt(maybe, 10);\n  return isNaN(projectFromQueryIdInt) ? [] : [projectFromQueryIdInt];\n}\n\n/*\n * Normalizes a string or string[] into the environment list parameter\n */\nfunction getEnvironment(maybe: ParamValue) {\n  if (!defined(maybe)) {\n    return undefined;\n  }\n\n  if (Array.isArray(maybe)) {\n    return maybe;\n  }\n\n  return [maybe];\n}\n\ntype InputParams = {\n  [others: string]: any;\n  end?: ParamValue | Date;\n  pageEnd?: ParamValue | Date;\n  pageStart?: ParamValue | Date;\n\n  pageStatsPeriod?: ParamValue;\n  pageUtc?: ParamValue | boolean;\n  period?: ParamValue;\n  start?: ParamValue | Date;\n  statsPeriod?: ParamValue;\n\n  utc?: ParamValue | boolean;\n};\n\ntype ParsedParams = {\n  [others: string]: Location['query'][string];\n  end?: string;\n  start?: string;\n  statsPeriod?: string | null;\n  utc?: string;\n};\n\ntype DateTimeNormalizeOptions = {\n  /**\n   * Parse absolute date time (`start` / `end`) from the input parameters. When\n   * set to false the start and end will always be `null`.\n   *\n   * @default true\n   */\n  allowAbsoluteDatetime?: boolean;\n  /**\n   * The page specific version of allowAbsolutePageDatetime\n   *\n   * @default false\n   */\n  allowAbsolutePageDatetime?: boolean;\n  /**\n   * When set to true allows the statsPeriod to result as `null`.\n   *\n   * @default false\n   */\n  allowEmptyPeriod?: boolean;\n  /**\n   * Include this default statsPeriod in the resulting parsed parameters when\n   * no stats period is provided (or if it is an invalid stats period)\n   */\n  defaultStatsPeriod?: string | null;\n};\n\n/**\n * Normalizes the DateTime components of the page filters.\n *\n * NOTE: This has some additional functionality for handling `page*` filters\n *       that will override the standard `start`/`end`/`statsPeriod` filters.\n *\n * NOTE: This does *NOT* normalize the `project` or `environment` components of\n *       the page filter parameters. See `getStateFromQuery` for normalization\n *       of the project and environment parameters.\n */\nexport function normalizeDateTimeParams(\n  params: InputParams,\n  options: DateTimeNormalizeOptions = {}\n): ParsedParams {\n  const {\n    allowEmptyPeriod = false,\n    allowAbsoluteDatetime = true,\n    allowAbsolutePageDatetime = false,\n    defaultStatsPeriod = DEFAULT_STATS_PERIOD,\n  } = options;\n\n  const {\n    pageStatsPeriod,\n    pageStart,\n    pageEnd,\n    pageUtc,\n    start,\n    end,\n    period,\n    statsPeriod,\n    utc,\n    ...otherParams\n  } = params;\n\n  // `statsPeriod` takes precedence for now. `period` is legacy.\n  let coercedPeriod =\n    getStatsPeriodValue(pageStatsPeriod) ||\n    getStatsPeriodValue(statsPeriod) ||\n    getStatsPeriodValue(period) ||\n    null;\n\n  const dateTimeStart = allowAbsoluteDatetime\n    ? allowAbsolutePageDatetime\n      ? getDateTimeString(pageStart) ?? getDateTimeString(start)\n      : getDateTimeString(start)\n    : null;\n  const dateTimeEnd = allowAbsoluteDatetime\n    ? allowAbsolutePageDatetime\n      ? getDateTimeString(pageEnd) ?? getDateTimeString(end)\n      : getDateTimeString(end)\n    : null;\n\n  if ((!dateTimeStart || !dateTimeEnd) && !coercedPeriod && !allowEmptyPeriod) {\n    coercedPeriod = defaultStatsPeriod;\n  }\n\n  const object = {\n    statsPeriod: coercedPeriod,\n    start: coercedPeriod ? null : dateTimeStart ?? null,\n    end: coercedPeriod ? null : dateTimeEnd ?? null,\n    // coerce utc into a string (it can be both: a string representation from\n    // router, or a boolean from time range picker)\n    utc: getUtcValue(pageUtc ?? utc),\n    ...otherParams,\n  };\n\n  // Filter null values\n  const paramEntries = Object.entries(object).filter(([_, value]) => defined(value));\n\n  return Object.fromEntries(paramEntries);\n}\n\n/**\n * Parses and normalizes all page filter relevant parameters from a location\n * query.\n *\n * This includes the following operations\n *\n *  - Normalizes `project` and `environment` into a consistent list object.\n *  - Normalizes date time filter parameters (using normalizeDateTimeParams).\n *  - Parses `start` and `end` into Date objects.\n */\nexport function getStateFromQuery(\n  query: Location['query'],\n  normalizeOptions: DateTimeNormalizeOptions = {}\n) {\n  const {allowAbsoluteDatetime} = normalizeOptions;\n\n  const project = getProject(query[URL_PARAM.PROJECT]) ?? null;\n  const environment = getEnvironment(query[URL_PARAM.ENVIRONMENT]) ?? null;\n\n  const dateTimeParams = normalizeDateTimeParams(query, normalizeOptions);\n\n  const hasAbsolute =\n    allowAbsoluteDatetime && !!dateTimeParams.start && !!dateTimeParams.end;\n\n  const start = hasAbsolute ? getUtcToLocalDateObject(dateTimeParams.start) : null;\n  const end = hasAbsolute ? getUtcToLocalDateObject(dateTimeParams.end) : null;\n  const period = dateTimeParams.statsPeriod;\n  const utc = dateTimeParams.utc;\n\n  const state: PageFiltersState = {\n    project,\n    environment,\n    period: period || null,\n    start: start || null,\n    end: end || null,\n    utc: typeof utc !== 'undefined' ? utc === 'true' : null,\n  };\n\n  return state;\n}\n\n/**\n * Extract the datetime component from the page filter state object\n */\nexport function getDatetimeFromState(state: PageFiltersState) {\n  return Object.fromEntries(\n    Object.entries(state).filter(([key]) => DATE_TIME_KEYS.includes(key))\n  ) as PageFilters['datetime'];\n}\n","import {Component, Fragment} from 'react';\nimport {createPortal} from 'react-dom';\nimport {Manager, Popper, Reference} from 'react-popper';\nimport styled from '@emotion/styled';\n\nimport MenuHeader from 'sentry/components/actions/menuHeader';\nimport CheckboxFancy from 'sentry/components/checkboxFancy/checkboxFancy';\nimport {GetActorPropsFn} from 'sentry/components/deprecatedDropdownMenu';\nimport MenuItem from 'sentry/components/menuItem';\nimport {TeamSelection} from 'sentry/components/performance/teamKeyTransactionsManager';\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {Organization, Project, Team} from 'sentry/types';\nimport {defined} from 'sentry/utils';\nimport trackAdvancedAnalyticsEvent from 'sentry/utils/analytics/trackAdvancedAnalyticsEvent';\nimport {MAX_TEAM_KEY_TRANSACTIONS} from 'sentry/utils/performance/constants';\n\nexport type TitleProps = Partial<ReturnType<GetActorPropsFn>> & {\n  isOpen: boolean;\n  keyedTeams: Team[] | null;\n  disabled?: boolean;\n  initialValue?: number;\n};\n\ntype Props = {\n  counts: Map<string, number> | null;\n  error: string | null;\n  handleToggleKeyTransaction: (selection: TeamSelection) => void;\n  isLoading: boolean;\n  keyedTeams: Set<string> | null;\n  organization: Organization;\n  project: Project;\n  teams: Team[];\n  title: React.ComponentClass<TitleProps>;\n  transactionName: string;\n  initialValue?: number;\n};\n\ntype State = {\n  isOpen: boolean;\n};\n\nclass TeamKeyTransaction extends Component<Props, State> {\n  state: State = {\n    isOpen: false,\n  };\n\n  componentDidUpdate(_props: Props, prevState: State) {\n    if (this.state.isOpen && prevState.isOpen === false) {\n      document.addEventListener('click', this.handleClickOutside, true);\n    }\n    if (this.state.isOpen === false && prevState.isOpen) {\n      document.removeEventListener('click', this.handleClickOutside, true);\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.handleClickOutside, true);\n  }\n\n  private menuEl: Element | null = null;\n\n  handleClickOutside = (event: MouseEvent) => {\n    if (!this.menuEl) {\n      return;\n    }\n    if (!(event.target instanceof Element)) {\n      return;\n    }\n    if (this.menuEl.contains(event.target)) {\n      return;\n    }\n    this.setState({isOpen: false});\n  };\n\n  toggleOpen = () => {\n    this.setState(({isOpen}) => ({isOpen: !isOpen}));\n  };\n\n  toggleSelection = (enabled: boolean, selection: TeamSelection) => () => {\n    const {handleToggleKeyTransaction, organization} = this.props;\n    const {action} = selection;\n    trackAdvancedAnalyticsEvent('performance_views.team_key_transaction.set', {\n      organization,\n      action,\n    });\n\n    return enabled ? handleToggleKeyTransaction(selection) : undefined;\n  };\n\n  partitionTeams(counts: Map<string, number>, keyedTeams: Set<string>) {\n    const {teams, project} = this.props;\n\n    const enabledTeams: Team[] = [];\n    const disabledTeams: Team[] = [];\n    const noAccessTeams: Team[] = [];\n\n    const projectTeams = new Set(project.teams.map(({id}) => id));\n    for (const team of teams) {\n      if (!projectTeams.has(team.id)) {\n        noAccessTeams.push(team);\n      } else if (\n        keyedTeams.has(team.id) ||\n        (counts.get(team.id) ?? 0) < MAX_TEAM_KEY_TRANSACTIONS\n      ) {\n        enabledTeams.push(team);\n      } else {\n        disabledTeams.push(team);\n      }\n    }\n\n    return {\n      enabledTeams,\n      disabledTeams,\n      noAccessTeams,\n    };\n  }\n\n  renderMenuContent(counts: Map<string, number>, keyedTeams: Set<string>) {\n    const {teams, project, transactionName} = this.props;\n\n    const {enabledTeams, disabledTeams, noAccessTeams} = this.partitionTeams(\n      counts,\n      keyedTeams\n    );\n\n    const isMyTeamsEnabled = enabledTeams.length > 0;\n    const myTeamsHandler = this.toggleSelection(isMyTeamsEnabled, {\n      action: enabledTeams.length === keyedTeams.size ? 'unkey' : 'key',\n      teamIds: enabledTeams.map(({id}) => id),\n      project,\n      transactionName,\n    });\n\n    const hasTeamsWithAccess = enabledTeams.length + disabledTeams.length > 0;\n\n    return (\n      <DropdownContent>\n        {hasTeamsWithAccess && (\n          <Fragment>\n            <DropdownMenuHeader first>\n              {t('My Teams with Access')}\n              <ActionItem>\n                <CheckboxFancy\n                  isDisabled={!isMyTeamsEnabled}\n                  isChecked={teams.length === keyedTeams.size}\n                  isIndeterminate={teams.length > keyedTeams.size && keyedTeams.size > 0}\n                  onClick={myTeamsHandler}\n                />\n              </ActionItem>\n            </DropdownMenuHeader>\n            {enabledTeams.map(team => (\n              <TeamKeyTransactionItem\n                key={team.slug}\n                team={team}\n                isKeyed={keyedTeams.has(team.id)}\n                disabled={false}\n                onSelect={this.toggleSelection(true, {\n                  action: keyedTeams.has(team.id) ? 'unkey' : 'key',\n                  teamIds: [team.id],\n                  project,\n                  transactionName,\n                })}\n              />\n            ))}\n            {disabledTeams.map(team => (\n              <TeamKeyTransactionItem\n                key={team.slug}\n                team={team}\n                isKeyed={keyedTeams.has(team.id)}\n                disabled\n                onSelect={this.toggleSelection(true, {\n                  action: keyedTeams.has(team.id) ? 'unkey' : 'key',\n                  teamIds: [team.id],\n                  project,\n                  transactionName,\n                })}\n              />\n            ))}\n          </Fragment>\n        )}\n        {noAccessTeams.length > 0 && (\n          <Fragment>\n            <DropdownMenuHeader first={!hasTeamsWithAccess}>\n              {t('My Teams without Access')}\n            </DropdownMenuHeader>\n            {noAccessTeams.map(team => (\n              <TeamKeyTransactionItem key={team.slug} team={team} disabled />\n            ))}\n          </Fragment>\n        )}\n      </DropdownContent>\n    );\n  }\n\n  renderMenu(): React.ReactPortal | null {\n    const {isLoading, counts, keyedTeams} = this.props;\n\n    if (isLoading || !defined(counts) || !defined(keyedTeams)) {\n      return null;\n    }\n\n    const modifiers = [\n      {\n        name: 'hide',\n        enabled: false,\n      },\n      {\n        name: 'preventOverflow',\n        enabled: true,\n        options: {padding: 10},\n      },\n    ];\n\n    return createPortal(\n      <Popper placement=\"top\" modifiers={modifiers}>\n        {({ref: popperRef, style, placement}) => (\n          <DropdownWrapper\n            ref={ref => {\n              (popperRef as Function)(ref);\n              this.menuEl = ref;\n            }}\n            style={style}\n            data-placement={placement}\n          >\n            {this.renderMenuContent(counts, keyedTeams)}\n          </DropdownWrapper>\n        )}\n      </Popper>,\n      document.body\n    );\n  }\n\n  render() {\n    const {isLoading, error, title: Title, keyedTeams, initialValue, teams} = this.props;\n    const {isOpen} = this.state;\n\n    const menu: React.ReactPortal | null = isOpen ? this.renderMenu() : null;\n\n    return (\n      <Manager>\n        <Reference>\n          {({ref}) => (\n            <StarWrapper ref={ref}>\n              <Title\n                isOpen={isOpen}\n                disabled={isLoading || Boolean(error)}\n                keyedTeams={\n                  keyedTeams ? teams.filter(({id}) => keyedTeams.has(id)) : null\n                }\n                initialValue={initialValue}\n                onClick={this.toggleOpen}\n              />\n            </StarWrapper>\n          )}\n        </Reference>\n        {menu}\n      </Manager>\n    );\n  }\n}\n\ntype ItemProps = {\n  disabled: boolean;\n  team: Team;\n  isKeyed?: boolean;\n  onSelect?: () => void;\n};\n\nfunction TeamKeyTransactionItem({team, isKeyed, disabled, onSelect}: ItemProps) {\n  return (\n    <DropdownMenuItem\n      key={team.slug}\n      disabled={disabled}\n      onSelect={onSelect}\n      stopPropagation\n    >\n      <MenuItemContent>\n        {team.slug}\n        <ActionItem>\n          {!defined(isKeyed) ? null : disabled ? (\n            t('Max %s', MAX_TEAM_KEY_TRANSACTIONS)\n          ) : (\n            <CheckboxFancy isChecked={isKeyed} />\n          )}\n        </ActionItem>\n      </MenuItemContent>\n    </DropdownMenuItem>\n  );\n}\n\nconst StarWrapper = styled('div')`\n  display: flex;\n\n  /* Fixes Star when it’s filled and is wrapped around Tooltip */\n  & > span {\n    display: flex;\n  }\n`;\n\nconst DropdownWrapper = styled('div')`\n  /* Adapted from the dropdown-menu class */\n  border: none;\n  border-radius: 2px;\n  box-shadow: 0 0 0 1px rgba(52, 60, 69, 0.2), 0 1px 3px rgba(70, 82, 98, 0.25);\n  background-clip: padding-box;\n  background-color: ${p => p.theme.background};\n  width: 220px;\n  overflow: visible;\n  z-index: ${p => p.theme.zIndex.tooltip};\n\n  &:before,\n  &:after {\n    width: 0;\n    height: 0;\n    content: '';\n    display: block;\n    position: absolute;\n    right: auto;\n  }\n\n  &:before {\n    border-left: 9px solid transparent;\n    border-right: 9px solid transparent;\n    left: calc(50% - 9px);\n    z-index: -2;\n  }\n\n  &:after {\n    border-left: 8px solid transparent;\n    border-right: 8px solid transparent;\n    left: calc(50% - 8px);\n    z-index: -1;\n  }\n\n  &[data-placement*='bottom'] {\n    margin-top: 9px;\n\n    &:before {\n      border-bottom: 9px solid ${p => p.theme.border};\n      top: -9px;\n    }\n\n    &:after {\n      border-bottom: 8px solid ${p => p.theme.background};\n      top: -8px;\n    }\n  }\n\n  &[data-placement*='top'] {\n    margin-bottom: 9px;\n\n    &:before {\n      border-top: 9px solid ${p => p.theme.border};\n      bottom: -9px;\n    }\n\n    &:after {\n      border-top: 8px solid ${p => p.theme.background};\n      bottom: -8px;\n    }\n  }\n`;\n\nconst DropdownContent = styled('div')`\n  max-height: 250px;\n  pointer-events: auto;\n  overflow-y: auto;\n`;\n\nconst DropdownMenuHeader = styled(MenuHeader)<{first?: boolean}>`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding: ${space(1)} ${space(2)};\n\n  background: ${p => p.theme.backgroundSecondary};\n  ${p => p.first && 'border-radius: 2px'};\n`;\n\nconst DropdownMenuItem = styled(MenuItem)`\n  font-size: ${p => p.theme.fontSizeMedium};\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ${p => p.theme.innerBorder};\n  }\n`;\n\nconst MenuItemContent = styled('div')`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n`;\n\nconst ActionItem = styled('span')`\n  min-width: ${space(2)};\n  margin-left: ${space(1)};\n`;\n\nexport default TeamKeyTransaction;\n","import {Component, createContext} from 'react';\nimport isEqual from 'lodash/isEqual';\n\nimport {\n  fetchTeamKeyTransactions,\n  TeamKeyTransactions,\n  toggleKeyTransaction,\n} from 'sentry/actionCreators/performance';\nimport {Client} from 'sentry/api';\nimport {t} from 'sentry/locale';\nimport {Organization, Project, Team} from 'sentry/types';\nimport withApi from 'sentry/utils/withApi';\n\nexport type TeamSelection = {\n  action: 'key' | 'unkey';\n  project: Project;\n  teamIds: string[];\n  transactionName: string;\n};\n\nexport type TeamKeyTransactionManagerChildrenProps = {\n  counts: Map<string, number> | null;\n  error: string | null;\n  getKeyedTeams: (project: string, transactionName: string) => Set<string> | null;\n  handleToggleKeyTransaction: (selection: TeamSelection) => void;\n  isLoading: boolean;\n  teams: Team[];\n};\n\nconst TeamKeyTransactionsManagerContext =\n  createContext<TeamKeyTransactionManagerChildrenProps>({\n    teams: [],\n    isLoading: false,\n    error: null,\n    counts: null,\n    getKeyedTeams: () => null,\n    handleToggleKeyTransaction: () => {},\n  });\n\ntype Props = {\n  api: Client;\n  children: React.ReactNode;\n  organization: Organization;\n  selectedTeams: string[];\n  teams: Team[];\n  selectedProjects?: string[];\n};\n\ntype State = Omit<\n  TeamKeyTransactionManagerChildrenProps,\n  'teams' | 'counts' | 'getKeyedTeams' | 'handleToggleKeyTransaction'\n> & {\n  keyFetchID: symbol | null;\n  teamKeyTransactions: TeamKeyTransactions;\n};\n\nclass UnwrappedProvider extends Component<Props> {\n  state: State = {\n    keyFetchID: null,\n    isLoading: true,\n    error: null,\n    teamKeyTransactions: [],\n  };\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const orgSlugChanged = prevProps.organization.slug !== this.props.organization.slug;\n    const selectedTeamsChanged = !isEqual(\n      prevProps.selectedTeams,\n      this.props.selectedTeams\n    );\n    const selectedProjectsChanged = !isEqual(\n      prevProps.selectedProjects,\n      this.props.selectedProjects\n    );\n\n    if (orgSlugChanged || selectedTeamsChanged || selectedProjectsChanged) {\n      this.fetchData();\n    }\n  }\n\n  async fetchData() {\n    const {api, organization, selectedTeams, selectedProjects} = this.props;\n    const keyFetchID = Symbol('keyFetchID');\n    this.setState({isLoading: true, keyFetchID});\n\n    let teamKeyTransactions: TeamKeyTransactions = [];\n    let error: string | null = null;\n\n    try {\n      teamKeyTransactions = await fetchTeamKeyTransactions(\n        api,\n        organization.slug,\n        selectedTeams,\n        selectedProjects\n      );\n    } catch (err) {\n      error = err.responseJSON?.detail ?? t('Error fetching team key transactions');\n    }\n\n    this.setState({\n      isLoading: false,\n      keyFetchID: undefined,\n      error,\n      teamKeyTransactions,\n    });\n  }\n\n  getCounts() {\n    const {teamKeyTransactions} = this.state;\n\n    const counts: Map<string, number> = new Map();\n\n    teamKeyTransactions.forEach(({team, count}) => {\n      counts.set(team, count);\n    });\n\n    return counts;\n  }\n\n  getKeyedTeams = (projectId: string, transactionName: string) => {\n    const {teamKeyTransactions} = this.state;\n\n    const keyedTeams: Set<string> = new Set();\n\n    teamKeyTransactions.forEach(({team, keyed}) => {\n      const isKeyedByTeam = keyed.find(\n        keyedTeam =>\n          keyedTeam.project_id === projectId && keyedTeam.transaction === transactionName\n      );\n      if (isKeyedByTeam) {\n        keyedTeams.add(team);\n      }\n    });\n\n    return keyedTeams;\n  };\n\n  handleToggleKeyTransaction = async (selection: TeamSelection) => {\n    const {api, organization} = this.props;\n    const {teamKeyTransactions} = this.state;\n    const {action, project, transactionName, teamIds} = selection;\n    const isKeyTransaction = action === 'unkey';\n\n    const teamIdSet = new Set(teamIds);\n\n    const newTeamKeyTransactions = teamKeyTransactions.map(({team, count, keyed}) => {\n      if (!teamIdSet.has(team)) {\n        return {team, count, keyed};\n      }\n\n      if (isKeyTransaction) {\n        return {\n          team,\n          count: count - 1,\n          keyed: keyed.filter(\n            keyTransaction =>\n              keyTransaction.project_id !== project.id ||\n              keyTransaction.transaction !== transactionName\n          ),\n        };\n      }\n      return {\n        team,\n        count: count + 1,\n        keyed: [\n          ...keyed,\n          {\n            project_id: project.id,\n            transaction: transactionName,\n          },\n        ],\n      };\n    });\n\n    try {\n      await toggleKeyTransaction(\n        api,\n        isKeyTransaction,\n        organization.slug,\n        [project.id],\n        transactionName,\n        teamIds\n      );\n      this.setState({teamKeyTransactions: newTeamKeyTransactions});\n    } catch (err) {\n      this.setState({\n        error: err.responseJSON?.detail ?? null,\n      });\n    }\n  };\n\n  render() {\n    const {teams} = this.props;\n    const {isLoading, error} = this.state;\n\n    const childrenProps: TeamKeyTransactionManagerChildrenProps = {\n      teams,\n      isLoading,\n      error,\n      counts: this.getCounts(),\n      getKeyedTeams: this.getKeyedTeams,\n      handleToggleKeyTransaction: this.handleToggleKeyTransaction,\n    };\n\n    return (\n      <TeamKeyTransactionsManagerContext.Provider value={childrenProps}>\n        {this.props.children}\n      </TeamKeyTransactionsManagerContext.Provider>\n    );\n  }\n}\n\nexport const Provider = withApi(UnwrappedProvider);\n\nexport const Consumer = TeamKeyTransactionsManagerContext.Consumer;\n","export const ROW_HEIGHT = 24;\nexport const ROW_PADDING = 4;\n","import styled from '@emotion/styled';\n\nimport {ROW_HEIGHT, ROW_PADDING} from 'sentry/components/performance/waterfall/constants';\nimport {DurationDisplay} from 'sentry/components/performance/waterfall/types';\nimport {\n  getDurationPillAlignment,\n  getHatchPattern,\n} from 'sentry/components/performance/waterfall/utils';\n\nexport const RowRectangle = styled('div')<{spanBarHatch: boolean}>`\n  position: absolute;\n  height: ${ROW_HEIGHT - 2 * ROW_PADDING}px;\n  left: 0;\n  min-width: 1px;\n  user-select: none;\n  transition: border-color 0.15s ease-in-out;\n  ${p => getHatchPattern(p, '#dedae3', '#f4f2f7')}\n`;\n\nexport const DurationPill = styled('div')<{\n  durationDisplay: DurationDisplay;\n  showDetail: boolean;\n  spanBarHatch: boolean;\n}>`\n  position: absolute;\n  top: 50%;\n  display: flex;\n  align-items: center;\n  transform: translateY(-50%);\n  white-space: nowrap;\n  font-size: ${p => p.theme.fontSizeExtraSmall};\n  color: ${p => (p.showDetail === true ? p.theme.gray200 : p.theme.gray300)};\n  font-variant-numeric: tabular-nums;\n  line-height: 1;\n\n  ${getDurationPillAlignment}\n\n  @media (max-width: ${p => p.theme.breakpoints.medium}) {\n    font-size: 10px;\n  }\n`;\n","import {DurationDisplay} from 'sentry/components/performance/waterfall/types';\nimport CHART_PALETTE from 'sentry/constants/chartPalette';\nimport space from 'sentry/styles/space';\nimport {Theme} from 'sentry/utils/theme';\n\nexport const getBackgroundColor = ({\n  showStriping,\n  showDetail,\n  theme,\n}: {\n  theme: Theme;\n  showDetail?: boolean;\n  showStriping?: boolean;\n}) => {\n  if (showDetail) {\n    return theme.textColor;\n  }\n\n  if (showStriping) {\n    return theme.backgroundSecondary;\n  }\n\n  return theme.background;\n};\n\ntype HatchProps = {\n  spanBarHatch: boolean;\n};\n\nexport function getHatchPattern(\n  {spanBarHatch}: HatchProps,\n  primary: string,\n  alternate: string\n) {\n  if (spanBarHatch === true) {\n    return `\n      background-image: linear-gradient(135deg,\n        ${alternate},\n        ${alternate} 2.5px,\n        ${primary} 2.5px,\n        ${primary} 5px,\n        ${alternate} 6px,\n        ${alternate} 8px,\n        ${primary} 8px,\n        ${primary} 11px,\n        ${alternate} 11px,\n        ${alternate} 14px,\n        ${primary} 14px,\n        ${primary} 16.5px,\n        ${alternate} 16.5px,\n        ${alternate} 19px,\n        ${primary} 20px\n      );\n      background-size: 16px 16px;\n    `;\n  }\n\n  return null;\n}\n\nexport const getDurationPillAlignment = ({\n  durationDisplay,\n  theme,\n  spanBarHatch,\n}: {\n  durationDisplay: DurationDisplay;\n  spanBarHatch: boolean;\n  theme: Theme;\n}) => {\n  switch (durationDisplay) {\n    case 'left':\n      return `right: calc(100% + ${space(0.5)});`;\n    case 'right':\n      return `left: calc(100% + ${space(0.75)});`;\n    default:\n      return `\n        right: ${space(0.75)};\n        color: ${spanBarHatch === true ? theme.gray300 : theme.white};\n      `;\n  }\n};\n\nexport const getToggleTheme = ({\n  theme,\n  isExpanded,\n  disabled,\n  errored,\n  isSpanGroupToggler,\n}: {\n  disabled: boolean;\n  errored: boolean;\n  isExpanded: boolean;\n  theme: Theme;\n  isSpanGroupToggler?: boolean;\n}) => {\n  const buttonTheme = isExpanded ? theme.button.default : theme.button.primary;\n  const errorTheme = theme.button.danger;\n\n  const background = errored\n    ? isExpanded\n      ? buttonTheme.background\n      : errorTheme.background\n    : buttonTheme.background;\n  const border = errored ? errorTheme.background : buttonTheme.border;\n  const color = errored\n    ? isExpanded\n      ? errorTheme.background\n      : buttonTheme.color\n    : buttonTheme.color;\n\n  if (isSpanGroupToggler) {\n    return `\n    background: ${theme.blue300};\n    border: 1px solid ${theme.button.default.border};\n    color: ${color};\n    cursor: pointer;\n  `;\n  }\n\n  if (disabled) {\n    return `\n    background: ${background};\n    border: 1px solid ${border};\n    color: ${color};\n    cursor: default;\n  `;\n  }\n\n  return `\n    background: ${background};\n    border: 1px solid ${border};\n    color: ${color};\n  `;\n};\n\nexport const getDurationDisplay = ({\n  width,\n  left,\n}: {\n  left: undefined | number;\n  width: undefined | number;\n}): DurationDisplay => {\n  const spaceNeeded = 0.3;\n\n  if (left === undefined || width === undefined) {\n    return 'inset';\n  }\n  if (left + width < 1 - spaceNeeded) {\n    return 'right';\n  }\n  if (left > spaceNeeded) {\n    return 'left';\n  }\n  return 'inset';\n};\n\nexport const getHumanDuration = (duration: number): string => {\n  // note: duration is assumed to be in seconds\n  const durationMs = duration * 1000;\n  return `${durationMs.toLocaleString(undefined, {\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n  })}ms`;\n};\n\nexport const toPercent = (value: number) => `${(value * 100).toFixed(3)}%`;\n\ntype Rect = {\n  height: number;\n  width: number;\n  // x and y are left/top coords respectively\n  x: number;\n  y: number;\n};\n\n// get position of element relative to top/left of document\nexport const getOffsetOfElement = (element: Element) => {\n  // left and top are relative to viewport\n  const {left, top} = element.getBoundingClientRect();\n\n  // get values that the document is currently scrolled by\n  const scrollLeft = window.pageXOffset;\n  const scrollTop = window.pageYOffset;\n\n  return {x: left + scrollLeft, y: top + scrollTop};\n};\n\nexport const rectOfContent = (element: Element): Rect => {\n  const {x, y} = getOffsetOfElement(element);\n\n  // offsets for the border and any scrollbars (clientLeft and clientTop),\n  // and if the element was scrolled (scrollLeft and scrollTop)\n  //\n  // NOTE: clientLeft and clientTop does not account for any margins nor padding\n  const contentOffsetLeft = element.clientLeft - element.scrollLeft;\n  const contentOffsetTop = element.clientTop - element.scrollTop;\n\n  return {\n    x: x + contentOffsetLeft,\n    y: y + contentOffsetTop,\n    width: element.scrollWidth,\n    height: element.scrollHeight,\n  };\n};\n\nexport const clamp = (value: number, min: number, max: number): number => {\n  if (value < min) {\n    return min;\n  }\n  if (value > max) {\n    return max;\n  }\n  return value;\n};\n\nconst getLetterIndex = (letter: string): number => {\n  const index = 'abcdefghijklmnopqrstuvwxyz'.indexOf(letter) || 0;\n  return index === -1 ? 0 : index;\n};\n\nconst colorsAsArray = Object.keys(CHART_PALETTE).map(key => CHART_PALETTE[17][key]);\n\nexport const barColors = {\n  default: CHART_PALETTE[17][4],\n  transaction: CHART_PALETTE[17][8],\n  http: CHART_PALETTE[17][10],\n  db: CHART_PALETTE[17][17],\n};\n\nexport const pickBarColor = (input: string | undefined): string => {\n  // We pick the color for span bars using the first three letters of the op name.\n  // That way colors stay consistent between transactions.\n\n  if (!input || input.length < 3) {\n    return CHART_PALETTE[17][4];\n  }\n\n  if (barColors[input]) {\n    return barColors[input];\n  }\n\n  const letterIndex1 = getLetterIndex(input.slice(0, 1));\n  const letterIndex2 = getLetterIndex(input.slice(1, 2));\n  const letterIndex3 = getLetterIndex(input.slice(2, 3));\n  const letterIndex4 = getLetterIndex(input.slice(3, 4));\n\n  return colorsAsArray[\n    (letterIndex1 + letterIndex2 + letterIndex3 + letterIndex4) % colorsAsArray.length\n  ];\n};\n","import styled from '@emotion/styled';\n\nimport theme from 'sentry/utils/theme';\n\ntype Props = {\n  score: number;\n  className?: string;\n  palette?: Readonly<string[]>;\n  paletteClassNames?: string[];\n  radius?: number;\n  size?: number;\n  thickness?: number;\n  vertical?: boolean;\n};\n\nconst BaseScoreBar = ({\n  score,\n  className,\n  vertical,\n  size = 40,\n  thickness = 4,\n  radius = 3,\n  palette = theme.similarity.colors,\n}: Props) => {\n  const maxScore = palette.length;\n\n  // Make sure score is between 0 and maxScore\n  const scoreInBounds = score >= maxScore ? maxScore : score <= 0 ? 0 : score;\n  // Make sure paletteIndex is 0 based\n  const paletteIndex = scoreInBounds - 1;\n\n  // Size of bar, depends on orientation, although we could just apply a transformation via css\n  const barProps = {\n    vertical,\n    thickness,\n    size,\n    radius,\n  };\n\n  return (\n    <div className={className}>\n      {[...Array(scoreInBounds)].map((_j, i) => (\n        <Bar {...barProps} key={i} color={palette[paletteIndex]} />\n      ))}\n      {[...Array(maxScore - scoreInBounds)].map((_j, i) => (\n        <Bar key={`empty-${i}`} {...barProps} empty />\n      ))}\n    </div>\n  );\n};\n\nconst ScoreBar = styled(BaseScoreBar)`\n  display: flex;\n\n  ${p =>\n    p.vertical\n      ? `flex-direction: column-reverse;\n    justify-content: flex-end;`\n      : 'min-width: 80px;'};\n`;\n\ntype BarProps = {\n  radius: number;\n  size: number;\n  thickness: number;\n  color?: string;\n  empty?: boolean;\n  vertical?: boolean;\n};\n\nconst Bar = styled('div')<BarProps>`\n  border-radius: ${p => p.radius}px;\n  margin: 2px;\n  ${p => p.empty && `background-color: ${p.theme.similarity.empty};`};\n  ${p => p.color && `background-color: ${p.color};`};\n\n  width: ${p => (!p.vertical ? p.thickness : p.size)}px;\n  height: ${p => (!p.vertical ? p.size : p.thickness)}px;\n`;\n\nexport default ScoreBar;\n","import styled from '@emotion/styled';\n\nimport AutoSelectText from 'sentry/components/autoSelectText';\nimport Link, {LinkProps} from 'sentry/components/links/link';\n\ninterface Props {\n  shortId: string;\n  avatar?: React.ReactNode;\n  className?: string;\n  onClick?: (e: React.MouseEvent<HTMLDivElement>) => void;\n  /**\n   * A router target destination\n   */\n  to?: LinkProps['to'];\n}\n\nfunction ShortId({shortId, avatar, onClick, to, className}: Props) {\n  if (!shortId) {\n    return null;\n  }\n\n  return (\n    <StyledShortId onClick={onClick} className={className}>\n      {avatar}\n      {to ? (\n        <Link to={to}>{shortId}</Link>\n      ) : (\n        <StyledAutoSelectText>{shortId}</StyledAutoSelectText>\n      )}\n    </StyledShortId>\n  );\n}\n\nconst StyledShortId = styled('div')`\n  font-family: ${p => p.theme.text.familyMono};\n  display: grid;\n  grid-auto-flow: column;\n  gap: 0.5em;\n  align-items: center;\n  justify-content: flex-end;\n`;\n\nconst StyledAutoSelectText = styled(AutoSelectText)`\n  min-width: 0;\n\n  a & {\n    color: ${p => p.theme.linkColor};\n  }\n`;\n\nexport default ShortId;\n","import ScoreBar from 'sentry/components/scoreBar';\nimport Tooltip from 'sentry/components/tooltip';\nimport CHART_PALETTE from 'sentry/constants/chartPalette';\nimport {tct} from 'sentry/locale';\nimport {defined} from 'sentry/utils';\n\ntype Props = {\n  barHeight: number;\n  bars: number;\n  miserableUsers: number | undefined;\n  miseryLimit: number | undefined;\n  totalUsers: number | undefined;\n  userMisery: number;\n};\n\nfunction UserMisery(props: Props) {\n  const {bars, barHeight, userMisery, miseryLimit, totalUsers, miserableUsers} = props;\n  // User Misery will always be > 0 because of the maximum a posteriori estimate\n  // and below 5% will always be an overestimation of the actual proportion\n  // of miserable to total unique users. We are going to visualize it as\n  // 0 User Misery while still preserving the actual value for sorting purposes.\n  const adjustedMisery = userMisery > 0.05 ? userMisery : 0;\n\n  const palette = new Array(bars).fill([CHART_PALETTE[0][0]]);\n  const score = Math.round(adjustedMisery * palette.length);\n\n  let title: React.ReactNode;\n  if (defined(miserableUsers) && defined(totalUsers) && defined(miseryLimit)) {\n    title = tct(\n      '[miserableUsers] out of [totalUsers] unique users waited more than [duration]ms (4x the response time threshold)',\n      {\n        miserableUsers,\n        totalUsers,\n        duration: 4 * miseryLimit,\n      }\n    );\n  } else if (defined(miseryLimit)) {\n    title = tct(\n      'User Misery score is [userMisery], representing users who waited more than [duration]ms (4x the response time threshold)',\n      {\n        duration: 4 * miseryLimit,\n        userMisery: userMisery.toFixed(3),\n      }\n    );\n  } else if (defined(miserableUsers) && defined(totalUsers)) {\n    title = tct(\n      'User Misery score is [userMisery], because [miserableUsers] out of [totalUsers] unique users had a miserable experience.',\n      {\n        miserableUsers,\n        totalUsers,\n        userMisery: userMisery.toFixed(3),\n      }\n    );\n  } else {\n    title = tct('User Misery score is [userMisery].', {\n      userMisery: userMisery.toFixed(3),\n    });\n  }\n  return (\n    <Tooltip title={title} containerDisplayMode=\"block\">\n      <ScoreBar size={barHeight} score={score} palette={palette} radius={0} />\n    </Tooltip>\n  );\n}\n\nexport default UserMisery;\n","// eslint-disable-next-line no-restricted-imports\nimport {withRouter, WithRouterProps} from 'react-router';\nimport {css} from '@emotion/react';\nimport styled from '@emotion/styled';\n\nimport Clipboard from 'sentry/components/clipboard';\nimport GlobalSelectionLink from 'sentry/components/globalSelectionLink';\nimport Link from 'sentry/components/links/link';\nimport Tooltip from 'sentry/components/tooltip';\nimport {IconCopy} from 'sentry/icons';\nimport space from 'sentry/styles/space';\nimport {Organization} from 'sentry/types';\nimport {formatVersion} from 'sentry/utils/formatters';\nimport theme from 'sentry/utils/theme';\nimport withOrganization from 'sentry/utils/withOrganization';\n\ntype Props = {\n  /**\n   *  Organization injected by withOrganization HOC\n   */\n  organization: Organization;\n  /**\n   * Raw version (canonical release identifier)\n   */\n  version: string;\n  /**\n   * Should the version be a link to the release page\n   */\n  anchor?: boolean;\n  className?: string;\n  /**\n   * Should link to release page preserve user's page filter values\n   */\n  preservePageFilters?: boolean;\n  /**\n   * Will add project ID to the linked url (can be overridden by preservePageFilters).\n   * If not provided and user does not have global-views enabled, it will try to take it from current url query.\n   */\n  projectId?: string;\n  /**\n   * Should there be a tooltip with raw version on hover\n   */\n  tooltipRawVersion?: boolean;\n  /**\n   * Ellipsis on overflow\n   */\n  truncate?: boolean;\n  /**\n   * Should we also show package name\n   */\n  withPackage?: boolean;\n};\n\nconst Version = ({\n  version,\n  organization,\n  anchor = true,\n  preservePageFilters,\n  tooltipRawVersion,\n  withPackage,\n  projectId,\n  truncate,\n  className,\n  location,\n}: WithRouterProps & Props) => {\n  const versionToDisplay = formatVersion(version, withPackage);\n\n  let releaseDetailProjectId: null | undefined | string | string[];\n  if (projectId) {\n    // we can override preservePageFilters's project id\n    releaseDetailProjectId = projectId;\n  } else if (!organization?.features.includes('global-views')) {\n    // we need this for users without global-views, otherwise they might get `This release may not be in your selected project`\n    releaseDetailProjectId = location?.query.project;\n  }\n\n  const renderVersion = () => {\n    if (anchor && organization?.slug) {\n      const props = {\n        to: {\n          pathname: `/organizations/${organization?.slug}/releases/${encodeURIComponent(\n            version\n          )}/`,\n          query: releaseDetailProjectId ? {project: releaseDetailProjectId} : undefined,\n        },\n        className,\n      };\n      if (preservePageFilters) {\n        return (\n          <GlobalSelectionLink {...props}>\n            <VersionText truncate={truncate}>{versionToDisplay}</VersionText>\n          </GlobalSelectionLink>\n        );\n      }\n      return (\n        <Link {...props}>\n          <VersionText truncate={truncate}>{versionToDisplay}</VersionText>\n        </Link>\n      );\n    }\n\n    return (\n      <VersionText className={className} truncate={truncate}>\n        {versionToDisplay}\n      </VersionText>\n    );\n  };\n\n  const renderTooltipContent = () => (\n    <TooltipContent\n      onClick={e => {\n        e.stopPropagation();\n      }}\n    >\n      <TooltipVersionWrapper>{version}</TooltipVersionWrapper>\n\n      <Clipboard value={version}>\n        <TooltipClipboardIconWrapper>\n          <IconCopy size=\"xs\" />\n        </TooltipClipboardIconWrapper>\n      </Clipboard>\n    </TooltipContent>\n  );\n\n  const getOverlayStyle = () => {\n    // if the version name is not a hash (sha1 or sha265) and we are not on\n    // mobile, allow tooltip to be as wide as 500px\n    if (/(^[a-f0-9]{40}$)|(^[a-f0-9]{64}$)/.test(version)) {\n      return undefined;\n    }\n\n    return css`\n      @media (min-width: ${theme.breakpoints.small}) {\n        max-width: 500px;\n      }\n    `;\n  };\n\n  return (\n    <Tooltip\n      title={renderTooltipContent()}\n      disabled={!tooltipRawVersion}\n      isHoverable\n      containerDisplayMode={truncate ? 'block' : 'inline-block'}\n      overlayStyle={getOverlayStyle()}\n    >\n      {renderVersion()}\n    </Tooltip>\n  );\n};\n\n// TODO(matej): try to wrap version with this when truncate prop is true (in separate PR)\n// const VersionWrapper = styled('div')`\n//   ${p => p.theme.overflowEllipsis};\n//   max-width: 100%;\n//   width: auto;\n//   display: inline-block;\n// `;\n\nconst VersionText = styled('span')<{truncate?: boolean}>`\n  ${p =>\n    p.truncate &&\n    `max-width: 100%;\n    display: block;\n  overflow: hidden;\n  font-variant-numeric: tabular-nums;\n  text-overflow: ellipsis;\n  white-space: nowrap;`}\n`;\n\nconst TooltipContent = styled('span')`\n  display: flex;\n  align-items: center;\n`;\n\nconst TooltipVersionWrapper = styled('span')`\n  ${p => p.theme.overflowEllipsis}\n`;\n\nconst TooltipClipboardIconWrapper = styled('span')`\n  margin-left: ${space(0.5)};\n  position: relative;\n  bottom: -${space(0.25)};\n\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\ntype PropsWithoutOrg = Omit<Props, 'organization'>;\n\nexport default withOrganization(\n  withRouter(Version)\n) as React.ComponentClass<PropsWithoutOrg>;\n","import {browserHistory} from 'react-router';\nimport {createStore, StoreDefinition} from 'reflux';\n\nimport OrganizationsActions from 'sentry/actions/organizationsActions';\nimport getGuidesContent from 'sentry/components/assistant/getGuidesContent';\nimport {Guide, GuidesContent, GuidesServerData} from 'sentry/components/assistant/types';\nimport {IS_ACCEPTANCE_TEST} from 'sentry/constants';\nimport ConfigStore from 'sentry/stores/configStore';\nimport HookStore from 'sentry/stores/hookStore';\nimport trackAdvancedAnalyticsEvent from 'sentry/utils/analytics/trackAdvancedAnalyticsEvent';\nimport {\n  cleanupActiveRefluxSubscriptions,\n  makeSafeRefluxStore,\n} from 'sentry/utils/makeSafeRefluxStore';\n\nfunction guidePrioritySort(a: Guide, b: Guide) {\n  const a_priority = a.priority ?? Number.MAX_SAFE_INTEGER;\n  const b_priority = b.priority ?? Number.MAX_SAFE_INTEGER;\n  if (a_priority === b_priority) {\n    return a.guide.localeCompare(b.guide);\n  }\n  // lower number takes priority\n  return a_priority - b_priority;\n}\n\nexport type GuideStoreState = {\n  /**\n   * Anchors that are currently mounted\n   */\n  anchors: Set<string>;\n  /**\n   * The current guide\n   */\n  currentGuide: Guide | null;\n  /**\n   * Current step of the current guide\n   */\n  currentStep: number;\n  /**\n   * Hides guides that normally would be shown\n   */\n  forceHide: boolean;\n  /**\n   * We force show a guide if the URL contains #assistant\n   */\n  forceShow: boolean;\n  /**\n   * All tooltip guides\n   */\n  guides: Guide[];\n  /**\n   * Current organization id\n   */\n  orgId: string | null;\n  /**\n   * Current organization slug\n   */\n  orgSlug: string | null;\n  /**\n   * The previously shown guide\n   */\n  prevGuide: Guide | null;\n};\n\nconst defaultState: GuideStoreState = {\n  forceHide: false,\n  guides: [],\n  anchors: new Set(),\n  currentGuide: null,\n  currentStep: 0,\n  orgId: null,\n  orgSlug: null,\n  forceShow: false,\n  prevGuide: null,\n};\n\ninterface GuideStoreDefinition extends StoreDefinition {\n  browserHistoryListener: null | (() => void);\n\n  closeGuide(dismissed?: boolean): void;\n  fetchSucceeded(data: GuidesServerData): void;\n  nextStep(): void;\n  recordCue(guide: string): void;\n  registerAnchor(target: string): void;\n  setForceHide(forceHide: boolean): void;\n  state: GuideStoreState;\n  toStep(step: number): void;\n  unregisterAnchor(target: string): void;\n  updatePrevGuide(nextGuide: Guide | null): void;\n}\n\nconst storeConfig: GuideStoreDefinition = {\n  state: defaultState,\n  unsubscribeListeners: [],\n  browserHistoryListener: null,\n\n  init() {\n    this.state = defaultState;\n\n    this.unsubscribeListeners.push(\n      this.listenTo(OrganizationsActions.setActive, this.onSetActiveOrganization)\n    );\n\n    window.addEventListener('load', this.onURLChange, false);\n    this.browserHistoryListener = browserHistory.listen(() => this.onURLChange());\n  },\n\n  teardown() {\n    cleanupActiveRefluxSubscriptions(this.unsubscribeListeners);\n    window.removeEventListener('load', this.onURLChange);\n\n    if (this.browserHistoryListener) {\n      this.browserHistoryListener();\n    }\n  },\n\n  onURLChange() {\n    this.state.forceShow = window.location.hash === '#assistant';\n    this.updateCurrentGuide();\n  },\n\n  onSetActiveOrganization(data) {\n    this.state.orgId = data ? data.id : null;\n    this.state.orgSlug = data ? data.slug : null;\n    this.updateCurrentGuide();\n  },\n\n  fetchSucceeded(data) {\n    // It's possible we can get empty responses (seems to be Firefox specific)\n    // Do nothing if `data` is empty\n    // also, temporarily check data is in the correct format from the updated\n    // assistant endpoint\n    if (!data || !Array.isArray(data)) {\n      return;\n    }\n\n    const guidesContent: GuidesContent = getGuidesContent(this.state.orgSlug);\n    // map server guide state (i.e. seen status) with guide content\n    const guides = guidesContent.reduce((acc: Guide[], content) => {\n      const serverGuide = data.find(guide => guide.guide === content.guide);\n      serverGuide &&\n        acc.push({\n          ...content,\n          ...serverGuide,\n        });\n      return acc;\n    }, []);\n\n    this.state.guides = guides;\n    this.updateCurrentGuide();\n  },\n\n  closeGuide(dismissed?: boolean) {\n    const {currentGuide, guides} = this.state;\n    // update the current guide seen to true or all guides\n    // if markOthersAsSeen is true and the user is dismissing\n    guides\n      .filter(\n        guide =>\n          guide.guide === currentGuide?.guide ||\n          (currentGuide?.markOthersAsSeen && dismissed)\n      )\n      .forEach(guide => (guide.seen = true));\n    this.state.forceShow = false;\n    this.updateCurrentGuide();\n  },\n\n  nextStep() {\n    this.state.currentStep += 1;\n    this.trigger(this.state);\n  },\n\n  toStep(step: number) {\n    this.state.currentStep = step;\n    this.trigger(this.state);\n  },\n\n  registerAnchor(target) {\n    this.state.anchors.add(target);\n    this.updateCurrentGuide();\n  },\n\n  unregisterAnchor(target) {\n    this.state.anchors.delete(target);\n    this.updateCurrentGuide();\n  },\n\n  setForceHide(forceHide) {\n    this.state.forceHide = forceHide;\n    this.trigger(this.state);\n  },\n\n  recordCue(guide) {\n    const user = ConfigStore.get('user');\n    if (!user) {\n      return;\n    }\n\n    trackAdvancedAnalyticsEvent('assistant.guide_cued', {\n      organization: this.state.orgId,\n      guide,\n    });\n  },\n\n  updatePrevGuide(nextGuide) {\n    const {prevGuide} = this.state;\n    if (!nextGuide) {\n      return;\n    }\n\n    if (!prevGuide || prevGuide.guide !== nextGuide.guide) {\n      this.recordCue(nextGuide.guide);\n      this.state.prevGuide = nextGuide;\n    }\n  },\n\n  /**\n   * Logic to determine if a guide is shown:\n   *\n   *  - If any required target is missing, don't show the guide\n   *  - If the URL ends with #assistant, show the guide\n   *  - If the user has already seen the guide, don't show the guide\n   *  - Otherwise show the guide\n   */\n  updateCurrentGuide(dismissed?: boolean) {\n    const {anchors, guides, forceShow} = this.state;\n\n    let guideOptions = guides\n      .sort(guidePrioritySort)\n      .filter(guide => guide.requiredTargets.every(target => anchors.has(target)));\n\n    const user = ConfigStore.get('user');\n    const assistantThreshold = new Date(2019, 6, 1);\n    const userDateJoined = new Date(user?.dateJoined);\n\n    if (!forceShow) {\n      guideOptions = guideOptions.filter(({seen, dateThreshold}) => {\n        if (seen) {\n          return false;\n        }\n        if (user?.isSuperuser && !IS_ACCEPTANCE_TEST) {\n          return true;\n        }\n        if (dateThreshold) {\n          // Show the guide to users who've joined before the date threshold\n          return userDateJoined < dateThreshold;\n        }\n        return userDateJoined > assistantThreshold;\n      });\n    }\n\n    // Remove steps that are missing anchors, unless the anchor is included in\n    // the expectedTargets and will appear at the step.\n    const nextGuide =\n      guideOptions.length > 0\n        ? {\n            ...guideOptions[0],\n            steps: guideOptions[0].steps.filter(\n              step =>\n                anchors.has(step.target) ||\n                guideOptions[0]?.expectedTargets?.includes(step.target)\n            ),\n          }\n        : null;\n\n    this.updatePrevGuide(nextGuide);\n    this.state.currentStep =\n      this.state.currentGuide &&\n      nextGuide &&\n      this.state.currentGuide.guide === nextGuide.guide\n        ? this.state.currentStep\n        : 0;\n    this.state.currentGuide = nextGuide;\n    this.trigger(this.state);\n    HookStore.get('callback:on-guide-update').map(cb => cb(nextGuide, {dismissed}));\n  },\n};\n\nconst GuideStore = createStore(makeSafeRefluxStore(storeConfig));\nexport default GuideStore;\n","import isEqual from 'lodash/isEqual';\nimport {createStore} from 'reflux';\n\nimport PageFiltersActions from 'sentry/actions/pageFiltersActions';\nimport {getDefaultSelection} from 'sentry/components/organizations/pageFilters/utils';\nimport {PageFilters, PinnedPageFilter} from 'sentry/types';\nimport {isEqualWithDates} from 'sentry/utils/isEqualWithDates';\nimport {makeSafeRefluxStore} from 'sentry/utils/makeSafeRefluxStore';\n\nimport {CommonStoreDefinition} from './types';\n\ninterface CommonState {\n  /**\n   * The set of page filters which have been pinned but do not match the current\n   * URL state.\n   */\n  desyncedFilters: Set<PinnedPageFilter>;\n  /**\n   * The set of page filters which are currently pinned\n   */\n  pinnedFilters: Set<PinnedPageFilter>;\n  /**\n   * The current page filter selection\n   */\n  selection: PageFilters;\n}\n\n/**\n * External state\n */\ninterface State extends CommonState {\n  /**\n   * Are page filters ready?\n   */\n  isReady: boolean;\n}\n\ninterface InternalDefinition extends CommonState {\n  /**\n   * Have we initalized page filters?\n   */\n  hasInitialState: boolean;\n}\n\ninterface PageFiltersStoreDefinition\n  extends InternalDefinition,\n    CommonStoreDefinition<State> {\n  init(): void;\n  onInitializeUrlState(newSelection: PageFilters, pinned: Set<PinnedPageFilter>): void;\n  onReset(): void;\n  pin(filter: PinnedPageFilter, pin: boolean): void;\n  reset(selection?: PageFilters): void;\n  updateDateTime(datetime: PageFilters['datetime']): void;\n  updateDesyncedFilters(filters: Set<PinnedPageFilter>): void;\n  updateEnvironments(environments: string[]): void;\n  updateProjects(projects: PageFilters['projects'], environments: null | string[]): void;\n}\n\nconst storeConfig: PageFiltersStoreDefinition = {\n  selection: getDefaultSelection(),\n  pinnedFilters: new Set(),\n  desyncedFilters: new Set(),\n  hasInitialState: false,\n  unsubscribeListeners: [],\n\n  init() {\n    this.reset(this.selection);\n\n    this.unsubscribeListeners.push(this.listenTo(PageFiltersActions.reset, this.onReset));\n    this.unsubscribeListeners.push(\n      this.listenTo(PageFiltersActions.initializeUrlState, this.onInitializeUrlState)\n    );\n    this.unsubscribeListeners.push(\n      this.listenTo(PageFiltersActions.updateProjects, this.updateProjects)\n    );\n    this.unsubscribeListeners.push(\n      this.listenTo(PageFiltersActions.updateDateTime, this.updateDateTime)\n    );\n    this.unsubscribeListeners.push(\n      this.listenTo(PageFiltersActions.updateEnvironments, this.updateEnvironments)\n    );\n    this.unsubscribeListeners.push(\n      this.listenTo(PageFiltersActions.updateDesyncedFilters, this.updateDesyncedFilters)\n    );\n    this.unsubscribeListeners.push(this.listenTo(PageFiltersActions.pin, this.pin));\n  },\n\n  reset(selection) {\n    this._isReady = false;\n    this.selection = selection || getDefaultSelection();\n    this.pinnedFilters = new Set();\n  },\n\n  /**\n   * Initializes the page filters store data\n   */\n  onInitializeUrlState(newSelection, pinned) {\n    this._isReady = true;\n\n    this.selection = newSelection;\n    this.pinnedFilters = pinned;\n    this.trigger(this.getState());\n  },\n\n  getState() {\n    return {\n      selection: this.selection,\n      pinnedFilters: this.pinnedFilters,\n      desyncedFilters: this.desyncedFilters,\n      isReady: this._isReady,\n    };\n  },\n\n  onReset() {\n    this.reset();\n    this.trigger(this.getState());\n  },\n\n  updateDesyncedFilters(filters: Set<PinnedPageFilter>) {\n    this.desyncedFilters = filters;\n    this.trigger(this.getState());\n  },\n\n  updateProjects(projects = [], environments = null) {\n    if (isEqual(this.selection.projects, projects)) {\n      return;\n    }\n\n    this.selection = {\n      ...this.selection,\n      projects,\n      environments: environments === null ? this.selection.environments : environments,\n    };\n    this.trigger(this.getState());\n  },\n\n  updateDateTime(datetime) {\n    if (isEqualWithDates(this.selection.datetime, datetime)) {\n      return;\n    }\n\n    this.selection = {\n      ...this.selection,\n      datetime,\n    };\n    this.trigger(this.getState());\n  },\n\n  updateEnvironments(environments) {\n    if (isEqual(this.selection.environments, environments)) {\n      return;\n    }\n\n    this.selection = {\n      ...this.selection,\n      environments: environments ?? [],\n    };\n    this.trigger(this.getState());\n  },\n\n  pin(filter, pin) {\n    if (pin) {\n      this.pinnedFilters.add(filter);\n    } else {\n      this.pinnedFilters.delete(filter);\n    }\n\n    this.trigger(this.getState());\n  },\n};\n\nconst PageFiltersStore = createStore(makeSafeRefluxStore(storeConfig));\n\nexport default PageFiltersStore;\n","import type {Organization, SharedViewOrganization} from './organization';\n\n// from:\n// - https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#assertion-functions\n// - https://www.typescriptlang.org/play/#example/assertion-functions\n\n// This declares a function which asserts that the expression called\n// value is true:\n// eslint-disable-next-line prettier/prettier\nexport function assert(_value: unknown): asserts _value {}\n\n// This declares a function which asserts that the expression called\n// value is of type Type:\n// eslint-disable-next-line prettier/prettier\nexport function assertType<Type>(_value: unknown): asserts _value is Type {}\n\nexport function isNotSharedOrganization(\n  maybe: Organization | SharedViewOrganization\n): maybe is Organization {\n  return typeof (maybe as Organization).id !== 'undefined';\n}\n\nexport type DeepPartial<T> = T extends object\n  ? {\n      [P in keyof T]?: DeepPartial<T[P]>;\n    }\n  : T;\n","import moment from 'moment';\n\nimport {parseStatsPeriod} from 'sentry/components/organizations/pageFilters/parse';\nimport ConfigStore from 'sentry/stores/configStore';\nimport {DateString} from 'sentry/types';\n\n// TODO(billy): Move to TimeRangeSelector specific utils\nexport const DEFAULT_DAY_START_TIME = '00:00:00';\nexport const DEFAULT_DAY_END_TIME = '23:59:59';\nconst DATE_FORMAT_NO_TIMEZONE = 'YYYY/MM/DD HH:mm:ss';\n\nfunction getParser(local: boolean = false): typeof moment | typeof moment.utc {\n  return local ? moment : moment.utc;\n}\n\n/**\n * Checks if string is valid time. Only accepts 24 hour format.\n *\n * Chrome's time input will (at least for US locale), allow you to input 12\n * hour format with AM/PM but the raw value is in 24 hour.\n *\n * Safari does not do any validation so you could get a value of > 24 hours\n */\nexport function isValidTime(str: string): boolean {\n  return moment(str, 'HH:mm', true).isValid();\n}\n\n/**\n * Given a date object, format in datetime in UTC\n * given: Tue Oct 09 2018 00:00:00 GMT-0700 (Pacific Daylight Time)\n * returns: \"2018-10-09T07:00:00.000\"\n */\nexport function getUtcDateString(dateObj: moment.MomentInput): string {\n  return moment.utc(dateObj).format(moment.HTML5_FMT.DATETIME_LOCAL_SECONDS);\n}\n\nexport function getFormattedDate(\n  dateObj: moment.MomentInput,\n  format: string,\n  {local}: {local?: boolean} = {}\n): string {\n  return getParser(local)(dateObj).format(format);\n}\n\n/**\n * Returns user timezone from their account preferences\n */\nexport function getUserTimezone(): string {\n  return ConfigStore.get('user')?.options?.timezone;\n}\n\n/**\n * Given a UTC date, return a Date object in local time\n */\nexport function getUtcToLocalDateObject(date: moment.MomentInput): Date {\n  return moment.utc(date).local().toDate();\n}\n\n/**\n * Sets time (hours + minutes) of the current date object\n *\n * @param {String} timeStr Time in 24hr format (HH:mm)\n */\nexport function setDateToTime(\n  dateObj: string | Date,\n  timeStr: string,\n  {local}: {local?: boolean} = {}\n): Date {\n  const [hours, minutes, seconds] = timeStr.split(':').map(t => parseInt(t, 10));\n\n  const date = new Date(+dateObj);\n\n  if (local) {\n    date.setHours(hours, minutes);\n  } else {\n    date.setUTCHours(hours, minutes);\n  }\n\n  if (typeof seconds !== 'undefined') {\n    date.setSeconds(seconds);\n  }\n\n  return date;\n}\n\n/**\n * Given a UTC timestamp, return a system date object with the same date\n * e.g. given: system is -0700 (PST),\n * 1/1/2001 @ 22:00 UTC, return:  1/1/2001 @ 22:00 -0700 (PST)\n */\nexport function getUtcToSystem(dateObj: moment.MomentInput): Date {\n  // This is required because if your system timezone !== user configured timezone\n  // then there will be a mismatch of dates with `react-date-picker`\n  //\n  // We purposely strip the timezone when formatting from the utc timezone\n  return new Date(moment.utc(dateObj).format(DATE_FORMAT_NO_TIMEZONE));\n}\n\n/**\n * Given a timestamp, format to user preference timezone, and strip timezone to\n * return a system date object with the same date\n *\n * e.g. given: system is -0700 (PST) and user preference is -0400 (EST),\n * 1/1/2001 @ 22:00 UTC --> 1/1/2001 @ 18:00 -0400 (EST) -->\n * return:  1/1/2001 @ 18:00 -0700 (PST)\n */\nexport function getLocalToSystem(dateObj: moment.MomentInput): Date {\n  // This is required because if your system timezone !== user configured timezone\n  // then there will be a mismatch of dates with `react-date-picker`\n  //\n  // We purposely strip the timezone when formatting from the utc timezone\n  return new Date(moment(dateObj).format(DATE_FORMAT_NO_TIMEZONE));\n}\n\n// Get the beginning of day (e.g. midnight)\nexport function getStartOfDay(date: moment.MomentInput): Date {\n  return moment(date)\n    .startOf('day')\n    .startOf('hour')\n    .startOf('minute')\n    .startOf('second')\n    .local()\n    .toDate();\n}\n\n// Get tomorrow at midnight so that default endtime\n// is inclusive of today\nexport function getEndOfDay(date: moment.MomentInput): Date {\n  return moment(date)\n    .add(1, 'day')\n    .startOf('hour')\n    .startOf('minute')\n    .startOf('second')\n    .subtract(1, 'second')\n    .local()\n    .toDate();\n}\n\nexport function getPeriodAgo(\n  period: moment.unitOfTime.DurationConstructor,\n  unit: number\n): moment.Moment {\n  return moment().local().subtract(unit, period);\n}\n\n// Get the start of the day (midnight) for a period ago\n//\n// e.g. 2 weeks ago at midnight\nexport function getStartOfPeriodAgo(\n  period: moment.unitOfTime.DurationConstructor,\n  unit: number\n): Date {\n  return getStartOfDay(getPeriodAgo(period, unit));\n}\n\n/**\n * Convert an interval string into a number of seconds.\n * This allows us to create end timestamps from starting ones\n * enabling us to find events in narrow windows.\n *\n * @param {String} interval The interval to convert.\n * @return {Integer}\n */\nexport function intervalToMilliseconds(interval: string): number {\n  const pattern = /^(\\d+)(d|h|m)$/;\n  const matches = pattern.exec(interval);\n  if (!matches) {\n    return 0;\n  }\n  const [, value, unit] = matches;\n  const multipliers = {\n    d: 60 * 60 * 24,\n    h: 60 * 60,\n    m: 60,\n  };\n  return parseInt(value, 10) * multipliers[unit] * 1000;\n}\n\n/**\n * This parses our period shorthand strings (e.g. <int><unit>)\n * and converts it into hours\n */\nexport function parsePeriodToHours(str: string): number {\n  const result = parseStatsPeriod(str);\n\n  if (!result) {\n    return -1;\n  }\n\n  const {period, periodLength} = result;\n\n  const periodNumber = parseInt(period, 10);\n\n  switch (periodLength) {\n    case 's':\n      return periodNumber / (60 * 60);\n    case 'm':\n      return periodNumber / 60;\n    case 'h':\n      return periodNumber;\n    case 'd':\n      return periodNumber * 24;\n    case 'w':\n      return periodNumber * 24 * 7;\n    default:\n      return -1;\n  }\n}\n\nexport function statsPeriodToDays(\n  statsPeriod?: string | null,\n  start?: DateString,\n  end?: DateString\n) {\n  if (statsPeriod && statsPeriod.endsWith('d')) {\n    return parseInt(statsPeriod.slice(0, -1), 10);\n  }\n  if (statsPeriod && statsPeriod.endsWith('h')) {\n    return parseInt(statsPeriod.slice(0, -1), 10) / 24;\n  }\n  if (start && end) {\n    return (new Date(end).getTime() - new Date(start).getTime()) / (24 * 60 * 60 * 1000);\n  }\n  return 0;\n}\n\nexport function shouldUse24Hours() {\n  return ConfigStore.get('user')?.options?.clock24Hours;\n}\n\nexport function getTimeFormat({displaySeconds = false}: {displaySeconds?: boolean} = {}) {\n  if (shouldUse24Hours()) {\n    return displaySeconds ? 'HH:mm:ss' : 'HH:mm';\n  }\n\n  return displaySeconds ? 'LTS' : 'LT';\n}\n\nexport function getInternalDate(date: string | Date, utc?: boolean | null) {\n  if (utc) {\n    return getUtcToSystem(date);\n  }\n  return new Date(\n    moment.tz(moment.utc(date), getUserTimezone()).format('YYYY/MM/DD HH:mm:ss')\n  );\n}\n\n/**\n * Strips timezone from local date, creates a new moment date object with timezone\n * returns the moment as a Date object\n */\nexport function getDateWithTimezoneInUtc(date?: Date, utc?: boolean | null) {\n  return moment\n    .tz(\n      moment(date).local().format('YYYY-MM-DD HH:mm:ss'),\n      utc ? 'UTC' : getUserTimezone()\n    )\n    .utc()\n    .toDate();\n}\n","import {Component} from 'react';\nimport styled from '@emotion/styled';\n\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\n\nimport {nullableValue} from './fieldRenderers';\n\ntype Props = {\n  value: string[];\n};\ntype State = {\n  expanded: boolean;\n};\n\nclass ArrayValue extends Component<Props, State> {\n  state: State = {\n    expanded: false,\n  };\n  handleToggle = () => {\n    this.setState(prevState => ({\n      expanded: !prevState.expanded,\n    }));\n  };\n\n  render() {\n    const {expanded} = this.state;\n    const {value} = this.props;\n    return (\n      <ArrayContainer expanded={expanded}>\n        {expanded &&\n          value\n            .slice(0, value.length - 1)\n            .map((item, i) => (\n              <ArrayItem key={`${i}:${item}`}>{nullableValue(item)}</ArrayItem>\n            ))}\n        <ArrayItem>{nullableValue(value.slice(-1)[0])}</ArrayItem>\n        {value.length > 1 ? (\n          <ButtonContainer>\n            <button onClick={this.handleToggle}>\n              {expanded ? t('[collapse]') : t('[+%s more]', value.length - 1)}\n            </button>\n          </ButtonContainer>\n        ) : null}\n      </ArrayContainer>\n    );\n  }\n}\n\nconst ArrayContainer = styled('div')<{expanded: boolean}>`\n  display: flex;\n  flex-direction: ${p => (p.expanded ? 'column' : 'row')};\n\n  & button {\n    background: none;\n    border: 0;\n    outline: none;\n    padding: 0;\n    cursor: pointer;\n    color: ${p => p.theme.blue300};\n    margin-left: ${space(0.5)};\n  }\n`;\n\nconst ArrayItem = styled('span')`\n  flex-shrink: 1;\n  display: block;\n\n  ${p => p.theme.overflowEllipsis};\n  width: unset;\n`;\n\nconst ButtonContainer = styled('div')`\n  white-space: nowrap;\n`;\n\nexport default ArrayValue;\n","import {Location, Query} from 'history';\nimport cloneDeep from 'lodash/cloneDeep';\nimport isEqual from 'lodash/isEqual';\nimport isString from 'lodash/isString';\nimport omit from 'lodash/omit';\nimport pick from 'lodash/pick';\nimport uniqBy from 'lodash/uniqBy';\nimport moment from 'moment';\n\nimport {EventQuery} from 'sentry/actionCreators/events';\nimport {COL_WIDTH_UNDEFINED} from 'sentry/components/gridEditable';\nimport {normalizeDateTimeParams} from 'sentry/components/organizations/pageFilters/parse';\nimport {DEFAULT_PER_PAGE} from 'sentry/constants';\nimport {URL_PARAM} from 'sentry/constants/pageFilters';\nimport {t} from 'sentry/locale';\nimport {NewQuery, PageFilters, SavedQuery, SelectValue, User} from 'sentry/types';\nimport {\n  aggregateOutputType,\n  Column,\n  ColumnType,\n  Field,\n  generateFieldAsString,\n  getAggregateAlias,\n  getEquation,\n  isAggregateEquation,\n  isAggregateField,\n  isEquation,\n  isLegalYAxisType,\n  Sort,\n} from 'sentry/utils/discover/fields';\nimport {\n  CHART_AXIS_OPTIONS,\n  DISPLAY_MODE_FALLBACK_OPTIONS,\n  DISPLAY_MODE_OPTIONS,\n  DisplayModes,\n  TOP_N,\n} from 'sentry/utils/discover/types';\nimport {decodeList, decodeScalar} from 'sentry/utils/queryString';\nimport {\n  FieldValueKind,\n  TableColumn,\n  TableColumnSort,\n} from 'sentry/views/eventsV2/table/types';\nimport {decodeColumnOrder} from 'sentry/views/eventsV2/utils';\nimport {SpanOperationBreakdownFilter} from 'sentry/views/performance/transactionSummary/filter';\nimport {EventsDisplayFilterName} from 'sentry/views/performance/transactionSummary/transactionEvents/utils';\n\nimport {statsPeriodToDays} from '../dates';\nimport {WebVital} from '../fields';\nimport {MutableSearch} from '../tokenizeSearch';\n\nimport {getSortField} from './fieldRenderers';\n\n// Metadata mapping for discover results.\nexport type MetaType = Record<string, ColumnType> & {\n  isMetricsData?: boolean;\n  tips?: {columns: string; query: string};\n  units?: Record<string, string>;\n};\nexport type EventsMetaType = {fields: Record<string, ColumnType>} & {\n  isMetricsData?: boolean;\n};\n\n// Data in discover results.\nexport type EventData = Record<string, any>;\n\nexport type LocationQuery = {\n  cursor?: string | string[] | null;\n  end?: string | string[] | null;\n  start?: string | string[] | null;\n  statsPeriod?: string | string[] | null;\n  utc?: string | string[] | null;\n};\n\nconst DATETIME_QUERY_STRING_KEYS = ['start', 'end', 'utc', 'statsPeriod'] as const;\n\nconst EXTERNAL_QUERY_STRING_KEYS: Readonly<Array<keyof LocationQuery>> = [\n  ...DATETIME_QUERY_STRING_KEYS,\n  'cursor',\n];\n\nconst setSortOrder = (sort: Sort, kind: 'desc' | 'asc'): Sort => ({\n  kind,\n  field: sort.field,\n});\n\nconst reverseSort = (sort: Sort): Sort => ({\n  kind: sort.kind === 'desc' ? 'asc' : 'desc',\n  field: sort.field,\n});\n\nconst isSortEqualToField = (\n  sort: Sort,\n  field: Field,\n  tableMeta: MetaType | undefined\n): boolean => {\n  const sortKey = getSortKeyFromField(field, tableMeta);\n  return sort.field === sortKey;\n};\n\nconst fieldToSort = (\n  field: Field,\n  tableMeta: MetaType | undefined,\n  kind?: 'desc' | 'asc',\n  useFunctionFormat?: boolean\n): Sort | undefined => {\n  const sortKey = getSortKeyFromField(field, tableMeta, useFunctionFormat);\n\n  if (!sortKey) {\n    return void 0;\n  }\n\n  return {\n    kind: kind || 'desc',\n    field: sortKey,\n  };\n};\n\nfunction getSortKeyFromField(\n  field: Field,\n  tableMeta?: MetaType,\n  useFunctionFormat?: boolean\n): string | null {\n  const fieldString = useFunctionFormat ? field.field : getAggregateAlias(field.field);\n  return getSortField(fieldString, tableMeta);\n}\n\nexport function isFieldSortable(field: Field, tableMeta?: MetaType): boolean {\n  return !!getSortKeyFromField(field, tableMeta);\n}\n\nconst decodeFields = (location: Location): Array<Field> => {\n  const {query} = location;\n  if (!query || !query.field) {\n    return [];\n  }\n\n  const fields = decodeList(query.field);\n  const widths = decodeList(query.widths);\n\n  const parsed: Field[] = [];\n  fields.forEach((field, i) => {\n    const w = Number(widths[i]);\n    const width = !isNaN(w) ? w : COL_WIDTH_UNDEFINED;\n\n    parsed.push({field, width});\n  });\n\n  return parsed;\n};\n\nconst parseSort = (sort: string): Sort => {\n  sort = sort.trim();\n\n  if (sort.startsWith('-')) {\n    return {\n      kind: 'desc',\n      field: sort.substring(1),\n    };\n  }\n\n  return {\n    kind: 'asc',\n    field: sort,\n  };\n};\n\nexport const fromSorts = (sorts: string | string[] | undefined): Array<Sort> => {\n  if (sorts === undefined) {\n    return [];\n  }\n\n  sorts = isString(sorts) ? [sorts] : sorts;\n\n  // NOTE: sets are iterated in insertion order\n  const uniqueSorts = [...new Set(sorts)];\n\n  return uniqueSorts.reduce((acc: Array<Sort>, sort: string) => {\n    acc.push(parseSort(sort));\n    return acc;\n  }, []);\n};\n\nconst decodeSorts = (location: Location): Array<Sort> => {\n  const {query} = location;\n\n  if (!query || !query.sort) {\n    return [];\n  }\n\n  const sorts = decodeList(query.sort);\n\n  return fromSorts(sorts);\n};\n\nexport const encodeSort = (sort: Sort): string => {\n  switch (sort.kind) {\n    case 'desc': {\n      return `-${sort.field}`;\n    }\n    case 'asc': {\n      return String(sort.field);\n    }\n    default: {\n      throw new Error('Unexpected sort type');\n    }\n  }\n};\n\nconst encodeSorts = (sorts: Readonly<Array<Sort>>): Array<string> =>\n  sorts.map(encodeSort);\n\nconst collectQueryStringByKey = (query: Query, key: string): Array<string> => {\n  const needle = query[key];\n  const collection = decodeList(needle);\n  return collection.reduce((acc: Array<string>, item: string) => {\n    item = item.trim();\n\n    if (item.length > 0) {\n      acc.push(item);\n    }\n\n    return acc;\n  }, []);\n};\n\nconst decodeQuery = (location: Location): string => {\n  if (!location.query || !location.query.query) {\n    return '';\n  }\n\n  const queryParameter = location.query.query;\n\n  return decodeScalar(queryParameter, '').trim();\n};\n\nconst decodeTeam = (value: string): 'myteams' | number => {\n  if (value === 'myteams') {\n    return value;\n  }\n  return parseInt(value, 10);\n};\n\nconst decodeTeams = (location: Location): ('myteams' | number)[] => {\n  if (!location.query || !location.query.team) {\n    return [];\n  }\n  const value = location.query.team;\n  return (Array.isArray(value) ? value.map(decodeTeam) : [decodeTeam(value)]).filter(\n    team => team === 'myteams' || !isNaN(team)\n  );\n};\n\nconst decodeProjects = (location: Location): number[] => {\n  if (!location.query || !location.query.project) {\n    return [];\n  }\n\n  const value = location.query.project;\n  return Array.isArray(value) ? value.map(i => parseInt(i, 10)) : [parseInt(value, 10)];\n};\n\nconst queryStringFromSavedQuery = (saved: NewQuery | SavedQuery): string => {\n  if (saved.query) {\n    return saved.query || '';\n  }\n  return '';\n};\n\nfunction validateTableMeta(tableMeta: MetaType | undefined): MetaType | undefined {\n  return tableMeta && Object.keys(tableMeta).length > 0 ? tableMeta : undefined;\n}\n\nclass EventView {\n  id: string | undefined;\n  name: string | undefined;\n  fields: Readonly<Field[]>;\n  sorts: Readonly<Sort[]>;\n  query: string;\n  team: Readonly<('myteams' | number)[]>;\n  project: Readonly<number[]>;\n  start: string | undefined;\n  end: string | undefined;\n  statsPeriod: string | undefined;\n  utc?: string | boolean | undefined;\n  environment: Readonly<string[]>;\n  yAxis: string | undefined;\n  display: string | undefined;\n  topEvents: string | undefined;\n  interval: string | undefined;\n  expired?: boolean;\n  createdBy: User | undefined;\n  additionalConditions: MutableSearch; // This allows views to always add additional conditions to the query to get specific data. It should not show up in the UI unless explicitly called.\n\n  constructor(props: {\n    additionalConditions: MutableSearch;\n    createdBy: User | undefined;\n    display: string | undefined;\n    end: string | undefined;\n    environment: Readonly<string[]>;\n    fields: Readonly<Field[]>;\n    id: string | undefined;\n    name: string | undefined;\n    project: Readonly<number[]>;\n    query: string;\n    sorts: Readonly<Sort[]>;\n    start: string | undefined;\n    statsPeriod: string | undefined;\n    team: Readonly<('myteams' | number)[]>;\n    topEvents: string | undefined;\n    yAxis: string | undefined;\n    expired?: boolean;\n    interval?: string;\n    utc?: string | boolean | undefined;\n  }) {\n    const fields: Field[] = Array.isArray(props.fields) ? props.fields : [];\n    let sorts: Sort[] = Array.isArray(props.sorts) ? props.sorts : [];\n    const team = Array.isArray(props.team) ? props.team : [];\n    const project = Array.isArray(props.project) ? props.project : [];\n    const environment = Array.isArray(props.environment) ? props.environment : [];\n\n    // only include sort keys that are included in the fields\n    let equations = 0;\n    const sortKeys = fields\n      .map(field => {\n        if (field.field && isEquation(field.field)) {\n          const sortKey = getSortKeyFromField(\n            {field: `equation[${equations}]`},\n            undefined\n          );\n          equations += 1;\n          return sortKey;\n        }\n        return getSortKeyFromField(field, undefined);\n      })\n      .filter((sortKey): sortKey is string => !!sortKey);\n\n    const sort = sorts.find(currentSort => sortKeys.includes(currentSort.field));\n    sorts = sort ? [sort] : [];\n\n    const id = props.id !== null && props.id !== void 0 ? String(props.id) : void 0;\n\n    this.id = id;\n    this.name = props.name;\n    this.fields = fields;\n    this.sorts = sorts;\n    this.query = typeof props.query === 'string' ? props.query : '';\n    this.team = team;\n    this.project = project;\n    this.start = props.start;\n    this.end = props.end;\n    this.statsPeriod = props.statsPeriod;\n    this.utc = props.utc;\n    this.environment = environment;\n    this.yAxis = props.yAxis;\n    this.display = props.display;\n    this.topEvents = props.topEvents;\n    this.interval = props.interval;\n    this.createdBy = props.createdBy;\n    this.expired = props.expired;\n    this.additionalConditions = props.additionalConditions\n      ? props.additionalConditions.copy()\n      : new MutableSearch([]);\n  }\n\n  static fromLocation(location: Location): EventView {\n    const {start, end, statsPeriod} = normalizeDateTimeParams(location.query);\n\n    return new EventView({\n      id: decodeScalar(location.query.id),\n      name: decodeScalar(location.query.name),\n      fields: decodeFields(location),\n      sorts: decodeSorts(location),\n      query: decodeQuery(location),\n      team: decodeTeams(location),\n      project: decodeProjects(location),\n      start: decodeScalar(start),\n      end: decodeScalar(end),\n      statsPeriod: decodeScalar(statsPeriod),\n      environment: collectQueryStringByKey(location.query, 'environment'),\n      yAxis: decodeScalar(location.query.yAxis),\n      display: decodeScalar(location.query.display),\n      topEvents: decodeScalar(location.query.topEvents),\n      interval: decodeScalar(location.query.interval),\n      createdBy: undefined,\n      additionalConditions: new MutableSearch([]),\n    });\n  }\n\n  static fromNewQueryWithLocation(newQuery: NewQuery, location: Location): EventView {\n    const query = location.query;\n\n    // apply global selection header values from location whenever possible\n    const environment: string[] =\n      Array.isArray(newQuery.environment) && newQuery.environment.length > 0\n        ? newQuery.environment\n        : collectQueryStringByKey(query, 'environment');\n\n    const project: number[] =\n      Array.isArray(newQuery.projects) && newQuery.projects.length > 0\n        ? newQuery.projects\n        : decodeProjects(location);\n\n    const saved: NewQuery = {\n      ...newQuery,\n\n      environment,\n      projects: project,\n\n      // datetime selection\n      start: newQuery.start || decodeScalar(query.start),\n      end: newQuery.end || decodeScalar(query.end),\n      range: newQuery.range || decodeScalar(query.statsPeriod),\n    };\n\n    return EventView.fromSavedQuery(saved);\n  }\n\n  static getFields(saved: NewQuery | SavedQuery) {\n    return saved.fields.map((field, i) => {\n      const width =\n        saved.widths && saved.widths[i] ? Number(saved.widths[i]) : COL_WIDTH_UNDEFINED;\n\n      return {field, width};\n    });\n  }\n\n  static fromSavedQuery(saved: NewQuery | SavedQuery): EventView {\n    const fields = EventView.getFields(saved);\n    // normalize datetime selection\n    const {start, end, statsPeriod, utc} = normalizeDateTimeParams({\n      start: saved.start,\n      end: saved.end,\n      statsPeriod: saved.range,\n      utc: saved.utc,\n    });\n\n    return new EventView({\n      id: saved.id,\n      name: saved.name,\n      fields,\n      query: queryStringFromSavedQuery(saved),\n      team: saved.teams ?? [],\n      project: saved.projects,\n      start: decodeScalar(start),\n      end: decodeScalar(end),\n      statsPeriod: decodeScalar(statsPeriod),\n      utc,\n      sorts: fromSorts(saved.orderby),\n      environment: collectQueryStringByKey(\n        {\n          environment: saved.environment as string[],\n        },\n        'environment'\n      ),\n      // Workaround to only use the first yAxis since eventView yAxis doesn't accept string[]\n      yAxis: Array.isArray(saved.yAxis) ? saved.yAxis[0] : saved.yAxis,\n      display: saved.display,\n      topEvents: saved.topEvents ? saved.topEvents.toString() : undefined,\n      createdBy: saved.createdBy,\n      expired: saved.expired,\n      additionalConditions: new MutableSearch([]),\n    });\n  }\n\n  static fromSavedQueryOrLocation(\n    saved: SavedQuery | undefined,\n    location: Location\n  ): EventView {\n    let fields = decodeFields(location);\n    const {start, end, statsPeriod, utc} = normalizeDateTimeParams(location.query);\n    const id = decodeScalar(location.query.id);\n    const teams = decodeTeams(location);\n    const projects = decodeProjects(location);\n    const sorts = decodeSorts(location);\n    const environments = collectQueryStringByKey(location.query, 'environment');\n\n    if (saved) {\n      if (fields.length === 0) {\n        fields = EventView.getFields(saved);\n      }\n      return new EventView({\n        id: id || saved.id,\n        name: decodeScalar(location.query.name) || saved.name,\n        fields,\n        query:\n          'query' in location.query\n            ? decodeQuery(location)\n            : queryStringFromSavedQuery(saved),\n        sorts: sorts.length === 0 ? fromSorts(saved.orderby) : sorts,\n        yAxis:\n          decodeScalar(location.query.yAxis) ||\n          // Workaround to only use the first yAxis since eventView yAxis doesn't accept string[]\n          (Array.isArray(saved.yAxis) ? saved.yAxis[0] : saved.yAxis),\n        display: decodeScalar(location.query.display) || saved.display,\n        topEvents: (\n          decodeScalar(location.query.topEvents) ||\n          saved.topEvents ||\n          TOP_N\n        ).toString(),\n        interval: decodeScalar(location.query.interval),\n        createdBy: saved.createdBy,\n        expired: saved.expired,\n        additionalConditions: new MutableSearch([]),\n        // Always read team from location since they can be set by other parts\n        // of the UI\n        team: teams,\n        // Always read project and environment from location since they can\n        // be set by the GlobalSelectionHeaders.\n        project: projects,\n        environment: environments,\n        start: decodeScalar(start),\n        end: decodeScalar(end),\n        statsPeriod: decodeScalar(statsPeriod),\n        utc,\n      });\n    }\n    return EventView.fromLocation(location);\n  }\n\n  isEqualTo(other: EventView): boolean {\n    const defaults = {\n      id: undefined,\n      name: undefined,\n      query: undefined,\n      statsPeriod: undefined,\n      fields: undefined,\n      sorts: undefined,\n      project: undefined,\n      environment: undefined,\n      yAxis: 'count()',\n      display: DisplayModes.DEFAULT,\n      topEvents: '5',\n    };\n    const keys = Object.keys(defaults);\n    for (const key of keys) {\n      const currentValue = this[key] ?? defaults[key];\n      const otherValue = other[key] ?? defaults[key];\n\n      if (!isEqual(currentValue, otherValue)) {\n        return false;\n      }\n    }\n\n    // compare datetime selections using moment\n\n    const dateTimeKeys = ['start', 'end'];\n\n    for (const key of dateTimeKeys) {\n      const currentValue = this[key];\n      const otherValue = other[key];\n\n      if (currentValue && otherValue) {\n        const currentDateTime = moment.utc(currentValue);\n        const otherDateTime = moment.utc(otherValue);\n\n        if (!currentDateTime.isSame(otherDateTime)) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  }\n\n  toNewQuery(): NewQuery {\n    const orderby = this.sorts.length > 0 ? encodeSorts(this.sorts)[0] : undefined;\n\n    const newQuery: NewQuery = {\n      version: 2,\n      id: this.id,\n      name: this.name || '',\n      fields: this.getFields(),\n      widths: this.getWidths().map(w => String(w)),\n      orderby,\n      query: this.query || '',\n      projects: this.project,\n      start: this.start,\n      end: this.end,\n      range: this.statsPeriod,\n      environment: this.environment,\n      yAxis: this.yAxis ? [this.yAxis] : undefined,\n      display: this.display,\n      topEvents: this.topEvents,\n    };\n\n    if (!newQuery.query) {\n      // if query is an empty string, then it cannot be saved, so we omit it\n      // from the payload\n      delete newQuery.query;\n    }\n\n    return newQuery;\n  }\n\n  getPageFilters(): PageFilters {\n    return {\n      projects: this.project as number[],\n      environments: this.environment as string[],\n      datetime: {\n        start: this.start ?? null,\n        end: this.end ?? null,\n        period: this.statsPeriod ?? null,\n        // TODO(tony) Add support for the Use UTC option from the global\n        // headers, currently, that option is not supported and all times are\n        // assumed to be UTC\n        utc: true,\n      },\n    };\n  }\n\n  getPageFiltersQuery(): Query {\n    const {\n      environments: environment,\n      projects,\n      datetime: {start, end, period, utc},\n    } = this.getPageFilters();\n    return {\n      project: projects.map(proj => proj.toString()),\n      environment,\n      utc: utc ? 'true' : 'false',\n\n      // since these values are from `getGlobalSelection`\n      // we know they have type `string | null`\n      start: (start ?? undefined) as string | undefined,\n      end: (end ?? undefined) as string | undefined,\n\n      // we can't use the ?? operator here as we want to\n      // convert the empty string to undefined\n      statsPeriod: period ? period : undefined,\n    };\n  }\n\n  generateBlankQueryStringObject(): Query {\n    const output = {\n      id: undefined,\n      name: undefined,\n      field: undefined,\n      widths: undefined,\n      sort: undefined,\n      tag: undefined,\n      query: undefined,\n      yAxis: undefined,\n      display: undefined,\n      topEvents: undefined,\n      interval: undefined,\n    };\n\n    for (const field of EXTERNAL_QUERY_STRING_KEYS) {\n      output[field] = undefined;\n    }\n\n    return output;\n  }\n\n  generateQueryStringObject(): Query {\n    const output = {\n      id: this.id,\n      name: this.name,\n      field: this.getFields(),\n      widths: this.getWidths(),\n      sort: encodeSorts(this.sorts),\n      environment: this.environment,\n      project: this.project,\n      query: this.query,\n      yAxis: this.yAxis || this.getYAxis(),\n      display: this.display,\n      topEvents: this.topEvents,\n      interval: this.interval,\n    };\n\n    for (const field of EXTERNAL_QUERY_STRING_KEYS) {\n      if (this[field] && this[field].length) {\n        output[field] = this[field];\n      }\n    }\n\n    return cloneDeep(output as any);\n  }\n\n  isValid(): boolean {\n    return this.fields.length > 0;\n  }\n\n  getWidths(): number[] {\n    const result = this.fields.map(field =>\n      field.width ? field.width : COL_WIDTH_UNDEFINED\n    );\n\n    while (result.length > 0) {\n      const width = result[result.length - 1];\n      if (width === COL_WIDTH_UNDEFINED) {\n        result.pop();\n        continue;\n      }\n      break;\n    }\n\n    return result;\n  }\n\n  getFields(): string[] {\n    return this.fields.map(field => field.field);\n  }\n\n  getEquations(): string[] {\n    return this.fields\n      .filter(field => isEquation(field.field))\n      .map(field => getEquation(field.field));\n  }\n\n  getAggregateFields(): Field[] {\n    return this.fields.filter(\n      field => isAggregateField(field.field) || isAggregateEquation(field.field)\n    );\n  }\n\n  hasAggregateField() {\n    return this.fields.some(field => isAggregateField(field.field));\n  }\n\n  hasIdField() {\n    return this.fields.some(field => field.field === 'id');\n  }\n\n  numOfColumns(): number {\n    return this.fields.length;\n  }\n\n  getColumns(useFullEquationAsKey?: boolean): TableColumn<React.ReactText>[] {\n    return decodeColumnOrder(this.fields, useFullEquationAsKey);\n  }\n\n  getDays(): number {\n    const statsPeriod = decodeScalar(this.statsPeriod);\n    return statsPeriodToDays(statsPeriod, this.start, this.end);\n  }\n\n  clone(): EventView {\n    // NOTE: We rely on usage of Readonly from TypeScript to ensure we do not mutate\n    //       the attributes of EventView directly. This enables us to quickly\n    //       clone new instances of EventView.\n\n    return new EventView({\n      id: this.id,\n      name: this.name,\n      fields: this.fields,\n      sorts: this.sorts,\n      query: this.query,\n      team: this.team,\n      project: this.project,\n      start: this.start,\n      end: this.end,\n      statsPeriod: this.statsPeriod,\n      environment: this.environment,\n      yAxis: this.yAxis,\n      display: this.display,\n      topEvents: this.topEvents,\n      interval: this.interval,\n      expired: this.expired,\n      createdBy: this.createdBy,\n      additionalConditions: this.additionalConditions.copy(),\n    });\n  }\n\n  withSorts(sorts: Sort[]): EventView {\n    const newEventView = this.clone();\n    const fields = newEventView.fields.map(field => getAggregateAlias(field.field));\n    newEventView.sorts = sorts.filter(sort => fields.includes(sort.field));\n\n    return newEventView;\n  }\n\n  withColumns(columns: Column[]): EventView {\n    const newEventView = this.clone();\n    const fields: Field[] = columns\n      .filter(\n        col =>\n          ((col.kind === 'field' || col.kind === FieldValueKind.EQUATION) && col.field) ||\n          (col.kind === 'function' && col.function[0])\n      )\n      .map(col => generateFieldAsString(col))\n      .map((field, i) => {\n        // newly added field\n        if (!newEventView.fields[i]) {\n          return {field, width: COL_WIDTH_UNDEFINED};\n        }\n        // Existing columns that were not re ordered should retain\n        // their old widths.\n        const existing = newEventView.fields[i];\n        const width =\n          existing.field === field && existing.width !== undefined\n            ? existing.width\n            : COL_WIDTH_UNDEFINED;\n        return {field, width};\n      });\n    newEventView.fields = fields;\n\n    // Update sorts as sorted fields may have been removed.\n    if (newEventView.sorts) {\n      // Filter the sort fields down to those that are still selected.\n      const sortKeys = fields.map(field => fieldToSort(field, undefined)?.field);\n      const newSort = newEventView.sorts.filter(\n        sort => sort && sortKeys.includes(sort.field)\n      );\n      // If the sort field was removed, try and find a new sortable column.\n      if (newSort.length === 0) {\n        const sortField = fields.find(field => isFieldSortable(field, undefined));\n        if (sortField) {\n          newSort.push({field: sortField.field, kind: 'desc'});\n        }\n      }\n      newEventView.sorts = newSort;\n    }\n\n    newEventView.yAxis = newEventView.getYAxis();\n\n    return newEventView;\n  }\n\n  withNewColumn(newColumn: Column): EventView {\n    const fieldAsString = generateFieldAsString(newColumn);\n    const newField: Field = {\n      field: fieldAsString,\n      width: COL_WIDTH_UNDEFINED,\n    };\n    const newEventView = this.clone();\n    newEventView.fields = [...newEventView.fields, newField];\n\n    return newEventView;\n  }\n\n  withResizedColumn(columnIndex: number, newWidth: number) {\n    const field = this.fields[columnIndex];\n    const newEventView = this.clone();\n    if (!field) {\n      return newEventView;\n    }\n\n    const updateWidth = field.width !== newWidth;\n    if (updateWidth) {\n      const fields = [...newEventView.fields];\n      fields[columnIndex] = {\n        ...field,\n        width: newWidth,\n      };\n      newEventView.fields = fields;\n    }\n\n    return newEventView;\n  }\n\n  withUpdatedColumn(\n    columnIndex: number,\n    updatedColumn: Column,\n    tableMeta: MetaType | undefined\n  ): EventView {\n    const columnToBeUpdated = this.fields[columnIndex];\n    const fieldAsString = generateFieldAsString(updatedColumn);\n\n    const updateField = columnToBeUpdated.field !== fieldAsString;\n    if (!updateField) {\n      return this;\n    }\n\n    // ensure tableMeta is non-empty\n    tableMeta = validateTableMeta(tableMeta);\n\n    const newEventView = this.clone();\n\n    const updatedField: Field = {\n      field: fieldAsString,\n      width: COL_WIDTH_UNDEFINED,\n    };\n\n    const fields = [...newEventView.fields];\n    fields[columnIndex] = updatedField;\n\n    newEventView.fields = fields;\n\n    // if the updated column is one of the sorted columns, we may need to remove\n    // it from the list of sorts\n    const needleSortIndex = this.sorts.findIndex(sort =>\n      isSortEqualToField(sort, columnToBeUpdated, tableMeta)\n    );\n\n    if (needleSortIndex >= 0) {\n      const needleSort = this.sorts[needleSortIndex];\n\n      const numOfColumns = this.fields.reduce((sum, currentField) => {\n        if (isSortEqualToField(needleSort, currentField, tableMeta)) {\n          return sum + 1;\n        }\n\n        return sum;\n      }, 0);\n\n      // do not bother deleting the sort key if there are more than one columns\n      // of it in the table.\n      if (numOfColumns <= 1) {\n        if (isFieldSortable(updatedField, tableMeta)) {\n          // use the current updated field as the sort key\n          const sort = fieldToSort(updatedField, tableMeta)!;\n\n          // preserve the sort kind\n          sort.kind = needleSort.kind;\n\n          const sorts = [...newEventView.sorts];\n          sorts[needleSortIndex] = sort;\n          newEventView.sorts = sorts;\n        } else {\n          const sorts = [...newEventView.sorts];\n          sorts.splice(needleSortIndex, 1);\n          newEventView.sorts = [...new Set(sorts)];\n        }\n      }\n\n      if (newEventView.sorts.length <= 0 && newEventView.fields.length > 0) {\n        // establish a default sort by finding the first sortable field\n\n        if (isFieldSortable(updatedField, tableMeta)) {\n          // use the current updated field as the sort key\n          const sort = fieldToSort(updatedField, tableMeta)!;\n\n          // preserve the sort kind\n          sort.kind = needleSort.kind;\n\n          newEventView.sorts = [sort];\n        } else {\n          const sortableFieldIndex = newEventView.fields.findIndex(currentField =>\n            isFieldSortable(currentField, tableMeta)\n          );\n          if (sortableFieldIndex >= 0) {\n            const fieldToBeSorted = newEventView.fields[sortableFieldIndex];\n            const sort = fieldToSort(fieldToBeSorted, tableMeta)!;\n            newEventView.sorts = [sort];\n          }\n        }\n      }\n    }\n\n    newEventView.yAxis = newEventView.getYAxis();\n\n    return newEventView;\n  }\n\n  withDeletedColumn(columnIndex: number, tableMeta: MetaType | undefined): EventView {\n    // Disallow removal of the orphan column, and check for out-of-bounds\n    if (this.fields.length <= 1 || this.fields.length <= columnIndex || columnIndex < 0) {\n      return this;\n    }\n\n    // ensure tableMeta is non-empty\n    tableMeta = validateTableMeta(tableMeta);\n\n    // delete the column\n    const newEventView = this.clone();\n    const fields = [...newEventView.fields];\n    fields.splice(columnIndex, 1);\n    newEventView.fields = fields;\n\n    // Ensure there is at least one auto width column\n    // To ensure a well formed table results.\n    const hasAutoIndex = fields.find(field => field.width === COL_WIDTH_UNDEFINED);\n    if (!hasAutoIndex) {\n      newEventView.fields[0].width = COL_WIDTH_UNDEFINED;\n    }\n\n    // if the deleted column is one of the sorted columns, we need to remove\n    // it from the list of sorts\n    const columnToBeDeleted = this.fields[columnIndex];\n    const needleSortIndex = this.sorts.findIndex(sort =>\n      isSortEqualToField(sort, columnToBeDeleted, tableMeta)\n    );\n\n    if (needleSortIndex >= 0) {\n      const needleSort = this.sorts[needleSortIndex];\n\n      const numOfColumns = this.fields.reduce((sum, field) => {\n        if (isSortEqualToField(needleSort, field, tableMeta)) {\n          return sum + 1;\n        }\n\n        return sum;\n      }, 0);\n\n      // do not bother deleting the sort key if there are more than one columns\n      // of it in the table.\n      if (numOfColumns <= 1) {\n        const sorts = [...newEventView.sorts];\n        sorts.splice(needleSortIndex, 1);\n        newEventView.sorts = [...new Set(sorts)];\n\n        if (newEventView.sorts.length <= 0 && newEventView.fields.length > 0) {\n          // establish a default sort by finding the first sortable field\n          const sortableFieldIndex = newEventView.fields.findIndex(field =>\n            isFieldSortable(field, tableMeta)\n          );\n\n          if (sortableFieldIndex >= 0) {\n            const fieldToBeSorted = newEventView.fields[sortableFieldIndex];\n            const sort = fieldToSort(fieldToBeSorted, tableMeta)!;\n            newEventView.sorts = [sort];\n          }\n        }\n      }\n    }\n\n    newEventView.yAxis = newEventView.getYAxis();\n\n    return newEventView;\n  }\n\n  withTeams(teams: ('myteams' | number)[]): EventView {\n    const newEventView = this.clone();\n    newEventView.team = teams;\n    return newEventView;\n  }\n\n  getSorts(): TableColumnSort<React.ReactText>[] {\n    return this.sorts.map(\n      sort =>\n        ({\n          key: sort.field,\n          order: sort.kind,\n        } as TableColumnSort<string>)\n    );\n  }\n\n  // returns query input for the search\n  getQuery(inputQuery: string | string[] | null | undefined): string {\n    const queryParts: string[] = [];\n\n    if (this.query) {\n      if (this.additionalConditions) {\n        queryParts.push(this.getQueryWithAdditionalConditions());\n      } else {\n        queryParts.push(this.query);\n      }\n    }\n\n    if (inputQuery) {\n      // there may be duplicate query in the query string\n      // e.g. query=hello&query=world\n      if (Array.isArray(inputQuery)) {\n        inputQuery.forEach(query => {\n          if (typeof query === 'string' && !queryParts.includes(query)) {\n            queryParts.push(query);\n          }\n        });\n      }\n\n      if (typeof inputQuery === 'string' && !queryParts.includes(inputQuery)) {\n        queryParts.push(inputQuery);\n      }\n    }\n\n    return queryParts.join(' ');\n  }\n\n  getFacetsAPIPayload(\n    location: Location\n  ): Exclude<EventQuery & LocationQuery, 'sort' | 'cursor'> {\n    const payload = this.getEventsAPIPayload(location);\n\n    const remove = [\n      'id',\n      'name',\n      'per_page',\n      'sort',\n      'cursor',\n      'field',\n      'equation',\n      'interval',\n    ];\n    for (const key of remove) {\n      delete payload[key];\n    }\n\n    return payload;\n  }\n\n  normalizeDateSelection(location: Location) {\n    const query = (location && location.query) || {};\n\n    // pick only the query strings that we care about\n    const picked = pickRelevantLocationQueryStrings(location);\n\n    const hasDateSelection = this.statsPeriod || (this.start && this.end);\n\n    // an eventview's date selection has higher precedence than the date selection in the query string\n    const dateSelection = hasDateSelection\n      ? {\n          start: this.start,\n          end: this.end,\n          statsPeriod: this.statsPeriod,\n        }\n      : {\n          start: picked.start,\n          end: picked.end,\n          period: decodeScalar(query.period),\n          statsPeriod: picked.statsPeriod,\n        };\n\n    // normalize datetime selection\n    return normalizeDateTimeParams({\n      ...dateSelection,\n      utc: decodeScalar(query.utc),\n    });\n  }\n\n  // Takes an EventView instance and converts it into the format required for the events API\n  getEventsAPIPayload(\n    location: Location,\n    forceAppendRawQueryString?: string\n  ): EventQuery & LocationQuery {\n    // pick only the query strings that we care about\n    const picked = pickRelevantLocationQueryStrings(location);\n\n    // normalize datetime selection\n    const normalizedTimeWindowParams = this.normalizeDateSelection(location);\n\n    const sort =\n      this.sorts.length <= 0\n        ? undefined\n        : this.sorts.length > 1\n        ? encodeSorts(this.sorts)\n        : encodeSort(this.sorts[0]);\n    const fields = this.getFields();\n    const team = this.team.map(proj => String(proj));\n    const project = this.project.map(proj => String(proj));\n    const environment = this.environment as string[];\n\n    let queryString = this.getQueryWithAdditionalConditions();\n    if (forceAppendRawQueryString) {\n      queryString += ' ' + forceAppendRawQueryString;\n    }\n\n    // generate event query\n    const eventQuery = Object.assign(\n      omit(picked, DATETIME_QUERY_STRING_KEYS),\n      normalizedTimeWindowParams,\n      {\n        team,\n        project,\n        environment,\n        field: [...new Set(fields)],\n        sort,\n        per_page: DEFAULT_PER_PAGE,\n        query: queryString,\n      }\n    ) as EventQuery & LocationQuery;\n\n    if (eventQuery.team && !eventQuery.team.length) {\n      delete eventQuery.team;\n    }\n\n    if (!eventQuery.sort) {\n      delete eventQuery.sort;\n    }\n\n    return eventQuery;\n  }\n\n  getResultsViewUrlTarget(slug: string): {pathname: string; query: Query} {\n    return {\n      pathname: `/organizations/${slug}/discover/results/`,\n      query: this.generateQueryStringObject(),\n    };\n  }\n\n  getResultsViewShortUrlTarget(slug: string): {pathname: string; query: Query} {\n    const output = {id: this.id};\n    for (const field of [...Object.values(URL_PARAM), 'cursor']) {\n      if (this[field] && this[field].length) {\n        output[field] = this[field];\n      }\n    }\n    return {\n      pathname: `/organizations/${slug}/discover/results/`,\n      query: cloneDeep(output as any),\n    };\n  }\n\n  getPerformanceTransactionEventsViewUrlTarget(\n    slug: string,\n    options: {\n      breakdown?: SpanOperationBreakdownFilter;\n      showTransactions?: EventsDisplayFilterName;\n      webVital?: WebVital;\n    }\n  ): {pathname: string; query: Query} {\n    const {showTransactions, breakdown, webVital} = options;\n    const output = {\n      sort: encodeSorts(this.sorts),\n      project: this.project,\n      query: this.query,\n      transaction: this.name,\n      showTransactions,\n      breakdown,\n      webVital,\n    };\n\n    for (const field of EXTERNAL_QUERY_STRING_KEYS) {\n      if (this[field] && this[field].length) {\n        output[field] = this[field];\n      }\n    }\n\n    const query = cloneDeep(output as any);\n    return {\n      pathname: `/organizations/${slug}/performance/summary/events/`,\n      query,\n    };\n  }\n\n  sortForField(field: Field, tableMeta: MetaType | undefined): Sort | undefined {\n    if (!tableMeta) {\n      return undefined;\n    }\n    return this.sorts.find(sort => isSortEqualToField(sort, field, tableMeta));\n  }\n\n  sortOnField(\n    field: Field,\n    tableMeta: MetaType,\n    kind?: 'desc' | 'asc',\n    useFunctionFormat?: boolean\n  ): EventView {\n    // check if field can be sorted\n    if (!isFieldSortable(field, tableMeta)) {\n      return this;\n    }\n\n    const needleIndex = this.sorts.findIndex(sort =>\n      isSortEqualToField(sort, field, tableMeta)\n    );\n\n    if (needleIndex >= 0) {\n      const newEventView = this.clone();\n\n      const currentSort = this.sorts[needleIndex];\n\n      const sorts = [...newEventView.sorts];\n      sorts[needleIndex] = kind\n        ? setSortOrder(\n            {...currentSort, ...(useFunctionFormat ? {field: field.field} : {})},\n            kind\n          )\n        : reverseSort({\n            ...currentSort,\n            ...(useFunctionFormat ? {field: field.field} : {}),\n          });\n\n      newEventView.sorts = sorts;\n\n      return newEventView;\n    }\n\n    // field is currently not sorted; so, we sort on it\n    const newEventView = this.clone();\n\n    // invariant: this is not falsey, since sortKey exists\n    const sort = fieldToSort(field, tableMeta, kind, useFunctionFormat)!;\n\n    newEventView.sorts = [sort];\n\n    return newEventView;\n  }\n\n  getYAxisOptions(): SelectValue<string>[] {\n    // Make option set and add the default options in.\n    return uniqBy(\n      this.getAggregateFields()\n        // Only include aggregates that make sense to be graphable (eg. not string or date)\n        .filter(\n          (field: Field) =>\n            isLegalYAxisType(aggregateOutputType(field.field)) ||\n            isAggregateEquation(field.field)\n        )\n        .map((field: Field) => ({\n          label: isEquation(field.field) ? getEquation(field.field) : field.field,\n          value: field.field,\n        }))\n        .concat(CHART_AXIS_OPTIONS),\n      'value'\n    );\n  }\n\n  getYAxis(): string {\n    const yAxisOptions = this.getYAxisOptions();\n\n    const yAxis = this.yAxis;\n    const defaultOption = yAxisOptions[0].value;\n\n    if (!yAxis) {\n      return defaultOption;\n    }\n\n    // ensure current selected yAxis is one of the items in yAxisOptions\n    const result = yAxisOptions.findIndex(\n      (option: SelectValue<string>) => option.value === yAxis\n    );\n\n    if (result >= 0) {\n      return yAxis;\n    }\n\n    return defaultOption;\n  }\n\n  getDisplayOptions(): SelectValue<string>[] {\n    return DISPLAY_MODE_OPTIONS.map(item => {\n      if (item.value === DisplayModes.PREVIOUS) {\n        if (this.start || this.end) {\n          return {...item, disabled: true};\n        }\n      }\n\n      if (item.value === DisplayModes.TOP5 || item.value === DisplayModes.DAILYTOP5) {\n        if (this.getAggregateFields().length === 0) {\n          return {\n            ...item,\n            disabled: true,\n            tooltip: t('Add a function that groups events to use this view.'),\n          };\n        }\n      }\n\n      if (item.value === DisplayModes.DAILY || item.value === DisplayModes.DAILYTOP5) {\n        if (this.getDays() < 1) {\n          return {\n            ...item,\n            disabled: true,\n            tooltip: t('Change the date rage to at least 1 day to use this view.'),\n          };\n        }\n      }\n\n      return item;\n    });\n  }\n\n  getDisplayMode() {\n    const mode = this.display ?? DisplayModes.DEFAULT;\n    const displayOptions = this.getDisplayOptions();\n\n    let display = (Object.values(DisplayModes) as string[]).includes(mode)\n      ? mode\n      : DisplayModes.DEFAULT;\n    const cond = option => option.value === display;\n\n    // Just in case we define a fallback chain that results in an infinite loop.\n    // The number 5 isn't anything special, its just larger than the longest fallback\n    // chain that exists and isn't too big.\n    for (let i = 0; i < 5; i++) {\n      const selectedOption = displayOptions.find(cond);\n      if (selectedOption && !selectedOption.disabled) {\n        return display;\n      }\n      display = DISPLAY_MODE_FALLBACK_OPTIONS[display];\n    }\n\n    // after trying to find an enabled display mode and failing to find one,\n    // we just use the default display mode\n    return DisplayModes.DEFAULT;\n  }\n\n  getQueryWithAdditionalConditions() {\n    const {query} = this;\n    if (this.additionalConditions.isEmpty()) {\n      return query;\n    }\n    const conditions = new MutableSearch(query);\n    Object.entries(this.additionalConditions.filters).forEach(([tag, tagValues]) => {\n      const existingTagValues = conditions.getFilterValues(tag);\n      const newTagValues = tagValues.filter(\n        tagValue => !existingTagValues.includes(tagValue)\n      );\n      if (newTagValues.length) {\n        conditions.addFilterValues(tag, newTagValues);\n      }\n    });\n    return conditions.formatString();\n  }\n}\n\nexport type ImmutableEventView = Readonly<Omit<EventView, 'additionalConditions'>>;\n\nconst isFieldsSimilar = (\n  currentValue: Array<string>,\n  otherValue: Array<string>\n): boolean => {\n  // For equation's their order matters because we alias them based on index\n  const currentEquations = currentValue.filter(isEquation);\n  const otherEquations = otherValue.filter(isEquation);\n\n  // Field orders don't matter, so using a set for comparison\n  const currentFields = new Set(currentValue.filter(value => !isEquation(value)));\n  const otherFields = new Set(otherValue.filter(value => !isEquation(value)));\n\n  if (!isEqual(currentEquations, otherEquations)) {\n    return false;\n  }\n  if (!isEqual(currentFields, otherFields)) {\n    return false;\n  }\n  return true;\n};\n\nexport const isAPIPayloadSimilar = (\n  current: EventQuery & LocationQuery,\n  other: EventQuery & LocationQuery\n): boolean => {\n  const currentKeys = new Set(Object.keys(current));\n  const otherKeys = new Set(Object.keys(other));\n\n  if (!isEqual(currentKeys, otherKeys)) {\n    return false;\n  }\n\n  for (const key of currentKeys) {\n    const currentValue = current[key];\n    const otherValue = other[key];\n    if (key === 'field') {\n      if (!isFieldsSimilar(currentValue, otherValue)) {\n        return false;\n      }\n    } else {\n      const currentTarget = Array.isArray(currentValue)\n        ? new Set(currentValue)\n        : currentValue;\n\n      const otherTarget = Array.isArray(otherValue) ? new Set(otherValue) : otherValue;\n\n      if (!isEqual(currentTarget, otherTarget)) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n};\n\nexport function pickRelevantLocationQueryStrings(location: Location) {\n  const query = location.query || {};\n  const picked = pick(query || {}, EXTERNAL_QUERY_STRING_KEYS);\n\n  return picked;\n}\n\nexport default EventView;\n","import {browserHistory} from 'react-router';\nimport styled from '@emotion/styled';\nimport {Location} from 'history';\nimport partial from 'lodash/partial';\n\nimport Count from 'sentry/components/count';\nimport Duration from 'sentry/components/duration';\nimport FileSize from 'sentry/components/fileSize';\nimport ProjectBadge from 'sentry/components/idBadge/projectBadge';\nimport UserBadge from 'sentry/components/idBadge/userBadge';\nimport ExternalLink from 'sentry/components/links/externalLink';\nimport {RowRectangle} from 'sentry/components/performance/waterfall/rowBar';\nimport {pickBarColor, toPercent} from 'sentry/components/performance/waterfall/utils';\nimport Tooltip from 'sentry/components/tooltip';\nimport UserMisery from 'sentry/components/userMisery';\nimport Version from 'sentry/components/version';\nimport {t} from 'sentry/locale';\nimport {AvatarProject, Organization, Project} from 'sentry/types';\nimport {defined, isUrl} from 'sentry/utils';\nimport trackAdvancedAnalyticsEvent from 'sentry/utils/analytics/trackAdvancedAnalyticsEvent';\nimport EventView, {EventData, MetaType} from 'sentry/utils/discover/eventView';\nimport {\n  AGGREGATIONS,\n  getAggregateAlias,\n  getSpanOperationName,\n  isEquation,\n  isRelativeSpanOperationBreakdownField,\n  SPAN_OP_BREAKDOWN_FIELDS,\n  SPAN_OP_RELATIVE_BREAKDOWN_FIELD,\n} from 'sentry/utils/discover/fields';\nimport {getShortEventId} from 'sentry/utils/events';\nimport {formatFloat, formatPercentage} from 'sentry/utils/formatters';\nimport getDynamicText from 'sentry/utils/getDynamicText';\nimport Projects from 'sentry/utils/projects';\nimport {\n  filterToLocationQuery,\n  SpanOperationBreakdownFilter,\n  stringToFilter,\n} from 'sentry/views/performance/transactionSummary/filter';\n\nimport ArrayValue from './arrayValue';\nimport {\n  BarContainer,\n  Container,\n  FieldDateTime,\n  FieldShortId,\n  FlexContainer,\n  NumberContainer,\n  OverflowLink,\n  UserIcon,\n  VersionContainer,\n} from './styles';\nimport TeamKeyTransactionField from './teamKeyTransactionField';\n\n/**\n * Types, functions and definitions for rendering fields in discover results.\n */\nexport type RenderFunctionBaggage = {\n  location: Location;\n  organization: Organization;\n  eventView?: EventView;\n  unit?: string;\n};\n\ntype FieldFormatterRenderFunction = (\n  field: string,\n  data: EventData,\n  baggage?: RenderFunctionBaggage\n) => React.ReactNode;\n\ntype FieldFormatterRenderFunctionPartial = (\n  data: EventData,\n  baggage: RenderFunctionBaggage\n) => React.ReactNode;\n\ntype FieldFormatter = {\n  isSortable: boolean;\n  renderFunc: FieldFormatterRenderFunction;\n};\n\ntype FieldFormatters = {\n  array: FieldFormatter;\n  boolean: FieldFormatter;\n  date: FieldFormatter;\n  duration: FieldFormatter;\n  integer: FieldFormatter;\n  number: FieldFormatter;\n  percentage: FieldFormatter;\n  size: FieldFormatter;\n  string: FieldFormatter;\n};\n\nexport type FieldTypes = keyof FieldFormatters;\n\nconst EmptyValueContainer = styled('span')`\n  color: ${p => p.theme.gray300};\n`;\nconst emptyValue = <EmptyValueContainer>{t('(no value)')}</EmptyValueContainer>;\nconst emptyStringValue = <EmptyValueContainer>{t('(empty string)')}</EmptyValueContainer>;\n\nexport function nullableValue(value: string | null): string | React.ReactElement {\n  switch (value) {\n    case null:\n      return emptyValue;\n    case '':\n      return emptyStringValue;\n    default:\n      return value;\n  }\n}\n\nexport const SIZE_UNITS = {\n  bit: 1 / 8,\n  byte: 1,\n  kibibyte: 1024,\n  mebibyte: 1024 ** 2,\n  gibibyte: 1024 ** 3,\n  tebibyte: 1024 ** 4,\n  pebibyte: 1024 ** 5,\n  exbibyte: 1024 ** 6,\n  kilobyte: 1000,\n  megabyte: 1000 ** 2,\n  gigabyte: 1000 ** 3,\n  terabyte: 1000 ** 4,\n  petabyte: 1000 ** 5,\n  exabyte: 1000 ** 6,\n};\n\nexport const ABYTE_UNITS = [\n  'kilobyte',\n  'megabyte',\n  'gigabyte',\n  'terabyte',\n  'petabyte',\n  'exabyte',\n];\n\nexport const DURATION_UNITS = {\n  nanosecond: 1 / 1000 ** 2,\n  microsecond: 1 / 1000,\n  millisecond: 1,\n  second: 1000,\n  minute: 1000 * 60,\n  hour: 1000 * 60 * 60,\n  day: 1000 * 60 * 60 * 24,\n  week: 1000 * 60 * 60 * 24 * 7,\n};\n\nexport const PERCENTAGE_UNITS = ['ratio', 'percent'];\n\n/**\n * A mapping of field types to their rendering function.\n * This mapping is used when a field is not defined in SPECIAL_FIELDS\n * and the field is not being coerced to a link.\n *\n * This mapping should match the output sentry.utils.snuba:get_json_type\n */\nexport const FIELD_FORMATTERS: FieldFormatters = {\n  boolean: {\n    isSortable: true,\n    renderFunc: (field, data) => {\n      const value = data[field] ? t('true') : t('false');\n      return <Container>{value}</Container>;\n    },\n  },\n  date: {\n    isSortable: true,\n    renderFunc: (field, data) => (\n      <Container>\n        {data[field]\n          ? getDynamicText({\n              value: <FieldDateTime date={data[field]} year seconds timeZone />,\n              fixed: 'timestamp',\n            })\n          : emptyValue}\n      </Container>\n    ),\n  },\n  duration: {\n    isSortable: true,\n    renderFunc: (field, data, baggage) => {\n      const {unit} = baggage ?? {};\n      return (\n        <NumberContainer>\n          {typeof data[field] === 'number' ? (\n            <Duration\n              seconds={(data[field] * ((unit && DURATION_UNITS[unit]) ?? 1)) / 1000}\n              fixedDigits={2}\n              abbreviation\n            />\n          ) : (\n            emptyValue\n          )}\n        </NumberContainer>\n      );\n    },\n  },\n  integer: {\n    isSortable: true,\n    renderFunc: (field, data) => (\n      <NumberContainer>\n        {typeof data[field] === 'number' ? <Count value={data[field]} /> : emptyValue}\n      </NumberContainer>\n    ),\n  },\n  number: {\n    isSortable: true,\n    renderFunc: (field, data) => (\n      <NumberContainer>\n        {typeof data[field] === 'number' ? formatFloat(data[field], 4) : emptyValue}\n      </NumberContainer>\n    ),\n  },\n  percentage: {\n    isSortable: true,\n    renderFunc: (field, data) => (\n      <NumberContainer>\n        {typeof data[field] === 'number' ? formatPercentage(data[field]) : emptyValue}\n      </NumberContainer>\n    ),\n  },\n  size: {\n    isSortable: true,\n    renderFunc: (field, data, baggage) => {\n      const {unit} = baggage ?? {};\n      return (\n        <NumberContainer>\n          {unit && SIZE_UNITS[unit] && typeof data[field] === 'number' ? (\n            <FileSize\n              bytes={data[field] * SIZE_UNITS[unit]}\n              base={ABYTE_UNITS.includes(unit) ? 10 : 2}\n            />\n          ) : (\n            emptyValue\n          )}\n        </NumberContainer>\n      );\n    },\n  },\n  string: {\n    isSortable: true,\n    renderFunc: (field, data) => {\n      // Some fields have long arrays in them, only show the tail of the data.\n      const value = Array.isArray(data[field])\n        ? data[field].slice(-1)\n        : defined(data[field])\n        ? data[field]\n        : emptyValue;\n      if (isUrl(value)) {\n        return (\n          <Container>\n            <ExternalLink href={value} data-test-id=\"group-tag-url\">\n              {value}\n            </ExternalLink>\n          </Container>\n        );\n      }\n      return <Container>{nullableValue(value)}</Container>;\n    },\n  },\n  array: {\n    isSortable: true,\n    renderFunc: (field, data) => {\n      const value = Array.isArray(data[field]) ? data[field] : [data[field]];\n      return <ArrayValue value={value} />;\n    },\n  },\n};\n\ntype SpecialFieldRenderFunc = (\n  data: EventData,\n  baggage: RenderFunctionBaggage\n) => React.ReactNode;\n\ntype SpecialField = {\n  renderFunc: SpecialFieldRenderFunc;\n  sortField: string | null;\n};\n\ntype SpecialFields = {\n  'count_unique(user)': SpecialField;\n  'error.handled': SpecialField;\n  id: SpecialField;\n  issue: SpecialField;\n  'issue.id': SpecialField;\n  project: SpecialField;\n  release: SpecialField;\n  team_key_transaction: SpecialField;\n  'timestamp.to_day': SpecialField;\n  'timestamp.to_hour': SpecialField;\n  trace: SpecialField;\n  'trend_percentage()': SpecialField;\n  user: SpecialField;\n  'user.display': SpecialField;\n};\n\n/**\n * \"Special fields\" either do not map 1:1 to an single column in the event database,\n * or they require custom UI formatting that can't be handled by the datatype formatters.\n */\nconst SPECIAL_FIELDS: SpecialFields = {\n  id: {\n    sortField: 'id',\n    renderFunc: data => {\n      const id: string | unknown = data?.id;\n      if (typeof id !== 'string') {\n        return null;\n      }\n\n      return <Container>{getShortEventId(id)}</Container>;\n    },\n  },\n  trace: {\n    sortField: 'trace',\n    renderFunc: data => {\n      const id: string | unknown = data?.trace;\n      if (typeof id !== 'string') {\n        return null;\n      }\n\n      return <Container>{getShortEventId(id)}</Container>;\n    },\n  },\n  'issue.id': {\n    sortField: 'issue.id',\n    renderFunc: (data, {organization}) => {\n      const target = {\n        pathname: `/organizations/${organization.slug}/issues/${data['issue.id']}/`,\n      };\n\n      return (\n        <Container>\n          <OverflowLink to={target} aria-label={data['issue.id']}>\n            {data['issue.id']}\n          </OverflowLink>\n        </Container>\n      );\n    },\n  },\n  issue: {\n    sortField: null,\n    renderFunc: (data, {organization}) => {\n      const issueID = data['issue.id'];\n\n      if (!issueID) {\n        return (\n          <Container>\n            <FieldShortId shortId={`${data.issue}`} />\n          </Container>\n        );\n      }\n\n      const target = {\n        pathname: `/organizations/${organization.slug}/issues/${issueID}/`,\n      };\n\n      return (\n        <Container>\n          <OverflowLink to={target} aria-label={issueID}>\n            <FieldShortId shortId={`${data.issue}`} />\n          </OverflowLink>\n        </Container>\n      );\n    },\n  },\n  project: {\n    sortField: 'project',\n    renderFunc: (data, {organization}) => {\n      let slugs: string[] | undefined = undefined;\n      let projectIds: number[] | undefined = undefined;\n      if (typeof data.project === 'number') {\n        projectIds = [data.project];\n      } else {\n        slugs = [data.project];\n      }\n      return (\n        <Container>\n          <Projects orgId={organization.slug} slugs={slugs} projectIds={projectIds}>\n            {({projects}) => {\n              let project: Project | AvatarProject | undefined;\n              if (typeof data.project === 'number') {\n                project = projects.find(p => p.id === data.project.toString());\n              } else {\n                project = projects.find(p => p.slug === data.project);\n              }\n              return (\n                <ProjectBadge\n                  project={project ? project : {slug: data.project}}\n                  avatarSize={16}\n                />\n              );\n            }}\n          </Projects>\n        </Container>\n      );\n    },\n  },\n  user: {\n    sortField: 'user',\n    renderFunc: data => {\n      if (data.user) {\n        const [key, value] = data.user.split(':');\n        const userObj = {\n          id: '',\n          name: '',\n          email: '',\n          username: '',\n          ip_address: '',\n        };\n        userObj[key] = value;\n\n        const badge = <UserBadge user={userObj} hideEmail avatarSize={16} />;\n        return <Container>{badge}</Container>;\n      }\n\n      return <Container>{emptyValue}</Container>;\n    },\n  },\n  'user.display': {\n    sortField: 'user.display',\n    renderFunc: data => {\n      if (data['user.display']) {\n        const userObj = {\n          id: '',\n          name: data['user.display'],\n          email: '',\n          username: '',\n          ip_address: '',\n        };\n\n        const badge = <UserBadge user={userObj} hideEmail avatarSize={16} />;\n        return <Container>{badge}</Container>;\n      }\n\n      return <Container>{emptyValue}</Container>;\n    },\n  },\n  'count_unique(user)': {\n    sortField: 'count_unique(user)',\n    renderFunc: data => {\n      const count = data.count_unique_user ?? data['count_unique(user)'];\n      if (typeof count === 'number') {\n        return (\n          <FlexContainer>\n            <NumberContainer>\n              <Count value={count} />\n            </NumberContainer>\n            <UserIcon size=\"20\" />\n          </FlexContainer>\n        );\n      }\n\n      return <Container>{emptyValue}</Container>;\n    },\n  },\n  release: {\n    sortField: 'release',\n    renderFunc: data =>\n      data.release ? (\n        <VersionContainer>\n          <Version version={data.release} anchor={false} tooltipRawVersion truncate />\n        </VersionContainer>\n      ) : (\n        <Container>{emptyValue}</Container>\n      ),\n  },\n  'error.handled': {\n    sortField: 'error.handled',\n    renderFunc: data => {\n      const values = data['error.handled'];\n      // Transactions will have null, and default events have no handled attributes.\n      if (values === null || values?.length === 0) {\n        return <Container>{emptyValue}</Container>;\n      }\n      const value = Array.isArray(values) ? values : [values];\n      return (\n        <Container>\n          {value.every(v => [1, null].includes(v)) ? 'true' : 'false'}\n        </Container>\n      );\n    },\n  },\n  team_key_transaction: {\n    sortField: null,\n    renderFunc: (data, {organization}) => (\n      <Container>\n        <TeamKeyTransactionField\n          isKeyTransaction={(data.team_key_transaction ?? 0) !== 0}\n          organization={organization}\n          projectSlug={data.project}\n          transactionName={data.transaction}\n        />\n      </Container>\n    ),\n  },\n  'trend_percentage()': {\n    sortField: 'trend_percentage()',\n    renderFunc: data => (\n      <NumberContainer>\n        {typeof data.trend_percentage === 'number'\n          ? formatPercentage(data.trend_percentage - 1)\n          : emptyValue}\n      </NumberContainer>\n    ),\n  },\n  'timestamp.to_hour': {\n    sortField: 'timestamp.to_hour',\n    renderFunc: data => (\n      <Container>\n        {getDynamicText({\n          value: <FieldDateTime date={data['timestamp.to_hour']} year timeZone />,\n          fixed: 'timestamp.to_hour',\n        })}\n      </Container>\n    ),\n  },\n  'timestamp.to_day': {\n    sortField: 'timestamp.to_day',\n    renderFunc: data => (\n      <Container>\n        {getDynamicText({\n          value: <FieldDateTime date={data['timestamp.to_day']} dateOnly year utc />,\n          fixed: 'timestamp.to_day',\n        })}\n      </Container>\n    ),\n  },\n};\n\ntype SpecialFunctionFieldRenderer = (\n  fieldName: string\n) => (data: EventData, baggage: RenderFunctionBaggage) => React.ReactNode;\n\ntype SpecialFunctions = {\n  user_misery: SpecialFunctionFieldRenderer;\n};\n\n/**\n * \"Special functions\" are functions whose values either do not map 1:1 to a single column,\n * or they require custom UI formatting that can't be handled by the datatype formatters.\n */\nconst SPECIAL_FUNCTIONS: SpecialFunctions = {\n  user_misery: fieldName => data => {\n    const userMiseryField = fieldName;\n\n    if (!(userMiseryField in data)) {\n      return <NumberContainer>{emptyValue}</NumberContainer>;\n    }\n\n    const userMisery = data[userMiseryField];\n    if (userMisery === null || isNaN(userMisery)) {\n      return <NumberContainer>{emptyValue}</NumberContainer>;\n    }\n\n    const projectThresholdConfig = 'project_threshold_config';\n    let countMiserableUserField: string = '';\n\n    let miseryLimit: number | undefined = parseInt(\n      userMiseryField.split('(').pop()?.slice(0, -1) || '',\n      10\n    );\n    if (isNaN(miseryLimit)) {\n      countMiserableUserField = 'count_miserable(user)';\n      if (projectThresholdConfig in data) {\n        miseryLimit = data[projectThresholdConfig][1];\n      } else {\n        miseryLimit = undefined;\n      }\n    } else {\n      countMiserableUserField = `count_miserable(user,${miseryLimit})`;\n    }\n\n    const uniqueUsers = data['count_unique(user)'];\n\n    let miserableUsers: number | undefined;\n\n    if (countMiserableUserField in data) {\n      const countMiserableMiseryLimit = parseInt(\n        userMiseryField.split('(').pop()?.slice(0, -1) || '',\n        10\n      );\n      miserableUsers =\n        countMiserableMiseryLimit === miseryLimit ||\n        (isNaN(countMiserableMiseryLimit) && projectThresholdConfig)\n          ? data[countMiserableUserField]\n          : undefined;\n    }\n\n    return (\n      <BarContainer>\n        <UserMisery\n          bars={10}\n          barHeight={20}\n          miseryLimit={miseryLimit}\n          totalUsers={uniqueUsers}\n          userMisery={userMisery}\n          miserableUsers={miserableUsers}\n        />\n      </BarContainer>\n    );\n  },\n};\n\n/**\n * Get the sort field name for a given field if it is special or fallback\n * to the generic type formatter.\n */\nexport function getSortField(\n  field: string,\n  tableMeta: MetaType | undefined\n): string | null {\n  if (SPECIAL_FIELDS.hasOwnProperty(field)) {\n    return SPECIAL_FIELDS[field as keyof typeof SPECIAL_FIELDS].sortField;\n  }\n\n  if (!tableMeta) {\n    return field;\n  }\n\n  if (isEquation(field)) {\n    return field;\n  }\n\n  for (const alias in AGGREGATIONS) {\n    if (field.startsWith(alias)) {\n      return AGGREGATIONS[alias].isSortable ? field : null;\n    }\n  }\n\n  const fieldType = tableMeta[field];\n  if (FIELD_FORMATTERS.hasOwnProperty(fieldType)) {\n    return FIELD_FORMATTERS[fieldType as keyof typeof FIELD_FORMATTERS].isSortable\n      ? field\n      : null;\n  }\n\n  return null;\n}\n\nconst isDurationValue = (data: EventData, field: string): boolean => {\n  return field in data && typeof data[field] === 'number';\n};\n\nconst spanOperationRelativeBreakdownRenderer = (\n  data: EventData,\n  {location, organization, eventView}: RenderFunctionBaggage\n): React.ReactNode => {\n  const sumOfSpanTime = SPAN_OP_BREAKDOWN_FIELDS.reduce(\n    (prev, curr) => (isDurationValue(data, curr) ? prev + data[curr] : prev),\n    0\n  );\n  const cumulativeSpanOpBreakdown = Math.max(sumOfSpanTime, data['transaction.duration']);\n\n  if (\n    SPAN_OP_BREAKDOWN_FIELDS.every(field => !isDurationValue(data, field)) ||\n    cumulativeSpanOpBreakdown === 0\n  ) {\n    return FIELD_FORMATTERS.duration.renderFunc(SPAN_OP_RELATIVE_BREAKDOWN_FIELD, data);\n  }\n\n  let otherPercentage = 1;\n  let orderedSpanOpsBreakdownFields;\n  const sortingOnField = eventView?.sorts?.[0]?.field;\n  if (sortingOnField && (SPAN_OP_BREAKDOWN_FIELDS as string[]).includes(sortingOnField)) {\n    orderedSpanOpsBreakdownFields = [\n      sortingOnField,\n      ...SPAN_OP_BREAKDOWN_FIELDS.filter(op => op !== sortingOnField),\n    ];\n  } else {\n    orderedSpanOpsBreakdownFields = SPAN_OP_BREAKDOWN_FIELDS;\n  }\n  return (\n    <RelativeOpsBreakdown>\n      {orderedSpanOpsBreakdownFields.map(field => {\n        if (!isDurationValue(data, field)) {\n          return null;\n        }\n\n        const operationName = getSpanOperationName(field) ?? 'op';\n        const spanOpDuration: number = data[field];\n        const widthPercentage = spanOpDuration / cumulativeSpanOpBreakdown;\n        otherPercentage = otherPercentage - widthPercentage;\n        if (widthPercentage === 0) {\n          return null;\n        }\n        return (\n          <div key={operationName} style={{width: toPercent(widthPercentage || 0)}}>\n            <Tooltip\n              title={\n                <div>\n                  <div>{operationName}</div>\n                  <div>\n                    <Duration\n                      seconds={spanOpDuration / 1000}\n                      fixedDigits={2}\n                      abbreviation\n                    />\n                  </div>\n                </div>\n              }\n              containerDisplayMode=\"block\"\n            >\n              <RectangleRelativeOpsBreakdown\n                spanBarHatch={false}\n                style={{\n                  backgroundColor: pickBarColor(operationName),\n                  cursor: 'pointer',\n                }}\n                onClick={event => {\n                  event.stopPropagation();\n                  const filter = stringToFilter(operationName);\n                  if (filter === SpanOperationBreakdownFilter.None) {\n                    return;\n                  }\n                  trackAdvancedAnalyticsEvent(\n                    'performance_views.relative_breakdown.selection',\n                    {\n                      action: filter,\n                      organization,\n                    }\n                  );\n                  browserHistory.push({\n                    pathname: location.pathname,\n                    query: {\n                      ...location.query,\n                      ...filterToLocationQuery(filter),\n                    },\n                  });\n                }}\n              />\n            </Tooltip>\n          </div>\n        );\n      })}\n      <div key=\"other\" style={{width: toPercent(otherPercentage || 0)}}>\n        <Tooltip title={<div>{t('Other')}</div>} containerDisplayMode=\"block\">\n          <OtherRelativeOpsBreakdown spanBarHatch={false} />\n        </Tooltip>\n      </div>\n    </RelativeOpsBreakdown>\n  );\n};\n\nconst RelativeOpsBreakdown = styled('div')`\n  position: relative;\n  display: flex;\n`;\n\nconst RectangleRelativeOpsBreakdown = styled(RowRectangle)`\n  position: relative;\n  width: 100%;\n`;\n\nconst OtherRelativeOpsBreakdown = styled(RectangleRelativeOpsBreakdown)`\n  background-color: ${p => p.theme.gray100};\n`;\n\n/**\n * Get the field renderer for the named field and metadata\n *\n * @param {String} field name\n * @param {object} metadata mapping.\n * @param {boolean} isAlias convert the name with getAggregateAlias\n * @returns {Function}\n */\nexport function getFieldRenderer(\n  field: string,\n  meta: MetaType,\n  isAlias: boolean = true\n): FieldFormatterRenderFunctionPartial {\n  if (SPECIAL_FIELDS.hasOwnProperty(field)) {\n    return SPECIAL_FIELDS[field].renderFunc;\n  }\n\n  if (isRelativeSpanOperationBreakdownField(field)) {\n    return spanOperationRelativeBreakdownRenderer;\n  }\n\n  const fieldName = isAlias ? getAggregateAlias(field) : field;\n  const fieldType = meta[fieldName];\n\n  for (const alias in SPECIAL_FUNCTIONS) {\n    if (fieldName.startsWith(alias)) {\n      return SPECIAL_FUNCTIONS[alias](fieldName);\n    }\n  }\n\n  if (FIELD_FORMATTERS.hasOwnProperty(fieldType)) {\n    return partial(FIELD_FORMATTERS[fieldType].renderFunc, fieldName);\n  }\n  return partial(FIELD_FORMATTERS.string.renderFunc, fieldName);\n}\n\ntype FieldTypeFormatterRenderFunctionPartial = (\n  data: EventData,\n  baggage?: RenderFunctionBaggage\n) => React.ReactNode;\n\n/**\n * Get the field renderer for the named field only based on its type from the given\n * metadata.\n *\n * @param {String} field name\n * @param {object} metadata mapping.\n * @param {boolean} isAlias convert the name with getAggregateAlias\n * @returns {Function}\n */\nexport function getFieldFormatter(\n  field: string,\n  meta: MetaType,\n  isAlias: boolean = true\n): FieldTypeFormatterRenderFunctionPartial {\n  const fieldName = isAlias ? getAggregateAlias(field) : field;\n  const fieldType = meta[fieldName];\n\n  if (FIELD_FORMATTERS.hasOwnProperty(fieldType)) {\n    return partial(FIELD_FORMATTERS[fieldType].renderFunc, fieldName);\n  }\n  return partial(FIELD_FORMATTERS.string.renderFunc, fieldName);\n}\n","import isEqual from 'lodash/isEqual';\n\nimport {RELEASE_ADOPTION_STAGES} from 'sentry/constants';\nimport {MetricsType, Organization, SelectValue} from 'sentry/types';\nimport {assert} from 'sentry/types/utils';\nimport {\n  SESSIONS_FIELDS,\n  SESSIONS_OPERATIONS,\n} from 'sentry/views/dashboardsV2/widgetBuilder/releaseWidget/fields';\n\nimport {\n  AGGREGATION_FIELDS,\n  AggregationKey,\n  DISCOVER_FIELDS,\n  FieldKey,\n  FIELDS,\n  FieldValueType,\n  MEASUREMENT_FIELDS,\n  SpanOpBreakdown,\n  WebVital,\n} from '../fields';\n\nexport type Sort = {\n  field: string;\n  kind: 'asc' | 'desc';\n};\n\n// Contains the URL field value & the related table column width.\n// Can be parsed into a Column using explodeField()\nexport type Field = {\n  field: string;\n  // When an alias is defined for a field, it will be shown as a column name in the table visualization.\n  alias?: string;\n  width?: number;\n};\n\n// ColumnType is kept as a string literal union instead of an enum due to the countless uses of it and refactoring would take huge effort.\nexport type ColumnType = `${Exclude<FieldValueType, FieldValueType.NEVER>}`;\n\nexport type ColumnValueType = ColumnType | `${FieldValueType.NEVER}`;\n\nexport type ParsedFunction = {\n  arguments: string[];\n  name: string;\n};\n\ntype ValidateColumnValueFunction = ({name: string, dataType: ColumnType}) => boolean;\n\nexport type ValidateColumnTypes =\n  | ColumnType[]\n  | MetricsType[]\n  | ValidateColumnValueFunction;\n\nexport type AggregateParameter =\n  | {\n      columnTypes: Readonly<ValidateColumnTypes>;\n      kind: 'column';\n      required: boolean;\n      defaultValue?: string;\n    }\n  | {\n      dataType: ColumnType;\n      kind: 'value';\n      required: boolean;\n      defaultValue?: string;\n      placeholder?: string;\n    }\n  | {\n      dataType: string;\n      kind: 'dropdown';\n      options: SelectValue<string>[];\n      required: boolean;\n      defaultValue?: string;\n      placeholder?: string;\n    };\n\nexport type AggregationRefinement = string | undefined;\n\n// The parsed result of a Field.\n// Functions and Fields are handled as subtypes to enable other\n// code to work more simply.\n// This type can be converted into a Field.field using generateFieldAsString()\n// When an alias is defined for a field, it will be shown as a column name in the table visualization.\nexport type QueryFieldValue =\n  | {\n      field: string;\n      kind: 'field';\n      alias?: string;\n    }\n  | {\n      field: string;\n      kind: 'calculatedField';\n      alias?: string;\n    }\n  | {\n      field: string;\n      kind: 'equation';\n      alias?: string;\n    }\n  | {\n      function: [\n        AggregationKeyWithAlias,\n        string,\n        AggregationRefinement,\n        AggregationRefinement\n      ];\n      kind: 'function';\n      alias?: string;\n    };\n\n// Column is just an alias of a Query value\nexport type Column = QueryFieldValue;\n\nexport type Alignments = 'left' | 'right';\n\nconst CONDITIONS_ARGUMENTS: SelectValue<string>[] = [\n  {\n    label: 'is equal to',\n    value: 'equals',\n  },\n  {\n    label: 'is not equal to',\n    value: 'notEquals',\n  },\n  {\n    label: 'is less than',\n    value: 'less',\n  },\n  {\n    label: 'is greater than',\n    value: 'greater',\n  },\n  {\n    label: 'is less than or equal to',\n    value: 'lessOrEquals',\n  },\n  {\n    label: 'is greater than or equal to',\n    value: 'greaterOrEquals',\n  },\n];\n\nconst WEB_VITALS_QUALITY: SelectValue<string>[] = [\n  {\n    label: 'good',\n    value: 'good',\n  },\n  {\n    label: 'meh',\n    value: 'meh',\n  },\n  {\n    label: 'poor',\n    value: 'poor',\n  },\n  {\n    label: 'any',\n    value: 'any',\n  },\n];\n\nconst getDocsAndOutputType = (key: AggregationKey) => {\n  return {\n    documentation: AGGREGATION_FIELDS[key].desc,\n    outputType: AGGREGATION_FIELDS[key].valueType as AggregationOutputType,\n  };\n};\n\n// Refer to src/sentry/search/events/fields.py\n// Try to keep functions logically sorted, ie. all the count functions are grouped together\nexport const AGGREGATIONS = {\n  [AggregationKey.Count]: {\n    ...getDocsAndOutputType(AggregationKey.Count),\n    parameters: [],\n    isSortable: true,\n    multiPlotType: 'area',\n  },\n  [AggregationKey.CountUnique]: {\n    ...getDocsAndOutputType(AggregationKey.CountUnique),\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['string', 'integer', 'number', 'duration', 'date', 'boolean'],\n        defaultValue: 'user',\n        required: true,\n      },\n    ],\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  [AggregationKey.CountMiserable]: {\n    ...getDocsAndOutputType(AggregationKey.CountMiserable),\n    getFieldOverrides({parameter}: DefaultValueInputs) {\n      if (parameter.kind === 'column') {\n        return {defaultValue: 'user'};\n      }\n      return {\n        defaultValue: parameter.defaultValue,\n      };\n    },\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateAllowedColumns(['user']),\n        defaultValue: 'user',\n        required: true,\n      },\n      {\n        kind: 'value',\n        dataType: 'number',\n        defaultValue: '300',\n        required: true,\n      },\n    ],\n    isSortable: true,\n    multiPlotType: 'area',\n  },\n  [AggregationKey.CountIf]: {\n    ...getDocsAndOutputType(AggregationKey.CountIf),\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateDenyListColumns(\n          ['string', 'duration', 'number'],\n          ['id', 'issue', 'user.display']\n        ),\n        defaultValue: 'transaction.duration',\n        required: true,\n      },\n      {\n        kind: 'dropdown',\n        options: CONDITIONS_ARGUMENTS,\n        dataType: 'string',\n        defaultValue: CONDITIONS_ARGUMENTS[0].value,\n        required: true,\n      },\n      {\n        kind: 'value',\n        dataType: 'string',\n        defaultValue: '300',\n        required: true,\n      },\n    ],\n    isSortable: true,\n    multiPlotType: 'area',\n  },\n  [AggregationKey.CountWebVitals]: {\n    ...getDocsAndOutputType(AggregationKey.CountWebVitals),\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateAllowedColumns([\n          WebVital.LCP,\n          WebVital.FP,\n          WebVital.FCP,\n          WebVital.FID,\n          WebVital.CLS,\n        ]),\n        defaultValue: WebVital.LCP,\n        required: true,\n      },\n      {\n        kind: 'dropdown',\n        options: WEB_VITALS_QUALITY,\n        dataType: 'string',\n        defaultValue: WEB_VITALS_QUALITY[0].value,\n        required: true,\n      },\n    ],\n    isSortable: true,\n    multiPlotType: 'area',\n  },\n  [AggregationKey.Eps]: {\n    ...getDocsAndOutputType(AggregationKey.Eps),\n    parameters: [],\n    isSortable: true,\n    multiPlotType: 'area',\n  },\n  [AggregationKey.Epm]: {\n    ...getDocsAndOutputType(AggregationKey.Epm),\n    parameters: [],\n    isSortable: true,\n    multiPlotType: 'area',\n  },\n  [AggregationKey.FailureCount]: {\n    ...getDocsAndOutputType(AggregationKey.FailureCount),\n    parameters: [],\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  [AggregationKey.Min]: {\n    ...getDocsAndOutputType(AggregationKey.Min),\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate([\n          'integer',\n          'number',\n          'duration',\n          'date',\n          'percentage',\n        ]),\n        defaultValue: 'transaction.duration',\n        required: true,\n      },\n    ],\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  [AggregationKey.Max]: {\n    ...getDocsAndOutputType(AggregationKey.Max),\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate([\n          'integer',\n          'number',\n          'duration',\n          'date',\n          'percentage',\n        ]),\n        defaultValue: 'transaction.duration',\n        required: true,\n      },\n    ],\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  [AggregationKey.Sum]: {\n    ...getDocsAndOutputType(AggregationKey.Sum),\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate(['duration', 'number', 'percentage']),\n        required: true,\n        defaultValue: 'transaction.duration',\n      },\n    ],\n    isSortable: true,\n    multiPlotType: 'area',\n  },\n  [AggregationKey.Any]: {\n    ...getDocsAndOutputType(AggregationKey.Any),\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['string', 'integer', 'number', 'duration', 'date', 'boolean'],\n        required: true,\n        defaultValue: 'transaction.duration',\n      },\n    ],\n    isSortable: true,\n  },\n  [AggregationKey.P50]: {\n    ...getDocsAndOutputType(AggregationKey.P50),\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate(['duration', 'number', 'percentage']),\n        defaultValue: 'transaction.duration',\n        required: false,\n      },\n    ],\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  [AggregationKey.P75]: {\n    ...getDocsAndOutputType(AggregationKey.P75),\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate(['duration', 'number', 'percentage']),\n        defaultValue: 'transaction.duration',\n        required: false,\n      },\n    ],\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  [AggregationKey.P95]: {\n    ...getDocsAndOutputType(AggregationKey.P95),\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate(['duration', 'number', 'percentage']),\n        defaultValue: 'transaction.duration',\n        required: false,\n      },\n    ],\n    type: [],\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  [AggregationKey.P99]: {\n    ...getDocsAndOutputType(AggregationKey.P99),\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate(['duration', 'number', 'percentage']),\n        defaultValue: 'transaction.duration',\n        required: false,\n      },\n    ],\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  [AggregationKey.P100]: {\n    ...getDocsAndOutputType(AggregationKey.P100),\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate(['duration', 'number', 'percentage']),\n        defaultValue: 'transaction.duration',\n        required: false,\n      },\n    ],\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  [AggregationKey.Percentile]: {\n    ...getDocsAndOutputType(AggregationKey.Percentile),\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate(['duration', 'number', 'percentage']),\n        defaultValue: 'transaction.duration',\n        required: true,\n      },\n      {\n        kind: 'value',\n        dataType: 'number',\n        defaultValue: '0.5',\n        required: true,\n      },\n    ],\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  [AggregationKey.Avg]: {\n    ...getDocsAndOutputType(AggregationKey.Avg),\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: validateForNumericAggregate(['duration', 'number', 'percentage']),\n        defaultValue: 'transaction.duration',\n        required: true,\n      },\n    ],\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  [AggregationKey.Apdex]: {\n    ...getDocsAndOutputType(AggregationKey.Apdex),\n    parameters: [\n      {\n        kind: 'value',\n        dataType: 'number',\n        defaultValue: '300',\n        required: true,\n      },\n    ],\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  [AggregationKey.UserMisery]: {\n    ...getDocsAndOutputType(AggregationKey.UserMisery),\n    parameters: [\n      {\n        kind: 'value',\n        dataType: 'number',\n        defaultValue: '300',\n        required: true,\n      },\n    ],\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  [AggregationKey.FailureRate]: {\n    ...getDocsAndOutputType(AggregationKey.FailureRate),\n    parameters: [],\n    isSortable: true,\n    multiPlotType: 'line',\n  },\n  [AggregationKey.LastSeen]: {\n    ...getDocsAndOutputType(AggregationKey.LastSeen),\n    parameters: [],\n    isSortable: true,\n  },\n} as const;\n\n// TPM and TPS are aliases that are only used in Performance\nexport const ALIASES = {\n  tpm: AggregationKey.Epm,\n  tps: AggregationKey.Eps,\n};\n\nassert(AGGREGATIONS as Readonly<{[key in AggregationKey]: Aggregation}>);\n\nexport type AggregationKeyWithAlias = `${AggregationKey}` | keyof typeof ALIASES | '';\n\nexport type AggregationOutputType = Extract<\n  ColumnType,\n  'number' | 'integer' | 'date' | 'duration' | 'percentage' | 'string' | 'size'\n>;\n\nexport type PlotType = 'bar' | 'line' | 'area';\n\ntype DefaultValueInputs = {\n  parameter: AggregateParameter;\n};\n\nexport type Aggregation = {\n  /**\n   * Can this function be used in a sort result\n   */\n  isSortable: boolean;\n  /**\n   * The output type. Null means to inherit from the field.\n   */\n  outputType: AggregationOutputType | null;\n  /**\n   * List of parameters for the function.\n   */\n  parameters: Readonly<AggregateParameter[]>;\n  getFieldOverrides?: (\n    data: DefaultValueInputs\n  ) => Partial<Omit<AggregateParameter, 'kind'>>;\n  /**\n   * How this function should be plotted when shown in a multiseries result (top5)\n   * Optional because some functions cannot be plotted (strings/dates)\n   */\n  multiPlotType?: PlotType;\n};\n\nexport const DEPRECATED_FIELDS: string[] = [FieldKey.CULPRIT];\n\nexport type FieldTag = {\n  key: FieldKey;\n  name: FieldKey;\n};\n\nexport const FIELD_TAGS = Object.freeze(\n  Object.fromEntries(DISCOVER_FIELDS.map(item => [item, {key: item, name: item}]))\n);\n\nexport const SEMVER_TAGS = {\n  [FieldKey.RELEASE_VERSION]: {\n    key: FieldKey.RELEASE_VERSION,\n    name: FieldKey.RELEASE_VERSION,\n  },\n  [FieldKey.RELEASE_BUILD]: {\n    key: FieldKey.RELEASE_BUILD,\n    name: FieldKey.RELEASE_BUILD,\n  },\n  [FieldKey.RELEASE_PACKAGE]: {\n    key: FieldKey.RELEASE_PACKAGE,\n    name: FieldKey.RELEASE_PACKAGE,\n  },\n  [FieldKey.RELEASE_STAGE]: {\n    key: FieldKey.RELEASE_STAGE,\n    name: FieldKey.RELEASE_STAGE,\n    predefined: true,\n    values: RELEASE_ADOPTION_STAGES,\n  },\n};\n\n/**\n * Some tag keys should never be formatted as `tag[...]`\n * when used as a filter because they are predefined.\n */\nconst EXCLUDED_TAG_KEYS = new Set(['release']);\n\nexport function formatTagKey(key: string): string {\n  // Some tags may be normalized from context, but not all of them are.\n  // This supports a user making a custom tag with the same name as one\n  // that comes from context as all of these are also tags.\n  if (key in FIELD_TAGS && !EXCLUDED_TAG_KEYS.has(key)) {\n    return `tags[${key}]`;\n  }\n  return key;\n}\n\n// Allows for a less strict field key definition in cases we are returning custom strings as fields\nexport type LooseFieldKey = FieldKey | string | '';\n\nexport type MeasurementType =\n  | FieldValueType.DURATION\n  | FieldValueType.NUMBER\n  | FieldValueType.INTEGER\n  | FieldValueType.PERCENTAGE;\n\nexport function isSpanOperationBreakdownField(field: string) {\n  return field.startsWith('spans.');\n}\n\nexport const SPAN_OP_RELATIVE_BREAKDOWN_FIELD = 'span_ops_breakdown.relative';\n\nexport function isRelativeSpanOperationBreakdownField(field: string) {\n  return field === SPAN_OP_RELATIVE_BREAKDOWN_FIELD;\n}\n\nexport const SPAN_OP_BREAKDOWN_FIELDS = Object.values(SpanOpBreakdown);\n\n// This list contains fields/functions that are available with performance-view feature.\nexport const TRACING_FIELDS = [\n  AggregationKey.Avg,\n  AggregationKey.Sum,\n  FieldKey.TRANSACTION_DURATION,\n  FieldKey.TRANSACTION_OP,\n  FieldKey.TRANSACTION_STATUS,\n  AggregationKey.P50,\n  AggregationKey.P75,\n  AggregationKey.P95,\n  AggregationKey.P99,\n  AggregationKey.P100,\n  AggregationKey.Percentile,\n  AggregationKey.FailureRate,\n  AggregationKey.Apdex,\n  AggregationKey.CountMiserable,\n  AggregationKey.UserMisery,\n  AggregationKey.Eps,\n  AggregationKey.Epm,\n  'team_key_transaction',\n  ...Object.keys(MEASUREMENT_FIELDS),\n  ...SPAN_OP_BREAKDOWN_FIELDS,\n  SPAN_OP_RELATIVE_BREAKDOWN_FIELD,\n];\n\nexport const MEASUREMENT_PATTERN = /^measurements\\.([a-zA-Z0-9-_.]+)$/;\nexport const SPAN_OP_BREAKDOWN_PATTERN = /^spans\\.([a-zA-Z0-9-_.]+)$/;\n\nexport function isMeasurement(field: string): boolean {\n  const results = field.match(MEASUREMENT_PATTERN);\n  return !!results;\n}\n\nexport function measurementType(field: string): MeasurementType {\n  if (MEASUREMENT_FIELDS.hasOwnProperty(field)) {\n    return MEASUREMENT_FIELDS[field].valueType as MeasurementType;\n  }\n\n  return FieldValueType.NUMBER;\n}\n\nexport function getMeasurementSlug(field: string): string | null {\n  const results = field.match(MEASUREMENT_PATTERN);\n  if (results && results.length >= 2) {\n    return results[1];\n  }\n  return null;\n}\n\nconst AGGREGATE_PATTERN = /^(\\w+)\\((.*)?\\)$/;\n// Identical to AGGREGATE_PATTERN, but without the $ for newline, or ^ for start of line\nconst AGGREGATE_BASE = /(\\w+)\\((.*)?\\)/g;\n\nexport function getAggregateArg(field: string): string | null {\n  // only returns the first argument if field is an aggregate\n  const result = parseFunction(field);\n\n  if (result && result.arguments.length > 0) {\n    return result.arguments[0];\n  }\n\n  return null;\n}\n\nexport function parseFunction(field: string): ParsedFunction | null {\n  const results = field.match(AGGREGATE_PATTERN);\n  if (results && results.length === 3) {\n    return {\n      name: results[1],\n      arguments: parseArguments(results[1], results[2]),\n    };\n  }\n\n  return null;\n}\n\nexport function parseArguments(functionText: string, columnText: string): string[] {\n  // Some functions take a quoted string for their arguments that may contain commas\n  // This function attempts to be identical with the similarly named parse_arguments\n  // found in src/sentry/search/events/fields.py\n  if (\n    (functionText !== 'to_other' &&\n      functionText !== 'count_if' &&\n      functionText !== 'spans_histogram') ||\n    columnText.length === 0\n  ) {\n    return columnText ? columnText.split(',').map(result => result.trim()) : [];\n  }\n\n  const args: string[] = [];\n\n  let quoted = false;\n  let escaped = false;\n\n  let i: number = 0;\n  let j: number = 0;\n\n  while (j < columnText.length) {\n    if (i === j && columnText[j] === '\"') {\n      // when we see a quote at the beginning of\n      // an argument, then this is a quoted string\n      quoted = true;\n    } else if (i === j && columnText[j] === ' ') {\n      // argument has leading spaces, skip over them\n      i += 1;\n    } else if (quoted && !escaped && columnText[j] === '\\\\') {\n      // when we see a slash inside a quoted string,\n      // the next character is an escape character\n      escaped = true;\n    } else if (quoted && !escaped && columnText[j] === '\"') {\n      // when we see a non-escaped quote while inside\n      // of a quoted string, we should end it\n      quoted = false;\n    } else if (quoted && escaped) {\n      // when we are inside a quoted string and have\n      // begun an escape character, we should end it\n      escaped = false;\n    } else if (quoted && columnText[j] === ',') {\n      // when we are inside a quoted string and see\n      // a comma, it should not be considered an\n      // argument separator\n    } else if (columnText[j] === ',') {\n      // when we see a comma outside of a quoted string\n      // it is an argument separator\n      args.push(columnText.substring(i, j).trim());\n      i = j + 1;\n    }\n    j += 1;\n  }\n\n  if (i !== j) {\n    // add in the last argument if any\n    args.push(columnText.substring(i).trim());\n  }\n\n  return args;\n}\n\n// `|` is an invalid field character, so it is used to determine whether a field is an equation or not\nexport const EQUATION_PREFIX = 'equation|';\nconst EQUATION_ALIAS_PATTERN = /^equation\\[(\\d+)\\]$/;\nexport const CALCULATED_FIELD_PREFIX = 'calculated|';\n\nexport function isEquation(field: string): boolean {\n  return field.startsWith(EQUATION_PREFIX);\n}\n\nexport function isEquationAlias(field: string): boolean {\n  return EQUATION_ALIAS_PATTERN.test(field);\n}\n\nexport function maybeEquationAlias(field: string): boolean {\n  return field.includes(EQUATION_PREFIX);\n}\n\nexport function stripEquationPrefix(field: string): string {\n  return field.replace(EQUATION_PREFIX, '');\n}\n\nexport function getEquationAliasIndex(field: string): number {\n  const results = field.match(EQUATION_ALIAS_PATTERN);\n\n  if (results && results.length === 2) {\n    return parseInt(results[1], 10);\n  }\n  return -1;\n}\n\nexport function getEquation(field: string): string {\n  return field.slice(EQUATION_PREFIX.length);\n}\n\nexport function isAggregateEquation(field: string): boolean {\n  const results = field.match(AGGREGATE_BASE);\n\n  return isEquation(field) && results !== null && results.length > 0;\n}\n\nexport function isLegalEquationColumn(column: Column): boolean {\n  // Any isn't allowed in arithmetic\n  if (column.kind === 'function' && column.function[0] === 'any') {\n    return false;\n  }\n\n  const columnType = getColumnType(column);\n  return columnType === 'number' || columnType === 'integer' || columnType === 'duration';\n}\n\nexport function generateAggregateFields(\n  organization: Organization,\n  eventFields: readonly Field[] | Field[],\n  excludeFields: readonly string[] = []\n): Field[] {\n  const functions = Object.keys(AGGREGATIONS);\n  const fields = Object.values(eventFields).map(field => field.field);\n  functions.forEach(func => {\n    const parameters = AGGREGATIONS[func].parameters.map(param => {\n      const overrides = AGGREGATIONS[func].getFieldOverrides;\n      if (typeof overrides === 'undefined') {\n        return param;\n      }\n      return {\n        ...param,\n        ...overrides({parameter: param, organization}),\n      };\n    });\n\n    if (parameters.every(param => typeof param.defaultValue !== 'undefined')) {\n      const newField = `${func}(${parameters\n        .map(param => param.defaultValue)\n        .join(',')})`;\n      if (fields.indexOf(newField) === -1 && excludeFields.indexOf(newField) === -1) {\n        fields.push(newField);\n      }\n    }\n  });\n  return fields.map(field => ({field})) as Field[];\n}\n\nexport function isDerivedMetric(field: string): boolean {\n  return field.startsWith(CALCULATED_FIELD_PREFIX);\n}\n\nexport function stripDerivedMetricsPrefix(field: string): string {\n  return field.replace(CALCULATED_FIELD_PREFIX, '');\n}\n\nexport function explodeFieldString(field: string, alias?: string): Column {\n  if (isEquation(field)) {\n    return {kind: 'equation', field: getEquation(field), alias};\n  }\n\n  if (isDerivedMetric(field)) {\n    return {kind: 'calculatedField', field: stripDerivedMetricsPrefix(field), alias};\n  }\n\n  const results = parseFunction(field);\n\n  if (results) {\n    return {\n      kind: 'function',\n      function: [\n        results.name as AggregationKey,\n        results.arguments[0] ?? '',\n        results.arguments[1] as AggregationRefinement,\n        results.arguments[2] as AggregationRefinement,\n      ],\n      alias,\n    };\n  }\n\n  return {kind: 'field', field, alias};\n}\n\nexport function generateFieldAsString(value: QueryFieldValue): string {\n  if (value.kind === 'field') {\n    return value.field;\n  }\n\n  if (value.kind === 'calculatedField') {\n    return `${CALCULATED_FIELD_PREFIX}${value.field}`;\n  }\n\n  if (value.kind === 'equation') {\n    return `${EQUATION_PREFIX}${value.field}`;\n  }\n\n  const aggregation = value.function[0];\n  const parameters = value.function.slice(1).filter(i => i);\n  return `${aggregation}(${parameters.join(',')})`;\n}\n\nexport function explodeField(field: Field): Column {\n  return explodeFieldString(field.field, field.alias);\n}\n\n/**\n * Get the alias that the API results will have for a given aggregate function name\n */\nexport function getAggregateAlias(field: string): string {\n  const result = parseFunction(field);\n\n  if (!result) {\n    return field;\n  }\n\n  let alias = result.name;\n\n  if (result.arguments.length > 0) {\n    alias += '_' + result.arguments.join('_');\n  }\n\n  return alias.replace(/[^\\w]/g, '_').replace(/^_+/g, '').replace(/_+$/, '');\n}\n\n/**\n * Check if a field name looks like an aggregate function or known aggregate alias.\n */\nexport function isAggregateField(field: string): boolean {\n  return parseFunction(field) !== null;\n}\n\nexport function isAggregateFieldOrEquation(field: string): boolean {\n  return isAggregateField(field) || isAggregateEquation(field) || isNumericMetrics(field);\n}\n\n/**\n * Temporary hardcoded hack to enable testing derived metrics.\n * Can be removed after we get rid of getAggregateFields\n */\nexport function isNumericMetrics(field: string): boolean {\n  return [\n    'session.crash_free_rate',\n    'session.crashed',\n    'session.errored_preaggregated',\n    'session.errored_set',\n    'session.init',\n  ].includes(field);\n}\n\nexport function getAggregateFields(fields: string[]): string[] {\n  return fields.filter(\n    field =>\n      isAggregateField(field) || isAggregateEquation(field) || isNumericMetrics(field)\n  );\n}\n\nexport function getColumnsAndAggregates(fields: string[]): {\n  aggregates: string[];\n  columns: string[];\n} {\n  const aggregates = getAggregateFields(fields);\n  const columns = fields.filter(field => !!!aggregates.includes(field));\n  return {columns, aggregates};\n}\n\nexport function getColumnsAndAggregatesAsStrings(fields: QueryFieldValue[]): {\n  aggregates: string[];\n  columns: string[];\n  fieldAliases: string[];\n} {\n  // TODO(dam): distinguish between metrics, derived metrics and tags\n  const aggregateFields: string[] = [];\n  const nonAggregateFields: string[] = [];\n  const fieldAliases: string[] = [];\n\n  for (const field of fields) {\n    const fieldString = generateFieldAsString(field);\n    if (field.kind === 'function' || field.kind === 'calculatedField') {\n      aggregateFields.push(fieldString);\n    } else if (field.kind === 'equation') {\n      if (isAggregateEquation(fieldString)) {\n        aggregateFields.push(fieldString);\n      } else {\n        nonAggregateFields.push(fieldString);\n      }\n    } else {\n      nonAggregateFields.push(fieldString);\n    }\n\n    fieldAliases.push(field.alias ?? '');\n  }\n\n  return {aggregates: aggregateFields, columns: nonAggregateFields, fieldAliases};\n}\n\n/**\n * Convert a function string into type it will output.\n * This is useful when you need to format values in tooltips,\n * or in series markers.\n */\nexport function aggregateOutputType(field: string | undefined): AggregationOutputType {\n  if (!field) {\n    return 'number';\n  }\n  const result = parseFunction(field);\n  if (!result) {\n    return 'number';\n  }\n  const outputType = aggregateFunctionOutputType(result.name, result.arguments[0]);\n  if (outputType === null) {\n    return 'number';\n  }\n  return outputType;\n}\n\n/**\n * Converts a function string and its first argument into its output type.\n * - If the function has a fixed output type, that will be the result.\n * - If the function does not define an output type, the output type will be equal to\n *   the type of its first argument.\n * - If the function has an optional first argument, and it was not defined, make sure\n *   to use the default argument as the first argument.\n * - If the type could not be determined, return null.\n */\nexport function aggregateFunctionOutputType(\n  funcName: string,\n  firstArg: string | undefined\n): AggregationOutputType | null {\n  const aggregate =\n    AGGREGATIONS[ALIASES[funcName] || funcName] ?? SESSIONS_OPERATIONS[funcName];\n\n  // Attempt to use the function's outputType.\n  if (aggregate?.outputType) {\n    return aggregate.outputType;\n  }\n\n  // If the first argument is undefined and it is not required,\n  // then we attempt to get the default value.\n  if (!firstArg && aggregate?.parameters?.[0]) {\n    if (aggregate.parameters[0].required === false) {\n      firstArg = aggregate.parameters[0].defaultValue;\n    }\n  }\n\n  if (firstArg && SESSIONS_FIELDS.hasOwnProperty(firstArg)) {\n    return SESSIONS_FIELDS[firstArg].type as AggregationOutputType;\n  }\n\n  // If the function is an inherit type it will have a field as\n  // the first parameter and we can use that to get the type.\n  if (firstArg && FIELDS.hasOwnProperty(firstArg)) {\n    return FIELDS[firstArg].valueType as AggregationOutputType;\n  }\n\n  if (firstArg && isMeasurement(firstArg)) {\n    return measurementType(firstArg);\n  }\n\n  if (firstArg && isSpanOperationBreakdownField(firstArg)) {\n    return 'duration';\n  }\n\n  return null;\n}\n\nexport function errorsAndTransactionsAggregateFunctionOutputType(\n  funcName: string,\n  firstArg: string | undefined\n): AggregationOutputType | null {\n  const aggregate = AGGREGATIONS[ALIASES[funcName] || funcName];\n\n  // Attempt to use the function's outputType.\n  if (aggregate?.outputType) {\n    return aggregate.outputType;\n  }\n\n  // If the first argument is undefined and it is not required,\n  // then we attempt to get the default value.\n  if (!firstArg && aggregate?.parameters?.[0]) {\n    if (aggregate.parameters[0].required === false) {\n      firstArg = aggregate.parameters[0].defaultValue;\n    }\n  }\n\n  // If the function is an inherit type it will have a field as\n  // the first parameter and we can use that to get the type.\n  if (firstArg && FIELDS.hasOwnProperty(firstArg)) {\n    return FIELDS[firstArg].valueType as AggregationOutputType;\n  }\n\n  if (firstArg && isMeasurement(firstArg)) {\n    return measurementType(firstArg);\n  }\n\n  if (firstArg && isSpanOperationBreakdownField(firstArg)) {\n    return 'duration';\n  }\n\n  return null;\n}\n\nexport function sessionsAggregateFunctionOutputType(\n  funcName: string,\n  firstArg: string | undefined\n): AggregationOutputType | null {\n  const aggregate = SESSIONS_OPERATIONS[funcName];\n\n  // Attempt to use the function's outputType.\n  if (aggregate?.outputType) {\n    return aggregate.outputType;\n  }\n\n  // If the first argument is undefined and it is not required,\n  // then we attempt to get the default value.\n  if (!firstArg && aggregate?.parameters?.[0]) {\n    if (aggregate.parameters[0].required === false) {\n      firstArg = aggregate.parameters[0].defaultValue;\n    }\n  }\n\n  if (firstArg && SESSIONS_FIELDS.hasOwnProperty(firstArg)) {\n    return SESSIONS_FIELDS[firstArg].type as AggregationOutputType;\n  }\n\n  return null;\n}\n\n/**\n * Get the multi-series chart type for an aggregate function.\n */\nexport function aggregateMultiPlotType(field: string): PlotType {\n  if (isEquation(field)) {\n    return 'line';\n  }\n  const result = parseFunction(field);\n  // Handle invalid data.\n  if (!result) {\n    return 'area';\n  }\n  if (!AGGREGATIONS.hasOwnProperty(result.name)) {\n    return 'area';\n  }\n  return AGGREGATIONS[result.name].multiPlotType;\n}\n\nfunction validateForNumericAggregate(\n  validColumnTypes: ColumnType[]\n): ValidateColumnValueFunction {\n  return function ({name, dataType}: {dataType: ColumnType; name: string}): boolean {\n    // these built-in columns cannot be applied to numeric aggregates such as percentile(...)\n    if (\n      [\n        FieldKey.DEVICE_BATTERY_LEVEL,\n        FieldKey.STACK_COLNO,\n        FieldKey.STACK_LINENO,\n        FieldKey.STACK_STACK_LEVEL,\n      ].includes(name as FieldKey)\n    ) {\n      return false;\n    }\n\n    return validColumnTypes.includes(dataType);\n  };\n}\n\nfunction validateDenyListColumns(\n  validColumnTypes: ColumnType[],\n  deniedColumns: string[]\n): ValidateColumnValueFunction {\n  return function ({name, dataType}: {dataType: ColumnType; name: string}): boolean {\n    return validColumnTypes.includes(dataType) && !deniedColumns.includes(name);\n  };\n}\n\nfunction validateAllowedColumns(validColumns: string[]): ValidateColumnValueFunction {\n  return function ({name}): boolean {\n    return validColumns.includes(name);\n  };\n}\n\nconst alignedTypes: ColumnValueType[] = ['number', 'duration', 'integer', 'percentage'];\n\nexport function fieldAlignment(\n  columnName: string,\n  columnType?: undefined | ColumnValueType,\n  metadata?: Record<string, ColumnValueType>\n): Alignments {\n  let align: Alignments = 'left';\n  if (columnType) {\n    align = alignedTypes.includes(columnType) ? 'right' : 'left';\n  }\n  if (columnType === undefined || columnType === 'never') {\n    // fallback to align the column based on the table metadata\n    const maybeType = metadata ? metadata[getAggregateAlias(columnName)] : undefined;\n\n    if (maybeType !== undefined && alignedTypes.includes(maybeType)) {\n      align = 'right';\n    }\n  }\n  return align;\n}\n\n/**\n * Match on types that are legal to show on a timeseries chart.\n */\nexport function isLegalYAxisType(match: ColumnType | MetricsType) {\n  return ['number', 'integer', 'duration', 'percentage'].includes(match);\n}\n\nexport function getSpanOperationName(field: string): string | null {\n  const results = field.match(SPAN_OP_BREAKDOWN_PATTERN);\n  if (results && results.length >= 2) {\n    return results[1];\n  }\n  return null;\n}\n\nexport function getColumnType(column: Column): ColumnType {\n  if (column.kind === 'function') {\n    const outputType = aggregateFunctionOutputType(\n      column.function[0],\n      column.function[1]\n    );\n    if (outputType !== null) {\n      return outputType;\n    }\n  } else if (column.kind === 'field') {\n    if (FIELDS.hasOwnProperty(column.field)) {\n      return FIELDS[column.field].valueType as ColumnType;\n    }\n    if (isMeasurement(column.field)) {\n      return measurementType(column.field);\n    }\n    if (isSpanOperationBreakdownField(column.field)) {\n      return 'duration';\n    }\n  }\n  return 'string';\n}\n\nexport function hasDuplicate(columnList: Column[], column: Column): boolean {\n  if (column.kind !== 'function' && column.kind !== 'field') {\n    return false;\n  }\n  return columnList.filter(newColumn => isEqual(newColumn, column)).length > 1;\n}\n","import styled from '@emotion/styled';\n\nimport DateTime from 'sentry/components/dateTime';\nimport Link from 'sentry/components/links/link';\nimport ShortId from 'sentry/components/shortId';\nimport {IconUser} from 'sentry/icons/iconUser';\nimport space from 'sentry/styles/space';\n\n// Styled components used to render discover result sets.\n\nexport const Container = styled('div')`\n  ${p => p.theme.overflowEllipsis};\n`;\n\nexport const VersionContainer = styled('div')`\n  display: flex;\n`;\n\nexport const NumberContainer = styled('div')`\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n  ${p => p.theme.overflowEllipsis};\n`;\n\nexport const FieldDateTime = styled(DateTime)`\n  color: ${p => p.theme.gray300};\n  font-variant-numeric: tabular-nums;\n  ${p => p.theme.overflowEllipsis};\n`;\n\nexport const OverflowLink = styled(Link)`\n  ${p => p.theme.overflowEllipsis};\n`;\n\nexport const FieldShortId = styled(ShortId)`\n  justify-content: flex-start;\n  display: block;\n`;\n\nexport const BarContainer = styled('div')`\n  max-width: 80px;\n  margin-left: auto;\n`;\n\nexport const FlexContainer = styled('div')`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  width: 100%;\n`;\n\nexport const UserIcon = styled(IconUser)`\n  margin-left: ${space(1)};\n  color: ${p => p.theme.gray400};\n`;\n\nexport const ActorContainer = styled('div')`\n  display: flex;\n  justify-content: center;\n  :hover {\n    cursor: default;\n  }\n`;\n","import {Component} from 'react';\n\nimport Button from 'sentry/components/button';\nimport TeamKeyTransaction, {\n  TitleProps,\n} from 'sentry/components/performance/teamKeyTransaction';\nimport * as TeamKeyTransactionManager from 'sentry/components/performance/teamKeyTransactionsManager';\nimport Tooltip from 'sentry/components/tooltip';\nimport {IconStar} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport {Organization, Project} from 'sentry/types';\nimport {defined} from 'sentry/utils';\nimport withProjects from 'sentry/utils/withProjects';\n\nclass TitleStar extends Component<TitleProps> {\n  render() {\n    const {isOpen, keyedTeams, initialValue, ...props} = this.props;\n    const keyedTeamsCount = keyedTeams?.length ?? initialValue ?? 0;\n    const star = (\n      <IconStar\n        color={keyedTeamsCount ? 'yellow300' : 'gray200'}\n        isSolid={keyedTeamsCount > 0}\n        data-test-id=\"team-key-transaction-column\"\n      />\n    );\n    const button = (\n      <Button\n        {...props}\n        icon={star}\n        borderless\n        size=\"zero\"\n        aria-label={t('Toggle star for team')}\n      />\n    );\n\n    if (!isOpen && keyedTeams?.length) {\n      const teamSlugs = keyedTeams.map(({slug}) => slug).join(', ');\n      return <Tooltip title={teamSlugs}>{button}</Tooltip>;\n    }\n    return button;\n  }\n}\n\ntype BaseProps = {\n  isKeyTransaction: boolean;\n  organization: Organization;\n};\n\ntype Props = BaseProps &\n  TeamKeyTransactionManager.TeamKeyTransactionManagerChildrenProps & {\n    project: Project;\n    transactionName: string;\n  };\n\nfunction TeamKeyTransactionField({\n  isKeyTransaction,\n  counts,\n  getKeyedTeams,\n  project,\n  transactionName,\n  ...props\n}: Props) {\n  const keyedTeams = getKeyedTeams(project.id, transactionName);\n\n  return (\n    <TeamKeyTransaction\n      counts={counts}\n      keyedTeams={keyedTeams}\n      title={TitleStar}\n      project={project}\n      transactionName={transactionName}\n      initialValue={Number(isKeyTransaction)}\n      {...props}\n    />\n  );\n}\n\ntype WrapperProps = BaseProps & {\n  projectSlug: string | undefined;\n  projects: Project[];\n  transactionName: string | undefined;\n};\n\nfunction TeamKeyTransactionFieldWrapper({\n  isKeyTransaction,\n  projects,\n  projectSlug,\n  transactionName,\n  ...props\n}: WrapperProps) {\n  const project = projects.find(proj => proj.slug === projectSlug);\n\n  // All these fields need to be defined in order to toggle a team key\n  // transaction. Since they are not defined, just render a plain star\n  // with no interactions.\n  if (!defined(project) || !defined(transactionName)) {\n    return (\n      <TitleStar\n        isOpen={false}\n        disabled\n        keyedTeams={null}\n        initialValue={Number(isKeyTransaction)}\n      />\n    );\n  }\n\n  return (\n    <TeamKeyTransactionManager.Consumer>\n      {results => (\n        <TeamKeyTransactionField\n          isKeyTransaction={isKeyTransaction}\n          project={project}\n          transactionName={transactionName}\n          {...props}\n          {...results}\n        />\n      )}\n    </TeamKeyTransactionManager.Consumer>\n  );\n}\n\nexport default withProjects(TeamKeyTransactionFieldWrapper);\n","import {t} from 'sentry/locale';\nimport {SelectValue} from 'sentry/types';\n\nexport const TOP_N = 5;\n\nexport enum DisplayModes {\n  DEFAULT = 'default',\n  PREVIOUS = 'previous',\n  TOP5 = 'top5',\n  DAILY = 'daily',\n  DAILYTOP5 = 'dailytop5',\n  WORLDMAP = 'worldmap',\n  BAR = 'bar',\n}\n\nexport const TOP_EVENT_MODES: string[] = [DisplayModes.TOP5, DisplayModes.DAILYTOP5];\n\nexport const DISPLAY_MODE_OPTIONS: SelectValue<string>[] = [\n  {value: DisplayModes.DEFAULT, label: t('Total Period')},\n  {value: DisplayModes.PREVIOUS, label: t('Previous Period')},\n  {value: DisplayModes.TOP5, label: t('Top 5 Period')},\n  {value: DisplayModes.DAILY, label: t('Total Daily')},\n  {value: DisplayModes.DAILYTOP5, label: t('Top 5 Daily')},\n  {value: DisplayModes.WORLDMAP, label: t('World Map')},\n  {value: DisplayModes.BAR, label: t('Bar Chart')},\n];\n\n/**\n * The chain of fallback display modes to try to use when one is disabled.\n *\n * Make sure that the chain always leads to a display mode that is enabled.\n * There is a fail safe to fall back to the default display mode, but it likely\n * won't be creating results you expect.\n */\nexport const DISPLAY_MODE_FALLBACK_OPTIONS = {\n  [DisplayModes.DEFAULT]: DisplayModes.DEFAULT,\n  [DisplayModes.PREVIOUS]: DisplayModes.DEFAULT,\n  [DisplayModes.TOP5]: DisplayModes.DEFAULT,\n  [DisplayModes.DAILY]: DisplayModes.DEFAULT,\n  [DisplayModes.DAILYTOP5]: DisplayModes.DAILY,\n  [DisplayModes.WORLDMAP]: DisplayModes.DEFAULT,\n  [DisplayModes.BAR]: DisplayModes.DEFAULT,\n};\n\n// default list of yAxis options\nexport const CHART_AXIS_OPTIONS = [\n  {label: 'count()', value: 'count()'},\n  {label: 'count_unique(user)', value: 'count_unique(user)'},\n];\n\nexport const MULTI_Y_AXIS_SUPPORTED_DISPLAY_MODES = [\n  DisplayModes.DEFAULT,\n  DisplayModes.DAILY,\n  DisplayModes.PREVIOUS,\n  DisplayModes.BAR,\n];\n","import {t} from 'sentry/locale';\n\nexport enum FieldKind {\n  TAG = 'tag',\n  MEASUREMENT = 'measurement',\n  BREAKDOWN = 'breakdown',\n  FIELD = 'field',\n  FUNCTION = 'function',\n  EQUATION = 'equation',\n  METRICS = 'metric',\n  NUMERIC_METRICS = 'numeric_metric',\n}\n\nexport enum FieldKey {\n  AGE = 'age',\n  ASSIGNED = 'assigned',\n  ASSIGNED_OR_SUGGESTED = 'assigned_or_suggested',\n  BOOKMARKS = 'bookmarks',\n  CULPRIT = 'culprit',\n  DEVICE_ARCH = 'device.arch',\n  DEVICE_BATTERY_LEVEL = 'device.battery_level',\n  DEVICE_BRAND = 'device.brand',\n  DEVICE_CHARGING = 'device.charging',\n  DEVICE_FAMILY = 'device.family',\n  DEVICE_LOCALE = 'device.locale',\n  DEVICE_MODEL_ID = 'device.model_id',\n  DEVICE_NAME = 'device.name',\n  DEVICE_ONLINE = 'device.online',\n  DEVICE_ORIENTATION = 'device.orientation',\n  DEVICE_SIMULATOR = 'device.simulator',\n  DEVICE_UUID = 'device.uuid',\n  DIST = 'dist',\n  ENVIRONMENT = 'environment',\n  ERROR_HANDLED = 'error.handled',\n  ERROR_MECHANISM = 'error.mechanism',\n  ERROR_TYPE = 'error.type',\n  ERROR_UNHANDLED = 'error.unhandled',\n  ERROR_VALUE = 'error.value',\n  EVENT_TIMESTAMP = 'event.timestamp',\n  EVENT_TYPE = 'event.type',\n  FIRST_RELEASE = 'firstRelease',\n  FIRST_SEEN = 'firstSeen',\n  GEO_CITY = 'geo.city',\n  GEO_COUNTRY_CODE = 'geo.country_code',\n  GEO_REGION = 'geo.region',\n  HAS = 'has',\n  HTTP_METHOD = 'http.method',\n  HTTP_REFERER = 'http.referer',\n  HTTP_STATUS_CODE = 'http.status_code',\n  HTTP_URL = 'http.url',\n  ID = 'id',\n  IS = 'is',\n  ISSUE = 'issue',\n  LAST_SEEN = 'lastSeen',\n  LEVEL = 'level',\n  LOCATION = 'location',\n  MESSAGE = 'message',\n  OS = 'os',\n  OS_BUILD = 'os.build',\n  OS_KERNEL_VERSION = 'os.kernel_version',\n  PLATFORM = 'platform',\n  PLATFORM_NAME = 'platform.name',\n  PROJECT = 'project',\n  RELEASE = 'release',\n  RELEASE_BUILD = 'release.build',\n  RELEASE_PACKAGE = 'release.package',\n  RELEASE_STAGE = 'release.stage',\n  RELEASE_VERSION = 'release.version',\n  SDK_NAME = 'sdk.name',\n  SDK_VERSION = 'sdk.version',\n  STACK_ABS_PATH = 'stack.abs_path',\n  STACK_COLNO = 'stack.colno',\n  STACK_FILENAME = 'stack.filename',\n  STACK_FUNCTION = 'stack.function',\n  STACK_IN_APP = 'stack.in_app',\n  STACK_LINENO = 'stack.lineno',\n  STACK_MODULE = 'stack.module',\n  STACK_PACKAGE = 'stack.package',\n  STACK_RESOURCE = 'stack.resource',\n  STACK_STACK_LEVEL = 'stack.stack_level',\n  TIMESTAMP = 'timestamp',\n  TIMESTAMP_TO_DAY = 'timestamp.to_day',\n  TIMESTAMP_TO_HOUR = 'timestamp.to_hour',\n  TIMES_SEEN = 'timesSeen',\n  TITLE = 'title',\n  TRACE = 'trace',\n  TRACE_PARENT_SPAN = 'trace.parent_span',\n  TRACE_SPAN = 'trace.span',\n  TRANSACTION = 'transaction',\n  TRANSACTION_DURATION = 'transaction.duration',\n  TRANSACTION_OP = 'transaction.op',\n  TRANSACTION_STATUS = 'transaction.status',\n  USER = 'user',\n  USER_DISPLAY = 'user.display',\n  USER_EMAIL = 'user.email',\n  USER_ID = 'user.id',\n  USER_IP = 'user.ip',\n  USER_USERNAME = 'user.username',\n}\n\nexport enum FieldValueType {\n  BOOLEAN = 'boolean',\n  DATE = 'date',\n  DURATION = 'duration',\n  INTEGER = 'integer',\n  NUMBER = 'number',\n  PERCENTAGE = 'percentage',\n  STRING = 'string',\n  NEVER = 'never',\n  SIZE = 'size',\n}\n\nexport enum WebVital {\n  FP = 'measurements.fp',\n  FCP = 'measurements.fcp',\n  LCP = 'measurements.lcp',\n  FID = 'measurements.fid',\n  CLS = 'measurements.cls',\n  TTFB = 'measurements.ttfb',\n  RequestTime = 'measurements.ttfb.requesttime',\n}\n\nexport enum MobileVital {\n  AppStartCold = 'measurements.app_start_cold',\n  AppStartWarm = 'measurements.app_start_warm',\n  FramesTotal = 'measurements.frames_total',\n  FramesSlow = 'measurements.frames_slow',\n  FramesFrozen = 'measurements.frames_frozen',\n  FramesSlowRate = 'measurements.frames_slow_rate',\n  FramesFrozenRate = 'measurements.frames_frozen_rate',\n  StallCount = 'measurements.stall_count',\n  StallTotalTime = 'measurements.stall_total_time',\n  StallLongestTime = 'measurements.stall_longest_time',\n  StallPercentage = 'measurements.stall_percentage',\n}\n\nexport enum SpanOpBreakdown {\n  SpansBrowser = 'spans.browser',\n  SpansDb = 'spans.db',\n  SpansHttp = 'spans.http',\n  SpansResource = 'spans.resource',\n  SpansUi = 'spans.ui',\n}\n\nexport enum AggregationKey {\n  Count = 'count',\n  CountUnique = 'count_unique',\n  CountMiserable = 'count_miserable',\n  CountIf = 'count_if',\n  CountWebVitals = 'count_web_vitals',\n  Eps = 'eps',\n  Epm = 'epm',\n  FailureCount = 'failure_count',\n  Min = 'min',\n  Max = 'max',\n  Sum = 'sum',\n  Any = 'any',\n  P50 = 'p50',\n  P75 = 'p75',\n  P95 = 'p95',\n  P99 = 'p99',\n  P100 = 'p100',\n  Percentile = 'percentile',\n  Avg = 'avg',\n  Apdex = 'apdex',\n  UserMisery = 'user_misery',\n  FailureRate = 'failure_rate',\n  LastSeen = 'last_seen',\n}\n\nexport interface FieldDefinition {\n  kind: FieldKind;\n  valueType: FieldValueType | null;\n  deprecated?: boolean;\n  desc?: string;\n  keywords?: string[];\n}\n\nexport const AGGREGATION_FIELDS: Record<string, FieldDefinition> = {\n  [AggregationKey.Count]: {\n    desc: t('count of events'),\n    kind: FieldKind.FUNCTION,\n    valueType: FieldValueType.NUMBER,\n  },\n  [AggregationKey.CountUnique]: {\n    desc: t('Unique count of the field values'),\n    kind: FieldKind.FUNCTION,\n    valueType: FieldValueType.INTEGER,\n  },\n  [AggregationKey.CountMiserable]: {\n    desc: t('Count of unique miserable users'),\n    kind: FieldKind.FUNCTION,\n    valueType: FieldValueType.NUMBER,\n  },\n  [AggregationKey.CountIf]: {\n    desc: t('Count of events matching the parameter conditions'),\n    kind: FieldKind.FUNCTION,\n    valueType: FieldValueType.NUMBER,\n  },\n  [AggregationKey.CountWebVitals]: {\n    desc: t('Count of web vitals with a specific status'),\n    kind: FieldKind.FUNCTION,\n    valueType: FieldValueType.NUMBER,\n  },\n  [AggregationKey.Eps]: {\n    desc: t('Events per second'),\n    kind: FieldKind.FUNCTION,\n    valueType: FieldValueType.NUMBER,\n  },\n  [AggregationKey.Epm]: {\n    desc: t('Events per minute'),\n    kind: FieldKind.FUNCTION,\n    valueType: FieldValueType.NUMBER,\n  },\n  [AggregationKey.FailureRate]: {\n    desc: t('Failed event percentage based on transaction.status'),\n    kind: FieldKind.FUNCTION,\n    valueType: FieldValueType.PERCENTAGE,\n  },\n  [AggregationKey.FailureCount]: {\n    desc: t('Failed event count based on transaction.status'),\n    kind: FieldKind.FUNCTION,\n    valueType: FieldValueType.NUMBER,\n  },\n  [AggregationKey.Min]: {\n    desc: t('Returns the minimum value of the selected field'),\n    kind: FieldKind.FUNCTION,\n    valueType: null,\n  },\n  [AggregationKey.Max]: {\n    desc: t('Returns maximum value of the selected field'),\n    kind: FieldKind.FUNCTION,\n    valueType: null,\n  },\n  [AggregationKey.Sum]: {\n    desc: t('Returns the total value for the selected field'),\n    kind: FieldKind.FUNCTION,\n    valueType: null,\n  },\n  [AggregationKey.Any]: {\n    desc: t('Not Recommended, a random field value'),\n    kind: FieldKind.FUNCTION,\n    valueType: null,\n  },\n  [AggregationKey.P50]: {\n    desc: t('Returns the 50th percentile of the selected field'),\n    kind: FieldKind.FUNCTION,\n    valueType: null,\n  },\n  [AggregationKey.P75]: {\n    desc: t('Returns the 75th percentile of the selected field'),\n    kind: FieldKind.FUNCTION,\n    valueType: null,\n  },\n  [AggregationKey.P95]: {\n    desc: t('Returns the 95th percentile of the selected field'),\n    kind: FieldKind.FUNCTION,\n    valueType: null,\n  },\n  [AggregationKey.P99]: {\n    desc: t('Returns the 99th percentile of the selected field'),\n    kind: FieldKind.FUNCTION,\n    valueType: null,\n  },\n  [AggregationKey.P100]: {\n    desc: t('Returns the 100th percentile of the selected field'),\n    kind: FieldKind.FUNCTION,\n    valueType: null,\n  },\n  [AggregationKey.Percentile]: {\n    desc: t('Returns the percentile of the selected field'),\n    kind: FieldKind.FUNCTION,\n    valueType: null,\n  },\n  [AggregationKey.Avg]: {\n    desc: t('Returns averages for a selected field'),\n    kind: FieldKind.FUNCTION,\n    valueType: null,\n  },\n  [AggregationKey.Apdex]: {\n    desc: t('Performance score based on a duration threshold'),\n    kind: FieldKind.FUNCTION,\n    valueType: null,\n  },\n  [AggregationKey.UserMisery]: {\n    desc: t(\n      'User-weighted performance metric that counts the number of unique users who were frustrated'\n    ),\n    kind: FieldKind.FUNCTION,\n    valueType: null,\n  },\n  [AggregationKey.LastSeen]: {\n    desc: t('Issues last seen at a date and time'),\n    kind: FieldKind.FUNCTION,\n    valueType: FieldValueType.DATE,\n  },\n};\n\nexport const MEASUREMENT_FIELDS: Record<string, FieldDefinition> = {\n  [WebVital.FP]: {\n    desc: t('Web Vital First Paint'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.DURATION,\n  },\n  [WebVital.FCP]: {\n    desc: t('Web Vital First Contentful Paint'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.DURATION,\n  },\n  [WebVital.LCP]: {\n    desc: t('Web Vital Largest Contentful Paint'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.DURATION,\n  },\n  [WebVital.FID]: {\n    desc: t('Web Vital First Input Delay'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.DURATION,\n  },\n  [WebVital.CLS]: {\n    desc: t('Web Vital Cumulative Layout Shift'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.NUMBER,\n  },\n  [WebVital.TTFB]: {\n    desc: t('Web Vital Time To First Byte'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.DURATION,\n  },\n  [WebVital.RequestTime]: {\n    desc: t('Time between start of request to start of response'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.DURATION,\n  },\n  [MobileVital.AppStartCold]: {\n    desc: t('First launch (not in memory and no process exists)'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.DURATION,\n  },\n  [MobileVital.AppStartWarm]: {\n    desc: t('Already launched (partial memory and process may exist)'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.DURATION,\n  },\n  [MobileVital.FramesTotal]: {\n    desc: t('Total number of frames'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.INTEGER,\n  },\n  [MobileVital.FramesSlow]: {\n    desc: t('Number of slow frames'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.INTEGER,\n  },\n  [MobileVital.FramesFrozen]: {\n    desc: t('Number of frozen frames'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.INTEGER,\n  },\n  [MobileVital.FramesSlowRate]: {\n    desc: t('Number of slow frames out of the total'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.PERCENTAGE,\n  },\n  [MobileVital.FramesFrozenRate]: {\n    desc: t('Number of frozen frames out of the total'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.PERCENTAGE,\n  },\n  [MobileVital.StallCount]: {\n    desc: t('Count of slow Javascript event loops (React Native)'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.INTEGER,\n  },\n  [MobileVital.StallTotalTime]: {\n    desc: t('Total stall duration (React Native)'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.PERCENTAGE,\n  },\n  [MobileVital.StallLongestTime]: {\n    desc: t('Duration of slowest Javascript event loop (React Native)'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.INTEGER,\n  },\n  [MobileVital.StallPercentage]: {\n    desc: t('Total stall duration out of the total transaction duration (React Native)'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.PERCENTAGE,\n  },\n};\n\nexport const SPAN_OP_FIELDS = {\n  [SpanOpBreakdown.SpansBrowser]: {\n    desc: t('Cumulative time based on the browser operation'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.DURATION,\n  },\n  [SpanOpBreakdown.SpansDb]: {\n    desc: t('Cumulative time based on the database operation'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.DURATION,\n  },\n  [SpanOpBreakdown.SpansHttp]: {\n    desc: t('Cumulative time based on the http operation'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.DURATION,\n  },\n  [SpanOpBreakdown.SpansResource]: {\n    desc: t('Cumulative time based on the resource operation'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.DURATION,\n  },\n  [SpanOpBreakdown.SpansUi]: {\n    desc: t('Cumulative time based on the ui operation'),\n    kind: FieldKind.METRICS,\n    valueType: FieldValueType.DURATION,\n  },\n};\n\nexport const FIELDS: Record<FieldKey & AggregationKey & MobileVital, FieldDefinition> = {\n  ...AGGREGATION_FIELDS,\n  ...MEASUREMENT_FIELDS,\n  ...SPAN_OP_FIELDS,\n  [FieldKey.AGE]: {\n    desc: t('The age of the issue in relative time'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.DURATION,\n  },\n  [FieldKey.ASSIGNED]: {\n    desc: t('Assignee of the issue as a user ID'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.ASSIGNED_OR_SUGGESTED]: {\n    desc: t('Assignee or suggestee of the issue as a user ID'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.CULPRIT]: {\n    deprecated: true,\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.BOOKMARKS]: {\n    desc: t('The issues bookmarked by a user ID'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.DEVICE_ARCH]: {\n    desc: t('CPU architecture'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.DEVICE_BATTERY_LEVEL]: {\n    desc: t('Indicates remaining battery life'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.DEVICE_BRAND]: {\n    desc: t('Brand of device'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.DEVICE_CHARGING]: {\n    desc: t('Charging at the time of the event'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.BOOLEAN,\n  },\n  [FieldKey.DEVICE_FAMILY]: {\n    desc: t('Model name across generations'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.DEVICE_LOCALE]: {\n    desc: t(\"The locale of the user's device\"),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.DEVICE_MODEL_ID]: {\n    desc: t('Internal hardware revision'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.DEVICE_NAME]: {\n    desc: t('Descriptor details'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.DEVICE_ONLINE]: {\n    desc: t('Online at the time of the event'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.BOOLEAN,\n  },\n  [FieldKey.DEVICE_ORIENTATION]: {\n    desc: t('Portrait or landscape view '),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.DEVICE_SIMULATOR]: {\n    desc: t('Indicates if it occured on a simulator'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.BOOLEAN,\n  },\n  [FieldKey.DEVICE_UUID]: {\n    desc: t('Unique device identifier'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.DIST]: {\n    desc: t(\n      'Distinguishes between build or deployment variants of the same release of an application.'\n    ),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.ERROR_HANDLED]: {\n    desc: t('Determines handling status of the error'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.BOOLEAN,\n  },\n  [FieldKey.ERROR_MECHANISM]: {\n    desc: t('The mechanism that created the error'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.ERROR_TYPE]: {\n    desc: t('The type of exception'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.ERROR_UNHANDLED]: {\n    desc: t('Determines unhandling status of the error'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.BOOLEAN,\n  },\n  [FieldKey.ERROR_VALUE]: {\n    desc: t('Original value that exhibits error'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.EVENT_TIMESTAMP]: {\n    desc: t('Date and time of the event'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.DATE,\n  },\n  [FieldKey.EVENT_TYPE]: {\n    desc: t('Type of event (Errors, transactions, csp and default)'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.GEO_CITY]: {\n    desc: t('Full name of the city'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.GEO_COUNTRY_CODE]: {\n    desc: t('Country code based on ISO 3166-1'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.GEO_REGION]: {\n    desc: t('Full name of the country'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.HTTP_METHOD]: {\n    desc: t('Method of the request that created the event'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.HTTP_REFERER]: {\n    desc: t('The web page the resource was requested from'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.HTTP_STATUS_CODE]: {\n    desc: t('Type of response (i.e., 200, 404)'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.HTTP_URL]: {\n    desc: t('Full URL of the request without parameters'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.ID]: {\n    desc: t('The event identification number'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.IS]: {\n    desc: t('The properties of an issue (i.e. Resolved, unresolved)'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n    keywords: ['ignored', 'assigned', 'for_review', 'unassigned', 'linked', 'unlinked'],\n  },\n  [FieldKey.ISSUE]: {\n    desc: t('The issue identification code'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.LAST_SEEN]: {\n    desc: t('Issues last seen at a given time'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.DATE,\n  },\n  [FieldKey.LEVEL]: {\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.LOCATION]: {\n    desc: t('Location of error'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.MESSAGE]: {\n    desc: t('Error message or transaction name'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.OS]: {\n    desc: t('Build and kernel version'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.OS_BUILD]: {\n    desc: t('Name of the build'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.OS_KERNEL_VERSION]: {\n    desc: t('Version number'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.PLATFORM]: {\n    desc: t('Name of the platform'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.PLATFORM_NAME]: {\n    desc: t('Name of the platform'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.PROJECT]: {\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.FIRST_RELEASE]: {\n    desc: t('Issues first seen in a given release'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.FIRST_SEEN]: {\n    desc: t('Issues first seen at a given time'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.DATE,\n  },\n  [FieldKey.HAS]: {\n    desc: t('Determines if a tag or field exists in an event'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.RELEASE]: {\n    desc: t('The version of your code deployed to an environment'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.RELEASE_BUILD]: {\n    desc: t('The full version number that identifies the iteration'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.RELEASE_PACKAGE]: {\n    desc: t('The identifier unique to the project or application'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.RELEASE_STAGE]: {\n    desc: t('Stage of usage (i.e., adopted, replaced, low)'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.RELEASE_VERSION]: {\n    desc: t('An abbreviated version number of the build'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.SDK_NAME]: {\n    desc: t('Name of the platform that sent the event'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.SDK_VERSION]: {\n    desc: t('Version of the platform that sent the event'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.STACK_ABS_PATH]: {\n    desc: t('Absolute path to the source file'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.STACK_COLNO]: {\n    desc: t('Column number of the call starting at 1'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.NUMBER,\n  },\n  [FieldKey.STACK_FILENAME]: {\n    desc: t('Relative path to the source file from the root directory'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.STACK_FUNCTION]: {\n    desc: t('Name of function being called'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.STACK_IN_APP]: {\n    desc: t('Indicates if frame is related to relevant code in stack trace'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.BOOLEAN,\n  },\n  [FieldKey.STACK_LINENO]: {\n    desc: t('Line number of the call starting at 1'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.NUMBER,\n  },\n  [FieldKey.STACK_MODULE]: {\n    desc: t('Platform specific module path'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.STACK_PACKAGE]: {\n    desc: t('The package the frame is from'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.STACK_RESOURCE]: {\n    desc: t('The package the frame is from'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.STACK_STACK_LEVEL]: {\n    desc: t('Number of frames per stacktrace'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.NUMBER,\n  },\n  [FieldKey.TIMES_SEEN]: {\n    desc: t('Total number of events'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.NUMBER,\n    keywords: ['count'],\n  },\n  [FieldKey.TIMESTAMP]: {\n    desc: t('The time an event finishes'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.DATE,\n  },\n  [FieldKey.TIMESTAMP_TO_HOUR]: {\n    desc: t('Rounded down to the nearest hour'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.DATE,\n  },\n  [FieldKey.TIMESTAMP_TO_DAY]: {\n    desc: t('Rounded down to the nearest day'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.DATE,\n  },\n  [FieldKey.TITLE]: {\n    desc: t('Error or transaction name identifier'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.TRACE]: {\n    desc: t('The trace identification number'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.TRACE_PARENT_SPAN]: {\n    desc: t('Span identification number of the parent to the event'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.TRACE_SPAN]: {\n    desc: t('Span identification number of the root span'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.TRANSACTION]: {\n    desc: t('Error or transaction name identifier'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.TRANSACTION_OP]: {\n    desc: t('Short code identifying the type of operation the span is measuring'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.TRANSACTION_DURATION]: {\n    desc: t('Duration, in milliseconds, of the transaction'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.DURATION,\n  },\n  [FieldKey.TRANSACTION_STATUS]: {\n    desc: t('Describes the status of the span/transaction'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.USER]: {\n    desc: t('User identification value'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.USER_DISPLAY]: {\n    desc: t('The first user field available of email, username, ID, and IP'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.USER_EMAIL]: {\n    desc: t('Email address of the user'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.USER_ID]: {\n    desc: t('Application specific internal identifier of the user'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.USER_IP]: {\n    desc: t('IP Address of the user'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n  [FieldKey.USER_USERNAME]: {\n    desc: t('Username of the user'),\n    kind: FieldKind.FIELD,\n    valueType: FieldValueType.STRING,\n  },\n};\n\nexport const ISSUE_FIELDS = [\n  FieldKey.AGE,\n  FieldKey.ASSIGNED,\n  FieldKey.ASSIGNED_OR_SUGGESTED,\n  FieldKey.BOOKMARKS,\n  FieldKey.DEVICE_ARCH,\n  FieldKey.DEVICE_BRAND,\n  FieldKey.DEVICE_FAMILY,\n  FieldKey.DEVICE_LOCALE,\n  FieldKey.DEVICE_LOCALE,\n  FieldKey.DEVICE_MODEL_ID,\n  FieldKey.DEVICE_ORIENTATION,\n  FieldKey.DEVICE_UUID,\n  FieldKey.DIST,\n  FieldKey.ERROR_HANDLED,\n  FieldKey.ERROR_MECHANISM,\n  FieldKey.ERROR_TYPE,\n  FieldKey.ERROR_UNHANDLED,\n  FieldKey.ERROR_VALUE,\n  FieldKey.EVENT_TIMESTAMP,\n  FieldKey.EVENT_TYPE,\n  FieldKey.FIRST_RELEASE,\n  FieldKey.FIRST_SEEN,\n  FieldKey.GEO_CITY,\n  FieldKey.GEO_COUNTRY_CODE,\n  FieldKey.GEO_REGION,\n  FieldKey.HAS,\n  FieldKey.HTTP_METHOD,\n  FieldKey.HTTP_REFERER,\n  FieldKey.HTTP_STATUS_CODE,\n  FieldKey.HTTP_URL,\n  FieldKey.ID,\n  FieldKey.IS,\n  FieldKey.LAST_SEEN,\n  FieldKey.LOCATION,\n  FieldKey.MESSAGE,\n  FieldKey.OS_BUILD,\n  FieldKey.OS_KERNEL_VERSION,\n  FieldKey.PLATFORM,\n  FieldKey.RELEASE,\n  FieldKey.RELEASE_BUILD,\n  FieldKey.RELEASE_PACKAGE,\n  FieldKey.RELEASE_STAGE,\n  FieldKey.RELEASE_VERSION,\n  FieldKey.SDK_NAME,\n  FieldKey.SDK_VERSION,\n  FieldKey.STACK_ABS_PATH,\n  FieldKey.STACK_FILENAME,\n  FieldKey.STACK_FUNCTION,\n  FieldKey.STACK_MODULE,\n  FieldKey.STACK_PACKAGE,\n  FieldKey.STACK_STACK_LEVEL,\n  FieldKey.TIMESTAMP,\n  FieldKey.TIMES_SEEN,\n  FieldKey.TITLE,\n  FieldKey.TRACE,\n  FieldKey.TRANSACTION,\n  FieldKey.USER_EMAIL,\n  FieldKey.USER_ID,\n  FieldKey.USER_IP,\n  FieldKey.USER_USERNAME,\n];\n\n/**\n * Refer to src/sentry/snuba/events.py, search for Columns\n */\nexport const DISCOVER_FIELDS = [\n  FieldKey.ID,\n  // issue.id and project.id are omitted on purpose.\n  // Customers should use `issue` and `project` instead.\n  FieldKey.TIMESTAMP,\n  // time is omitted on purpose.\n  // Customers should use `timestamp` or `timestamp.to_hour`.\n  FieldKey.TIMESTAMP_TO_HOUR,\n  FieldKey.TIMESTAMP_TO_DAY,\n\n  FieldKey.CULPRIT,\n  FieldKey.LOCATION,\n  FieldKey.MESSAGE,\n  FieldKey.PLATFORM_NAME,\n  FieldKey.ENVIRONMENT,\n  FieldKey.RELEASE,\n  FieldKey.DIST,\n  FieldKey.TITLE,\n  FieldKey.EVENT_TYPE,\n  // tags.key and tags.value are omitted on purpose as well.\n\n  FieldKey.TRANSACTION,\n  FieldKey.USER,\n  FieldKey.USER_ID,\n  FieldKey.USER_EMAIL,\n  FieldKey.USER_USERNAME,\n  FieldKey.USER_IP,\n  FieldKey.SDK_NAME,\n  FieldKey.SDK_VERSION,\n  FieldKey.HTTP_METHOD,\n  FieldKey.HTTP_REFERER,\n  FieldKey.HTTP_URL,\n  FieldKey.OS_BUILD,\n  FieldKey.OS_KERNEL_VERSION,\n  FieldKey.DEVICE_NAME,\n  FieldKey.DEVICE_BRAND,\n  FieldKey.DEVICE_LOCALE,\n  FieldKey.DEVICE_UUID,\n  FieldKey.DEVICE_ARCH,\n  FieldKey.DEVICE_FAMILY,\n  FieldKey.DEVICE_BATTERY_LEVEL,\n  FieldKey.DEVICE_ORIENTATION,\n  FieldKey.DEVICE_SIMULATOR,\n  FieldKey.DEVICE_ONLINE,\n  FieldKey.DEVICE_CHARGING,\n  FieldKey.GEO_COUNTRY_CODE,\n  FieldKey.GEO_REGION,\n  FieldKey.GEO_CITY,\n  FieldKey.ERROR_TYPE,\n  FieldKey.ERROR_VALUE,\n  FieldKey.ERROR_MECHANISM,\n  FieldKey.ERROR_HANDLED,\n  FieldKey.ERROR_UNHANDLED,\n  FieldKey.LEVEL,\n  FieldKey.STACK_ABS_PATH,\n  FieldKey.STACK_FILENAME,\n  FieldKey.STACK_PACKAGE,\n  FieldKey.STACK_MODULE,\n  FieldKey.STACK_FUNCTION,\n  FieldKey.STACK_IN_APP,\n  FieldKey.STACK_COLNO,\n  FieldKey.STACK_LINENO,\n  FieldKey.STACK_STACK_LEVEL,\n  // contexts.key and contexts.value omitted on purpose.\n\n  // Transaction event fields.\n  FieldKey.TRANSACTION_DURATION,\n  FieldKey.TRANSACTION_OP,\n  FieldKey.TRANSACTION_STATUS,\n\n  FieldKey.TRACE,\n  FieldKey.TRACE_SPAN,\n  FieldKey.TRACE_PARENT_SPAN,\n\n  // Field alises defined in src/sentry/api/event_search.py\n  FieldKey.PROJECT,\n  FieldKey.ISSUE,\n  FieldKey.USER_DISPLAY,\n\n  // Span Op fields\n  SpanOpBreakdown.SpansBrowser,\n  SpanOpBreakdown.SpansDb,\n  SpanOpBreakdown.SpansHttp,\n  SpanOpBreakdown.SpansResource,\n  SpanOpBreakdown.SpansUi,\n];\n\nexport const getFieldDefinition = (key: string): FieldDefinition | null => {\n  return FIELDS[key] ?? null;\n};\n","import isDate from 'lodash/isDate';\nimport isEqualWith from 'lodash/isEqualWith';\n\n// `lodash.isEqual` does not compare date objects\nfunction dateComparator(value: any, other: any): boolean | undefined {\n  if (isDate(value) && isDate(other)) {\n    return +value === +other;\n  }\n\n  // Loose checking\n  if (!value && !other) {\n    return true;\n  }\n\n  // returning undefined will use default comparator\n  return undefined;\n}\n\nexport const isEqualWithDates = (a: any, b: any) => isEqualWith(a, b, dateComparator);\n","import {MetricsOperation, MetricsType} from 'sentry/types';\n\nimport {ColumnType} from '../discover/fields';\n\nexport enum SessionMetric {\n  SESSION = 'sentry.sessions.session',\n  SESSION_DURATION = 'sentry.sessions.session.duration',\n  SESSION_ERROR = 'sentry.sessions.session.error',\n  SESSION_CRASH_FREE_RATE = 'session.crash_free_rate',\n  USER_CRASH_FREE_RATE = 'session.crash_free_user_rate',\n  SESSION_CRASH_RATE = 'session.crash_rate',\n  USER_CRASH_RATE = 'session.crash_user_rate',\n  USER = 'sentry.sessions.user',\n  SESSION_HEALTHY = 'session.healthy',\n  USER_HEALTHY = 'session.healthy_user',\n  SESSION_ABNORMAL = 'session.abnormal',\n  USER_ABNORMAL = 'session.abnormal_user',\n  SESSION_CRASHED = 'session.crashed',\n  USER_CRASHED = 'session.crashed_user',\n  SESSION_ERRORED = 'session.errored',\n  USER_ERRORED = 'session.errored_user',\n}\n\nexport enum TransactionMetric {\n  MEASUREMENTS_FP = 'sentry.transactions.measurements.fp',\n  MEASUREMENTS_FCP = 'sentry.transactions.measurements.fcp',\n  MEASUREMENTS_LCP = 'sentry.transactions.measurements.lcp',\n  MEASUREMENTS_FID = 'sentry.transactions.measurements.fid',\n  MEASUREMENTS_CLS = 'sentry.transactions.measurements.cls',\n  MEASUREMENTS_TTFB = 'sentry.transactions.measurements.ttfb',\n  MEASUREMENTS_TTFB_REQUESTTIME = 'sentry.transactions.measurements.ttfb.requesttime',\n  MEASUREMENTS_APP_START_COLD = 'sentry.transactions.measurements.app_start_cold',\n  MEASUREMENTS_APP_START_WARM = 'sentry.transactions.measurements.app_start_warm',\n  MEASUREMENTS_FRAMES_TOTAL = 'sentry.transactions.measurements.frames_total',\n  MEASUREMENTS_FRAMES_SLOW = 'sentry.transactions.measurements.frames_slow',\n  MEASUREMENTS_FRAMES_FROZEN = 'sentry.transactions.measurements.frames_frozen',\n  MEASUREMENTS_FRAMES_SLOW_RATE = 'sentry.transactions.measurements.frames_slow_rate',\n  MEASUREMENTS_FRAMES_FROZEN_RATE = 'sentry.transactions.measurements.frames_frozen_rate',\n  MEASUREMENTS_STALL_COUNT = 'sentry.transactions.measurements.stall_count',\n  MEASUREMENTS_STALL_TOTAL_TIME = 'sentry.transactions.measurements.stall_total_time',\n  MEASUREMENTS_STALL_LONGEST_TIME = 'sentry.transactions.measurements.stall_longest_time',\n  MEASUREMENTS_STALL_PERCENTAGE = 'sentry.transactions.measurements.stall_percentage',\n  TRANSACTION_DURATION = 'sentry.transactions.transaction.duration',\n  USER = 'sentry.transactions.user',\n  TRANSACTION = 'transaction',\n}\n\nexport const METRIC_TO_COLUMN_TYPE: Readonly<\n  Record<SessionMetric | TransactionMetric, ColumnType>\n> = {\n  // Session metrics\n  [SessionMetric.USER]: 'integer',\n  [SessionMetric.SESSION_ERROR]: 'integer',\n  [SessionMetric.SESSION_DURATION]: 'duration',\n  [SessionMetric.SESSION]: 'integer',\n  [SessionMetric.SESSION_CRASH_FREE_RATE]: 'percentage',\n  [SessionMetric.USER_CRASH_FREE_RATE]: 'percentage',\n  [SessionMetric.SESSION_CRASH_RATE]: 'percentage',\n  [SessionMetric.USER_CRASH_RATE]: 'percentage',\n  [SessionMetric.SESSION_HEALTHY]: 'integer',\n  [SessionMetric.USER_HEALTHY]: 'integer',\n  [SessionMetric.SESSION_ABNORMAL]: 'integer',\n  [SessionMetric.USER_ABNORMAL]: 'integer',\n  [SessionMetric.SESSION_CRASHED]: 'integer',\n  [SessionMetric.USER_CRASHED]: 'integer',\n  [SessionMetric.SESSION_ERRORED]: 'integer',\n  [SessionMetric.USER_ERRORED]: 'integer',\n\n  // Transaction metrics\n  [TransactionMetric.USER]: 'integer',\n  [TransactionMetric.TRANSACTION]: 'string',\n  [TransactionMetric.TRANSACTION_DURATION]: 'duration',\n  [TransactionMetric.MEASUREMENTS_FP]: 'duration',\n  [TransactionMetric.MEASUREMENTS_FCP]: 'duration',\n  [TransactionMetric.MEASUREMENTS_LCP]: 'duration',\n  [TransactionMetric.MEASUREMENTS_FID]: 'duration',\n  [TransactionMetric.MEASUREMENTS_CLS]: 'number',\n  [TransactionMetric.MEASUREMENTS_TTFB]: 'duration',\n  [TransactionMetric.MEASUREMENTS_TTFB_REQUESTTIME]: 'duration',\n  [TransactionMetric.MEASUREMENTS_APP_START_COLD]: 'duration',\n  [TransactionMetric.MEASUREMENTS_APP_START_WARM]: 'duration',\n  [TransactionMetric.MEASUREMENTS_FRAMES_TOTAL]: 'integer',\n  [TransactionMetric.MEASUREMENTS_FRAMES_SLOW]: 'integer',\n  [TransactionMetric.MEASUREMENTS_FRAMES_FROZEN]: 'integer',\n  [TransactionMetric.MEASUREMENTS_FRAMES_SLOW_RATE]: 'percentage',\n  [TransactionMetric.MEASUREMENTS_FRAMES_FROZEN_RATE]: 'percentage',\n  [TransactionMetric.MEASUREMENTS_STALL_COUNT]: 'integer',\n  [TransactionMetric.MEASUREMENTS_STALL_TOTAL_TIME]: 'duration',\n  [TransactionMetric.MEASUREMENTS_STALL_LONGEST_TIME]: 'duration',\n  [TransactionMetric.MEASUREMENTS_STALL_PERCENTAGE]: 'percentage',\n};\n\nexport const METRICS_OPERATIONS: Readonly<\n  Record<\n    MetricsOperation,\n    {defaultValue: SessionMetric | TransactionMetric; metricsTypes: MetricsType[]}\n  >\n> = {\n  sum: {\n    metricsTypes: ['counter'],\n    defaultValue: SessionMetric.SESSION,\n  },\n  count_unique: {\n    metricsTypes: ['set'],\n    defaultValue: SessionMetric.USER,\n  },\n  avg: {\n    metricsTypes: ['distribution'],\n    defaultValue: TransactionMetric.TRANSACTION_DURATION,\n  },\n  count: {\n    metricsTypes: ['distribution'],\n    defaultValue: TransactionMetric.TRANSACTION_DURATION,\n  },\n  max: {\n    metricsTypes: ['distribution'],\n    defaultValue: TransactionMetric.TRANSACTION_DURATION,\n  },\n  p50: {\n    metricsTypes: ['distribution'],\n    defaultValue: TransactionMetric.TRANSACTION_DURATION,\n  },\n  p75: {\n    metricsTypes: ['distribution'],\n    defaultValue: TransactionMetric.TRANSACTION_DURATION,\n  },\n  p95: {\n    metricsTypes: ['distribution'],\n    defaultValue: TransactionMetric.TRANSACTION_DURATION,\n  },\n  p99: {\n    metricsTypes: ['distribution'],\n    defaultValue: TransactionMetric.TRANSACTION_DURATION,\n  },\n};\n","import {URL_PARAM} from 'sentry/constants/pageFilters';\n\nexport const MAX_TEAM_KEY_TRANSACTIONS = 100;\n\nexport const PERFORMANCE_URL_PARAM = ['team', ...Object.values(URL_PARAM)];\n","import {escapeDoubleQuotes} from 'sentry/utils';\n\nexport enum TokenType {\n  OPERATOR,\n  FILTER,\n  FREE_TEXT,\n}\n\nexport type Token = {\n  type: TokenType;\n  value: string;\n  key?: string;\n};\n\nfunction isOp(t: Token) {\n  return t.type === TokenType.OPERATOR;\n}\n\nfunction isBooleanOp(value: string) {\n  return ['OR', 'AND'].includes(value.toUpperCase());\n}\n\nfunction isParen(token: Token, character: '(' | ')') {\n  return (\n    token !== undefined &&\n    isOp(token) &&\n    ['(', ')'].includes(token.value) &&\n    token.value === character\n  );\n}\n\n// TODO(epurkhiser): This is legacy from before the existence of\n// searchSyntax/parser. We should absolutely replace the internals of this API\n// with `parseSearch`.\n\nexport class MutableSearch {\n  tokens: Token[];\n\n  /**\n   * Creates a MutableSearch from a string query\n   */\n  constructor(query: string);\n  /**\n   * Creates a mutable search query from a list of query parts\n   */\n  constructor(queries: string[]);\n  constructor(tokensOrQuery: string[] | string) {\n    const strTokens = Array.isArray(tokensOrQuery)\n      ? tokensOrQuery\n      : splitSearchIntoTokens(tokensOrQuery);\n\n    this.tokens = [];\n\n    for (let token of strTokens) {\n      let tokenState = TokenType.FREE_TEXT;\n\n      if (isBooleanOp(token)) {\n        this.addOp(token.toUpperCase());\n        continue;\n      }\n\n      if (token.startsWith('(')) {\n        const parenMatch = token.match(/^\\(+/g);\n        if (parenMatch) {\n          parenMatch[0].split('').map(paren => this.addOp(paren));\n          token = token.replace(/^\\(+/g, '');\n        }\n      }\n\n      // Traverse the token and check if it's a filter condition or free text\n      for (let i = 0, len = token.length; i < len; i++) {\n        const char = token[i];\n\n        if (i === 0 && (char === '\"' || char === ':')) {\n          break;\n        }\n\n        // We may have entered a filter condition\n        if (char === ':') {\n          const nextChar = token[i + 1] || '';\n          if ([':', ' '].includes(nextChar)) {\n            tokenState = TokenType.FREE_TEXT;\n          } else {\n            tokenState = TokenType.FILTER;\n          }\n          break;\n        }\n      }\n\n      let trailingParen = '';\n      if (token.endsWith(')') && !token.includes('(')) {\n        const parenMatch = token.match(/\\)+$/g);\n        if (parenMatch) {\n          trailingParen = parenMatch[0];\n          token = token.replace(/\\)+$/g, '');\n        }\n      }\n\n      if (tokenState === TokenType.FREE_TEXT && token.length) {\n        this.addFreeText(token);\n      } else if (tokenState === TokenType.FILTER) {\n        this.addStringFilter(token, false);\n      }\n\n      if (trailingParen !== '') {\n        trailingParen.split('').map(paren => this.addOp(paren));\n      }\n    }\n  }\n\n  formatString() {\n    const formattedTokens: string[] = [];\n    for (const token of this.tokens) {\n      switch (token.type) {\n        case TokenType.FILTER:\n          if (token.value === '' || token.value === null) {\n            formattedTokens.push(`${token.key}:\"\"`);\n          } else if (/[\\s\\(\\)\\\\\"]/g.test(token.value)) {\n            formattedTokens.push(`${token.key}:\"${escapeDoubleQuotes(token.value)}\"`);\n          } else {\n            formattedTokens.push(`${token.key}:${token.value}`);\n          }\n          break;\n        case TokenType.FREE_TEXT:\n          if (/[\\s\\(\\)\\\\\"]/g.test(token.value)) {\n            formattedTokens.push(`\"${escapeDoubleQuotes(token.value)}\"`);\n          } else {\n            formattedTokens.push(token.value);\n          }\n          break;\n        default:\n          formattedTokens.push(token.value);\n      }\n    }\n    return formattedTokens.join(' ').trim();\n  }\n\n  addStringFilter(filter: string, shouldEscape = true) {\n    const [key, value] = parseFilter(filter);\n    this.addFilterValues(key, [value], shouldEscape);\n    return this;\n  }\n\n  addFilterValues(key: string, values: string[], shouldEscape = true) {\n    for (const value of values) {\n      // Filter values that we insert through the UI can contain special characters\n      // that need to escaped. User entered filters should not be escaped.\n      const escaped = shouldEscape ? escapeFilterValue(value) : value;\n      const token: Token = {type: TokenType.FILTER, key, value: escaped};\n      this.tokens.push(token);\n    }\n    return this;\n  }\n\n  setFilterValues(key: string, values: string[], shouldEscape = true) {\n    this.removeFilter(key);\n    this.addFilterValues(key, values, shouldEscape);\n    return this;\n  }\n\n  get filters() {\n    type Filters = Record<string, string[]>;\n\n    const reducer = (acc: Filters, token: Token) => ({\n      ...acc,\n      [token.key!]: [...(acc[token.key!] ?? []), token.value],\n    });\n\n    return this.tokens\n      .filter(t => t.type === TokenType.FILTER)\n      .reduce<Filters>(reducer, {});\n  }\n\n  getFilterValues(key: string) {\n    return this.filters[key] ?? [];\n  }\n\n  getFilterKeys() {\n    return Object.keys(this.filters);\n  }\n\n  hasFilter(key: string): boolean {\n    return this.getFilterValues(key).length > 0;\n  }\n\n  removeFilter(key: string) {\n    this.tokens = this.tokens.filter(token => token.key !== key);\n\n    // Now the really complicated part: removing parens that only have one element in them.\n    // Since parens are themselves tokens, this gets tricky. In summary, loop through the\n    // tokens until we find the innermost open paren. Then forward search through the rest of the tokens\n    // to see if that open paren corresponds to a closed paren with one or fewer items inside.\n    // If it does, delete those parens, and loop again until there are no more parens to delete.\n    let parensToDelete: number[] = [];\n    const cleanParens = (_, idx: number) => !parensToDelete.includes(idx);\n    do {\n      if (parensToDelete.length) {\n        this.tokens = this.tokens.filter(cleanParens);\n      }\n      parensToDelete = [];\n\n      for (let i = 0; i < this.tokens.length; i++) {\n        const token = this.tokens[i];\n        if (!isOp(token) || token.value !== '(') {\n          continue;\n        }\n\n        let alreadySeen = false;\n        for (let j = i + 1; j < this.tokens.length; j++) {\n          const nextToken = this.tokens[j];\n          if (isOp(nextToken) && nextToken.value === '(') {\n            // Continue down to the nested parens. We can skip i forward since we know\n            // everything between i and j is NOT an open paren.\n            i = j - 1;\n            break;\n          } else if (!isOp(nextToken)) {\n            if (alreadySeen) {\n              // This has more than one term, no need to delete\n              break;\n            }\n            alreadySeen = true;\n          } else if (isOp(nextToken) && nextToken.value === ')') {\n            // We found another paren with zero or one terms inside. Delete the pair.\n            parensToDelete = [i, j];\n            break;\n          }\n        }\n\n        if (parensToDelete.length > 0) {\n          break;\n        }\n      }\n    } while (parensToDelete.length > 0);\n\n    // Now that all erroneous parens are removed we need to remove dangling OR/AND operators.\n    // I originally removed all the dangling properties in a single loop, but that meant that\n    // cases like `a OR OR b` would remove both operators, when only one should be removed. So\n    // instead, we loop until we find an operator to remove, then go back to the start and loop\n    // again.\n    let toRemove = -1;\n    do {\n      if (toRemove >= 0) {\n        this.tokens.splice(toRemove, 1);\n        toRemove = -1;\n      }\n\n      for (let i = 0; i < this.tokens.length; i++) {\n        const token = this.tokens[i];\n        const prev = this.tokens[i - 1];\n        const next = this.tokens[i + 1];\n        if (isOp(token) && isBooleanOp(token.value)) {\n          if (prev === undefined || isOp(prev) || next === undefined || isOp(next)) {\n            // Want to avoid removing `(term) OR (term)`\n            if (isParen(prev, ')') && isParen(next, '(')) {\n              continue;\n            }\n            toRemove = i;\n            break;\n          }\n        }\n      }\n    } while (toRemove >= 0);\n\n    return this;\n  }\n\n  removeFilterValue(key: string, value: string) {\n    const values = this.getFilterValues(key);\n    if (Array.isArray(values) && values.length) {\n      this.setFilterValues(\n        key,\n        values.filter(item => item !== value)\n      );\n    }\n  }\n\n  addFreeText(value: string) {\n    const token: Token = {type: TokenType.FREE_TEXT, value: formatQuery(value)};\n    this.tokens.push(token);\n    return this;\n  }\n\n  addOp(value: string) {\n    const token: Token = {type: TokenType.OPERATOR, value};\n    this.tokens.push(token);\n    return this;\n  }\n\n  get freeText(): string[] {\n    return this.tokens.filter(t => t.type === TokenType.FREE_TEXT).map(t => t.value);\n  }\n\n  set freeText(values: string[]) {\n    this.tokens = this.tokens.filter(t => t.type !== TokenType.FREE_TEXT);\n    for (const v of values) {\n      this.addFreeText(v);\n    }\n  }\n\n  copy() {\n    const q = new MutableSearch([]);\n    q.tokens = [...this.tokens];\n    return q;\n  }\n\n  isEmpty() {\n    return this.tokens.length === 0;\n  }\n}\n\n/**\n * Splits search strings into tokens for parsing by tokenizeSearch.\n *\n * Should stay in sync with src.sentry.search.utils:split_query_into_tokens\n */\nfunction splitSearchIntoTokens(query: string) {\n  const queryChars = Array.from(query);\n  const tokens: string[] = [];\n\n  let token = '';\n  let endOfPrevWord = '';\n  let quoteType = '';\n  let quoteEnclosed = false;\n\n  for (let idx = 0; idx < queryChars.length; idx++) {\n    const char = queryChars[idx];\n    const nextChar = queryChars.length - 1 > idx ? queryChars[idx + 1] : null;\n    token += char;\n\n    if (nextChar !== null && !isSpace(char) && isSpace(nextChar)) {\n      endOfPrevWord = char;\n    }\n\n    if (isSpace(char) && !quoteEnclosed && endOfPrevWord !== ':' && !isSpace(token)) {\n      tokens.push(token.trim());\n      token = '';\n    }\n\n    if ([\"'\", '\"'].includes(char) && (!quoteEnclosed || quoteType === char)) {\n      quoteEnclosed = !quoteEnclosed;\n      if (quoteEnclosed) {\n        quoteType = char;\n      }\n    }\n\n    if (quoteEnclosed && char === '\\\\' && nextChar === quoteType) {\n      token += nextChar;\n      idx++;\n    }\n  }\n\n  const trimmedToken = token.trim();\n  if (trimmedToken !== '') {\n    tokens.push(trimmedToken);\n  }\n\n  return tokens;\n}\n\n/**\n * Checks if the string is only spaces\n */\nfunction isSpace(s: string) {\n  return s.trim() === '';\n}\n\n/**\n * Splits a filter on ':' and removes enclosing quotes if present, and returns\n * both sides of the split as strings.\n */\nfunction parseFilter(filter: string) {\n  const idx = filter.indexOf(':');\n  const key = removeSurroundingQuotes(filter.slice(0, idx));\n  const value = removeSurroundingQuotes(filter.slice(idx + 1));\n\n  return [key, value];\n}\n\nfunction removeSurroundingQuotes(text: string) {\n  const length = text.length;\n  if (length <= 1) {\n    return text;\n  }\n\n  let left = 0;\n  for (; left <= length / 2; left++) {\n    if (text.charAt(left) !== '\"') {\n      break;\n    }\n  }\n\n  let right = length - 1;\n  for (; right >= length / 2; right--) {\n    if (text.charAt(right) !== '\"' || text.charAt(right - 1) === '\\\\') {\n      break;\n    }\n  }\n\n  return text.slice(left, right + 1);\n}\n\n/**\n * Strips enclosing quotes and parens from a query, if present.\n */\nfunction formatQuery(query: string) {\n  return query.replace(/^[\"\\(]+|[\"\\)]+$/g, '');\n}\n\n/**\n * Some characters have special meaning in a filter value. So when they are\n * directly added as a value, we have to escape them to mean the literal.\n */\nexport function escapeFilterValue(value: string) {\n  // TODO(txiao): The types here are definitely wrong.\n  // Need to dig deeper to see where exactly it's wrong.\n  //\n  // astericks (*) is used for wildcard searches\n  return typeof value === 'string' ? value.replace(/([\\*])/g, '\\\\$1') : value;\n}\n","import PageFiltersStore from 'sentry/stores/pageFiltersStore';\nimport {useLegacyStore} from 'sentry/stores/useLegacyStore';\n\n/**\n * Custom hook that returns the state of page filters\n */\nfunction usePageFilters() {\n  return useLegacyStore(PageFiltersStore);\n}\n\nexport default usePageFilters;\n","import {PageFilters} from 'sentry/types';\nimport getDisplayName from 'sentry/utils/getDisplayName';\n\nimport usePageFilters from './usePageFilters';\n\ntype InjectedPageFiltersProps = {\n  isGlobalSelectionReady?: boolean;\n  selection?: PageFilters;\n};\n\n/**\n * Higher order component that uses PageFiltersStore and provides the active\n * project\n */\nfunction withPageFilters<P extends InjectedPageFiltersProps>(\n  WrappedComponent: React.ComponentType<P>\n) {\n  type Props = Omit<P, keyof InjectedPageFiltersProps> & InjectedPageFiltersProps;\n\n  const WithPageFilters: React.FC<Props> = props => {\n    const {selection, isReady: isGlobalSelectionReady} = usePageFilters();\n\n    const selectionProps = {\n      selection,\n      isGlobalSelectionReady,\n    };\n\n    return <WrappedComponent {...selectionProps} {...(props as P)} />;\n  };\n\n  const displayName = getDisplayName(WrappedComponent);\n  WithPageFilters.displayName = `withPageFilters(${displayName})`;\n\n  return WithPageFilters;\n}\n\nexport default withPageFilters;\n","import {Layout} from 'react-grid-layout';\n\nimport {User} from 'sentry/types';\n\n// Max widgets per dashboard we are currently willing\n// to allow to limit the load on snuba from the\n// parallel requests. Somewhat arbitrary\n// limit that can be changed if necessary.\nexport const MAX_WIDGETS = 30;\n\nexport const DEFAULT_TABLE_LIMIT = 5;\n\nexport enum DisplayType {\n  AREA = 'area',\n  BAR = 'bar',\n  LINE = 'line',\n  TABLE = 'table',\n  WORLD_MAP = 'world_map',\n  BIG_NUMBER = 'big_number',\n  TOP_N = 'top_n',\n}\n\nexport enum WidgetType {\n  DISCOVER = 'discover',\n  ISSUE = 'issue',\n  RELEASE = 'metrics', // TODO(dashboards): Rename this on backend and then change here\n}\n\nexport type WidgetQuery = {\n  aggregates: string[];\n  columns: string[];\n  conditions: string;\n  name: string;\n  orderby: string;\n  // Table column alias.\n  // We may want to have alias for y-axis in the future too\n  fieldAliases?: string[];\n  // Fields is replaced with aggregates + columns. It\n  // is currently used to track column order on table\n  // widgets.\n  fields?: string[];\n};\n\nexport type Widget = {\n  displayType: DisplayType;\n  interval: string;\n  queries: WidgetQuery[];\n  title: string;\n  id?: string;\n  layout?: WidgetLayout | null;\n  // Used to define 'topEvents' when fetching time-series data for a widget\n  limit?: number;\n  tempId?: string;\n  widgetType?: WidgetType;\n};\n\n// We store an explicit set of keys in the backend now\nexport type WidgetLayout = Pick<Layout, 'h' | 'w' | 'x' | 'y'> & {\n  minH: number;\n};\n\nexport type WidgetPreview = {\n  displayType: DisplayType;\n  layout: WidgetLayout | null;\n};\n\n/**\n * The response shape from dashboard list endpoint\n */\nexport type DashboardListItem = {\n  id: string;\n  title: string;\n  widgetDisplay: DisplayType[];\n  widgetPreview: WidgetPreview[];\n  createdBy?: User;\n  dateCreated?: string;\n};\n\nexport enum DashboardFilterKeys {\n  RELEASE = 'release',\n}\n\nexport type DashboardFilters = {\n  [DashboardFilterKeys.RELEASE]?: string[];\n};\n\n/**\n * Saved dashboard with widgets\n */\nexport type DashboardDetails = {\n  dateCreated: string;\n  filters: DashboardFilters;\n  id: string;\n  projects: number[];\n  title: string;\n  widgets: Widget[];\n  createdBy?: User;\n  end?: string;\n  environment?: string[];\n  period?: string;\n  start?: string;\n  utc?: boolean;\n};\n\nexport enum DashboardState {\n  VIEW = 'view',\n  EDIT = 'edit',\n  CREATE = 'create',\n  PENDING_DELETE = 'pending_delete',\n  PREVIEW = 'preview',\n}\n\n// where we launch the dashboard widget from\nexport enum DashboardWidgetSource {\n  DISCOVERV2 = 'discoverv2',\n  DASHBOARDS = 'dashboards',\n  LIBRARY = 'library',\n  ISSUE_DETAILS = 'issueDetail',\n}\n","import invert from 'lodash/invert';\n\nimport {\n  SelectValue,\n  SessionAggregationColumn,\n  SessionField,\n  SessionsMeta,\n  SessionsOperation,\n  SessionStatus,\n} from 'sentry/types';\nimport {defined} from 'sentry/utils';\nimport {SessionMetric} from 'sentry/utils/metrics/fields';\nimport {FieldValue, FieldValueKind} from 'sentry/views/eventsV2/table/types';\n\nexport const DERIVED_STATUS_METRICS_PATTERN =\n  /count_(abnormal|errored|crashed|healthy)\\((user|session)\\)/;\n\nexport enum DerivedStatusFields {\n  HEALTHY_SESSIONS = 'count_healthy(session)',\n  HEALTHY_USERS = 'count_healthy(user)',\n  ABNORMAL_SESSIONS = 'count_abnormal(session)',\n  ABNORMAL_USERS = 'count_abnormal(user)',\n  CRASHED_SESSIONS = 'count_crashed(session)',\n  CRASHED_USERS = 'count_crashed(user)',\n  ERRORED_SESSIONS = 'count_errored(session)',\n  ERRORED_USERS = 'count_errored(user)',\n}\n\nexport const FIELD_TO_METRICS_EXPRESSION = {\n  'count_healthy(session)': SessionMetric.SESSION_HEALTHY,\n  'count_healthy(user)': SessionMetric.USER_HEALTHY,\n  'count_abnormal(session)': SessionMetric.SESSION_ABNORMAL,\n  'count_abnormal(user)': SessionMetric.USER_ABNORMAL,\n  'count_crashed(session)': SessionMetric.SESSION_CRASHED,\n  'count_crashed(user)': SessionMetric.USER_CRASHED,\n  'count_errored(session)': SessionMetric.SESSION_ERRORED,\n  'count_errored(user)': SessionMetric.USER_ERRORED,\n  'count_unique(user)': `count_unique(${SessionMetric.USER})`,\n  'sum(session)': `sum(${SessionMetric.SESSION})`,\n  'crash_free_rate(session)': SessionMetric.SESSION_CRASH_FREE_RATE,\n  'crash_free_rate(user)': SessionMetric.USER_CRASH_FREE_RATE,\n  'crash_rate(session)': SessionMetric.SESSION_CRASH_RATE,\n  'crash_rate(user)': SessionMetric.USER_CRASH_RATE,\n  'avg(session.duration)': `avg(${SessionMetric.SESSION_DURATION})`,\n  'max(session.duration)': `max(${SessionMetric.SESSION_DURATION})`,\n  'p50(session.duration)': `p50(${SessionMetric.SESSION_DURATION})`,\n  'p75(session.duration)': `p75(${SessionMetric.SESSION_DURATION})`,\n  'p95(session.duration)': `p95(${SessionMetric.SESSION_DURATION})`,\n  'p99(session.duration)': `p99(${SessionMetric.SESSION_DURATION})`,\n  project: 'project_id',\n};\n\nexport const METRICS_EXPRESSION_TO_FIELD = invert(FIELD_TO_METRICS_EXPRESSION);\n\nexport const DISABLED_SORT = [\n  'count_errored(session)',\n  'count_errored(user)',\n  'count_healthy(session)',\n  'count_healthy(user)',\n  'session.status',\n];\n\nexport const TAG_SORT_DENY_LIST = ['project', 'environment'];\n\nexport const SESSIONS_FIELDS: Readonly<Partial<Record<SessionField, SessionsMeta>>> = {\n  [SessionField.SESSION]: {\n    name: 'session',\n    operations: [\n      'sum',\n      'crash_rate',\n      'crash_free_rate',\n      'count_healthy',\n      'count_abnormal',\n      'count_crashed',\n      'count_errored',\n    ],\n    type: 'integer',\n  },\n  [SessionField.USER]: {\n    name: 'user',\n    operations: [\n      'count_unique',\n      'crash_rate',\n      'crash_free_rate',\n      'count_healthy',\n      'count_abnormal',\n      'count_crashed',\n      'count_errored',\n    ],\n    type: 'string',\n  },\n  [SessionField.SESSION_DURATION]: {\n    name: 'session.duration',\n    operations: ['avg', 'p50', 'p75', 'p95', 'p99', 'max'],\n    type: 'duration',\n  },\n};\n\nexport const SESSIONS_OPERATIONS: Readonly<\n  Record<SessionsOperation, SessionAggregationColumn>\n> = {\n  sum: {\n    outputType: 'integer',\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['integer'],\n        defaultValue: SessionField.SESSION,\n        required: true,\n      },\n    ],\n  },\n  count_unique: {\n    outputType: 'integer',\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['string'],\n        defaultValue: SessionField.USER,\n        required: true,\n      },\n    ],\n  },\n  count_healthy: {\n    outputType: 'integer',\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['integer', 'string'],\n        defaultValue: SessionField.SESSION,\n        required: true,\n      },\n    ],\n  },\n  count_abnormal: {\n    outputType: 'integer',\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['integer', 'string'],\n        defaultValue: SessionField.SESSION,\n        required: true,\n      },\n    ],\n  },\n  count_crashed: {\n    outputType: 'integer',\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['integer', 'string'],\n        defaultValue: SessionField.SESSION,\n        required: true,\n      },\n    ],\n  },\n  count_errored: {\n    outputType: 'integer',\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['integer', 'string'],\n        defaultValue: SessionField.SESSION,\n        required: true,\n      },\n    ],\n  },\n  crash_rate: {\n    outputType: 'percentage',\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['integer', 'string'],\n        defaultValue: SessionField.SESSION,\n        required: true,\n      },\n    ],\n  },\n  crash_free_rate: {\n    outputType: 'percentage',\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['integer', 'string'],\n        defaultValue: SessionField.SESSION,\n        required: true,\n      },\n    ],\n  },\n  avg: {\n    outputType: null,\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['duration'],\n        defaultValue: SessionField.SESSION_DURATION,\n        required: true,\n      },\n    ],\n  },\n  max: {\n    outputType: null,\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['duration'],\n        defaultValue: SessionField.SESSION_DURATION,\n        required: true,\n      },\n    ],\n  },\n  p50: {\n    outputType: null,\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['duration'],\n        defaultValue: SessionField.SESSION_DURATION,\n        required: true,\n      },\n    ],\n  },\n  p75: {\n    outputType: null,\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['duration'],\n        defaultValue: SessionField.SESSION_DURATION,\n        required: true,\n      },\n    ],\n  },\n  p95: {\n    outputType: null,\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['duration'],\n        defaultValue: SessionField.SESSION_DURATION,\n        required: true,\n      },\n    ],\n  },\n  p99: {\n    outputType: null,\n    parameters: [\n      {\n        kind: 'column',\n        columnTypes: ['duration'],\n        defaultValue: SessionField.SESSION_DURATION,\n        required: true,\n      },\n    ],\n  },\n};\n\nexport const SESSIONS_TAGS = ['environment', 'project', 'release', 'session.status'];\nexport const SESSIONS_FILTER_TAGS = ['environment', 'project', 'release'];\nexport const SESSION_STATUSES = Object.values(SessionStatus);\n\nexport function generateReleaseWidgetFieldOptions(\n  fields: SessionsMeta[] = Object.values(SESSIONS_FIELDS),\n  tagKeys?: string[]\n) {\n  const fieldOptions: Record<string, SelectValue<FieldValue>> = {};\n\n  const operations = new Set<SessionsOperation>();\n  const knownOperations = Object.keys(SESSIONS_OPERATIONS);\n\n  fields\n    .sort((a, b) => a.name.localeCompare(b.name))\n    .forEach(field => {\n      field.operations.forEach(operation => operations.add(operation));\n\n      fieldOptions[`field:${field.name}`] = {\n        label: field.name,\n        value: {\n          kind: FieldValueKind.METRICS,\n          meta: {\n            name: field.name,\n            dataType: field.type,\n          },\n        },\n      };\n    });\n\n  Array.from(operations)\n    .filter(operation => knownOperations.includes(operation))\n    .sort((a, b) => a.localeCompare(b))\n    .forEach(operation => {\n      fieldOptions[`function:${operation}`] = {\n        label: `${operation}(${'\\u2026'})`,\n        value: {\n          kind: FieldValueKind.FUNCTION,\n          meta: {\n            name: operation,\n            parameters: SESSIONS_OPERATIONS[operation].parameters.map(param => param),\n          },\n        },\n      };\n    });\n\n  if (defined(tagKeys)) {\n    // Expose environment. session.status, project etc. as fields.\n    tagKeys\n      .sort((a, b) => a.localeCompare(b))\n      .forEach(tag => {\n        fieldOptions[`field:${tag}`] = {\n          label: tag,\n          value: {\n            kind: FieldValueKind.FIELD,\n            meta: {name: tag, dataType: 'string'},\n          },\n        };\n      });\n  }\n\n  return fieldOptions;\n}\n","import {t} from 'sentry/locale';\nimport {NewQuery} from 'sentry/types';\n\nexport const DEFAULT_EVENT_VIEW: Readonly<NewQuery> = {\n  id: undefined,\n  name: t('All Events'),\n  query: '',\n  projects: [],\n  fields: ['title', 'event.type', 'project', 'user.display', 'timestamp'],\n  orderby: '-timestamp',\n  version: 2,\n  range: '24h',\n};\n\nexport const TRANSACTION_VIEWS: Readonly<Array<NewQuery>> = [\n  {\n    id: undefined,\n    name: t('Transactions by Volume'),\n    fields: [\n      'transaction',\n      'project',\n      'count()',\n      'avg(transaction.duration)',\n      'p75()',\n      'p95()',\n    ],\n    orderby: '-count',\n    query: 'event.type:transaction',\n    projects: [],\n    version: 2,\n    range: '24h',\n  },\n];\n\nexport const WEB_VITALS_VIEWS: Readonly<Array<NewQuery>> = [\n  {\n    id: undefined,\n    name: t('Web Vitals'),\n    fields: [\n      'transaction',\n      'epm()',\n      'p75(measurements.fp)',\n      'p75(measurements.fcp)',\n      'p75(measurements.lcp)',\n      'p75(measurements.fid)',\n      'p75(measurements.cls)',\n    ],\n    orderby: '-epm',\n    query: 'event.type:transaction transaction.op:pageload',\n    projects: [],\n    version: 2,\n    range: '24h',\n    yAxis: ['epm()'],\n  },\n];\n\nexport const ALL_VIEWS: Readonly<Array<NewQuery>> = [\n  DEFAULT_EVENT_VIEW,\n  {\n    id: undefined,\n    name: t('Errors by Title'),\n    fields: ['title', 'count()', 'count_unique(user)', 'project'],\n    orderby: '-count',\n    query: 'event.type:error',\n    projects: [],\n    version: 2,\n    range: '24h',\n    display: 'top5',\n  },\n  {\n    id: undefined,\n    name: t('Errors by URL'),\n    fields: ['url', 'count()', 'count_unique(issue)'],\n    orderby: '-count',\n    query: 'event.type:error has:url',\n    projects: [],\n    version: 2,\n    range: '24h',\n    display: 'top5',\n  },\n];\n","import {\n  createSavedQuery,\n  deleteSavedQuery,\n  updateSavedQuery,\n} from 'sentry/actionCreators/discoverSavedQueries';\nimport {addErrorMessage, addSuccessMessage} from 'sentry/actionCreators/indicator';\nimport {Client} from 'sentry/api';\nimport {t} from 'sentry/locale';\nimport {NewQuery, Organization, SavedQuery} from 'sentry/types';\nimport {trackAnalyticsEvent} from 'sentry/utils/analytics';\nimport EventView from 'sentry/utils/discover/eventView';\nimport {DisplayModes} from 'sentry/utils/discover/types';\nimport {DisplayType} from 'sentry/views/dashboardsV2/types';\n\nexport function handleCreateQuery(\n  api: Client,\n  organization: Organization,\n  eventView: EventView,\n  yAxis: string[],\n  // True if this is a brand new query being saved\n  // False if this is a modification from a saved query\n  isNewQuery: boolean = true\n): Promise<SavedQuery> {\n  const payload = eventView.toNewQuery();\n  payload.yAxis = yAxis;\n\n  trackAnalyticsEvent({\n    ...getAnalyticsCreateEventKeyName(isNewQuery, 'request'),\n    organization_id: parseInt(organization.id, 10),\n    ...extractAnalyticsQueryFields(payload),\n  });\n\n  const promise = createSavedQuery(api, organization.slug, payload);\n\n  promise\n    .then((savedQuery: SavedQuery) => {\n      addSuccessMessage(t('Query saved'));\n\n      trackAnalyticsEvent({\n        ...getAnalyticsCreateEventKeyName(isNewQuery, 'success'),\n        organization_id: parseInt(organization.id, 10),\n        ...extractAnalyticsQueryFields(payload),\n      });\n\n      return savedQuery;\n    })\n    .catch((err: Error) => {\n      addErrorMessage(t('Query not saved'));\n\n      trackAnalyticsEvent({\n        ...getAnalyticsCreateEventKeyName(isNewQuery, 'failed'),\n        organization_id: parseInt(organization.id, 10),\n        ...extractAnalyticsQueryFields(payload),\n        error:\n          (err && err.message) ||\n          `Could not save a ${isNewQuery ? 'new' : 'existing'} query`,\n      });\n    });\n\n  return promise;\n}\n\nconst EVENT_NAME_EXISTING_MAP = {\n  request: 'Discoverv2: Request to save a saved query as a new query',\n  success: 'Discoverv2: Successfully saved a saved query as a new query',\n  failed: 'Discoverv2: Failed to save a saved query as a new query',\n};\nconst EVENT_NAME_NEW_MAP = {\n  request: 'Discoverv2: Request to save a new query',\n  success: 'Discoverv2: Successfully saved a new query',\n  failed: 'Discoverv2: Failed to save a new query',\n};\n\nexport function handleUpdateQuery(\n  api: Client,\n  organization: Organization,\n  eventView: EventView,\n  yAxis: string[]\n): Promise<SavedQuery> {\n  const payload = eventView.toNewQuery();\n  payload.yAxis = yAxis;\n\n  if (!eventView.name) {\n    addErrorMessage(t('Please name your query'));\n    return Promise.reject();\n  }\n\n  trackAnalyticsEvent({\n    eventKey: 'discover_v2.update_query_request',\n    eventName: 'Discoverv2: Request to update a saved query',\n    organization_id: parseInt(organization.id, 10),\n    ...extractAnalyticsQueryFields(payload),\n  });\n\n  const promise = updateSavedQuery(api, organization.slug, payload);\n\n  promise\n    .then((savedQuery: SavedQuery) => {\n      addSuccessMessage(t('Query updated'));\n\n      trackAnalyticsEvent({\n        eventKey: 'discover_v2.update_query_success',\n        eventName: 'Discoverv2: Successfully updated a saved query',\n        organization_id: parseInt(organization.id, 10),\n        ...extractAnalyticsQueryFields(payload),\n      });\n      // NOTE: there is no need to convert _saved into an EventView and push it\n      //       to the browser history, since this.props.eventView already\n      //       derives from location.\n\n      return savedQuery;\n    })\n    .catch((err: Error) => {\n      addErrorMessage(t('Query not updated'));\n\n      trackAnalyticsEvent({\n        eventKey: 'discover_v2.update_query_failed',\n        eventName: 'Discoverv2: Failed to update a saved query',\n        organization_id: parseInt(organization.id, 10),\n        ...extractAnalyticsQueryFields(payload),\n        error: (err && err.message) || 'Failed to update a query',\n      });\n    });\n\n  return promise;\n}\n\n/**\n * Essentially the same as handleUpdateQuery, but specifically for changing the\n * name of the query\n */\nexport function handleUpdateQueryName(\n  api: Client,\n  organization: Organization,\n  eventView: EventView\n) {\n  const payload = eventView.toNewQuery();\n\n  trackAnalyticsEvent({\n    eventKey: 'discover_v2.update_query_name_request',\n    eventName: \"Discoverv2: Request to update a saved query's name\",\n    organization_id: parseInt(organization.id, 10),\n    ...extractAnalyticsQueryFields(payload),\n  });\n\n  const promise = updateSavedQuery(api, organization.slug, payload);\n\n  promise\n    .then(_saved => {\n      addSuccessMessage(t('Query name saved'));\n\n      trackAnalyticsEvent({\n        eventKey: 'discover_v2.update_query_name_success',\n        eventName: \"Discoverv2: Successfully updated a saved query's name\",\n        organization_id: parseInt(organization.id, 10),\n        ...extractAnalyticsQueryFields(payload),\n      });\n    })\n    .catch((err: Error) => {\n      addErrorMessage(t('Query name not saved'));\n\n      trackAnalyticsEvent({\n        eventKey: 'discover_v2.update_query_failed',\n        eventName: \"Discoverv2: Failed to update a saved query's name\",\n        organization_id: parseInt(organization.id, 10),\n        ...extractAnalyticsQueryFields(payload),\n        error: (err && err.message) || 'Failed to update a query name',\n      });\n    });\n\n  return promise;\n}\n\nexport function handleDeleteQuery(\n  api: Client,\n  organization: Organization,\n  eventView: EventView\n): Promise<void> {\n  trackAnalyticsEvent({\n    eventKey: 'discover_v2.delete_query_request',\n    eventName: 'Discoverv2: Request to delete a saved query',\n    organization_id: parseInt(organization.id, 10),\n    ...extractAnalyticsQueryFields(eventView.toNewQuery()),\n  });\n\n  const promise = deleteSavedQuery(api, organization.slug, eventView.id!);\n\n  promise\n    .then(() => {\n      addSuccessMessage(t('Query deleted'));\n\n      trackAnalyticsEvent({\n        eventKey: 'discover_v2.delete_query_success',\n        eventName: 'Discoverv2: Successfully deleted a saved query',\n        organization_id: parseInt(organization.id, 10),\n        ...extractAnalyticsQueryFields(eventView.toNewQuery()),\n      });\n    })\n    .catch((err: Error) => {\n      addErrorMessage(t('Query not deleted'));\n\n      trackAnalyticsEvent({\n        eventKey: 'discover_v2.delete_query_failed',\n        eventName: 'Discoverv2: Failed to delete a saved query',\n        organization_id: parseInt(organization.id, 10),\n        ...extractAnalyticsQueryFields(eventView.toNewQuery()),\n        error: (err && err.message) || 'Failed to delete query',\n      });\n    });\n\n  return promise;\n}\n\nexport function getAnalyticsCreateEventKeyName(\n  // True if this is a brand new query being saved\n  // False if this is a modification from a saved query\n  isNewQuery: boolean,\n  type: 'request' | 'success' | 'failed'\n) {\n  const eventKey = isNewQuery\n    ? 'discover_v2.save_new_query_' + type\n    : 'discover_v2.save_existing_query_' + type;\n\n  const eventName = isNewQuery ? EVENT_NAME_NEW_MAP[type] : EVENT_NAME_EXISTING_MAP[type];\n\n  return {\n    eventKey,\n    eventName,\n  };\n}\n\n/**\n * Takes in a DiscoverV2 NewQuery object and returns a Partial containing\n * the desired fields to populate into reload analytics\n */\nexport function extractAnalyticsQueryFields(payload: NewQuery): Partial<NewQuery> {\n  const {projects, fields, query} = payload;\n  return {\n    projects,\n    fields,\n    query,\n  };\n}\n\nexport function displayModeToDisplayType(displayMode: DisplayModes): DisplayType {\n  switch (displayMode) {\n    case DisplayModes.BAR:\n      return DisplayType.BAR;\n    case DisplayModes.WORLDMAP:\n      return DisplayType.WORLD_MAP;\n    case DisplayModes.TOP5:\n      return DisplayType.TOP_N;\n    default:\n      return DisplayType.LINE;\n  }\n}\n","import {GridColumnOrder, GridColumnSortBy} from 'sentry/components/gridEditable';\nimport {TableDataRow} from 'sentry/utils/discover/discoverQuery';\nimport {\n  AggregateParameter,\n  Column,\n  ColumnType,\n  ColumnValueType,\n} from 'sentry/utils/discover/fields';\n\n/**\n * It is assumed that `aggregation` and `field` have the same ColumnValueType\n */\nexport type TableColumn<K> = GridColumnOrder<K> & {\n  // key: K                     From GridColumn\n  // name: string               From GridColumnHeader\n  column: Readonly<Column>;\n  isSortable: boolean;\n\n  type: ColumnValueType;\n  width?: number;\n  // isPrimary: boolean         From GridColumnHeader\n};\n\nexport type TableColumnSort<K> = GridColumnSortBy<K>;\n\nexport type TableState = {\n  columnOrder: TableColumn<keyof TableDataRow>[];\n  columnSortBy: TableColumnSort<keyof TableDataRow>[];\n};\n\nexport enum FieldValueKind {\n  TAG = 'tag',\n  MEASUREMENT = 'measurement',\n  CUSTOM_MEASUREMENT = 'custom_measurement',\n  BREAKDOWN = 'breakdown',\n  FIELD = 'field',\n  FUNCTION = 'function',\n  EQUATION = 'equation',\n  METRICS = 'metric',\n  NUMERIC_METRICS = 'numeric_metric',\n}\n\nexport type FieldValueColumns =\n  | {\n      kind: FieldValueKind.TAG;\n      meta: {\n        dataType: ColumnType;\n        name: string;\n        // Set to true for tag values we invent at runtime.\n        unknown?: boolean;\n      };\n    }\n  | {\n      kind: FieldValueKind.MEASUREMENT;\n      meta: {\n        dataType: ColumnType;\n        name: string;\n      };\n    }\n  | {\n      kind: FieldValueKind.CUSTOM_MEASUREMENT;\n      meta: {\n        dataType: ColumnType;\n        functions: string[];\n        name: string;\n      };\n    }\n  | {\n      kind: FieldValueKind.BREAKDOWN;\n      meta: {\n        dataType: 'duration';\n        name: string;\n      };\n    }\n  | {\n      kind: FieldValueKind.FIELD;\n      meta: {\n        dataType: ColumnType;\n        name: string;\n      };\n    }\n  | {\n      kind: FieldValueKind.METRICS;\n      meta: {\n        dataType: ColumnType;\n        name: string;\n      };\n    }\n  | {\n      kind: FieldValueKind.NUMERIC_METRICS;\n      meta: {\n        dataType: 'numeric';\n        name: string;\n      };\n    };\n\n// Payload of select options in the column editor.\n// The first column contains a union of tags, fields and functions,\n// and we need ways to disambiguate them.\nexport type FieldValue =\n  | FieldValueColumns\n  | {\n      kind: FieldValueKind.FUNCTION;\n      meta: {\n        name: string;\n        parameters: AggregateParameter[];\n      };\n    }\n  | {\n      kind: FieldValueKind.EQUATION;\n      meta: {\n        name: string;\n      };\n    };\n","import {browserHistory, InjectedRouter} from 'react-router';\nimport {urlEncode} from '@sentry/utils';\nimport {Location, Query} from 'history';\nimport * as Papa from 'papaparse';\n\nimport {\n  openAddDashboardWidgetModal,\n  openAddToDashboardModal,\n} from 'sentry/actionCreators/modal';\nimport {COL_WIDTH_UNDEFINED} from 'sentry/components/gridEditable';\nimport {URL_PARAM} from 'sentry/constants/pageFilters';\nimport {t} from 'sentry/locale';\nimport {NewQuery, Organization, OrganizationSummary, SelectValue} from 'sentry/types';\nimport {Event} from 'sentry/types/event';\nimport trackAdvancedAnalyticsEvent from 'sentry/utils/analytics/trackAdvancedAnalyticsEvent';\nimport {getUtcDateString} from 'sentry/utils/dates';\nimport {TableDataRow} from 'sentry/utils/discover/discoverQuery';\nimport EventView from 'sentry/utils/discover/eventView';\nimport {\n  aggregateFunctionOutputType,\n  Aggregation,\n  AGGREGATIONS,\n  Column,\n  ColumnType,\n  ColumnValueType,\n  explodeFieldString,\n  Field,\n  getAggregateAlias,\n  getColumnsAndAggregates,\n  getEquation,\n  isAggregateEquation,\n  isEquation,\n  isMeasurement,\n  isSpanOperationBreakdownField,\n  measurementType,\n  TRACING_FIELDS,\n} from 'sentry/utils/discover/fields';\nimport {DisplayModes, TOP_N} from 'sentry/utils/discover/types';\nimport {getTitle} from 'sentry/utils/events';\nimport {\n  DISCOVER_FIELDS,\n  FIELDS,\n  FieldValueType,\n  getFieldDefinition,\n} from 'sentry/utils/fields';\nimport localStorage from 'sentry/utils/localStorage';\nimport {MutableSearch} from 'sentry/utils/tokenizeSearch';\n\nimport {DashboardWidgetSource, DisplayType, WidgetQuery} from '../dashboardsV2/types';\n\nimport {displayModeToDisplayType} from './savedQuery/utils';\nimport {FieldValue, FieldValueKind, TableColumn} from './table/types';\nimport {ALL_VIEWS, TRANSACTION_VIEWS, WEB_VITALS_VIEWS} from './data';\n\nexport type QueryWithColumnState =\n  | Query\n  | {\n      field: string | string[] | null | undefined;\n      sort: string | string[] | null | undefined;\n    };\n\nconst TEMPLATE_TABLE_COLUMN: TableColumn<string> = {\n  key: '',\n  name: '',\n\n  type: 'never',\n  isSortable: false,\n\n  column: Object.freeze({kind: 'field', field: ''}),\n  width: COL_WIDTH_UNDEFINED,\n};\n\n// TODO(mark) these types are coupled to the gridEditable component types and\n// I'd prefer the types to be more general purpose but that will require a second pass.\nexport function decodeColumnOrder(\n  fields: Readonly<Field[]>,\n  useFullEquationAsKey?: boolean\n): TableColumn<string>[] {\n  let equations = 0;\n  return fields.map((f: Field) => {\n    const column: TableColumn<string> = {...TEMPLATE_TABLE_COLUMN};\n\n    const col = explodeFieldString(f.field, f.alias);\n    const columnName = f.field;\n    if (isEquation(f.field)) {\n      column.key = useFullEquationAsKey ? f.field : `equation[${equations}]`;\n      column.name = getEquation(columnName);\n      equations += 1;\n    } else {\n      column.key = columnName;\n      column.name = columnName;\n    }\n    column.width = f.width || COL_WIDTH_UNDEFINED;\n\n    if (col.kind === 'function') {\n      // Aggregations can have a strict outputType or they can inherit from their field.\n      // Otherwise use the FIELDS data to infer types.\n      const outputType = aggregateFunctionOutputType(col.function[0], col.function[1]);\n      if (outputType !== null) {\n        column.type = outputType;\n      }\n      const aggregate = AGGREGATIONS[col.function[0]];\n      column.isSortable = aggregate && aggregate.isSortable;\n    } else if (col.kind === 'field') {\n      if (FIELDS.hasOwnProperty(col.field)) {\n        column.type = FIELDS[col.field].valueType as ColumnValueType;\n      } else if (isMeasurement(col.field)) {\n        column.type = measurementType(col.field);\n      } else if (isSpanOperationBreakdownField(col.field)) {\n        column.type = 'duration';\n      }\n    }\n    column.column = col;\n\n    return column;\n  });\n}\n\nexport function pushEventViewToLocation(props: {\n  location: Location;\n  nextEventView: EventView;\n  extraQuery?: Query;\n}) {\n  const {location, nextEventView} = props;\n  const extraQuery = props.extraQuery || {};\n  const queryStringObject = nextEventView.generateQueryStringObject();\n\n  browserHistory.push({\n    ...location,\n    query: {\n      ...extraQuery,\n      ...queryStringObject,\n    },\n  });\n}\n\nexport function generateTitle({\n  eventView,\n  event,\n  organization,\n}: {\n  eventView: EventView;\n  event?: Event;\n  organization?: Organization;\n}) {\n  const titles = [t('Discover')];\n\n  const eventViewName = eventView.name;\n  if (typeof eventViewName === 'string' && String(eventViewName).trim().length > 0) {\n    titles.push(String(eventViewName).trim());\n  }\n\n  const eventTitle = event ? getTitle(event, organization?.features).title : undefined;\n\n  if (eventTitle) {\n    titles.push(eventTitle);\n  }\n\n  titles.reverse();\n\n  return titles.join(' - ');\n}\n\nexport function getPrebuiltQueries(organization: Organization) {\n  const views = [...ALL_VIEWS];\n  if (organization.features.includes('performance-view')) {\n    // insert transactions queries at index 2\n    views.splice(2, 0, ...TRANSACTION_VIEWS);\n    views.push(...WEB_VITALS_VIEWS);\n  }\n\n  return views;\n}\n\nfunction disableMacros(value: string | null | boolean | number) {\n  const unsafeCharacterRegex = /^[\\=\\+\\-\\@]/;\n\n  if (typeof value === 'string' && `${value}`.match(unsafeCharacterRegex)) {\n    return `'${value}`;\n  }\n\n  return value;\n}\n\nexport function downloadAsCsv(tableData, columnOrder, filename) {\n  const {data} = tableData;\n  const headings = columnOrder.map(column => column.name);\n  const keys = columnOrder.map(column => column.key);\n\n  const csvContent = Papa.unparse({\n    fields: headings,\n    data: data.map(row =>\n      keys.map(key => {\n        return disableMacros(row[key]);\n      })\n    ),\n  });\n\n  // Need to also manually replace # since encodeURI skips them\n  const encodedDataUrl = `data:text/csv;charset=utf8,${encodeURIComponent(csvContent)}`;\n\n  // Create a download link then click it, this is so we can get a filename\n  const link = document.createElement('a');\n  const now = new Date();\n  link.setAttribute('href', encodedDataUrl);\n  link.setAttribute('download', `${filename} ${getUtcDateString(now)}.csv`);\n  link.click();\n  link.remove();\n\n  // Make testing easier\n  return encodedDataUrl;\n}\n\nconst ALIASED_AGGREGATES_COLUMN = {\n  last_seen: 'timestamp',\n  failure_count: 'transaction.status',\n};\n\n/**\n * Convert an aggregate into the resulting column from a drilldown action.\n * The result is null if the drilldown results in the aggregate being removed.\n */\nfunction drilldownAggregate(\n  func: Extract<Column, {kind: 'function'}>\n): Extract<Column, {kind: 'field'}> | null {\n  const key = func.function[0];\n  const aggregation = AGGREGATIONS[key];\n  let column = func.function[1];\n\n  if (ALIASED_AGGREGATES_COLUMN.hasOwnProperty(key)) {\n    // Some aggregates are just shortcuts to other aggregates with\n    // predefined arguments so we can directly map them to the result.\n    column = ALIASED_AGGREGATES_COLUMN[key];\n  } else if (aggregation?.parameters?.[0]) {\n    const parameter = aggregation.parameters[0];\n    if (parameter.kind !== 'column') {\n      // The aggregation does not accept a column as a parameter,\n      // so we clear the column.\n      column = '';\n    } else if (!column && parameter.required === false) {\n      // The parameter was not given for a non-required parameter,\n      // so we fall back to the default.\n      column = parameter.defaultValue;\n    }\n  } else {\n    // The aggregation does not exist or does not have any parameters,\n    // so we clear the column.\n    column = '';\n  }\n  return column ? {kind: 'field', field: column} : null;\n}\n\n/**\n * Convert an aggregated query into one that does not have aggregates.\n * Will also apply additions conditions defined in `additionalConditions`\n * and generate conditions based on the `dataRow` parameter and the current fields\n * in the `eventView`.\n */\nexport function getExpandedResults(\n  eventView: EventView,\n  additionalConditions: Record<string, string>,\n  dataRow?: TableDataRow | Event\n): EventView {\n  const fieldSet = new Set();\n  // Expand any functions in the resulting column, and dedupe the result.\n  // Mark any column as null to remove it.\n  const expandedColumns: (Column | null)[] = eventView.fields.map((field: Field) => {\n    const exploded = explodeFieldString(field.field, field.alias);\n    const column = exploded.kind === 'function' ? drilldownAggregate(exploded) : exploded;\n\n    if (\n      // if expanding the function failed\n      column === null ||\n      // the new column is already present\n      fieldSet.has(column.field) ||\n      // Skip aggregate equations, their functions will already be added so we just want to remove it\n      isAggregateEquation(field.field)\n    ) {\n      return null;\n    }\n\n    fieldSet.add(column.field);\n\n    return column;\n  });\n\n  // id should be default column when expanded results in no columns; but only if\n  // the Discover query's columns is non-empty.\n  // This typically occurs in Discover drilldowns.\n  if (fieldSet.size === 0 && expandedColumns.length) {\n    expandedColumns[0] = {kind: 'field', field: 'id'};\n  }\n\n  // update the columns according the the expansion above\n  const nextView = expandedColumns.reduceRight(\n    (newView, column, index) =>\n      column === null\n        ? newView.withDeletedColumn(index, undefined)\n        : newView.withUpdatedColumn(index, column, undefined),\n    eventView.clone()\n  );\n\n  nextView.query = generateExpandedConditions(nextView, additionalConditions, dataRow);\n  return nextView;\n}\n\n/**\n * Create additional conditions based on the fields in an EventView\n * and a datarow/event\n */\nfunction generateAdditionalConditions(\n  eventView: EventView,\n  dataRow?: TableDataRow | Event\n): Record<string, string | string[]> {\n  const specialKeys = Object.values(URL_PARAM);\n  const conditions: Record<string, string | string[]> = {};\n\n  if (!dataRow) {\n    return conditions;\n  }\n\n  eventView.fields.forEach((field: Field) => {\n    const column = explodeFieldString(field.field, field.alias);\n\n    // Skip aggregate fields\n    if (column.kind === 'function') {\n      return;\n    }\n\n    const dataKey = getAggregateAlias(field.field);\n    // Append the current field as a condition if it exists in the dataRow\n    // Or is a simple key in the event. More complex deeply nested fields are\n    // more challenging to get at as their location in the structure does not\n    // match their name.\n    if (dataRow.hasOwnProperty(dataKey)) {\n      let value = dataRow[dataKey];\n\n      if (Array.isArray(value)) {\n        if (value.length > 1) {\n          conditions[column.field] = value;\n          return;\n        }\n        // An array with only one value is equivalent to the value itself.\n        value = value[0];\n      }\n\n      // if the value will be quoted, then do not trim it as the whitespaces\n      // may be important to the query and should not be trimmed\n      const shouldQuote =\n        value === null || value === undefined\n          ? false\n          : /[\\s\\(\\)\\\\\"]/g.test(String(value).trim());\n      const nextValue =\n        value === null || value === undefined\n          ? ''\n          : shouldQuote\n          ? String(value)\n          : String(value).trim();\n\n      if (isMeasurement(column.field) && !nextValue) {\n        // Do not add measurement conditions if nextValue is falsey.\n        // It's expected that nextValue is a numeric value.\n        return;\n      }\n\n      switch (column.field) {\n        case 'timestamp':\n          // normalize the \"timestamp\" field to ensure the payload works\n          conditions[column.field] = getUtcDateString(nextValue);\n          break;\n        default:\n          conditions[column.field] = nextValue;\n      }\n    }\n\n    // If we have an event, check tags as well.\n    if (dataRow.tags && Array.isArray(dataRow.tags)) {\n      const tagIndex = dataRow.tags.findIndex(item => item.key === dataKey);\n      if (tagIndex > -1) {\n        const key = specialKeys.includes(column.field)\n          ? `tags[${column.field}]`\n          : column.field;\n\n        const tagValue = dataRow.tags[tagIndex].value;\n        conditions[key] = tagValue;\n      }\n    }\n  });\n  return conditions;\n}\n\nfunction generateExpandedConditions(\n  eventView: EventView,\n  additionalConditions: Record<string, string>,\n  dataRow?: TableDataRow | Event\n): string {\n  const parsedQuery = new MutableSearch(eventView.query);\n\n  // Remove any aggregates from the search conditions.\n  // otherwise, it'll lead to an invalid query result.\n  for (const key in parsedQuery.filters) {\n    const column = explodeFieldString(key);\n    if (column.kind === 'function') {\n      parsedQuery.removeFilter(key);\n    }\n  }\n\n  const conditions: Record<string, string | string[]> = Object.assign(\n    {},\n    additionalConditions,\n    generateAdditionalConditions(eventView, dataRow)\n  );\n\n  // Add additional conditions provided and generated.\n  for (const key in conditions) {\n    const value = conditions[key];\n\n    if (Array.isArray(value)) {\n      parsedQuery.setFilterValues(key, value);\n      continue;\n    }\n\n    if (key === 'project.id') {\n      eventView.project = [...eventView.project, parseInt(value, 10)];\n      continue;\n    }\n    if (key === 'environment') {\n      if (!eventView.environment.includes(value)) {\n        eventView.environment = [...eventView.environment, value];\n      }\n      continue;\n    }\n    const column = explodeFieldString(key);\n    // Skip aggregates as they will be invalid.\n    if (column.kind === 'function') {\n      continue;\n    }\n\n    parsedQuery.setFilterValues(key, [value]);\n  }\n\n  return parsedQuery.formatString();\n}\n\ntype FieldGeneratorOpts = {\n  organization: OrganizationSummary;\n  aggregations?: Record<string, Aggregation>;\n  customMeasurements?: {functions: string[]; key: string}[] | null;\n  fieldKeys?: string[];\n  measurementKeys?: string[] | null;\n  spanOperationBreakdownKeys?: string[];\n  tagKeys?: string[] | null;\n};\n\nexport function generateFieldOptions({\n  organization,\n  tagKeys,\n  measurementKeys,\n  spanOperationBreakdownKeys,\n  customMeasurements,\n  aggregations = AGGREGATIONS,\n  fieldKeys = DISCOVER_FIELDS,\n}: FieldGeneratorOpts) {\n  let functions = Object.keys(aggregations);\n\n  // Strip tracing features if the org doesn't have access.\n  if (!organization.features.includes('performance-view')) {\n    fieldKeys = fieldKeys.filter(item => !TRACING_FIELDS.includes(item));\n    functions = functions.filter(item => !TRACING_FIELDS.includes(item));\n  }\n  const fieldOptions: Record<string, SelectValue<FieldValue>> = {};\n\n  // Index items by prefixed keys as custom tags can overlap both fields and\n  // function names. Having a mapping makes finding the value objects easier\n  // later as well.\n  functions.forEach(func => {\n    const ellipsis = aggregations[func].parameters.length ? '\\u2026' : '';\n    const parameters = aggregations[func].parameters.map(param => {\n      const overrides = AGGREGATIONS[func].getFieldOverrides;\n      if (typeof overrides === 'undefined') {\n        return param;\n      }\n      return {\n        ...param,\n        ...overrides({parameter: param}),\n      };\n    });\n\n    fieldOptions[`function:${func}`] = {\n      label: `${func}(${ellipsis})`,\n      value: {\n        kind: FieldValueKind.FUNCTION,\n        meta: {\n          name: func,\n          parameters,\n        },\n      },\n    };\n  });\n\n  fieldKeys.forEach(field => {\n    fieldOptions[`field:${field}`] = {\n      label: field,\n      value: {\n        kind: FieldValueKind.FIELD,\n        meta: {\n          name: field,\n          dataType: (getFieldDefinition(field)?.valueType ??\n            FieldValueType.STRING) as ColumnType,\n        },\n      },\n    };\n  });\n\n  if (measurementKeys !== undefined && measurementKeys !== null) {\n    measurementKeys.sort();\n    measurementKeys.forEach(measurement => {\n      fieldOptions[`measurement:${measurement}`] = {\n        label: measurement,\n        value: {\n          kind: FieldValueKind.MEASUREMENT,\n          meta: {name: measurement, dataType: measurementType(measurement)},\n        },\n      };\n    });\n  }\n\n  if (customMeasurements !== undefined && customMeasurements !== null) {\n    customMeasurements.sort(({key: currentKey}, {key: nextKey}) =>\n      currentKey > nextKey ? 1 : currentKey === nextKey ? 0 : -1\n    );\n    customMeasurements.forEach(({key, functions: supportedFunctions}) => {\n      fieldOptions[`measurement:${key}`] = {\n        label: key,\n        value: {\n          kind: FieldValueKind.CUSTOM_MEASUREMENT,\n          meta: {\n            name: key,\n            dataType: measurementType(key),\n            functions: supportedFunctions,\n          },\n        },\n      };\n    });\n  }\n\n  if (Array.isArray(spanOperationBreakdownKeys)) {\n    spanOperationBreakdownKeys.sort();\n    spanOperationBreakdownKeys.forEach(breakdownField => {\n      fieldOptions[`span_op_breakdown:${breakdownField}`] = {\n        label: breakdownField,\n        value: {\n          kind: FieldValueKind.BREAKDOWN,\n          meta: {name: breakdownField, dataType: 'duration'},\n        },\n      };\n    });\n  }\n\n  if (tagKeys !== undefined && tagKeys !== null) {\n    tagKeys.sort();\n    tagKeys.forEach(tag => {\n      const tagValue =\n        fieldKeys.includes(tag) || AGGREGATIONS.hasOwnProperty(tag)\n          ? `tags[${tag}]`\n          : tag;\n      fieldOptions[`tag:${tag}`] = {\n        label: tag,\n        value: {\n          kind: FieldValueKind.TAG,\n          meta: {name: tagValue, dataType: 'string'},\n        },\n      };\n    });\n  }\n\n  return fieldOptions;\n}\n\nconst RENDER_PREBUILT_KEY = 'discover-render-prebuilt';\n\nexport function shouldRenderPrebuilt(): boolean {\n  const shouldRender = localStorage.getItem(RENDER_PREBUILT_KEY);\n  return shouldRender === 'true' || shouldRender === null;\n}\n\nexport function setRenderPrebuilt(value: boolean) {\n  localStorage.setItem(RENDER_PREBUILT_KEY, value ? 'true' : 'false');\n}\n\nexport function eventViewToWidgetQuery({\n  eventView,\n  yAxis,\n  displayType,\n  widgetBuilderNewDesign,\n}: {\n  displayType: DisplayType;\n  eventView: EventView;\n  widgetBuilderNewDesign?: boolean;\n  yAxis?: string | string[];\n}) {\n  const fields = eventView.fields.map(({field}) => field);\n  const {columns, aggregates} = getColumnsAndAggregates(fields);\n  const sort = eventView.sorts[0];\n  const queryYAxis = typeof yAxis === 'string' ? [yAxis] : yAxis ?? ['count()'];\n  let orderby = '';\n  // The orderby should only be set to sort.field if it is a Top N query\n  // since the query uses all of the fields, or if the ordering is used in the y-axis\n  if (sort && displayType !== DisplayType.WORLD_MAP) {\n    let orderbyFunction = '';\n    const aggregateFields = [...queryYAxis, ...aggregates];\n    for (let i = 0; i < aggregateFields.length; i++) {\n      if (sort.field === getAggregateAlias(aggregateFields[i])) {\n        orderbyFunction = aggregateFields[i];\n        break;\n      }\n    }\n\n    const bareOrderby = orderbyFunction === '' ? sort.field : orderbyFunction;\n    if (displayType === DisplayType.TOP_N || bareOrderby) {\n      orderby = `${sort.kind === 'desc' ? '-' : ''}${bareOrderby}`;\n    }\n  }\n  let newAggregates = aggregates;\n\n  if (widgetBuilderNewDesign && displayType !== DisplayType.TABLE) {\n    newAggregates = queryYAxis;\n  } else if (!widgetBuilderNewDesign) {\n    newAggregates = [\n      ...(displayType === DisplayType.TOP_N ? aggregates : []),\n      ...queryYAxis,\n    ];\n  }\n\n  const widgetQuery: WidgetQuery = {\n    name: '',\n    aggregates: newAggregates,\n    columns: [...(displayType === DisplayType.TOP_N ? columns : [])],\n    fields: [...(displayType === DisplayType.TOP_N ? fields : []), ...queryYAxis],\n    conditions: eventView.query,\n    orderby,\n  };\n  return widgetQuery;\n}\n\nexport function handleAddQueryToDashboard({\n  eventView,\n  location,\n  query,\n  organization,\n  router,\n  yAxis,\n}: {\n  eventView: EventView;\n  location: Location;\n  organization: Organization;\n  router: InjectedRouter;\n  query?: NewQuery;\n  yAxis?: string | string[];\n}) {\n  const displayType = displayModeToDisplayType(eventView.display as DisplayModes);\n  const defaultTableFields = eventView.fields.map(({field}) => field);\n  const defaultWidgetQuery = eventViewToWidgetQuery({\n    eventView,\n    displayType,\n    yAxis,\n    widgetBuilderNewDesign: organization.features.includes(\n      'new-widget-builder-experience-design'\n    ),\n  });\n\n  if (organization.features.includes('new-widget-builder-experience-design')) {\n    const {query: widgetAsQueryParams} = constructAddQueryToDashboardLink({\n      eventView,\n      query,\n      organization,\n      yAxis,\n      location,\n    });\n    openAddToDashboardModal({\n      organization,\n      selection: {\n        projects: eventView.project,\n        environments: eventView.environment,\n        datetime: {\n          start: eventView.start,\n          end: eventView.end,\n          period: eventView.statsPeriod,\n          utc: eventView.utc,\n        },\n      },\n      widget: {\n        title: query?.name ?? eventView.name,\n        displayType:\n          organization.features.includes('new-widget-builder-experience-design') &&\n          displayType === DisplayType.TOP_N\n            ? DisplayType.AREA\n            : displayType,\n        queries: [\n          {\n            ...defaultWidgetQuery,\n            aggregates: [...(typeof yAxis === 'string' ? [yAxis] : yAxis ?? ['count()'])],\n          },\n        ],\n        interval: eventView.interval,\n        limit:\n          organization.features.includes('new-widget-builder-experience-design') &&\n          displayType === DisplayType.TOP_N\n            ? Number(eventView.topEvents) || TOP_N\n            : undefined,\n      },\n      router,\n      widgetAsQueryParams,\n      location,\n    });\n    return;\n  }\n\n  openAddDashboardWidgetModal({\n    organization,\n    start: eventView.start,\n    end: eventView.end,\n    statsPeriod: eventView.statsPeriod,\n    source: DashboardWidgetSource.DISCOVERV2,\n    defaultWidgetQuery,\n    defaultTableColumns: defaultTableFields,\n    defaultTitle:\n      query?.name ?? (eventView.name !== 'All Events' ? eventView.name : undefined),\n    displayType,\n  });\n  trackAdvancedAnalyticsEvent('discover_views.add_to_dashboard.modal_open', {\n    organization,\n    saved_query: !!query,\n  });\n}\n\nexport function constructAddQueryToDashboardLink({\n  eventView,\n  query,\n  organization,\n  yAxis,\n  location,\n}: {\n  eventView: EventView;\n  organization: Organization;\n  location?: Location;\n  query?: NewQuery;\n  yAxis?: string | string[];\n}) {\n  const displayType = displayModeToDisplayType(eventView.display as DisplayModes);\n  const defaultTableFields = eventView.fields.map(({field}) => field);\n  const defaultWidgetQuery = eventViewToWidgetQuery({\n    eventView,\n    displayType,\n    yAxis,\n    widgetBuilderNewDesign: organization.features.includes(\n      'new-widget-builder-experience-design'\n    ),\n  });\n  const defaultTitle =\n    query?.name ?? (eventView.name !== 'All Events' ? eventView.name : undefined);\n\n  return {\n    pathname: `/organizations/${organization.slug}/dashboards/new/widget/new/`,\n    query: {\n      ...location?.query,\n      source: DashboardWidgetSource.DISCOVERV2,\n      start: eventView.start,\n      end: eventView.end,\n      statsPeriod: eventView.statsPeriod,\n      defaultWidgetQuery: urlEncode(defaultWidgetQuery),\n      defaultTableColumns: defaultTableFields,\n      defaultTitle,\n      displayType:\n        organization.features.includes('new-widget-builder-experience-design') &&\n        displayType === DisplayType.TOP_N\n          ? DisplayType.AREA\n          : displayType,\n      limit:\n        organization.features.includes('new-widget-builder-experience-design') &&\n        displayType === DisplayType.TOP_N\n          ? Number(eventView.topEvents) || TOP_N\n          : undefined,\n    },\n  };\n}\n","import styled from '@emotion/styled';\nimport {Location} from 'history';\n\nimport GuideAnchor from 'sentry/components/assistant/guideAnchor';\nimport CompactSelect from 'sentry/components/forms/compactSelect';\nimport {pickBarColor} from 'sentry/components/performance/waterfall/utils';\nimport {IconFilter} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {OrganizationSummary} from 'sentry/types';\nimport {SpanOpBreakdown} from 'sentry/utils/fields';\nimport {decodeScalar} from 'sentry/utils/queryString';\n\nimport {decodeHistogramZoom} from './transactionOverview/latencyChart/utils';\n\n// Make sure to update other instances like trends column fields, discover field types.\nexport enum SpanOperationBreakdownFilter {\n  None = 'none',\n  Http = 'http',\n  Db = 'db',\n  Browser = 'browser',\n  Resource = 'resource',\n  Ui = 'ui',\n}\n\nexport const SPAN_OPERATION_BREAKDOWN_FILTER_TO_FIELD: Partial<\n  Record<SpanOperationBreakdownFilter, string>\n> = {\n  [SpanOperationBreakdownFilter.Http]: SpanOpBreakdown.SpansHttp,\n  [SpanOperationBreakdownFilter.Db]: SpanOpBreakdown.SpansDb,\n  [SpanOperationBreakdownFilter.Browser]: SpanOpBreakdown.SpansBrowser,\n  [SpanOperationBreakdownFilter.Resource]: SpanOpBreakdown.SpansResource,\n  [SpanOperationBreakdownFilter.Ui]: SpanOpBreakdown.SpansUi,\n};\n\nconst OPTIONS: SpanOperationBreakdownFilter[] = [\n  SpanOperationBreakdownFilter.Http,\n  SpanOperationBreakdownFilter.Db,\n  SpanOperationBreakdownFilter.Browser,\n  SpanOperationBreakdownFilter.Resource,\n  SpanOperationBreakdownFilter.Ui,\n];\n\nexport const spanOperationBreakdownSingleColumns = OPTIONS.map(o => `spans.${o}`);\n\ntype Props = {\n  currentFilter: SpanOperationBreakdownFilter;\n  onChangeFilter: (newFilter: SpanOperationBreakdownFilter) => void;\n  organization: OrganizationSummary;\n};\n\nfunction Filter(props: Props) {\n  const {currentFilter, onChangeFilter, organization} = props;\n\n  if (!organization.features.includes('performance-ops-breakdown')) {\n    return null;\n  }\n\n  const menuOptions = OPTIONS.map(operationName => ({\n    value: operationName,\n    label: operationName,\n    leadingItems: <OperationDot backgroundColor={pickBarColor(operationName)} />,\n  }));\n\n  return (\n    <GuideAnchor target=\"span_op_breakdowns_filter\" position=\"top\">\n      <CompactSelect\n        isClearable\n        menuTitle={t('Filter by operation')}\n        options={menuOptions}\n        value={currentFilter}\n        onChange={opt => onChangeFilter(opt?.value)}\n        triggerProps={{icon: <IconFilter />}}\n        triggerLabel={\n          currentFilter === SpanOperationBreakdownFilter.None\n            ? t('Filter')\n            : currentFilter\n        }\n      />\n    </GuideAnchor>\n  );\n}\n\nconst OperationDot = styled('div')<{backgroundColor: string}>`\n  display: block;\n  width: ${space(1)};\n  height: ${space(1)};\n  border-radius: 100%;\n  background-color: ${p => p.backgroundColor};\n`;\n\nexport function filterToField(option: SpanOperationBreakdownFilter) {\n  switch (option) {\n    case SpanOperationBreakdownFilter.None:\n      return undefined;\n    default: {\n      return `spans.${option}`;\n    }\n  }\n}\n\nexport function filterToSearchConditions(\n  option: SpanOperationBreakdownFilter,\n  location: Location\n) {\n  let field = filterToField(option);\n  if (!field) {\n    field = 'transaction.duration';\n  }\n\n  // Add duration search conditions implicitly\n\n  const {min, max} = decodeHistogramZoom(location);\n  let query = '';\n  if (typeof min === 'number') {\n    query = `${query} ${field}:>${min}ms`;\n  }\n  if (typeof max === 'number') {\n    query = `${query} ${field}:<${max}ms`;\n  }\n  switch (option) {\n    case SpanOperationBreakdownFilter.None:\n      return query ? query.trim() : undefined;\n    default: {\n      return `${query} has:${filterToField(option)}`.trim();\n    }\n  }\n}\n\nexport function filterToColor(option: SpanOperationBreakdownFilter) {\n  switch (option) {\n    case SpanOperationBreakdownFilter.None:\n      return pickBarColor('');\n    default: {\n      return pickBarColor(option);\n    }\n  }\n}\n\nexport function stringToFilter(option: string) {\n  if (\n    Object.values(SpanOperationBreakdownFilter).includes(\n      option as SpanOperationBreakdownFilter\n    )\n  ) {\n    return option as SpanOperationBreakdownFilter;\n  }\n\n  return SpanOperationBreakdownFilter.None;\n}\n\nexport function decodeFilterFromLocation(location: Location) {\n  return stringToFilter(\n    decodeScalar(location.query.breakdown, SpanOperationBreakdownFilter.None)\n  );\n}\n\nexport function filterToLocationQuery(option: SpanOperationBreakdownFilter) {\n  return {\n    breakdown: option as string,\n  };\n}\n\nexport default Filter;\n","import {Location} from 'history';\n\nimport {decodeInteger} from 'sentry/utils/queryString';\n\nexport const ZOOM_START = 'startDuration';\nexport const ZOOM_END = 'endDuration';\n\nexport function decodeHistogramZoom(location: Location) {\n  let min: number | undefined = undefined;\n  let max: number | undefined = undefined;\n\n  if (ZOOM_START in location.query) {\n    min = decodeInteger(location.query[ZOOM_START], 0);\n  }\n\n  if (ZOOM_END in location.query) {\n    const decodedMax = decodeInteger(location.query[ZOOM_END]);\n    if (typeof decodedMax === 'number') {\n      max = decodedMax;\n    }\n  }\n\n  return {min, max};\n}\n"],"names":["addErrorMessage","Client","t","fetchSavedQueries","api","orgId","query","promise","requestPromise","method","trim","catch","fetchSavedQuery","queryId","createSavedQuery","data","updateSavedQuery","id","updateSavedQueryVisit","deleteSavedQuery","Sentry","ConfigStore","GuideStore","trackAdvancedAnalyticsEvent","fetchGuides","fetchSucceeded","err","status","captureException","registerAnchor","target","unregisterAnchor","nextStep","setForceHide","forceHide","toStep","step","closeGuide","dismissed","dismissGuide","guide","recordDismiss","recordFinish","request","user","get","organization","addLoadingMessage","clearIndicators","parseLinkHeader","fetchTeamKeyTransactions","orgSlug","teams","projects","url","datas","cursor","undefined","hasMore","payload","team","project","length","resp","includeAllArgs","push","pageLinks","getResponseHeader","paginationObject","next","results","responseJSON","detail","flat","toggleKeyTransaction","isKeyTransaction","transactionName","teamIds","map","String","transaction","then","response","errorDetails","non_field_errors","Array","isArray","createActions","PageFiltersActions","MenuItem","space","MenuHeader","p","theme","gray400","innerBorder","defaultProps","header","ExternalLink","Link","tct","getGuidesContent","getDemoModeGuides","requiredTargets","steps","title","description","link","nextText","hasNextGuide","dateThreshold","Date","br","expectedTargets","dismissText","priority","markOthersAsSeen","Component","createRef","Fragment","Button","Body","HovercardBody","Hovercard","BaseGuideAnchor","active","listen","onGuideStateChange","e","stopPropagation","props","onStepComplete","onFinish","currentGuide","state","componentDidMount","componentDidUpdate","_prevProps","prevState","containerElement","current","top","getBoundingClientRect","scrollTop","window","pageYOffset","centerElement","innerHeight","scrollTo","componentWillUnmount","unsubscribe","currentStep","setState","getHovercardBody","to","totalStepCount","currentStepCount","lastStep","hasManySteps","href","location","hash","dismissButton","handleDismiss","handleFinish","handleNextStep","cantDismiss","render","children","position","offset","containerClassName","GuideAnchor","disabled","rest","GuideContainer","purple300","white","GuideContent","GuideTitle","fontSizeExtraLarge","GuideDescription","fontSizeMedium","GuideAction","StyledButton","DismissButton","StepCount","fontSizeSmall","StyledHovercard","borderRadius","forwardRef","useImperativeHandle","useRef","classNames","selectText","AutoSelectText","forwardedRef","className","element","handleClick","moment","DEFAULT_STATS_PERIOD","defined","escape","parsePeriodToHours","decodeList","DEFAULT_TRUNCATE_LENGTH","SIXTY_DAYS","THIRTY_DAYS","TWO_WEEKS","ONE_WEEK","TWENTY_FOUR_HOURS","SIX_HOURS","ONE_HOUR","RELEASE_LINES_THRESHOLD","truncationFormatter","value","truncate","truncationLength","truncated","substring","useShortInterval","datetimeObj","diffInMinutes","getDiffInMinutes","getInterval","fidelity","getSeriesApiInterval","period","start","end","diff","MAX_PERIOD_HOURS_INCLUDE_PREVIOUS","canIncludePreviousPeriod","includePrevious","shouldFetchPreviousPeriod","getSeriesSelection","unselectedSeries","reduce","selection","series","isSingleSeriesStats","totals","isMultiSeriesStats","isTopN","getDimensionValue","dimension","RGB_LIGHTEN_VALUE","lightenHexToRgb","colors","hex","rgb","Math","min","parseInt","slice","DEFAULT_GEO_DATA","processTableResults","tableResults","tableResult","preAggregate","Object","keys","find","column","row","name","getPreviousSeriesName","seriesName","css","IconCheckmark","IconSubtract","disabledStyles","isDisabled","isChecked","isIndeterminate","gray200","backgroundSecondary","border","hoverStyles","textColor","CheckboxFancy","size","_size","formatAbbreviatedNumber","Count","toLocaleString","momentTimezone","getDateFormat","year","getTimeFormat","clock24Hours","seconds","timeZone","substrings","join","getFormat","dateOnly","timeOnly","dateFormat","timeFormat","DateTime","format","date","utc","options","formatString","tz","timezone","getDuration","getExactDuration","Duration","fixedDigits","abbreviation","exact","formatBytesBase2","formatBytesBase10","getDynamicText","FileSize","bytes","base","fixed","Span","Profiler","EmptyStateWarning","LoadingIndicator","IconWarning","onRenderCallback","Grid","GridBody","GridBodyCell","GridBodyCellStatus","GridHead","GridHeadCell","GridHeadCellStatic","GridResizer","GridRow","Header","HeaderButtonContainer","HeaderTitle","COL_WIDTH_UNDEFINED","COL_WIDTH_MINIMUM","GridEditable","numColumn","mousemove","mouseup","i","nextColumnOrder","columnOrder","width","setGridTemplateColumns","onResizeColumn","grid","type","cell","currentTarget","parentElement","resizeMetadata","columnIndex","columnWidth","offsetWidth","cursorX","clientX","addEventListener","onResizeMouseMove","resizeWindowLifecycleEvents","onResizeMouseUp","metadata","widthChange","clearWindowLifecycleEvents","requestAnimationFrame","resizeGridColumn","dataRow","prependColumns","renderPrependColumns","item","col","renderBodyCell","key","getDerivedStateFromProps","redrawGridColumn","removeEventListener","forEach","c","refGrid","max","prependColumnWidths","prepend","widths","index","style","gridTemplateColumns","renderGridHead","error","isLoading","renderHeadCell","onResizeMouseDown","onResetColumnSize","renderGridBody","renderError","renderLoading","renderEmptyData","renderGridBodyRow","headerButtons","showHeader","Panel","PanelBody","GRID_HEAD_ROW_HEIGHT","GRID_BODY_ROW_HEIGHT","GRID_STATUS_MESSAGE_HEIGHT","Z_INDEX_PANEL","Z_INDEX_GRID_STATUS","Z_INDEX_GRID","Z_INDEX_GRID_RESIZER","subText","isFirst","background","GridStatusWrapper","GridStatusFloat","numOfRows","dataRows","height","omit","callIfFunction","icon","divider","isActive","noAnchor","withBorder","onSelect","eventKey","allowDefaultEvent","preventDefault","renderAnchor","linkProps","onClick","tabIndex","renderChildren","getListItemStyles","common","activeHover","hover","getChildStyles","shouldForwardProp","includes","MenuAnchor","MenuListItem","gray300","MenuTarget","MenuIcon","MenuLink","DATE_TIME_KEYS","URL_PARAM","getUtcToLocalDateObject","STATS_PERIOD_PATTERN","parseStatsPeriod","input","result","match","periodLength","coerceStatsPeriod","getStatsPeriodValue","maybe","normalizeDateTimeString","parsed","isValid","getDateTimeString","needle","parseUtcValue","getUtcValue","getProject","projectFromQueryIdInt","isNaN","getEnvironment","normalizeDateTimeParams","params","allowEmptyPeriod","allowAbsoluteDatetime","allowAbsolutePageDatetime","defaultStatsPeriod","pageStatsPeriod","pageStart","pageEnd","pageUtc","statsPeriod","otherParams","coercedPeriod","dateTimeStart","dateTimeEnd","object","paramEntries","entries","filter","_","fromEntries","getStateFromQuery","normalizeOptions","PROJECT","environment","ENVIRONMENT","dateTimeParams","hasAbsolute","getDatetimeFromState","createPortal","Manager","Popper","Reference","MAX_TEAM_KEY_TRANSACTIONS","TeamKeyTransaction","isOpen","event","menuEl","Element","contains","enabled","handleToggleKeyTransaction","action","_props","document","handleClickOutside","partitionTeams","counts","keyedTeams","enabledTeams","disabledTeams","noAccessTeams","projectTeams","Set","has","renderMenuContent","isMyTeamsEnabled","myTeamsHandler","toggleSelection","hasTeamsWithAccess","slug","renderMenu","modifiers","padding","ref","popperRef","placement","body","Title","initialValue","menu","Boolean","toggleOpen","TeamKeyTransactionItem","isKeyed","StarWrapper","DropdownWrapper","zIndex","tooltip","DropdownContent","DropdownMenuHeader","first","DropdownMenuItem","MenuItemContent","ActionItem","createContext","isEqual","withApi","TeamKeyTransactionsManagerContext","getKeyedTeams","UnwrappedProvider","keyFetchID","teamKeyTransactions","projectId","keyed","isKeyedByTeam","keyedTeam","project_id","add","teamIdSet","newTeamKeyTransactions","count","keyTransaction","fetchData","prevProps","orgSlugChanged","selectedTeamsChanged","selectedTeams","selectedProjectsChanged","selectedProjects","Symbol","getCounts","Map","set","childrenProps","Provider","Consumer","ROW_HEIGHT","ROW_PADDING","getDurationPillAlignment","getHatchPattern","RowRectangle","DurationPill","fontSizeExtraSmall","showDetail","breakpoints","medium","CHART_PALETTE","getBackgroundColor","showStriping","primary","alternate","spanBarHatch","durationDisplay","getToggleTheme","isExpanded","errored","isSpanGroupToggler","buttonTheme","button","default","errorTheme","danger","color","blue300","getDurationDisplay","left","spaceNeeded","getHumanDuration","duration","durationMs","minimumFractionDigits","maximumFractionDigits","toPercent","toFixed","getOffsetOfElement","scrollLeft","pageXOffset","x","y","rectOfContent","contentOffsetLeft","clientLeft","contentOffsetTop","clientTop","scrollWidth","scrollHeight","clamp","getLetterIndex","letter","indexOf","colorsAsArray","barColors","http","db","pickBarColor","letterIndex1","letterIndex2","letterIndex3","letterIndex4","BaseScoreBar","score","vertical","thickness","radius","palette","similarity","maxScore","scoreInBounds","paletteIndex","barProps","_j","ScoreBar","Bar","empty","ShortId","shortId","avatar","StyledShortId","text","familyMono","StyledAutoSelectText","linkColor","Tooltip","UserMisery","bars","barHeight","userMisery","miseryLimit","totalUsers","miserableUsers","adjustedMisery","fill","round","withRouter","Clipboard","GlobalSelectionLink","IconCopy","formatVersion","withOrganization","Version","version","anchor","preservePageFilters","tooltipRawVersion","withPackage","versionToDisplay","releaseDetailProjectId","features","renderVersion","pathname","encodeURIComponent","renderTooltipContent","getOverlayStyle","test","small","VersionText","TooltipContent","TooltipVersionWrapper","overflowEllipsis","TooltipClipboardIconWrapper","browserHistory","createStore","OrganizationsActions","IS_ACCEPTANCE_TEST","HookStore","cleanupActiveRefluxSubscriptions","makeSafeRefluxStore","guidePrioritySort","a","b","a_priority","Number","MAX_SAFE_INTEGER","b_priority","localeCompare","defaultState","guides","anchors","forceShow","prevGuide","storeConfig","unsubscribeListeners","browserHistoryListener","init","listenTo","setActive","onSetActiveOrganization","onURLChange","teardown","updateCurrentGuide","guidesContent","acc","content","serverGuide","seen","trigger","delete","recordCue","updatePrevGuide","nextGuide","guideOptions","sort","every","assistantThreshold","userDateJoined","dateJoined","isSuperuser","cb","getDefaultSelection","isEqualWithDates","pinnedFilters","desyncedFilters","hasInitialState","reset","onReset","initializeUrlState","onInitializeUrlState","updateProjects","updateDateTime","updateEnvironments","updateDesyncedFilters","pin","_isReady","newSelection","pinned","getState","isReady","filters","environments","datetime","PageFiltersStore","assert","_value","assertType","isNotSharedOrganization","DEFAULT_DAY_START_TIME","DEFAULT_DAY_END_TIME","DATE_FORMAT_NO_TIMEZONE","getParser","local","isValidTime","str","getUtcDateString","dateObj","HTML5_FMT","DATETIME_LOCAL_SECONDS","getFormattedDate","getUserTimezone","toDate","setDateToTime","timeStr","hours","minutes","split","setHours","setUTCHours","setSeconds","getUtcToSystem","getLocalToSystem","getStartOfDay","startOf","getEndOfDay","subtract","getPeriodAgo","unit","getStartOfPeriodAgo","intervalToMilliseconds","interval","pattern","matches","exec","multipliers","d","h","m","periodNumber","statsPeriodToDays","endsWith","getTime","shouldUse24Hours","displaySeconds","getInternalDate","getDateWithTimezoneInUtc","nullableValue","ArrayValue","expanded","handleToggle","ArrayContainer","ArrayItem","ButtonContainer","cloneDeep","isString","pick","uniqBy","DEFAULT_PER_PAGE","aggregateOutputType","generateFieldAsString","getAggregateAlias","getEquation","isAggregateEquation","isAggregateField","isEquation","isLegalYAxisType","CHART_AXIS_OPTIONS","DISPLAY_MODE_FALLBACK_OPTIONS","DISPLAY_MODE_OPTIONS","DisplayModes","TOP_N","decodeScalar","FieldValueKind","decodeColumnOrder","MutableSearch","getSortField","DATETIME_QUERY_STRING_KEYS","EXTERNAL_QUERY_STRING_KEYS","setSortOrder","kind","field","reverseSort","isSortEqualToField","tableMeta","sortKey","getSortKeyFromField","fieldToSort","useFunctionFormat","fieldString","isFieldSortable","decodeFields","fields","w","parseSort","startsWith","fromSorts","sorts","uniqueSorts","decodeSorts","encodeSort","Error","encodeSorts","collectQueryStringByKey","collection","decodeQuery","queryParameter","decodeTeam","decodeTeams","decodeProjects","queryStringFromSavedQuery","saved","validateTableMeta","EventView","constructor","equations","sortKeys","currentSort","yAxis","display","topEvents","createdBy","expired","additionalConditions","copy","fromLocation","fromNewQueryWithLocation","newQuery","range","fromSavedQuery","getFields","orderby","toString","fromSavedQueryOrLocation","isEqualTo","other","defaults","DEFAULT","currentValue","otherValue","dateTimeKeys","currentDateTime","otherDateTime","isSame","toNewQuery","getWidths","getPageFilters","getPageFiltersQuery","proj","generateBlankQueryStringObject","output","tag","generateQueryStringObject","getYAxis","pop","getEquations","getAggregateFields","hasAggregateField","some","hasIdField","numOfColumns","getColumns","useFullEquationAsKey","getDays","clone","withSorts","newEventView","withColumns","columns","EQUATION","function","existing","newSort","sortField","withNewColumn","newColumn","fieldAsString","newField","withResizedColumn","newWidth","updateWidth","withUpdatedColumn","updatedColumn","columnToBeUpdated","updateField","updatedField","needleSortIndex","findIndex","needleSort","sum","currentField","splice","sortableFieldIndex","fieldToBeSorted","withDeletedColumn","hasAutoIndex","columnToBeDeleted","withTeams","getSorts","order","getQuery","inputQuery","queryParts","getQueryWithAdditionalConditions","getFacetsAPIPayload","getEventsAPIPayload","remove","normalizeDateSelection","picked","pickRelevantLocationQueryStrings","hasDateSelection","dateSelection","forceAppendRawQueryString","normalizedTimeWindowParams","queryString","eventQuery","assign","per_page","getResultsViewUrlTarget","getResultsViewShortUrlTarget","values","getPerformanceTransactionEventsViewUrlTarget","showTransactions","breakdown","webVital","sortForField","sortOnField","needleIndex","getYAxisOptions","label","concat","yAxisOptions","defaultOption","option","getDisplayOptions","PREVIOUS","TOP5","DAILYTOP5","DAILY","getDisplayMode","mode","displayOptions","cond","selectedOption","isEmpty","conditions","tagValues","existingTagValues","getFilterValues","newTagValues","tagValue","addFilterValues","isFieldsSimilar","currentEquations","otherEquations","currentFields","otherFields","isAPIPayloadSimilar","currentKeys","otherKeys","otherTarget","partial","ProjectBadge","UserBadge","isUrl","AGGREGATIONS","getSpanOperationName","isRelativeSpanOperationBreakdownField","SPAN_OP_BREAKDOWN_FIELDS","SPAN_OP_RELATIVE_BREAKDOWN_FIELD","getShortEventId","formatFloat","formatPercentage","Projects","filterToLocationQuery","SpanOperationBreakdownFilter","stringToFilter","BarContainer","Container","FieldDateTime","FieldShortId","FlexContainer","NumberContainer","OverflowLink","UserIcon","VersionContainer","TeamKeyTransactionField","EmptyValueContainer","emptyValue","emptyStringValue","SIZE_UNITS","bit","byte","kibibyte","mebibyte","gibibyte","tebibyte","pebibyte","exbibyte","kilobyte","megabyte","gigabyte","terabyte","petabyte","exabyte","ABYTE_UNITS","DURATION_UNITS","nanosecond","microsecond","millisecond","second","minute","hour","day","week","PERCENTAGE_UNITS","FIELD_FORMATTERS","boolean","isSortable","renderFunc","baggage","integer","number","percentage","string","array","SPECIAL_FIELDS","trace","issue","issueID","slugs","projectIds","userObj","email","username","ip_address","badge","count_unique_user","release","v","team_key_transaction","trend_percentage","SPECIAL_FUNCTIONS","user_misery","fieldName","userMiseryField","projectThresholdConfig","countMiserableUserField","uniqueUsers","countMiserableMiseryLimit","hasOwnProperty","alias","fieldType","isDurationValue","spanOperationRelativeBreakdownRenderer","eventView","sumOfSpanTime","prev","curr","cumulativeSpanOpBreakdown","otherPercentage","orderedSpanOpsBreakdownFields","sortingOnField","op","operationName","spanOpDuration","widthPercentage","backgroundColor","None","RelativeOpsBreakdown","RectangleRelativeOpsBreakdown","OtherRelativeOpsBreakdown","gray100","getFieldRenderer","meta","isAlias","getFieldFormatter","RELEASE_ADOPTION_STAGES","SESSIONS_FIELDS","SESSIONS_OPERATIONS","AGGREGATION_FIELDS","AggregationKey","DISCOVER_FIELDS","FieldKey","FIELDS","FieldValueType","MEASUREMENT_FIELDS","SpanOpBreakdown","WebVital","CONDITIONS_ARGUMENTS","WEB_VITALS_QUALITY","getDocsAndOutputType","documentation","desc","outputType","valueType","parameters","multiPlotType","CountUnique","columnTypes","defaultValue","required","CountMiserable","getFieldOverrides","parameter","validateAllowedColumns","dataType","CountIf","validateDenyListColumns","CountWebVitals","LCP","FP","FCP","FID","CLS","Eps","Epm","FailureCount","Min","validateForNumericAggregate","Max","Sum","Any","P50","P75","P95","P99","P100","Percentile","Avg","Apdex","FailureRate","LastSeen","ALIASES","tpm","tps","DEPRECATED_FIELDS","CULPRIT","FIELD_TAGS","freeze","SEMVER_TAGS","RELEASE_VERSION","RELEASE_BUILD","RELEASE_PACKAGE","RELEASE_STAGE","predefined","EXCLUDED_TAG_KEYS","formatTagKey","isSpanOperationBreakdownField","TRACING_FIELDS","TRANSACTION_DURATION","TRANSACTION_OP","TRANSACTION_STATUS","MEASUREMENT_PATTERN","SPAN_OP_BREAKDOWN_PATTERN","isMeasurement","measurementType","NUMBER","getMeasurementSlug","AGGREGATE_PATTERN","AGGREGATE_BASE","getAggregateArg","parseFunction","arguments","parseArguments","functionText","columnText","args","quoted","escaped","j","EQUATION_PREFIX","EQUATION_ALIAS_PATTERN","CALCULATED_FIELD_PREFIX","isEquationAlias","maybeEquationAlias","stripEquationPrefix","replace","getEquationAliasIndex","isLegalEquationColumn","columnType","getColumnType","generateAggregateFields","eventFields","excludeFields","functions","func","param","overrides","isDerivedMetric","stripDerivedMetricsPrefix","explodeFieldString","aggregation","explodeField","isAggregateFieldOrEquation","isNumericMetrics","getColumnsAndAggregates","aggregates","getColumnsAndAggregatesAsStrings","aggregateFields","nonAggregateFields","fieldAliases","aggregateFunctionOutputType","funcName","firstArg","aggregate","errorsAndTransactionsAggregateFunctionOutputType","sessionsAggregateFunctionOutputType","aggregateMultiPlotType","validColumnTypes","DEVICE_BATTERY_LEVEL","STACK_COLNO","STACK_LINENO","STACK_STACK_LEVEL","deniedColumns","validColumns","alignedTypes","fieldAlignment","columnName","align","maybeType","hasDuplicate","columnList","IconUser","ActorContainer","TeamKeyTransactionManager","IconStar","withProjects","TitleStar","keyedTeamsCount","star","teamSlugs","TeamKeyTransactionFieldWrapper","projectSlug","TOP_EVENT_MODES","WORLDMAP","BAR","MULTI_Y_AXIS_SUPPORTED_DISPLAY_MODES","FieldKind","MobileVital","FUNCTION","INTEGER","PERCENTAGE","DATE","METRICS","DURATION","TTFB","RequestTime","AppStartCold","AppStartWarm","FramesTotal","FramesSlow","FramesFrozen","FramesSlowRate","FramesFrozenRate","StallCount","StallTotalTime","StallLongestTime","StallPercentage","SPAN_OP_FIELDS","SpansBrowser","SpansDb","SpansHttp","SpansResource","SpansUi","AGE","FIELD","ASSIGNED","STRING","ASSIGNED_OR_SUGGESTED","deprecated","BOOKMARKS","DEVICE_ARCH","DEVICE_BRAND","DEVICE_CHARGING","BOOLEAN","DEVICE_FAMILY","DEVICE_LOCALE","DEVICE_MODEL_ID","DEVICE_NAME","DEVICE_ONLINE","DEVICE_ORIENTATION","DEVICE_SIMULATOR","DEVICE_UUID","DIST","ERROR_HANDLED","ERROR_MECHANISM","ERROR_TYPE","ERROR_UNHANDLED","ERROR_VALUE","EVENT_TIMESTAMP","EVENT_TYPE","GEO_CITY","GEO_COUNTRY_CODE","GEO_REGION","HTTP_METHOD","HTTP_REFERER","HTTP_STATUS_CODE","HTTP_URL","ID","IS","keywords","ISSUE","LAST_SEEN","LEVEL","LOCATION","MESSAGE","OS","OS_BUILD","OS_KERNEL_VERSION","PLATFORM","PLATFORM_NAME","FIRST_RELEASE","FIRST_SEEN","HAS","RELEASE","SDK_NAME","SDK_VERSION","STACK_ABS_PATH","STACK_FILENAME","STACK_FUNCTION","STACK_IN_APP","STACK_MODULE","STACK_PACKAGE","STACK_RESOURCE","TIMES_SEEN","TIMESTAMP","TIMESTAMP_TO_HOUR","TIMESTAMP_TO_DAY","TITLE","TRACE","TRACE_PARENT_SPAN","TRACE_SPAN","TRANSACTION","USER","USER_DISPLAY","USER_EMAIL","USER_ID","USER_IP","USER_USERNAME","ISSUE_FIELDS","getFieldDefinition","isDate","isEqualWith","dateComparator","SessionMetric","TransactionMetric","METRIC_TO_COLUMN_TYPE","SESSION_ERROR","SESSION_DURATION","SESSION","SESSION_CRASH_FREE_RATE","USER_CRASH_FREE_RATE","SESSION_CRASH_RATE","USER_CRASH_RATE","SESSION_HEALTHY","USER_HEALTHY","SESSION_ABNORMAL","USER_ABNORMAL","SESSION_CRASHED","USER_CRASHED","SESSION_ERRORED","USER_ERRORED","MEASUREMENTS_FP","MEASUREMENTS_FCP","MEASUREMENTS_LCP","MEASUREMENTS_FID","MEASUREMENTS_CLS","MEASUREMENTS_TTFB","MEASUREMENTS_TTFB_REQUESTTIME","MEASUREMENTS_APP_START_COLD","MEASUREMENTS_APP_START_WARM","MEASUREMENTS_FRAMES_TOTAL","MEASUREMENTS_FRAMES_SLOW","MEASUREMENTS_FRAMES_FROZEN","MEASUREMENTS_FRAMES_SLOW_RATE","MEASUREMENTS_FRAMES_FROZEN_RATE","MEASUREMENTS_STALL_COUNT","MEASUREMENTS_STALL_TOTAL_TIME","MEASUREMENTS_STALL_LONGEST_TIME","MEASUREMENTS_STALL_PERCENTAGE","METRICS_OPERATIONS","metricsTypes","count_unique","avg","p50","p75","p95","p99","PERFORMANCE_URL_PARAM","escapeDoubleQuotes","TokenType","isOp","OPERATOR","isBooleanOp","toUpperCase","isParen","token","character","tokensOrQuery","strTokens","splitSearchIntoTokens","tokens","tokenState","FREE_TEXT","addOp","parenMatch","paren","len","char","nextChar","FILTER","trailingParen","addFreeText","addStringFilter","formattedTokens","shouldEscape","parseFilter","escapeFilterValue","setFilterValues","removeFilter","reducer","getFilterKeys","hasFilter","parensToDelete","cleanParens","idx","alreadySeen","nextToken","toRemove","removeFilterValue","formatQuery","freeText","q","queryChars","from","endOfPrevWord","quoteType","quoteEnclosed","isSpace","trimmedToken","s","removeSurroundingQuotes","charAt","right","useLegacyStore","usePageFilters","getDisplayName","withPageFilters","WrappedComponent","WithPageFilters","isGlobalSelectionReady","selectionProps","displayName","MAX_WIDGETS","DEFAULT_TABLE_LIMIT","DisplayType","WidgetType","DashboardFilterKeys","DashboardState","DashboardWidgetSource","invert","SessionField","SessionStatus","DERIVED_STATUS_METRICS_PATTERN","DerivedStatusFields","FIELD_TO_METRICS_EXPRESSION","METRICS_EXPRESSION_TO_FIELD","DISABLED_SORT","TAG_SORT_DENY_LIST","operations","count_healthy","count_abnormal","count_crashed","count_errored","crash_rate","crash_free_rate","SESSIONS_TAGS","SESSIONS_FILTER_TAGS","SESSION_STATUSES","generateReleaseWidgetFieldOptions","tagKeys","fieldOptions","knownOperations","operation","DEFAULT_EVENT_VIEW","TRANSACTION_VIEWS","WEB_VITALS_VIEWS","ALL_VIEWS","addSuccessMessage","trackAnalyticsEvent","handleCreateQuery","isNewQuery","getAnalyticsCreateEventKeyName","organization_id","extractAnalyticsQueryFields","savedQuery","message","EVENT_NAME_EXISTING_MAP","success","failed","EVENT_NAME_NEW_MAP","handleUpdateQuery","Promise","reject","eventName","handleUpdateQueryName","_saved","handleDeleteQuery","displayModeToDisplayType","displayMode","WORLD_MAP","LINE","urlEncode","Papa","openAddDashboardWidgetModal","openAddToDashboardModal","getTitle","localStorage","TEMPLATE_TABLE_COLUMN","f","pushEventViewToLocation","nextEventView","extraQuery","queryStringObject","generateTitle","titles","eventViewName","eventTitle","reverse","getPrebuiltQueries","views","disableMacros","unsafeCharacterRegex","downloadAsCsv","tableData","filename","headings","csvContent","unparse","encodedDataUrl","createElement","now","setAttribute","click","ALIASED_AGGREGATES_COLUMN","last_seen","failure_count","drilldownAggregate","getExpandedResults","fieldSet","expandedColumns","exploded","nextView","reduceRight","newView","generateExpandedConditions","generateAdditionalConditions","specialKeys","dataKey","shouldQuote","nextValue","tags","tagIndex","parsedQuery","generateFieldOptions","measurementKeys","spanOperationBreakdownKeys","customMeasurements","aggregations","fieldKeys","ellipsis","measurement","MEASUREMENT","currentKey","nextKey","supportedFunctions","CUSTOM_MEASUREMENT","breakdownField","BREAKDOWN","TAG","RENDER_PREBUILT_KEY","shouldRenderPrebuilt","shouldRender","getItem","setRenderPrebuilt","setItem","eventViewToWidgetQuery","displayType","widgetBuilderNewDesign","queryYAxis","orderbyFunction","bareOrderby","newAggregates","TABLE","widgetQuery","handleAddQueryToDashboard","router","defaultTableFields","defaultWidgetQuery","widgetAsQueryParams","constructAddQueryToDashboardLink","widget","AREA","queries","limit","source","DISCOVERV2","defaultTableColumns","defaultTitle","saved_query","CompactSelect","IconFilter","decodeHistogramZoom","SPAN_OPERATION_BREAKDOWN_FILTER_TO_FIELD","Http","Db","Browser","Resource","Ui","OPTIONS","spanOperationBreakdownSingleColumns","o","Filter","currentFilter","onChangeFilter","menuOptions","leadingItems","opt","OperationDot","filterToField","filterToSearchConditions","filterToColor","decodeFilterFromLocation","decodeInteger","ZOOM_START","ZOOM_END","decodedMax"],"sourceRoot":""}