{"version":3,"file":"chunks/app_views_performance_transactionSummary_transactionTags_index_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/charts/components/visualMap.tsx","webpack:///./app/components/charts/heatMapChart.tsx","webpack:///./app/components/charts/loadingPanel.tsx","webpack:///./app/components/charts/series/heatMapSeries.tsx","webpack:///./app/components/charts/transitionChart.tsx","webpack:///./app/components/charts/transparentLoadingMask.tsx","webpack:///./app/components/loadingMask.tsx","webpack:///./app/utils/performance/segmentExplorer/tagKeyHistogramQuery.tsx","webpack:///./app/utils/performance/segmentExplorer/tagTransactionsQuery.tsx","webpack:///./app/views/performance/transactionSummary/transactionTags/constants.tsx","webpack:///./app/views/performance/transactionSummary/transactionTags/content.tsx","webpack:///./app/views/performance/transactionSummary/transactionTags/index.tsx","webpack:///./app/views/performance/transactionSummary/transactionTags/tagValueTable.tsx","webpack:///./app/views/performance/transactionSummary/transactionTags/tagsDisplay.tsx","webpack:///./app/views/performance/transactionSummary/transactionTags/tagsHeatMap.tsx","webpack:///./app/views/performance/transactionSummary/transactionTags/types.tsx"],"sourcesContent":["import 'echarts/lib/component/visualMap';\n\nimport type {VisualMapComponentOption} from 'echarts';\n\nexport default function VisualMap(\n  visualMap: VisualMapComponentOption\n): VisualMapComponentOption {\n  return visualMap;\n}\n","import './components/visualMap';\n\nimport {forwardRef} from 'react';\nimport type {HeatmapSeriesOption, VisualMapComponentOption} from 'echarts';\n\nimport {ReactEchartsRef, Series} from 'sentry/types/echarts';\n\nimport HeatMapSeries from './series/heatMapSeries';\nimport BaseChart from './baseChart';\n\ntype ChartProps = Omit<React.ComponentProps<typeof BaseChart>, 'css'>;\n\nexport type HeatmapSeries = Series &\n  Omit<HeatmapSeriesOption, 'data' | 'name'> & {\n    dataArray?: HeatmapSeriesOption['data'];\n  };\n\ntype Props = Omit<ChartProps, 'series'> & {\n  series: HeatmapSeries[];\n  visualMaps: VisualMapComponentOption[];\n  seriesOptions?: HeatmapSeriesOption;\n};\n\nexport default forwardRef<ReactEchartsRef, Props>((props, ref) => {\n  const {series, seriesOptions, visualMaps, ...otherProps} = props;\n  return (\n    <BaseChart\n      ref={ref}\n      options={{\n        visualMap: visualMaps,\n      }}\n      {...otherProps}\n      series={series.map(({seriesName, data, dataArray, ...options}) =>\n        HeatMapSeries({\n          ...seriesOptions,\n          ...options,\n          name: seriesName,\n          data: dataArray || data.map(({value, name}) => [name, value]),\n        })\n      )}\n    />\n  );\n});\n","import styled from '@emotion/styled';\n\nimport LoadingMask from 'sentry/components/loadingMask';\n\ninterface Props extends React.HTMLAttributes<HTMLDivElement> {\n  height?: string;\n}\n\nconst LoadingPanel = styled(({height: _height, ...props}: Props) => (\n  <div {...props}>\n    <LoadingMask />\n  </div>\n))`\n  flex: 1;\n  flex-shrink: 0;\n  overflow: hidden;\n  height: ${p => p.height};\n  position: relative;\n  border-color: transparent;\n  margin-bottom: 0;\n`;\n\nLoadingPanel.defaultProps = {\n  height: '200px',\n};\n\nexport default LoadingPanel;\n","import 'echarts/lib/chart/heatmap';\nimport 'echarts/lib/component/visualMap';\n\nimport type {HeatmapSeriesOption} from 'echarts';\n\nimport {SeriesDataUnit} from 'sentry/types/echarts';\n\nexport default function HeatMapSeries(\n  props: Omit<HeatmapSeriesOption, 'data'> & {\n    data?: SeriesDataUnit[] | HeatmapSeriesOption['data'];\n  } = {}\n): HeatmapSeriesOption {\n  const {data, ...rest} = props;\n  return {\n    data: data as HeatmapSeriesOption['data'],\n    ...rest,\n    type: 'heatmap',\n  };\n}\n","import {Component, Fragment} from 'react';\n\nimport LoadingPanel from 'sentry/components/charts/loadingPanel';\n\nconst defaultProps = {\n  height: '200px',\n};\n\ntype Props = {\n  loading: boolean;\n  reloading: boolean;\n} & typeof defaultProps;\n\ntype State = {\n  key: number;\n  prevLoading: boolean;\n  prevReloading: boolean;\n};\n\nclass TransitionChart extends Component<Props, State> {\n  static defaultProps = defaultProps;\n\n  state: State = {\n    prevReloading: this.props.reloading,\n    prevLoading: this.props.loading,\n    key: 1,\n  };\n\n  static getDerivedStateFromProps(props: Readonly<Props>, state: State) {\n    // Transitions are controlled using variables called:\n    // - loading and,\n    // - reloading (also called pending in other apps)\n    //\n    // This component remounts the chart to ensure the stable transition\n    // from one dataset to the next.\n\n    const prevReloading = state.prevReloading;\n    const nextReloading = props.reloading;\n\n    const prevLoading = state.prevLoading;\n    const nextLoading = props.loading;\n\n    // whenever loading changes, we explicitly remount the children by updating\n    // the key prop; regardless of what state reloading is in\n    if (prevLoading !== nextLoading) {\n      return {\n        prevReloading: nextReloading,\n        prevLoading: nextLoading,\n        key: state.key + 1,\n      };\n    }\n\n    // invariant: prevLoading === nextLoading\n\n    // if loading is true, and hasn't changed from the previous re-render,\n    // do not remount the children.\n    if (nextLoading) {\n      return {\n        prevReloading: nextReloading,\n        prevLoading: nextLoading,\n        key: state.key,\n      };\n    }\n\n    // invariant: loading is false\n\n    // whenever the chart is transitioning from the reloading (pending) state to a non-loading state,\n    // remount the children\n    if (prevReloading && !nextReloading) {\n      return {\n        prevReloading: nextReloading,\n        prevLoading: nextLoading,\n        key: state.key + 1,\n      };\n    }\n\n    // do not remount the children in these remaining cases:\n    // !prevReloading && !nextReloading (re-render with no prop change)\n    // prevReloading && nextReloading (re-render with no prop change)\n    // !prevReloading && nextReloading (from loaded to pending state)\n\n    return {\n      prevReloading: nextReloading,\n      prevLoading: nextLoading,\n      key: state.key,\n    };\n  }\n\n  render() {\n    const {height, loading, reloading} = this.props;\n\n    if (loading && !reloading) {\n      return <LoadingPanel height={height} data-test-id=\"events-request-loading\" />;\n    }\n\n    // We make use of the key prop to explicitly remount the children\n    // https://reactjs.org/docs/lists-and-keys.html#keys\n    return <Fragment key={String(this.state.key)}>{this.props.children}</Fragment>;\n  }\n}\n\nexport default TransitionChart;\n","import styled from '@emotion/styled';\n\nimport LoadingMask, {LoadingMaskProps} from 'sentry/components/loadingMask';\n\ninterface TransparentLoadingMaskProps extends LoadingMaskProps {\n  visible: boolean;\n  children?: React.ReactNode;\n  className?: string;\n}\n\nconst TransparentLoadingMask = styled(\n  ({className, visible, children, ...props}: TransparentLoadingMaskProps) => {\n    const other = visible ? {...props, 'data-test-id': 'loading-placeholder'} : props;\n    return (\n      <LoadingMask className={className} {...other}>\n        {children}\n      </LoadingMask>\n    );\n  }\n)<TransparentLoadingMaskProps>`\n  ${p => !p.visible && 'display: none;'};\n  opacity: 0.4;\n  z-index: 1;\n`;\n\nexport default TransparentLoadingMask;\n","import styled from '@emotion/styled';\n\nexport interface LoadingMaskProps extends React.HTMLAttributes<HTMLDivElement> {}\n\nconst LoadingMask = styled('div')<LoadingMaskProps>`\n  background-color: ${p => p.theme.backgroundSecondary};\n  border-radius: ${p => p.theme.borderRadius};\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\n\nexport default LoadingMask;\n","import {EventQuery} from 'sentry/actionCreators/events';\nimport {LocationQuery} from 'sentry/utils/discover/eventView';\nimport GenericDiscoverQuery, {\n  DiscoverQueryProps,\n  GenericChildrenProps,\n} from 'sentry/utils/discover/genericDiscoverQuery';\nimport withApi from 'sentry/utils/withApi';\n\n/**\n * An individual row in a Segment explorer result\n */\nexport type TableDataRow = {\n  [key: string]: React.ReactText;\n  count: number;\n  tags_key: string;\n  tags_value: string;\n};\n\nexport type HistogramTag = {\n  tags_value: string;\n};\n\nexport type TableData = {\n  histogram: {data: TableDataRow[]};\n  meta: {};\n  tags: {data: HistogramTag[]};\n};\n\n/**\n * A Segment Explorer result including rows and metadata.\n */\n\ntype ChildrenProps = Omit<GenericChildrenProps<TableData>, 'tableData'> & {\n  tableData: TableData | null;\n};\n\ntype QueryProps = DiscoverQueryProps & {\n  aggregateColumn: string;\n  children: (props: ChildrenProps) => React.ReactNode;\n  numBucketsPerKey: number;\n  sort: string | string[];\n  tagKey: string;\n};\n\ntype FacetQuery = LocationQuery &\n  EventQuery & {\n    aggregateColumn?: string;\n    numBucketsPerKey?: number;\n    sort?: string | string[];\n    tagKey?: string;\n  };\n\nexport function getRequestFunction(_props: QueryProps) {\n  const {aggregateColumn} = _props;\n  function getTagExplorerRequestPayload(props: DiscoverQueryProps) {\n    const {eventView} = props;\n    const apiPayload: FacetQuery = eventView.getEventsAPIPayload(props.location);\n    apiPayload.aggregateColumn = aggregateColumn;\n    apiPayload.sort = _props.sort;\n    apiPayload.tagKey = _props.tagKey;\n    apiPayload.numBucketsPerKey = _props.numBucketsPerKey;\n    return apiPayload;\n  }\n  return getTagExplorerRequestPayload;\n}\n\nfunction shouldRefetchData(prevProps: QueryProps, nextProps: QueryProps) {\n  return (\n    prevProps.aggregateColumn !== nextProps.aggregateColumn ||\n    prevProps.sort !== nextProps.sort ||\n    prevProps.tagKey !== nextProps.tagKey\n  );\n}\n\nfunction TagKeyHistogramQuery(props: QueryProps) {\n  return (\n    <GenericDiscoverQuery<TableData, QueryProps>\n      route=\"events-facets-performance-histogram\"\n      getRequestPayload={getRequestFunction(props)}\n      shouldRefetchData={shouldRefetchData}\n      {...props}\n    />\n  );\n}\n\nexport default withApi(TagKeyHistogramQuery);\n","import {MetaType} from 'sentry/utils/discover/eventView';\nimport GenericDiscoverQuery, {\n  DiscoverQueryProps,\n} from 'sentry/utils/discover/genericDiscoverQuery';\nimport withApi from 'sentry/utils/withApi';\n\nexport type TableDataRow = {\n  [key: string]: React.ReactText;\n  id: string;\n};\n\nexport type TableData = {\n  data: Array<TableDataRow>;\n  meta?: MetaType;\n};\n\ntype QueryProps = DiscoverQueryProps & {\n  query: string;\n};\n\nfunction shouldRefetchData(prevProps: QueryProps, nextProps: QueryProps) {\n  return prevProps.query !== nextProps.query;\n}\n\nfunction TagTransactionsQuery(props: QueryProps) {\n  return (\n    <GenericDiscoverQuery<TableData, QueryProps>\n      route=\"events\"\n      shouldRefetchData={shouldRefetchData}\n      {...props}\n    />\n  );\n}\n\nexport default withApi(TagTransactionsQuery);\n","import {t} from 'sentry/locale';\nimport {SelectValue} from 'sentry/types';\n\nimport {XAxisOption} from './types';\n\nexport const X_AXIS_SELECT_OPTIONS: SelectValue<XAxisOption>[] = [\n  {label: t('LCP'), value: XAxisOption.LCP},\n  {label: t('Duration'), value: XAxisOption.DURATION},\n];\n","import {useCallback, useEffect, useRef, useState} from 'react';\nimport {browserHistory} from 'react-router';\nimport styled from '@emotion/styled';\nimport {Location} from 'history';\n\nimport {SectionHeading} from 'sentry/components/charts/styles';\nimport DatePageFilter from 'sentry/components/datePageFilter';\nimport EnvironmentPageFilter from 'sentry/components/environmentPageFilter';\nimport SearchBar from 'sentry/components/events/searchBar';\nimport CompactSelect from 'sentry/components/forms/compactSelect';\nimport * as Layout from 'sentry/components/layouts/thirds';\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport PageFilterBar from 'sentry/components/organizations/pageFilterBar';\nimport {normalizeDateTimeParams} from 'sentry/components/organizations/pageFilters/parse';\nimport QuestionTooltip from 'sentry/components/questionTooltip';\nimport Radio from 'sentry/components/radio';\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {Organization, Project} from 'sentry/types';\nimport trackAdvancedAnalyticsEvent from 'sentry/utils/analytics/trackAdvancedAnalyticsEvent';\nimport EventView from 'sentry/utils/discover/eventView';\nimport SegmentExplorerQuery, {\n  TableData,\n} from 'sentry/utils/performance/segmentExplorer/segmentExplorerQuery';\nimport {decodeScalar} from 'sentry/utils/queryString';\nimport {SidebarSpacer} from 'sentry/views/performance/transactionSummary/utils';\n\nimport {SpanOperationBreakdownFilter} from '../filter';\nimport {getTransactionField} from '../transactionOverview/tagExplorer';\n\nimport {X_AXIS_SELECT_OPTIONS} from './constants';\nimport TagsDisplay, {TAG_PAGE_TABLE_CURSOR} from './tagsDisplay';\nimport {decodeSelectedTagKey} from './utils';\n\ntype Props = {\n  eventView: EventView;\n  location: Location;\n  organization: Organization;\n  projects: Project[];\n  transactionName: string;\n};\n\ntype TagOption = string;\n\nconst TagsPageContent = (props: Props) => {\n  const {eventView, location, organization, projects} = props;\n\n  const [aggregateColumn, setAggregateColumn] = useState(\n    getTransactionField(SpanOperationBreakdownFilter.None, projects, eventView)\n  );\n\n  return (\n    <Layout.Main fullWidth>\n      <SegmentExplorerQuery\n        eventView={eventView}\n        orgSlug={organization.slug}\n        location={location}\n        aggregateColumn={aggregateColumn}\n        limit={20}\n        sort=\"-sumdelta\"\n        allTagKeys\n      >\n        {({isLoading, tableData}) => {\n          return (\n            <InnerContent\n              {...props}\n              isLoading={isLoading}\n              tableData={tableData}\n              aggregateColumn={aggregateColumn}\n              onChangeAggregateColumn={setAggregateColumn}\n            />\n          );\n        }}\n      </SegmentExplorerQuery>\n    </Layout.Main>\n  );\n};\n\nfunction getTagKeyOptions(tableData: TableData) {\n  const suspectTags: TagOption[] = [];\n  const otherTags: TagOption[] = [];\n  tableData.data.forEach(row => {\n    const tagArray = row.comparison > 1 ? suspectTags : otherTags;\n    tagArray.push(row.tags_key);\n  });\n\n  return {\n    suspectTags,\n    otherTags,\n  };\n}\n\nconst InnerContent = (\n  props: Props & {\n    aggregateColumn: string;\n    onChangeAggregateColumn: (aggregateColumn: string) => void;\n    tableData: TableData | null;\n    isLoading?: boolean;\n  }\n) => {\n  const {\n    eventView: _eventView,\n    location,\n    organization,\n    tableData,\n    aggregateColumn,\n    onChangeAggregateColumn,\n    isLoading,\n  } = props;\n  const eventView = _eventView.clone();\n\n  const tagOptions = tableData ? getTagKeyOptions(tableData) : null;\n  const suspectTags = tagOptions ? tagOptions.suspectTags : [];\n  const otherTags = tagOptions ? tagOptions.otherTags : [];\n\n  const decodedTagKey = decodeSelectedTagKey(location);\n\n  const allTags = [...suspectTags, ...otherTags];\n  const decodedTagFromOptions = decodedTagKey\n    ? allTags.find(tag => tag === decodedTagKey)\n    : undefined;\n\n  const defaultTag = allTags.length ? allTags[0] : undefined;\n\n  const initialTag = decodedTagFromOptions ?? defaultTag;\n\n  const [tagSelected, _changeTagSelected] = useState(initialTag);\n  const lastTag = useRef('');\n\n  const changeTagSelected = useCallback(\n    (tagKey: string) => {\n      if (lastTag.current !== tagKey) {\n        const queryParams = normalizeDateTimeParams({\n          ...(location.query || {}),\n          tagKey,\n          [TAG_PAGE_TABLE_CURSOR]: undefined,\n        });\n\n        browserHistory.replace({\n          pathname: location.pathname,\n          query: queryParams,\n        });\n        _changeTagSelected(tagKey);\n        lastTag.current = decodeScalar(location.query.tagKey, '');\n      }\n    },\n    [location.query, location.pathname]\n  );\n\n  useEffect(() => {\n    if (initialTag) {\n      changeTagSelected(initialTag);\n    }\n  }, [initialTag, changeTagSelected]);\n\n  const handleSearch = (query: string) => {\n    const queryParams = normalizeDateTimeParams({\n      ...(location.query || {}),\n      query,\n    });\n\n    browserHistory.push({\n      pathname: location.pathname,\n      query: queryParams,\n    });\n  };\n\n  const changeTag = (tag: string, isOtherTag: boolean) => {\n    trackAdvancedAnalyticsEvent('performance_views.tags.change_tag', {\n      organization,\n      from_tag: tagSelected!,\n      to_tag: tag,\n      is_other_tag: isOtherTag,\n    });\n\n    return changeTagSelected(tag);\n  };\n  if (tagSelected) {\n    eventView.additionalConditions.setFilterValues('has', [tagSelected]);\n  }\n\n  const query = decodeScalar(location.query.query, '');\n\n  return (\n    <ReversedLayoutBody>\n      <TagsSideBar\n        suspectTags={suspectTags}\n        otherTags={otherTags}\n        tagSelected={tagSelected}\n        changeTag={changeTag}\n        isLoading={isLoading}\n      />\n      <StyledMain>\n        <FilterActions>\n          <PageFilterBar condensed>\n            <EnvironmentPageFilter />\n            <DatePageFilter alignDropdown=\"left\" />\n          </PageFilterBar>\n          <StyledSearchBar\n            organization={organization}\n            projectIds={eventView.project}\n            query={query}\n            fields={eventView.fields}\n            onSearch={handleSearch}\n          />\n          <CompactSelect\n            value={aggregateColumn}\n            options={X_AXIS_SELECT_OPTIONS}\n            onChange={opt => {\n              trackAdvancedAnalyticsEvent(\n                'performance_views.tags.change_aggregate_column',\n                {\n                  organization,\n                  value: opt.value,\n                }\n              );\n              onChangeAggregateColumn(opt.value);\n            }}\n            triggerProps={{prefix: t('X-Axis')}}\n          />\n        </FilterActions>\n        <TagsDisplay {...props} tagKey={tagSelected} />\n      </StyledMain>\n    </ReversedLayoutBody>\n  );\n};\n\nconst TagsSideBar = (props: {\n  changeTag: (tag: string, isOtherTag: boolean) => void;\n  otherTags: TagOption[];\n  suspectTags: TagOption[];\n  isLoading?: boolean;\n  tagSelected?: string;\n}) => {\n  const {suspectTags, otherTags, changeTag, tagSelected, isLoading} = props;\n  return (\n    <StyledSide>\n      <StyledSectionHeading>\n        {t('Suspect Tags')}\n        <QuestionTooltip\n          position=\"top\"\n          title={t('Suspect tags are tags that often correspond to slower transaction')}\n          size=\"sm\"\n        />\n      </StyledSectionHeading>\n      {isLoading ? (\n        <Center>\n          <LoadingIndicator mini />\n        </Center>\n      ) : suspectTags.length ? (\n        suspectTags.map(tag => (\n          <RadioLabel key={tag}>\n            <Radio\n              aria-label={tag}\n              checked={tagSelected === tag}\n              onChange={() => changeTag(tag, false)}\n            />\n            <SidebarTagValue className=\"truncate\">{tag}</SidebarTagValue>\n          </RadioLabel>\n        ))\n      ) : (\n        <div>{t('No tags detected.')}</div>\n      )}\n\n      <SidebarSpacer />\n      <StyledSectionHeading>\n        {t('Other Tags')}\n        <QuestionTooltip\n          position=\"top\"\n          title={t('Other common tags for this transaction')}\n          size=\"sm\"\n        />\n      </StyledSectionHeading>\n\n      {isLoading ? (\n        <Center>\n          <LoadingIndicator mini />\n        </Center>\n      ) : otherTags.length ? (\n        otherTags.map(tag => (\n          <RadioLabel key={tag}>\n            <Radio\n              aria-label={tag}\n              checked={tagSelected === tag}\n              onChange={() => changeTag(tag, true)}\n            />\n            <SidebarTagValue className=\"truncate\">{tag}</SidebarTagValue>\n          </RadioLabel>\n        ))\n      ) : (\n        <div>{t('No tags detected.')}</div>\n      )}\n    </StyledSide>\n  );\n};\n\nconst Center = styled('div')`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst RadioLabel = styled('label')`\n  cursor: pointer;\n  margin-bottom: ${space(1)};\n  font-weight: normal;\n  display: grid;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content 1fr;\n  align-items: center;\n  gap: ${space(1)};\n`;\n\nconst SidebarTagValue = styled('span')`\n  width: 100%;\n`;\n\nconst StyledSectionHeading = styled(SectionHeading)`\n  margin-bottom: ${space(2)};\n`;\n\n// TODO(k-fish): Adjust thirds layout to allow for this instead.\nconst ReversedLayoutBody = styled('div')`\n  margin: 0;\n  background-color: ${p => p.theme.background};\n  flex-grow: 1;\n\n  @media (min-width: ${p => p.theme.breakpoints.medium}) {\n    display: grid;\n    grid-template-columns: auto 66%;\n    align-content: start;\n    gap: ${space(3)};\n  }\n\n  @media (min-width: ${p => p.theme.breakpoints.large}) {\n    grid-template-columns: 225px minmax(100px, auto);\n  }\n`;\n\nconst StyledSide = styled('div')`\n  grid-column: 1/2;\n`;\n\nconst StyledMain = styled('div')`\n  grid-column: 2/4;\n  max-width: 100%;\n`;\n\nconst StyledSearchBar = styled(SearchBar)`\n  @media (min-width: ${p => p.theme.breakpoints.small}) {\n    order: 1;\n    grid-column: 1/6;\n  }\n\n  @media (min-width: ${p => p.theme.breakpoints.xlarge}) {\n    order: initial;\n    grid-column: auto;\n  }\n`;\n\nconst FilterActions = styled('div')`\n  display: grid;\n  gap: ${space(2)};\n  margin-bottom: ${space(2)};\n\n  @media (min-width: ${p => p.theme.breakpoints.small}) {\n    grid-template-columns: auto 1fr auto;\n  }\n`;\n\nexport default TagsPageContent;\n","import {Location} from 'history';\n\nimport {t} from 'sentry/locale';\nimport {Organization, Project} from 'sentry/types';\nimport EventView from 'sentry/utils/discover/eventView';\nimport {decodeScalar} from 'sentry/utils/queryString';\nimport {MutableSearch} from 'sentry/utils/tokenizeSearch';\nimport withOrganization from 'sentry/utils/withOrganization';\nimport withProjects from 'sentry/utils/withProjects';\n\nimport PageLayout from '../pageLayout';\nimport Tab from '../tabs';\n\nimport TagsPageContent from './content';\n\ntype Props = {\n  location: Location;\n  organization: Organization;\n  projects: Project[];\n};\n\nfunction TransactionTags(props: Props) {\n  const {location, organization, projects} = props;\n\n  return (\n    <PageLayout\n      location={location}\n      organization={organization}\n      projects={projects}\n      tab={Tab.Tags}\n      getDocumentTitle={getDocumentTitle}\n      generateEventView={generateEventView}\n      childComponent={TagsPageContent}\n    />\n  );\n}\n\nfunction getDocumentTitle(transactionName: string): string {\n  const hasTransactionName =\n    typeof transactionName === 'string' && String(transactionName).trim().length > 0;\n\n  if (hasTransactionName) {\n    return [String(transactionName).trim(), t('Tags')].join(' \\u2014 ');\n  }\n\n  return [t('Summary'), t('Tags')].join(' \\u2014 ');\n}\n\nfunction generateEventView({\n  location,\n  transactionName,\n}: {\n  location: Location;\n  transactionName: string;\n}): EventView {\n  const query = decodeScalar(location.query.query, '');\n  const conditions = new MutableSearch(query);\n\n  conditions.setFilterValues('event.type', ['transaction']);\n  conditions.setFilterValues('transaction', [transactionName]);\n\n  const eventView = EventView.fromNewQueryWithLocation(\n    {\n      id: undefined,\n      version: 2,\n      name: transactionName,\n      fields: ['transaction.duration'],\n      query: conditions.formatString(),\n      projects: [],\n    },\n    location\n  );\n\n  return eventView;\n}\n\nexport default withProjects(withOrganization(TransactionTags));\n","import {Component} from 'react';\nimport {browserHistory} from 'react-router';\nimport styled from '@emotion/styled';\nimport {Location, LocationDescriptorObject} from 'history';\n\nimport GridEditable, {\n  COL_WIDTH_UNDEFINED,\n  GridColumn,\n} from 'sentry/components/gridEditable';\nimport SortLink from 'sentry/components/gridEditable/sortLink';\nimport Link from 'sentry/components/links/link';\nimport Pagination, {CursorHandler} from 'sentry/components/pagination';\nimport PerformanceDuration from 'sentry/components/performanceDuration';\nimport {IconAdd} from 'sentry/icons/iconAdd';\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {Organization, Project} from 'sentry/types';\nimport trackAdvancedAnalyticsEvent from 'sentry/utils/analytics/trackAdvancedAnalyticsEvent';\nimport EventView from 'sentry/utils/discover/eventView';\nimport {fieldAlignment} from 'sentry/utils/discover/fields';\nimport {formatPercentage} from 'sentry/utils/formatters';\nimport {\n  TableData,\n  TableDataRow,\n} from 'sentry/utils/performance/segmentExplorer/segmentExplorerQuery';\nimport {decodeScalar} from 'sentry/utils/queryString';\nimport {MutableSearch} from 'sentry/utils/tokenizeSearch';\nimport CellAction, {Actions, updateQuery} from 'sentry/views/eventsV2/table/cellAction';\nimport {TableColumn} from 'sentry/views/eventsV2/table/types';\n\nimport {TagValue} from '../transactionOverview/tagExplorer';\nimport {normalizeSearchConditions} from '../utils';\n\nimport {\n  TAGS_TABLE_COLUMN_ORDER,\n  TagsTableColumn,\n  TagsTableColumnKeys,\n} from './tagsDisplay';\nimport {trackTagPageInteraction} from './utils';\n\nconst TAGS_CURSOR_NAME = 'tags_cursor';\n\ntype Props = {\n  aggregateColumn: string;\n  eventView: EventView;\n  isLoading: boolean;\n  location: Location;\n  organization: Organization;\n  pageLinks: string | null;\n  projects: Project[];\n  tableData: TableData | null;\n  transactionName: string;\n  onCursor?: CursorHandler;\n  tagKey?: string;\n};\n\ntype State = {\n  widths: number[];\n};\n\nexport class TagValueTable extends Component<Props, State> {\n  state: State = {\n    widths: [],\n  };\n  renderHeadCell(\n    sortedEventView: EventView,\n    tableMeta: TableData['meta'],\n    column: TableColumn<TagsTableColumnKeys>,\n    columnInfo: TagsTableColumn\n  ): React.ReactNode {\n    const {location} = this.props;\n    const align = fieldAlignment(column.key, column.type, tableMeta);\n    const field = {field: column.key, width: column.width};\n\n    function generateSortLink(): LocationDescriptorObject | undefined {\n      if (!tableMeta) {\n        return undefined;\n      }\n\n      const nextEventView = sortedEventView.sortOnField(field, tableMeta);\n      const {sort} = nextEventView.generateQueryStringObject();\n\n      return {\n        ...location,\n        query: {...location.query, [TAGS_CURSOR_NAME]: undefined, tagSort: sort},\n      };\n    }\n    const currentSort = sortedEventView.sortForField(field, tableMeta);\n\n    const currentSortKind = currentSort ? currentSort.kind : undefined;\n\n    return (\n      <SortLink\n        align={align}\n        title={columnInfo.name}\n        direction={currentSortKind}\n        canSort\n        generateSortLink={generateSortLink}\n      />\n    );\n  }\n\n  renderHeadCellWithMeta = (\n    sortedEventView: EventView,\n    tableMeta: TableData['meta'],\n    columns: TagsTableColumn[]\n  ) => {\n    return (column: TableColumn<TagsTableColumnKeys>, index: number): React.ReactNode =>\n      this.renderHeadCell(sortedEventView, tableMeta, column, columns[index]);\n  };\n\n  handleTagValueClick = (location: Location, tagKey: string, tagValue: string) => {\n    const queryString = decodeScalar(location.query.query);\n    const conditions = new MutableSearch(queryString ?? '');\n\n    conditions.addFilterValues(tagKey, [tagValue]);\n\n    const query = conditions.formatString();\n    browserHistory.push({\n      pathname: location.pathname,\n      query: {\n        ...location.query,\n        query: String(query).trim(),\n      },\n    });\n  };\n\n  handleCellAction = (\n    column: TableColumn<TagsTableColumnKeys>,\n    tagValue: React.ReactText,\n    actionRow: any\n  ) => {\n    return (action: Actions) => {\n      const {eventView, location, organization} = this.props;\n      trackTagPageInteraction(organization);\n\n      const searchConditions = normalizeSearchConditions(eventView.query);\n\n      updateQuery(searchConditions, action, {...column, name: actionRow.id}, tagValue);\n\n      browserHistory.push({\n        pathname: location.pathname,\n        query: {\n          ...location.query,\n          [TAGS_CURSOR_NAME]: undefined,\n          query: searchConditions.formatString(),\n        },\n      });\n    };\n  };\n\n  generateReleaseLocation = (release: string) => {\n    const {organization, location} = this.props;\n    const {project} = location.query;\n\n    return {\n      pathname: `/organizations/${organization.slug}/releases/${encodeURIComponent(\n        release\n      )}`,\n      query: {project},\n    };\n  };\n\n  handleReleaseLinkClicked = () => {\n    const {organization} = this.props;\n    trackAdvancedAnalyticsEvent('performance_views.tags.jump_to_release', {\n      organization,\n    });\n  };\n\n  renderBodyCell = (\n    parentProps: Props,\n    column: TableColumn<TagsTableColumnKeys>,\n    dataRow: TableDataRow\n  ): React.ReactNode => {\n    const value = dataRow[column.key];\n    const {location, eventView, organization} = parentProps;\n\n    if (column.key === 'key') {\n      return dataRow.tags_key;\n    }\n\n    const allowActions = [Actions.ADD, Actions.EXCLUDE];\n\n    if (column.key === 'tagValue') {\n      const actionRow = {...dataRow, id: dataRow.tags_key};\n\n      return (\n        <CellAction\n          column={column}\n          dataRow={actionRow}\n          handleCellAction={this.handleCellAction(column, dataRow.tags_value, actionRow)}\n          allowActions={allowActions}\n        >\n          {column.name === 'release' ? (\n            <Link\n              to={this.generateReleaseLocation(dataRow.tags_value)}\n              onClick={this.handleReleaseLinkClicked}\n            >\n              <TagValue row={dataRow} />\n            </Link>\n          ) : (\n            <TagValue row={dataRow} />\n          )}\n        </CellAction>\n      );\n    }\n\n    if (column.key === 'frequency') {\n      return <AlignRight>{formatPercentage(dataRow.frequency, 0)}</AlignRight>;\n    }\n\n    if (column.key === 'action') {\n      const searchConditions = new MutableSearch(eventView.query);\n      const disabled = searchConditions.hasFilter(dataRow.tags_key);\n      return (\n        <AlignRight>\n          <Link\n            disabled={disabled}\n            to=\"\"\n            onClick={() => {\n              trackTagPageInteraction(organization);\n              this.handleTagValueClick(location, dataRow.tags_key, dataRow.tags_value);\n            }}\n          >\n            <LinkContainer>\n              <IconAdd isCircled />\n              {t('Add to filter')}\n            </LinkContainer>\n          </Link>\n        </AlignRight>\n      );\n    }\n\n    if (column.key === 'comparison') {\n      const localValue = dataRow.comparison;\n      const pct = formatPercentage(localValue - 1, 0);\n      return localValue > 1 ? t('+%s slower', pct) : t('%s faster', pct);\n    }\n\n    if (column.key === 'aggregate') {\n      return (\n        <AlignRight>\n          <PerformanceDuration abbreviation milliseconds={dataRow.aggregate} />\n        </AlignRight>\n      );\n    }\n\n    if (column.key === 'sumdelta') {\n      return (\n        <AlignRight>\n          <PerformanceDuration abbreviation milliseconds={dataRow.sumdelta} />\n        </AlignRight>\n      );\n    }\n\n    if (column.key === 'count') {\n      return <AlignRight>{value}</AlignRight>;\n    }\n\n    return value;\n  };\n\n  renderBodyCellWithData = (parentProps: Props) => {\n    return (\n      column: TableColumn<TagsTableColumnKeys>,\n      dataRow: TableDataRow\n    ): React.ReactNode => this.renderBodyCell(parentProps, column, dataRow);\n  };\n\n  handleResizeColumn = (columnIndex: number, nextColumn: GridColumn) => {\n    const widths: number[] = [...this.state.widths];\n    widths[columnIndex] = nextColumn.width\n      ? Number(nextColumn.width)\n      : COL_WIDTH_UNDEFINED;\n    this.setState({widths});\n  };\n\n  render() {\n    const {\n      eventView,\n      tagKey,\n      location,\n      isLoading,\n      tableData,\n      aggregateColumn,\n      pageLinks,\n      onCursor,\n    } = this.props;\n\n    const newColumns = [...TAGS_TABLE_COLUMN_ORDER].map(c => {\n      const newColumn = {...c};\n      if (c.key === 'tagValue' && tagKey) {\n        newColumn.name = tagKey;\n      }\n      if (c.key === 'aggregate') {\n        if (aggregateColumn === 'measurements.lcp') {\n          newColumn.name = 'Avg LCP';\n        }\n      }\n      return newColumn;\n    });\n\n    return (\n      <StyledPanelTable>\n        <GridEditable\n          isLoading={isLoading}\n          data={tableData && tableData.data ? tableData.data : []}\n          columnOrder={newColumns}\n          columnSortBy={[]}\n          grid={{\n            renderHeadCell: this.renderHeadCellWithMeta(\n              eventView,\n              tableData ? tableData.meta : {},\n              newColumns\n            ) as any,\n            renderBodyCell: this.renderBodyCellWithData(this.props) as any,\n            onResizeColumn: this.handleResizeColumn,\n          }}\n          location={location}\n        />\n\n        <Pagination pageLinks={pageLinks} onCursor={onCursor} size=\"sm\" />\n      </StyledPanelTable>\n    );\n  }\n}\n\nconst StyledPanelTable = styled('div')`\n  > div {\n    border-top-left-radius: 0;\n    border-top-right-radius: 0;\n  }\n`;\n\nconst AlignRight = styled('div')`\n  text-align: right;\n  flex: 1;\n`;\n\nconst LinkContainer = styled('div')`\n  display: grid;\n  grid-auto-flow: column;\n  gap: ${space(0.5)};\n  justify-content: flex-end;\n  align-items: center;\n`;\n\nexport default TagValueTable;\n","import {Fragment} from 'react';\nimport {browserHistory} from 'react-router';\nimport {Location} from 'history';\n\nimport {GridColumnOrder} from 'sentry/components/gridEditable';\nimport {CursorHandler} from 'sentry/components/pagination';\nimport {Organization, Project} from 'sentry/types';\nimport EventView, {fromSorts} from 'sentry/utils/discover/eventView';\nimport SegmentExplorerQuery from 'sentry/utils/performance/segmentExplorer/segmentExplorerQuery';\nimport TagKeyHistogramQuery from 'sentry/utils/performance/segmentExplorer/tagKeyHistogramQuery';\nimport {decodeScalar} from 'sentry/utils/queryString';\n\nimport TagsHeatMap from './tagsHeatMap';\nimport {TagValueTable} from './tagValueTable';\nimport {getTagSortForTagsPage} from './utils';\n\ntype Props = {\n  aggregateColumn: string;\n  eventView: EventView;\n  location: Location;\n  organization: Organization;\n  projects: Project[];\n  transactionName: string;\n  tagKey?: string;\n};\n\nconst HISTOGRAM_TAG_KEY_LIMIT = 8;\nconst HISTOGRAM_BUCKET_LIMIT = 40;\nexport const TAG_PAGE_TABLE_CURSOR = 'tableCursor';\n\nexport type TagsTableColumnKeys =\n  | 'key'\n  | 'tagValue'\n  | 'aggregate'\n  | 'frequency'\n  | 'comparison'\n  | 'sumdelta'\n  | 'action'\n  | 'count';\n\nexport type TagsTableColumn = GridColumnOrder<TagsTableColumnKeys> & {\n  column: {\n    kind: string;\n  };\n  field: string;\n  canSort?: boolean;\n};\nexport const TAGS_TABLE_COLUMN_ORDER: TagsTableColumn[] = [\n  {\n    key: 'tagValue',\n    field: 'tagValue',\n    name: 'Tag Values',\n    width: -1,\n    column: {\n      kind: 'field',\n    },\n  },\n  {\n    key: 'frequency',\n    field: 'frequency',\n    name: 'Frequency',\n    width: -1,\n    column: {\n      kind: 'field',\n    },\n    canSort: true,\n  },\n  {\n    key: 'count',\n    field: 'count',\n    name: 'Events',\n    width: -1,\n    column: {\n      kind: 'field',\n    },\n    canSort: true,\n  },\n  {\n    key: 'aggregate',\n    field: 'aggregate',\n    name: 'Avg Duration',\n    width: -1,\n    column: {\n      kind: 'field',\n    },\n    canSort: true,\n  },\n  {\n    key: 'action',\n    field: 'action',\n    name: '',\n    width: -1,\n    column: {\n      kind: 'field',\n    },\n  },\n];\n\nconst TagsDisplay = (props: Props) => {\n  const {eventView: _eventView, location, organization, aggregateColumn, tagKey} = props;\n  const eventView = _eventView.clone();\n\n  const handleCursor: CursorHandler = (cursor, pathname, query) =>\n    browserHistory.push({\n      pathname,\n      query: {...query, [TAG_PAGE_TABLE_CURSOR]: cursor},\n    });\n\n  const cursor = decodeScalar(location.query?.[TAG_PAGE_TABLE_CURSOR]);\n\n  const tagSort = getTagSortForTagsPage(location);\n\n  const tagSorts = fromSorts(tagSort);\n\n  eventView.fields = TAGS_TABLE_COLUMN_ORDER;\n\n  const sortedEventView = eventView.withSorts(\n    tagSorts.length\n      ? tagSorts\n      : [\n          {\n            field: 'frequency',\n            kind: 'desc',\n          },\n        ]\n  );\n\n  return (\n    <Fragment>\n      {tagKey ? (\n        <Fragment>\n          <TagKeyHistogramQuery\n            eventView={eventView}\n            orgSlug={organization.slug}\n            location={location}\n            aggregateColumn={aggregateColumn}\n            numBucketsPerKey={HISTOGRAM_BUCKET_LIMIT}\n            tagKey={tagKey}\n            limit={HISTOGRAM_TAG_KEY_LIMIT}\n            cursor={cursor}\n            sort={tagSort ?? '-sumdelta'}\n          >\n            {({isLoading, tableData}) => {\n              return (\n                <TagsHeatMap\n                  {...props}\n                  tagKey={tagKey}\n                  aggregateColumn={aggregateColumn}\n                  tableData={tableData}\n                  isLoading={isLoading}\n                />\n              );\n            }}\n          </TagKeyHistogramQuery>\n          <SegmentExplorerQuery\n            eventView={sortedEventView}\n            orgSlug={organization.slug}\n            location={location}\n            aggregateColumn={aggregateColumn}\n            tagKey={tagKey}\n            limit={HISTOGRAM_TAG_KEY_LIMIT}\n            cursor={cursor}\n            sort={tagSort}\n            allTagKeys\n          >\n            {({isLoading, tableData, pageLinks}) => {\n              return (\n                <TagValueTable\n                  {...props}\n                  eventView={sortedEventView}\n                  tagKey={tagKey}\n                  aggregateColumn={aggregateColumn}\n                  pageLinks={pageLinks}\n                  tableData={tableData}\n                  isLoading={isLoading}\n                  onCursor={handleCursor}\n                />\n              );\n            }}\n          </SegmentExplorerQuery>\n        </Fragment>\n      ) : (\n        <Fragment>\n          <TagsHeatMap\n            {...props}\n            aggregateColumn={aggregateColumn}\n            tableData={null}\n            isLoading={false}\n          />\n          <TagValueTable\n            {...props}\n            pageLinks={null}\n            aggregateColumn={aggregateColumn}\n            tableData={null}\n            isLoading={false}\n          />\n        </Fragment>\n      )}\n    </Fragment>\n  );\n};\n\nexport default TagsDisplay;\n","import {Fragment, useRef, useState} from 'react';\nimport {createPortal} from 'react-dom';\nimport {usePopper} from 'react-popper';\nimport {useTheme} from '@emotion/react';\nimport styled from '@emotion/styled';\nimport {useOverlay} from '@react-aria/overlays';\nimport {useOverlayTriggerState} from '@react-stately/overlays';\nimport {truncate} from '@sentry/utils';\nimport type {VisualMapComponentOption} from 'echarts';\nimport {Location} from 'history';\nimport memoize from 'lodash/memoize';\n\nimport HeatMapChart from 'sentry/components/charts/heatMapChart';\nimport {HeaderTitleLegend} from 'sentry/components/charts/styles';\nimport TransitionChart from 'sentry/components/charts/transitionChart';\nimport TransparentLoadingMask from 'sentry/components/charts/transparentLoadingMask';\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport {Overlay, PositionWrapper} from 'sentry/components/overlay';\nimport {Panel} from 'sentry/components/panels';\nimport PerformanceDuration from 'sentry/components/performanceDuration';\nimport Placeholder from 'sentry/components/placeholder';\nimport QuestionTooltip from 'sentry/components/questionTooltip';\nimport {DropdownItem, SectionSubtext} from 'sentry/components/quickTrace/styles';\nimport Truncate from 'sentry/components/truncate';\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {Organization, Project} from 'sentry/types';\nimport {ReactEchartsRef, Series} from 'sentry/types/echarts';\nimport {axisLabelFormatter} from 'sentry/utils/discover/charts';\nimport EventView from 'sentry/utils/discover/eventView';\nimport {formatAbbreviatedNumber} from 'sentry/utils/formatters';\nimport getDynamicText from 'sentry/utils/getDynamicText';\nimport {\n  TableData as TagTableData,\n  TableDataRow,\n} from 'sentry/utils/performance/segmentExplorer/tagKeyHistogramQuery';\nimport TagTransactionsQuery from 'sentry/utils/performance/segmentExplorer/tagTransactionsQuery';\nimport {decodeScalar} from 'sentry/utils/queryString';\n\nimport {getPerformanceDuration} from '../../utils';\nimport {eventsRouteWithQuery} from '../transactionEvents/utils';\nimport {generateTransactionLink} from '../utils';\n\nimport {parseHistogramBucketInfo, trackTagPageInteraction} from './utils';\n\ntype Props = {\n  aggregateColumn: string;\n  eventView: EventView;\n  location: Location;\n  organization: Organization;\n  projects: Project[];\n  transactionName: string;\n  tagKey?: string;\n};\n\nconst findRowKey = (row: TableDataRow) => {\n  return Object.keys(row).find(key => key.includes('histogram'));\n};\n\nclass VirtualReference {\n  boundingRect: DOMRect;\n\n  constructor(element: HTMLElement) {\n    this.boundingRect = element.getBoundingClientRect();\n  }\n\n  getBoundingClientRect() {\n    return this.boundingRect;\n  }\n\n  get clientWidth() {\n    return this.getBoundingClientRect().width;\n  }\n\n  get clientHeight() {\n    return this.getBoundingClientRect().height;\n  }\n}\n\nconst getPortal = memoize((): HTMLElement => {\n  let portal = document.getElementById('heatmap-portal');\n\n  if (portal) {\n    return portal;\n  }\n\n  portal = document.createElement('div');\n  portal.setAttribute('id', 'heatmap-portal');\n  document.body.appendChild(portal);\n\n  return portal;\n});\n\nconst TagsHeatMap = (\n  props: Props & {\n    isLoading: boolean;\n    tableData: TagTableData | null;\n  }\n) => {\n  const {\n    tableData,\n    isLoading,\n    organization,\n    eventView,\n    location,\n    tagKey,\n    transactionName,\n    aggregateColumn,\n  } = props;\n\n  const chartRef = useRef<ReactEchartsRef>(null);\n  const [chartElement, setChartElement] = useState<VirtualReference | undefined>();\n  const [overlayElement, setOverlayElement] = useState<HTMLElement | null>(null);\n  const [overlayArrowElement, setOverlayArrowElement] = useState<HTMLElement | null>(\n    null\n  );\n  const [transactionEventView, setTransactionEventView] = useState<\n    EventView | undefined\n  >();\n\n  // TODO(k-fish): Replace with actual theme colors.\n  const purples = ['#D1BAFC', '#9282F3', '#6056BA', '#313087', '#021156'];\n\n  const xValues = new Set();\n\n  const histogramData =\n    tableData &&\n    tableData.histogram &&\n    tableData.histogram.data &&\n    tableData.histogram.data.length\n      ? tableData.histogram.data\n      : undefined;\n  const tagData =\n    tableData && tableData.tags && tableData.tags.data ? tableData.tags.data : undefined;\n\n  const rowKey = histogramData && findRowKey(histogramData[0]);\n\n  // Reverse since e-charts takes the axis labels in the opposite order.\n  const columnNames = tagData ? tagData.map(tag => tag.tags_value).reverse() : [];\n\n  let maxCount = 0;\n\n  const _data =\n    rowKey && histogramData\n      ? histogramData.map(row => {\n          const rawDuration = row[rowKey] as number;\n          const x = getPerformanceDuration(rawDuration);\n          const y = row.tags_value;\n          xValues.add(x);\n\n          maxCount = Math.max(maxCount, row.count);\n\n          return [x, y, row.count] as number[];\n        })\n      : null;\n\n  _data?.sort((a, b) => {\n    const i = b[0] === a[0] ? 1 : 0;\n    return b[i] - a[i];\n  });\n\n  // TODO(k-fish): Cleanup options\n  const chartOptions = {\n    height: 290,\n    animation: false,\n    colors: purples,\n    tooltip: {},\n    yAxis: {\n      type: 'category' as const,\n      data: Array.from(columnNames),\n      splitArea: {\n        show: true,\n      },\n      axisLabel: {\n        formatter: (value: string) => truncate(value, 30),\n      },\n    },\n    xAxis: {\n      type: 'category' as const,\n      splitArea: {\n        show: true,\n      },\n      data: Array.from(xValues),\n      axisLabel: {\n        show: true,\n        showMinLabel: true,\n        showMaxLabel: true,\n        formatter: (value: number) => axisLabelFormatter(value, 'number'),\n      },\n      axisLine: {},\n      axisPointer: {\n        show: false,\n      },\n      axisTick: {\n        show: true,\n        interval: 0,\n        alignWithLabel: true,\n      },\n    },\n\n    grid: {\n      left: space(3),\n      right: space(3),\n      top: '25px', // Need to bump top spacing past space(3) so the chart title doesn't overlap.\n      bottom: space(4),\n    },\n  };\n\n  const visualMaps: VisualMapComponentOption[] = [\n    {\n      min: 0,\n      max: maxCount,\n      show: false,\n      orient: 'horizontal',\n      calculable: true,\n      inRange: {\n        color: purples,\n      },\n    },\n  ];\n\n  const series: Series[] = [];\n\n  if (_data) {\n    series.push({\n      seriesName: 'Count',\n      dataArray: _data,\n      label: {\n        show: true,\n        formatter: data => formatAbbreviatedNumber(data.value[2]),\n      },\n      emphasis: {\n        itemStyle: {\n          shadowBlur: 10,\n          shadowColor: 'rgba(0, 0, 0, 0.5)',\n        },\n      },\n    } as any); // TODO(k-fish): Fix heatmap data typing\n  }\n\n  const onChartClick = bucket => {\n    const htmlEvent = bucket.event.event;\n    // Make a copy of the dims because echarts can remove elements after this click happens.\n    // TODO(k-fish): Look at improving this to respond properly to resize events.\n    const virtualRef = new VirtualReference(htmlEvent.target);\n    setChartElement(virtualRef);\n\n    const newTransactionEventView = eventView.clone();\n\n    newTransactionEventView.fields = [{field: aggregateColumn}];\n    const [_, tagValue] = bucket.value;\n\n    if (histogramBucketInfo && histogramData) {\n      const row = histogramData[bucket.dataIndex];\n      const currentBucketStart = parseInt(\n        `${row[histogramBucketInfo.histogramField]}`,\n        10\n      );\n      const currentBucketEnd = currentBucketStart + histogramBucketInfo.bucketSize;\n\n      newTransactionEventView.additionalConditions.setFilterValues(aggregateColumn, [\n        `>=${currentBucketStart}`,\n        `<${currentBucketEnd}`,\n      ]);\n    }\n\n    if (tagKey) {\n      newTransactionEventView.additionalConditions.setFilterValues(tagKey, [tagValue]);\n    }\n\n    setTransactionEventView(newTransactionEventView);\n    trackTagPageInteraction(organization);\n\n    if (!overlayState.isOpen) {\n      overlayState.open();\n    }\n  };\n\n  const overlayState = useOverlayTriggerState({});\n  const {overlayProps} = useOverlay(\n    {\n      isOpen: overlayState.isOpen,\n      onClose: overlayState.close,\n      isDismissable: true,\n      shouldCloseOnBlur: true,\n      // Ignore the menu being closed if the echart is being clicked.\n      shouldCloseOnInteractOutside: el =>\n        !chartRef.current?.getEchartsInstance().getDom().contains(el),\n    },\n    {current: overlayElement ?? null}\n  );\n\n  const {styles: popperStyles, state: popperState} = usePopper(\n    chartElement,\n    overlayElement,\n    {\n      placement: 'bottom',\n      strategy: 'absolute',\n      modifiers: [\n        {name: 'computeStyles', options: {gpuAcceleration: false}},\n        {name: 'offset', options: {offset: [0, 8]}},\n        {name: 'arrow', options: {element: overlayArrowElement, padding: 4}},\n        {name: 'preventOverflow', enabled: true, options: {padding: 12, altAxis: true}},\n      ],\n    }\n  );\n\n  const theme = useTheme();\n  const portaledContent =\n    !chartElement || !overlayState.isOpen ? null : (\n      <PositionWrapper\n        ref={setOverlayElement}\n        zIndex={theme.zIndex.dropdown}\n        style={popperStyles.popper}\n        {...overlayProps}\n      >\n        <Overlay\n          arrowProps={{\n            ref: setOverlayArrowElement,\n            style: popperStyles.arrow,\n            placement: popperState?.placement,\n          }}\n        >\n          {transactionEventView && (\n            <TagTransactionsQuery\n              query={transactionEventView.getQueryWithAdditionalConditions()}\n              location={location}\n              eventView={transactionEventView}\n              orgSlug={organization.slug}\n              limit={4}\n              referrer=\"api.performance.tag-page\"\n            >\n              {({isLoading: isTransactionsLoading, tableData: transactionTableData}) => {\n                if (isTransactionsLoading) {\n                  return (\n                    <LoadingContainer>\n                      <LoadingIndicator size={40} hideMessage />\n                    </LoadingContainer>\n                  );\n                }\n\n                const moreEventsTarget = eventsRouteWithQuery({\n                  orgSlug: organization.slug,\n                  transaction: transactionName,\n                  projectID: decodeScalar(location.query.project),\n                  query: {\n                    ...transactionEventView.generateQueryStringObject(),\n                    query: transactionEventView.getQueryWithAdditionalConditions(),\n                  },\n                });\n\n                return (\n                  <div>\n                    {!transactionTableData?.data.length ? <Placeholder /> : null}\n                    {[...transactionTableData?.data].slice(0, 3).map(row => {\n                      const target = generateTransactionLink(transactionName)(\n                        organization,\n                        row,\n                        location.query\n                      );\n\n                      return (\n                        <DropdownItem width=\"small\" key={row.id} to={target}>\n                          <DropdownItemContainer>\n                            <Truncate value={row.id} maxLength={12} />\n                            <SectionSubtext>\n                              <PerformanceDuration\n                                milliseconds={row[aggregateColumn]}\n                                abbreviation\n                              />\n                            </SectionSubtext>\n                          </DropdownItemContainer>\n                        </DropdownItem>\n                      );\n                    })}\n                    {moreEventsTarget &&\n                    transactionTableData &&\n                    transactionTableData.data.length > 3 ? (\n                      <DropdownItem width=\"small\" to={moreEventsTarget}>\n                        <DropdownItemContainer>\n                          {t('View all events')}\n                        </DropdownItemContainer>\n                      </DropdownItem>\n                    ) : null}\n                  </div>\n                );\n              }}\n            </TagTransactionsQuery>\n          )}\n        </Overlay>\n      </PositionWrapper>\n    );\n\n  const histogramBucketInfo = histogramData && parseHistogramBucketInfo(histogramData[0]);\n\n  return (\n    <StyledPanel>\n      <StyledHeaderTitleLegend>\n        {t('Heat Map')}\n        <QuestionTooltip\n          size=\"sm\"\n          position=\"top\"\n          title={t(\n            'This heatmap shows the frequency for each duration across the most common tag values'\n          )}\n        />\n      </StyledHeaderTitleLegend>\n\n      <TransitionChart loading={isLoading} reloading={isLoading}>\n        <TransparentLoadingMask visible={isLoading} />\n        <Fragment>\n          {createPortal(<div>{portaledContent}</div>, getPortal())}\n          {getDynamicText({\n            value: (\n              <HeatMapChart\n                ref={chartRef}\n                visualMaps={visualMaps}\n                series={series}\n                onClick={onChartClick}\n                {...chartOptions}\n              />\n            ),\n            fixed: <Placeholder height=\"290px\" testId=\"skeleton-ui\" />,\n          })}\n        </Fragment>\n      </TransitionChart>\n    </StyledPanel>\n  );\n};\n\nconst LoadingContainer = styled('div')`\n  width: 200px;\n  height: 100px;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst DropdownItemContainer = styled('div')`\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n\n  justify-content: space-between;\n`;\n\nconst StyledPanel = styled(Panel)`\n  padding: ${space(3)} ${space(3)} 0 ${space(3)};\n  margin-bottom: 0;\n  border-bottom: 0;\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n`;\n\nconst StyledHeaderTitleLegend = styled(HeaderTitleLegend)``;\n\nexport default TagsHeatMap;\n","export enum XAxisOption {\n  DURATION = 'transaction.duration',\n  LCP = 'measurements.lcp',\n}\n"],"names":["VisualMap","visualMap","forwardRef","HeatMapSeries","BaseChart","props","ref","series","seriesOptions","visualMaps","otherProps","map","seriesName","data","dataArray","options","name","value","LoadingMask","LoadingPanel","height","_height","p","defaultProps","rest","type","Component","Fragment","TransitionChart","prevReloading","reloading","prevLoading","loading","key","getDerivedStateFromProps","state","nextReloading","nextLoading","render","children","String","TransparentLoadingMask","className","visible","other","theme","backgroundSecondary","borderRadius","GenericDiscoverQuery","withApi","getRequestFunction","_props","aggregateColumn","getTagExplorerRequestPayload","eventView","apiPayload","getEventsAPIPayload","location","sort","tagKey","numBucketsPerKey","shouldRefetchData","prevProps","nextProps","TagKeyHistogramQuery","query","TagTransactionsQuery","t","XAxisOption","X_AXIS_SELECT_OPTIONS","label","LCP","DURATION","useCallback","useEffect","useRef","useState","browserHistory","SectionHeading","DatePageFilter","EnvironmentPageFilter","SearchBar","CompactSelect","Layout","LoadingIndicator","PageFilterBar","normalizeDateTimeParams","QuestionTooltip","Radio","space","trackAdvancedAnalyticsEvent","SegmentExplorerQuery","decodeScalar","SidebarSpacer","SpanOperationBreakdownFilter","getTransactionField","TagsDisplay","TAG_PAGE_TABLE_CURSOR","decodeSelectedTagKey","TagsPageContent","organization","projects","setAggregateColumn","None","slug","isLoading","tableData","getTagKeyOptions","suspectTags","otherTags","forEach","row","tagArray","comparison","push","tags_key","InnerContent","_eventView","onChangeAggregateColumn","clone","tagOptions","decodedTagKey","allTags","decodedTagFromOptions","find","tag","undefined","defaultTag","length","initialTag","tagSelected","_changeTagSelected","lastTag","changeTagSelected","current","queryParams","replace","pathname","handleSearch","changeTag","isOtherTag","from_tag","to_tag","is_other_tag","additionalConditions","setFilterValues","project","fields","opt","prefix","TagsSideBar","Center","RadioLabel","SidebarTagValue","StyledSectionHeading","ReversedLayoutBody","background","breakpoints","medium","large","StyledSide","StyledMain","StyledSearchBar","small","xlarge","FilterActions","EventView","MutableSearch","withOrganization","withProjects","PageLayout","Tab","TransactionTags","Tags","getDocumentTitle","generateEventView","transactionName","hasTransactionName","trim","join","conditions","fromNewQueryWithLocation","id","version","formatString","GridEditable","COL_WIDTH_UNDEFINED","SortLink","Link","Pagination","PerformanceDuration","IconAdd","fieldAlignment","formatPercentage","CellAction","Actions","updateQuery","TagValue","normalizeSearchConditions","TAGS_TABLE_COLUMN_ORDER","trackTagPageInteraction","TAGS_CURSOR_NAME","TagValueTable","widths","sortedEventView","tableMeta","columns","column","index","renderHeadCell","tagValue","queryString","addFilterValues","actionRow","action","searchConditions","release","encodeURIComponent","parentProps","dataRow","allowActions","ADD","EXCLUDE","handleCellAction","tags_value","generateReleaseLocation","handleReleaseLinkClicked","frequency","disabled","hasFilter","handleTagValueClick","localValue","pct","aggregate","sumdelta","renderBodyCell","columnIndex","nextColumn","width","Number","setState","columnInfo","align","field","generateSortLink","nextEventView","sortOnField","generateQueryStringObject","tagSort","currentSort","sortForField","currentSortKind","kind","pageLinks","onCursor","newColumns","c","newColumn","renderHeadCellWithMeta","meta","renderBodyCellWithData","onResizeColumn","handleResizeColumn","StyledPanelTable","AlignRight","LinkContainer","fromSorts","TagsHeatMap","getTagSortForTagsPage","HISTOGRAM_TAG_KEY_LIMIT","HISTOGRAM_BUCKET_LIMIT","canSort","handleCursor","cursor","tagSorts","withSorts","createPortal","usePopper","useTheme","useOverlay","useOverlayTriggerState","truncate","memoize","HeatMapChart","HeaderTitleLegend","Overlay","PositionWrapper","Panel","Placeholder","DropdownItem","SectionSubtext","Truncate","axisLabelFormatter","formatAbbreviatedNumber","getDynamicText","getPerformanceDuration","eventsRouteWithQuery","generateTransactionLink","parseHistogramBucketInfo","findRowKey","Object","keys","includes","VirtualReference","constructor","element","boundingRect","getBoundingClientRect","clientWidth","clientHeight","getPortal","portal","document","getElementById","createElement","setAttribute","body","appendChild","chartRef","chartElement","setChartElement","overlayElement","setOverlayElement","overlayArrowElement","setOverlayArrowElement","transactionEventView","setTransactionEventView","purples","xValues","Set","histogramData","histogram","tagData","tags","rowKey","columnNames","reverse","maxCount","_data","rawDuration","x","y","add","Math","max","count","a","b","i","chartOptions","animation","colors","tooltip","yAxis","Array","from","splitArea","show","axisLabel","formatter","xAxis","showMinLabel","showMaxLabel","axisLine","axisPointer","axisTick","interval","alignWithLabel","grid","left","right","top","bottom","min","orient","calculable","inRange","color","emphasis","itemStyle","shadowBlur","shadowColor","onChartClick","bucket","htmlEvent","event","virtualRef","target","newTransactionEventView","_","histogramBucketInfo","dataIndex","currentBucketStart","parseInt","histogramField","currentBucketEnd","bucketSize","overlayState","isOpen","open","overlayProps","onClose","close","isDismissable","shouldCloseOnBlur","shouldCloseOnInteractOutside","el","getEchartsInstance","getDom","contains","styles","popperStyles","popperState","placement","strategy","modifiers","gpuAcceleration","offset","padding","enabled","altAxis","portaledContent","zIndex","dropdown","popper","style","arrow","getQueryWithAdditionalConditions","isTransactionsLoading","transactionTableData","moreEventsTarget","orgSlug","transaction","projectID","slice","fixed","LoadingContainer","DropdownItemContainer","StyledPanel","StyledHeaderTitleLegend"],"sourceRoot":""}