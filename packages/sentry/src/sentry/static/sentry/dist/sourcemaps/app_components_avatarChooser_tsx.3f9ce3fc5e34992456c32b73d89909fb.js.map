{"version":3,"file":"chunks/app_components_avatarChooser_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/avatarChooser.tsx","webpack:///./app/components/avatarCropper.tsx","webpack:///./app/components/well.tsx"],"sourcesContent":["import {Component} from 'react';\nimport styled from '@emotion/styled';\n\nimport {addErrorMessage, addSuccessMessage} from 'sentry/actionCreators/indicator';\nimport {Client} from 'sentry/api';\nimport Avatar from 'sentry/components/avatar';\nimport AvatarCropper from 'sentry/components/avatarCropper';\nimport Button from 'sentry/components/button';\nimport RadioGroup from 'sentry/components/forms/controls/radioGroup';\nimport ExternalLink from 'sentry/components/links/externalLink';\nimport LoadingError from 'sentry/components/loadingError';\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport {Panel, PanelBody, PanelHeader} from 'sentry/components/panels';\nimport Well from 'sentry/components/well';\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {AvatarUser, Organization, SentryApp, Team} from 'sentry/types';\nimport withApi from 'sentry/utils/withApi';\n\nexport type Model = Pick<AvatarUser, 'avatar'>;\ntype AvatarType = Required<Model>['avatar']['avatarType'];\ntype AvatarChooserType =\n  | 'user'\n  | 'team'\n  | 'organization'\n  | 'sentryAppColor'\n  | 'sentryAppSimple'\n  | 'docIntegration';\ntype DefaultChoice = {\n  allowDefault?: boolean;\n  choiceText?: string;\n  preview?: React.ReactNode;\n};\n\ntype DefaultProps = {\n  onSave: (model: Model) => void;\n  allowGravatar?: boolean;\n  allowLetter?: boolean;\n  allowUpload?: boolean;\n  defaultChoice?: DefaultChoice;\n  type?: AvatarChooserType;\n};\n\ntype Props = {\n  api: Client;\n  endpoint: string;\n  model: Model;\n  disabled?: boolean;\n  help?: React.ReactNode;\n  isUser?: boolean;\n  savedDataUrl?: string;\n  title?: string;\n} & DefaultProps;\n\ntype State = {\n  hasError: boolean;\n  model: Model;\n  dataUrl?: string | null;\n  savedDataUrl?: string | null;\n};\n\nclass AvatarChooser extends Component<Props, State> {\n  static defaultProps: DefaultProps = {\n    allowGravatar: true,\n    allowLetter: true,\n    allowUpload: true,\n    type: 'user',\n    onSave: () => {},\n    defaultChoice: {\n      allowDefault: false,\n    },\n  };\n\n  state: State = {\n    model: this.props.model,\n    savedDataUrl: null,\n    dataUrl: null,\n    hasError: false,\n  };\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    // Update local state if defined in props\n    if (typeof nextProps.model !== 'undefined') {\n      this.setState({model: nextProps.model});\n    }\n  }\n\n  updateState(model: Model) {\n    this.setState({model});\n  }\n\n  getModelFromResponse(resp: any): Model {\n    const {type} = this.props;\n    const isSentryApp = type?.startsWith('sentryApp');\n    // SentryApp endpoint returns all avatars, we need to return only the edited one\n    if (!isSentryApp) {\n      return resp;\n    }\n    const isColor = type === 'sentryAppColor';\n    return {avatar: resp?.avatars?.find(({color}) => color === isColor) ?? undefined};\n  }\n\n  handleError(msg: string) {\n    addErrorMessage(msg);\n  }\n\n  handleSuccess(model: Model) {\n    const {onSave} = this.props;\n    this.setState({model});\n    onSave(model);\n    addSuccessMessage(t('Successfully saved avatar preferences'));\n  }\n\n  handleSaveSettings = (ev: React.MouseEvent) => {\n    const {endpoint, api, type} = this.props;\n    const {model, dataUrl} = this.state;\n\n    ev.preventDefault();\n    const avatarType = model?.avatar?.avatarType;\n    const avatarPhoto = dataUrl?.split(',')[1];\n\n    const data: {\n      avatar_photo?: string;\n      avatar_type?: string;\n      color?: boolean;\n    } = {avatar_type: avatarType};\n\n    // If an image has been uploaded, then another option is selected, we should not submit the uploaded image\n    if (avatarType === 'upload') {\n      data.avatar_photo = avatarPhoto;\n    }\n\n    if (type?.startsWith('sentryApp')) {\n      data.color = type === 'sentryAppColor';\n    }\n\n    api.request(endpoint, {\n      method: 'PUT',\n      data,\n      success: resp => {\n        this.setState({savedDataUrl: this.state.dataUrl});\n        this.handleSuccess(this.getModelFromResponse(resp));\n      },\n      error: resp => {\n        const avatarPhotoErrors = resp?.responseJSON?.avatar_photo || [];\n        avatarPhotoErrors.length\n          ? avatarPhotoErrors.map(this.handleError)\n          : this.handleError.bind(this, t('There was an error saving your preferences.'));\n      },\n    });\n  };\n\n  handleChange = (id: AvatarType) =>\n    this.updateState({\n      ...this.state.model,\n      avatar: {avatarUuid: this.state.model.avatar?.avatarUuid ?? '', avatarType: id},\n    });\n\n  render() {\n    const {\n      allowGravatar,\n      allowUpload,\n      allowLetter,\n      savedDataUrl,\n      type,\n      isUser,\n      disabled,\n      title,\n      help,\n      defaultChoice,\n    } = this.props;\n    const {hasError, model} = this.state;\n\n    if (hasError) {\n      return <LoadingError />;\n    }\n    if (!model) {\n      return <LoadingIndicator />;\n    }\n    const {allowDefault, preview, choiceText: defaultChoiceText} = defaultChoice || {};\n\n    const avatarType = model.avatar?.avatarType ?? 'letter_avatar';\n    const isLetter = avatarType === 'letter_avatar';\n    const isDefault = Boolean(preview && avatarType === 'default');\n\n    const isTeam = type === 'team';\n    const isOrganization = type === 'organization';\n    const isSentryApp = type?.startsWith('sentryApp');\n\n    const choices: [AvatarType, string][] = [];\n\n    if (allowDefault && preview) {\n      choices.push(['default', defaultChoiceText ?? t('Use default avatar')]);\n    }\n    if (allowLetter) {\n      choices.push(['letter_avatar', t('Use initials')]);\n    }\n    if (allowUpload) {\n      choices.push(['upload', t('Upload an image')]);\n    }\n    if (allowGravatar) {\n      choices.push(['gravatar', t('Use Gravatar')]);\n    }\n    return (\n      <Panel>\n        <PanelHeader>{title || t('Avatar')}</PanelHeader>\n        <PanelBody>\n          <AvatarForm>\n            <AvatarGroup inline={isLetter || isDefault}>\n              <RadioGroup\n                style={{flex: 1}}\n                choices={choices}\n                value={avatarType}\n                label={t('Avatar Type')}\n                onChange={this.handleChange}\n                disabled={disabled}\n              />\n              {isLetter && (\n                <Avatar\n                  gravatar={false}\n                  style={{width: 90, height: 90}}\n                  user={isUser ? (model as AvatarUser) : undefined}\n                  organization={isOrganization ? (model as Organization) : undefined}\n                  team={isTeam ? (model as Team) : undefined}\n                  sentryApp={isSentryApp ? (model as SentryApp) : undefined}\n                />\n              )}\n              {isDefault && preview}\n            </AvatarGroup>\n            <AvatarUploadSection>\n              {allowGravatar && avatarType === 'gravatar' && (\n                <Well>\n                  {t('Gravatars are managed through ')}\n                  <ExternalLink href=\"http://gravatar.com\">Gravatar.com</ExternalLink>\n                </Well>\n              )}\n              {model.avatar && avatarType === 'upload' && (\n                <AvatarCropper\n                  {...this.props}\n                  type={type!}\n                  model={model}\n                  savedDataUrl={savedDataUrl}\n                  updateDataUrlState={dataState => this.setState(dataState)}\n                />\n              )}\n              <AvatarSubmit className=\"form-actions\">\n                {help && <AvatarHelp>{help}</AvatarHelp>}\n                <Button\n                  type=\"button\"\n                  priority=\"primary\"\n                  onClick={this.handleSaveSettings}\n                  disabled={disabled}\n                >\n                  {t('Save Avatar')}\n                </Button>\n              </AvatarSubmit>\n            </AvatarUploadSection>\n          </AvatarForm>\n        </PanelBody>\n      </Panel>\n    );\n  }\n}\n\nconst AvatarHelp = styled('p')`\n  margin-right: auto;\n  color: ${p => p.theme.gray300};\n  font-size: 14px;\n  width: 50%;\n`;\n\nconst AvatarGroup = styled('div')<{inline: boolean}>`\n  display: flex;\n  flex-direction: ${p => (p.inline ? 'row' : 'column')};\n`;\n\nconst AvatarForm = styled('div')`\n  line-height: ${space(3)};\n  padding: ${space(1.5)} ${space(2)};\n  margin: ${space(1.5)} ${space(1)} ${space(0.5)};\n`;\n\nconst AvatarSubmit = styled('fieldset')`\n  display: flex;\n  align-items: center;\n  margin-top: ${space(4)};\n  padding-top: ${space(1.5)};\n`;\n\nconst AvatarUploadSection = styled('div')`\n  margin-top: ${space(1.5)};\n`;\n\nexport default withApi(AvatarChooser);\n","import {Component, createRef, Fragment} from 'react';\nimport styled from '@emotion/styled';\n\nimport {addErrorMessage} from 'sentry/actionCreators/indicator';\nimport Well from 'sentry/components/well';\nimport {AVATAR_URL_MAP} from 'sentry/constants';\nimport {t, tct} from 'sentry/locale';\nimport {AvatarUser} from 'sentry/types';\n\nconst resizerPositions = {\n  nw: ['top', 'left'],\n  ne: ['top', 'right'],\n  se: ['bottom', 'right'],\n  sw: ['bottom', 'left'],\n};\n\ntype Position = keyof typeof resizerPositions;\n\ntype Model = Pick<AvatarUser, 'avatar'>;\n\ntype Props = {\n  model: Model;\n  type:\n    | 'user'\n    | 'team'\n    | 'organization'\n    | 'project'\n    | 'sentryAppColor'\n    | 'sentryAppSimple'\n    | 'docIntegration';\n  updateDataUrlState: (opts: {dataUrl?: string; savedDataUrl?: string | null}) => void;\n  savedDataUrl?: string;\n};\n\ntype State = {\n  file: File | null;\n  mousePosition: {pageX: number; pageY: number};\n  objectURL: string | null;\n  resizeDimensions: {left: number; size: number; top: number};\n  resizeDirection: Position | null;\n};\n\nclass AvatarCropper extends Component<Props, State> {\n  state: State = {\n    file: null,\n    objectURL: null,\n    mousePosition: {pageX: 0, pageY: 0},\n    resizeDimensions: {top: 0, left: 0, size: 0},\n    resizeDirection: null,\n  };\n\n  componentWillUnmount() {\n    this.revokeObjectUrl();\n  }\n\n  file = createRef<HTMLInputElement>();\n  canvas = createRef<HTMLCanvasElement>();\n  image = createRef<HTMLImageElement>();\n  cropContainer = createRef<HTMLDivElement>();\n\n  // These values must be synced with the avatar endpoint in backend.\n  MIN_DIMENSION = 256;\n  MAX_DIMENSION = 1024;\n  ALLOWED_MIMETYPES = 'image/gif,image/jpeg,image/png';\n\n  onSelectFile = (ev: React.ChangeEvent<HTMLInputElement>) => {\n    const file = ev.target.files && ev.target.files[0];\n\n    // No file selected (e.g. user clicked \"cancel\")\n    if (!file) {\n      return;\n    }\n\n    if (!/^image\\//.test(file.type)) {\n      addErrorMessage(t('That is not a supported file type.'));\n      return;\n    }\n\n    this.revokeObjectUrl();\n\n    const {updateDataUrlState} = this.props;\n    const objectURL = window.URL.createObjectURL(file);\n    this.setState({file, objectURL}, () => updateDataUrlState({savedDataUrl: null}));\n  };\n\n  revokeObjectUrl = () =>\n    this.state.objectURL && window.URL.revokeObjectURL(this.state.objectURL);\n\n  onImageLoad = () => {\n    const error = this.validateImage();\n    if (error) {\n      this.revokeObjectUrl();\n      this.setState({objectURL: null});\n      addErrorMessage(error);\n      return;\n    }\n\n    const image = this.image.current;\n    if (!image) {\n      return;\n    }\n\n    const dimension = Math.min(image.clientHeight, image.clientWidth);\n    const state = {resizeDimensions: {size: dimension, top: 0, left: 0}};\n\n    this.setState(state, this.drawToCanvas);\n  };\n\n  updateDimensions = (ev: MouseEvent) => {\n    const cropContainer = this.cropContainer.current;\n    if (!cropContainer) {\n      return;\n    }\n\n    const {mousePosition, resizeDimensions} = this.state;\n\n    let pageY = ev.pageY;\n    let pageX = ev.pageX;\n    let top = resizeDimensions.top + (pageY - mousePosition.pageY);\n    let left = resizeDimensions.left + (pageX - mousePosition.pageX);\n\n    if (top < 0) {\n      top = 0;\n      pageY = mousePosition.pageY;\n    } else if (top + resizeDimensions.size > cropContainer.clientHeight) {\n      top = cropContainer.clientHeight - resizeDimensions.size;\n      pageY = mousePosition.pageY;\n    }\n\n    if (left < 0) {\n      left = 0;\n      pageX = mousePosition.pageX;\n    } else if (left + resizeDimensions.size > cropContainer.clientWidth) {\n      left = cropContainer.clientWidth - resizeDimensions.size;\n      pageX = mousePosition.pageX;\n    }\n\n    this.setState(state => ({\n      resizeDimensions: {...state.resizeDimensions, top, left},\n      mousePosition: {pageX, pageY},\n    }));\n  };\n\n  onMouseDown = (ev: React.MouseEvent<HTMLDivElement>) => {\n    ev.preventDefault();\n    this.setState({mousePosition: {pageY: ev.pageY, pageX: ev.pageX}});\n\n    document.addEventListener('mousemove', this.updateDimensions);\n    document.addEventListener('mouseup', this.onMouseUp);\n  };\n\n  onMouseUp = (ev: MouseEvent) => {\n    ev.preventDefault();\n    document.removeEventListener('mousemove', this.updateDimensions);\n    document.removeEventListener('mouseup', this.onMouseUp);\n    this.drawToCanvas();\n  };\n\n  startResize = (direction: Position, ev: React.MouseEvent<HTMLDivElement>) => {\n    ev.stopPropagation();\n    ev.preventDefault();\n    document.addEventListener('mousemove', this.updateSize);\n    document.addEventListener('mouseup', this.stopResize);\n\n    this.setState({\n      resizeDirection: direction,\n      mousePosition: {pageY: ev.pageY, pageX: ev.pageX},\n    });\n  };\n\n  stopResize = (ev: MouseEvent) => {\n    ev.stopPropagation();\n    ev.preventDefault();\n    document.removeEventListener('mousemove', this.updateSize);\n    document.removeEventListener('mouseup', this.stopResize);\n\n    this.setState({resizeDirection: null});\n    this.drawToCanvas();\n  };\n\n  updateSize = (ev: MouseEvent) => {\n    const cropContainer = this.cropContainer.current;\n    if (!cropContainer) {\n      return;\n    }\n\n    const {mousePosition} = this.state;\n\n    const yDiff = ev.pageY - mousePosition.pageY;\n    const xDiff = ev.pageX - mousePosition.pageX;\n\n    this.setState({\n      resizeDimensions: this.getNewDimensions(cropContainer, yDiff, xDiff),\n      mousePosition: {pageX: ev.pageX, pageY: ev.pageY},\n    });\n  };\n\n  // Normalize diff across dimensions so that negative diffs are always making\n  // the cropper smaller and positive ones are making the cropper larger\n  getDiffNW = (yDiff: number, xDiff: number) =>\n    (yDiff - yDiff * 2 + (xDiff - xDiff * 2)) / 2;\n\n  getDiffNE = (yDiff: number, xDiff: number) => (yDiff - yDiff * 2 + xDiff) / 2;\n\n  getDiffSW = (yDiff: number, xDiff: number) => (yDiff + (xDiff - xDiff * 2)) / 2;\n\n  getDiffSE = (yDiff: number, xDiff: number) => (yDiff + xDiff) / 2;\n\n  getNewDimensions = (container: HTMLDivElement, yDiff: number, xDiff: number) => {\n    const {resizeDimensions: oldDimensions, resizeDirection} = this.state;\n\n    const diff = this['getDiff' + resizeDirection!.toUpperCase()](yDiff, xDiff);\n\n    let height = container.clientHeight - oldDimensions.top;\n    let width = container.clientWidth - oldDimensions.left;\n\n    // Depending on the direction, we update different dimensions:\n    // nw: size, top, left\n    // ne: size, top\n    // sw: size, left\n    // se: size\n    const editingTop = resizeDirection === 'nw' || resizeDirection === 'ne';\n    const editingLeft = resizeDirection === 'nw' || resizeDirection === 'sw';\n\n    const newDimensions = {\n      top: 0,\n      left: 0,\n      size: oldDimensions.size + diff,\n    };\n\n    if (editingTop) {\n      newDimensions.top = oldDimensions.top - diff;\n      height = container.clientHeight - newDimensions.top;\n    }\n\n    if (editingLeft) {\n      newDimensions.left = oldDimensions.left - diff;\n      width = container.clientWidth - newDimensions.left;\n    }\n\n    if (newDimensions.top < 0) {\n      newDimensions.size = newDimensions.size + newDimensions.top;\n      if (editingLeft) {\n        newDimensions.left = newDimensions.left - newDimensions.top;\n      }\n      newDimensions.top = 0;\n    }\n\n    if (newDimensions.left < 0) {\n      newDimensions.size = newDimensions.size + newDimensions.left;\n      if (editingTop) {\n        newDimensions.top = newDimensions.top - newDimensions.left;\n      }\n      newDimensions.left = 0;\n    }\n\n    const maxSize = Math.min(width, height);\n    if (newDimensions.size > maxSize) {\n      if (editingTop) {\n        newDimensions.top = newDimensions.top + newDimensions.size - maxSize;\n      }\n      if (editingLeft) {\n        newDimensions.left = newDimensions.left + newDimensions.size - maxSize;\n      }\n      newDimensions.size = maxSize;\n    } else if (newDimensions.size < this.MIN_DIMENSION) {\n      if (editingTop) {\n        newDimensions.top = newDimensions.top + newDimensions.size - this.MIN_DIMENSION;\n      }\n      if (editingLeft) {\n        newDimensions.left = newDimensions.left + newDimensions.size - this.MIN_DIMENSION;\n      }\n      newDimensions.size = this.MIN_DIMENSION;\n    }\n\n    return {...oldDimensions, ...newDimensions};\n  };\n\n  validateImage() {\n    const img = this.image.current;\n\n    if (!img) {\n      return null;\n    }\n\n    if (img.naturalWidth < this.MIN_DIMENSION || img.naturalHeight < this.MIN_DIMENSION) {\n      return tct('Please upload an image larger than [size]px by [size]px.', {\n        size: this.MIN_DIMENSION - 1,\n      });\n    }\n\n    if (img.naturalWidth > this.MAX_DIMENSION || img.naturalHeight > this.MAX_DIMENSION) {\n      return tct('Please upload an image smaller than [size]px by [size]px.', {\n        size: this.MAX_DIMENSION,\n      });\n    }\n\n    return null;\n  }\n\n  drawToCanvas() {\n    const canvas = this.canvas.current;\n    if (!canvas) {\n      return;\n    }\n\n    const image = this.image.current;\n    if (!image) {\n      return;\n    }\n\n    const {left, top, size} = this.state.resizeDimensions;\n    // Calculate difference between natural dimensions and rendered dimensions\n    const ratio =\n      (image.naturalHeight / image.clientHeight +\n        image.naturalWidth / image.clientWidth) /\n      2;\n    canvas.width = size * ratio;\n    canvas.height = size * ratio;\n\n    canvas\n      .getContext('2d')!\n      .drawImage(\n        image,\n        left * ratio,\n        top * ratio,\n        size * ratio,\n        size * ratio,\n        0,\n        0,\n        size * ratio,\n        size * ratio\n      );\n\n    this.props.updateDataUrlState({dataUrl: canvas.toDataURL()});\n  }\n\n  get imageSrc() {\n    const {savedDataUrl, model, type} = this.props;\n    const uuid = model.avatar?.avatarUuid;\n    const photoUrl = uuid && `/${AVATAR_URL_MAP[type] || 'avatar'}/${uuid}/`;\n\n    return savedDataUrl || this.state.objectURL || photoUrl;\n  }\n\n  uploadClick = (ev: React.MouseEvent<HTMLAnchorElement>) => {\n    ev.preventDefault();\n    this.file.current && this.file.current.click();\n  };\n\n  renderImageCrop() {\n    const src = this.imageSrc;\n    if (!src) {\n      return null;\n    }\n\n    const {resizeDimensions, resizeDirection} = this.state;\n    const style = {\n      top: resizeDimensions.top,\n      left: resizeDimensions.left,\n      width: resizeDimensions.size,\n      height: resizeDimensions.size,\n    };\n\n    return (\n      <ImageCropper resizeDirection={resizeDirection}>\n        <CropContainer ref={this.cropContainer}>\n          <img\n            ref={this.image}\n            src={src}\n            onLoad={this.onImageLoad}\n            onDragStart={e => e.preventDefault()}\n          />\n          <Cropper style={style} onMouseDown={this.onMouseDown}>\n            {Object.keys(resizerPositions).map(pos => (\n              <Resizer\n                key={pos}\n                position={pos as Position}\n                onMouseDown={this.startResize.bind(this, pos)}\n              />\n            ))}\n          </Cropper>\n        </CropContainer>\n      </ImageCropper>\n    );\n  }\n\n  render() {\n    const src = this.imageSrc;\n\n    const upload = <a onClick={this.uploadClick} />;\n    const uploader = (\n      <Well hasImage centered>\n        <p>{tct('[upload:Upload an image] to get started.', {upload})}</p>\n      </Well>\n    );\n\n    return (\n      <Fragment>\n        {!src && uploader}\n        {src && <HiddenCanvas ref={this.canvas} />}\n        {this.renderImageCrop()}\n        <div className=\"form-group\">\n          {src && <a onClick={this.uploadClick}>{t('Change Photo')}</a>}\n          <UploadInput\n            ref={this.file}\n            type=\"file\"\n            accept={this.ALLOWED_MIMETYPES}\n            onChange={this.onSelectFile}\n          />\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default AvatarCropper;\n\nconst UploadInput = styled('input')`\n  position: absolute;\n  opacity: 0;\n`;\n\nconst ImageCropper = styled('div')<{resizeDirection: Position | null}>`\n  cursor: ${p => (p.resizeDirection ? `${p.resizeDirection}-resize` : 'default')};\n  text-align: center;\n  margin-bottom: 20px;\n  background-size: 20px 20px;\n  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n  background-color: ${p => p.theme.background};\n  background-image: linear-gradient(\n      45deg,\n      ${p => p.theme.backgroundSecondary} 25%,\n      rgba(0, 0, 0, 0) 25%\n    ),\n    linear-gradient(-45deg, ${p => p.theme.backgroundSecondary} 25%, rgba(0, 0, 0, 0) 25%),\n    linear-gradient(45deg, rgba(0, 0, 0, 0) 75%, ${p => p.theme.backgroundSecondary} 75%),\n    linear-gradient(-45deg, rgba(0, 0, 0, 0) 75%, ${p => p.theme.backgroundSecondary} 75%);\n`;\n\nconst CropContainer = styled('div')`\n  display: inline-block;\n  position: relative;\n  max-width: 100%;\n`;\n\nconst Cropper = styled('div')`\n  position: absolute;\n  border: 2px dashed ${p => p.theme.gray300};\n`;\n\nconst Resizer = styled('div')<{position: Position}>`\n  border-radius: 5px;\n  width: 10px;\n  height: 10px;\n  position: absolute;\n  background-color: ${p => p.theme.gray300};\n  cursor: ${p => `${p.position}-resize`};\n  ${p => resizerPositions[p.position].map(pos => `${pos}: -5px;`)}\n`;\n\nconst HiddenCanvas = styled('canvas')`\n  display: none;\n`;\n","import styled from '@emotion/styled';\n\ninterface WellProps extends React.HTMLAttributes<HTMLDivElement> {\n  children: React.ReactNode;\n  centered?: boolean;\n  hasImage?: boolean;\n  theme?: any;\n}\n\nconst Well = styled('div')<WellProps>`\n  border: 1px solid ${p => p.theme.border};\n  box-shadow: none;\n  background: ${p => p.theme.backgroundSecondary};\n  padding: ${p => (p.hasImage ? '80px 30px' : '15px 20px')};\n  margin-bottom: 20px;\n  border-radius: 3px;\n  ${p => p.centered && 'text-align: center'};\n`;\n\nexport default Well;\n"],"names":["Component","addErrorMessage","addSuccessMessage","Avatar","AvatarCropper","Button","RadioGroup","ExternalLink","LoadingError","LoadingIndicator","Panel","PanelBody","PanelHeader","Well","t","space","withApi","AvatarChooser","model","props","savedDataUrl","dataUrl","hasError","ev","endpoint","api","type","state","preventDefault","avatarType","avatar","avatarPhoto","split","data","avatar_type","avatar_photo","startsWith","color","request","method","success","resp","setState","handleSuccess","getModelFromResponse","error","avatarPhotoErrors","responseJSON","length","map","handleError","bind","id","updateState","avatarUuid","UNSAFE_componentWillReceiveProps","nextProps","isSentryApp","isColor","avatars","find","undefined","msg","onSave","render","allowGravatar","allowUpload","allowLetter","isUser","disabled","title","help","defaultChoice","allowDefault","preview","choiceText","defaultChoiceText","isLetter","isDefault","Boolean","isTeam","isOrganization","choices","push","flex","handleChange","width","height","dataState","handleSaveSettings","AvatarHelp","p","theme","gray300","AvatarGroup","inline","AvatarForm","AvatarSubmit","AvatarUploadSection","createRef","Fragment","AVATAR_URL_MAP","tct","resizerPositions","nw","ne","se","sw","file","objectURL","mousePosition","pageX","pageY","resizeDimensions","top","left","size","resizeDirection","target","files","test","revokeObjectUrl","updateDataUrlState","window","URL","createObjectURL","revokeObjectURL","validateImage","image","current","dimension","Math","min","clientHeight","clientWidth","drawToCanvas","cropContainer","document","addEventListener","updateDimensions","onMouseUp","removeEventListener","direction","stopPropagation","updateSize","stopResize","yDiff","xDiff","getNewDimensions","container","oldDimensions","diff","toUpperCase","editingTop","editingLeft","newDimensions","maxSize","MIN_DIMENSION","click","componentWillUnmount","img","naturalWidth","naturalHeight","MAX_DIMENSION","canvas","ratio","getContext","drawImage","toDataURL","imageSrc","uuid","photoUrl","renderImageCrop","src","style","onImageLoad","e","onMouseDown","Object","keys","pos","startResize","upload","uploadClick","uploader","ALLOWED_MIMETYPES","onSelectFile","UploadInput","ImageCropper","background","backgroundSecondary","CropContainer","Cropper","Resizer","position","HiddenCanvas","border","hasImage","centered"],"sourceRoot":""}