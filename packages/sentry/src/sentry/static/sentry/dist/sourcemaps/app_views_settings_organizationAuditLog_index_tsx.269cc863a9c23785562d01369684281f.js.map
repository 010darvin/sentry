{"version":3,"file":"chunks/app_views_settings_organizationAuditLog_index_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/activity/item/avatar.tsx","webpack:///./app/views/settings/organizationAuditLog/auditLogList.tsx","webpack:///./app/views/settings/organizationAuditLog/index.tsx"],"sourcesContent":["import styled from '@emotion/styled';\n\nimport UserAvatar from 'sentry/components/avatar/userAvatar';\nimport Placeholder from 'sentry/components/placeholder';\nimport {IconSentry} from 'sentry/icons';\nimport {AvatarUser} from 'sentry/types';\n\ntype Props = {\n  type: 'system' | 'user';\n  className?: string;\n  size?: number;\n  user?: AvatarUser;\n};\n\nfunction ActivityAvatar({className, type, user, size = 38}: Props) {\n  if (user) {\n    return <UserAvatar user={user} size={size} className={className} />;\n  }\n\n  if (type === 'system') {\n    // Return Sentry avatar\n    return (\n      <SystemAvatar className={className} size={size}>\n        <StyledIconSentry size=\"md\" />\n      </SystemAvatar>\n    );\n  }\n\n  return (\n    <Placeholder\n      className={className}\n      width={`${size}px`}\n      height={`${size}px`}\n      shape=\"circle\"\n    />\n  );\n}\n\nexport default ActivityAvatar;\n\ntype SystemAvatarProps = {\n  size: number;\n};\n\nconst SystemAvatar = styled('span')<SystemAvatarProps>`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: ${p => p.size}px;\n  height: ${p => p.size}px;\n  background-color: ${p => p.theme.textColor};\n  color: ${p => p.theme.background};\n  border-radius: 50%;\n`;\n\nconst StyledIconSentry = styled(IconSentry)`\n  padding-bottom: 3px;\n`;\n","import {Fragment} from 'react';\nimport styled from '@emotion/styled';\n\nimport ActivityAvatar from 'sentry/components/activity/item/avatar';\nimport UserAvatar from 'sentry/components/avatar/userAvatar';\nimport DateTime from 'sentry/components/dateTime';\nimport SelectControl from 'sentry/components/forms/selectControl';\nimport Pagination, {CursorHandler} from 'sentry/components/pagination';\nimport {PanelTable} from 'sentry/components/panels';\nimport Tag from 'sentry/components/tag';\nimport Tooltip from 'sentry/components/tooltip';\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {AuditLog, User} from 'sentry/types';\nimport {shouldUse24Hours} from 'sentry/utils/dates';\nimport SettingsPageHeader from 'sentry/views/settings/components/settingsPageHeader';\n\nconst avatarStyle = {\n  width: 36,\n  height: 36,\n  marginRight: 8,\n};\n\nconst getAvatarDisplay = (logEntryUser: User | undefined) => {\n  // Display Sentry's avatar for system or superuser-initiated events\n  if (\n    logEntryUser?.isSuperuser ||\n    (logEntryUser?.name === 'Sentry' && logEntryUser?.email === undefined)\n  ) {\n    return <SentryAvatar type=\"system\" size={36} />;\n  }\n  // Display user's avatar for non-superusers-initiated events\n  if (logEntryUser !== undefined) {\n    return <UserAvatar style={avatarStyle} user={logEntryUser} />;\n  }\n  return null;\n};\n\nconst addUsernameDisplay = (logEntryUser: User | undefined) => {\n  if (logEntryUser?.isSuperuser) {\n    return (\n      <Name data-test-id=\"actor-name\">\n        {logEntryUser.name}\n        <StaffTag>{t('Sentry Staff')}</StaffTag>\n      </Name>\n    );\n  }\n  if (logEntryUser !== undefined) {\n    return <Name data-test-id=\"actor-name\">{logEntryUser.name}</Name>;\n  }\n  return null;\n};\n\ntype Props = {\n  entries: AuditLog[] | null;\n  eventType: string | undefined;\n  eventTypes: string[] | null;\n  isLoading: boolean;\n  onCursor: CursorHandler | undefined;\n  onEventSelect: (value: string) => void;\n  pageLinks: string | null;\n};\n\nconst AuditLogList = ({\n  isLoading,\n  pageLinks,\n  entries,\n  eventType,\n  eventTypes,\n  onCursor,\n  onEventSelect,\n}: Props) => {\n  const is24Hours = shouldUse24Hours();\n  const hasEntries = entries && entries.length > 0;\n  const ipv4Length = 15;\n\n  const eventOptions = eventTypes?.map(type => ({\n    label: type,\n    value: type,\n  }));\n\n  const action = (\n    <EventSelector\n      clearable\n      isDisabled={isLoading}\n      name=\"eventFilter\"\n      value={eventType}\n      placeholder={t('Select Action: ')}\n      options={eventOptions}\n      onChange={options => {\n        onEventSelect(options?.value);\n      }}\n    />\n  );\n\n  return (\n    <div>\n      <SettingsPageHeader title={t('Audit Log')} action={action} />\n      <PanelTable\n        headers={[t('Member'), t('Action'), t('IP'), t('Time')]}\n        isEmpty={!hasEntries && entries?.length === 0}\n        emptyMessage={t('No audit entries available')}\n        isLoading={isLoading}\n      >\n        {entries?.map(entry => (\n          <Fragment key={entry.id}>\n            <UserInfo>\n              <div>{getAvatarDisplay(entry.actor)}</div>\n              <NameContainer>\n                {addUsernameDisplay(entry.actor)}\n                <Note>{entry.note}</Note>\n              </NameContainer>\n            </UserInfo>\n            <FlexCenter>\n              <MonoDetail>{entry.event}</MonoDetail>\n            </FlexCenter>\n            <FlexCenter>\n              {entry.ipAddress && (\n                <IpAddressOverflow>\n                  <Tooltip\n                    title={entry.ipAddress}\n                    disabled={entry.ipAddress.length <= ipv4Length}\n                  >\n                    <MonoDetail>{entry.ipAddress}</MonoDetail>\n                  </Tooltip>\n                </IpAddressOverflow>\n              )}\n            </FlexCenter>\n            <TimestampInfo>\n              <DateTime dateOnly date={entry.dateCreated} />\n              <DateTime\n                timeOnly\n                format={is24Hours ? 'HH:mm zz' : 'LT zz'}\n                date={entry.dateCreated}\n              />\n            </TimestampInfo>\n          </Fragment>\n        ))}\n      </PanelTable>\n      {pageLinks && <Pagination pageLinks={pageLinks} onCursor={onCursor} />}\n    </div>\n  );\n};\n\nconst SentryAvatar = styled(ActivityAvatar)`\n  margin-right: ${space(1)};\n`;\n\nconst Name = styled('strong')`\n  font-size: ${p => p.theme.fontSizeMedium};\n`;\n\nconst StaffTag = styled(Tag)`\n  padding: ${space(1)};\n`;\n\nconst EventSelector = styled(SelectControl)`\n  width: 250px;\n`;\n\nconst UserInfo = styled('div')`\n  display: flex;\n  align-items: center;\n  line-height: 1.2;\n  font-size: ${p => p.theme.fontSizeSmall};\n  min-width: 250px;\n`;\n\nconst NameContainer = styled('div')`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst Note = styled('div')`\n  font-size: ${p => p.theme.fontSizeSmall};\n  word-break: break-word;\n`;\n\nconst FlexCenter = styled('div')`\n  display: flex;\n  align-items: center;\n`;\n\nconst IpAddressOverflow = styled('div')`\n  ${p => p.theme.overflowEllipsis};\n  min-width: 90px;\n`;\n\nconst MonoDetail = styled('code')`\n  font-size: ${p => p.theme.fontSizeMedium};\n  white-space: no-wrap;\n`;\n\nconst TimestampInfo = styled('div')`\n  display: grid;\n  grid-template-rows: auto auto;\n  gap: ${space(1)};\n  font-size: ${p => p.theme.fontSizeMedium};\n`;\n\nexport default AuditLogList;\n","import {Fragment, useCallback, useEffect, useState} from 'react';\nimport {browserHistory} from 'react-router';\nimport * as Sentry from '@sentry/react';\nimport {Location} from 'history';\n\nimport {addErrorMessage} from 'sentry/actionCreators/indicator';\nimport {CursorHandler} from 'sentry/components/pagination';\nimport {AuditLog, Organization} from 'sentry/types';\nimport {decodeScalar} from 'sentry/utils/queryString';\nimport useApi from 'sentry/utils/useApi';\nimport withOrganization from 'sentry/utils/withOrganization';\n\nimport AuditLogList from './auditLogList';\n\ntype Props = {\n  location: Location;\n  organization: Organization;\n};\n\ntype State = {\n  entryList: AuditLog[] | null;\n  entryListPageLinks: string | null;\n  eventType: string | undefined;\n  eventTypes: string[] | null;\n  isLoading: boolean;\n  currentCursor?: string;\n};\n\nfunction OrganizationAuditLog({location, organization}: Props) {\n  const [state, setState] = useState<State>({\n    entryList: [],\n    entryListPageLinks: null,\n    eventType: decodeScalar(location.query.event),\n    eventTypes: [],\n    isLoading: true,\n  });\n  const api = useApi();\n\n  const handleCursor: CursorHandler = resultsCursor => {\n    setState(prevState => ({\n      ...prevState,\n      currentCursor: resultsCursor,\n    }));\n  };\n\n  useEffect(() => {\n    // Watch the location for changes so we can re-fetch data.\n    const eventType = decodeScalar(location.query.event);\n    setState(prevState => ({...prevState, eventType}));\n  }, [location.query]);\n\n  const fetchAuditLogData = useCallback(async () => {\n    setState(prevState => ({...prevState, isLoading: true}));\n\n    try {\n      const payload = {cursor: state.currentCursor, event: state.eventType};\n      if (!payload.cursor) {\n        delete payload.cursor;\n      }\n      if (!payload.event) {\n        delete payload.event;\n      }\n      setState(prevState => ({...prevState, isLoading: true}));\n      const [data, _, response] = await api.requestPromise(\n        `/organizations/${organization.slug}/audit-logs/`,\n        {\n          method: 'GET',\n          includeAllArgs: true,\n          query: payload,\n        }\n      );\n      setState(prevState => ({\n        ...prevState,\n        entryList: data.rows,\n        eventTypes: data.options.sort(),\n        isLoading: false,\n        entryListPageLinks: response?.getResponseHeader('Link') ?? null,\n      }));\n    } catch (err) {\n      if (err.status !== 401 && err.status !== 403) {\n        Sentry.captureException(err);\n      }\n      setState(prevState => ({\n        ...prevState,\n        isLoading: false,\n      }));\n      addErrorMessage('Unable to load audit logs.');\n    }\n  }, [api, organization.slug, state.currentCursor, state.eventType]);\n\n  useEffect(() => {\n    fetchAuditLogData();\n  }, [fetchAuditLogData]);\n\n  const handleEventSelect = (value: string) => {\n    setState(prevState => ({\n      ...prevState,\n      eventType: value,\n    }));\n    browserHistory.push({\n      pathname: location.pathname,\n      query: {...location.query, event: value},\n    });\n  };\n\n  return (\n    <Fragment>\n      <AuditLogList\n        entries={state.entryList}\n        pageLinks={state.entryListPageLinks}\n        eventType={state.eventType}\n        eventTypes={state.eventTypes}\n        onEventSelect={handleEventSelect}\n        isLoading={state.isLoading}\n        onCursor={handleCursor}\n      />\n    </Fragment>\n  );\n}\n\nexport default withOrganization(OrganizationAuditLog);\n"],"names":["UserAvatar","Placeholder","IconSentry","ActivityAvatar","className","type","user","size","SystemAvatar","p","theme","textColor","background","StyledIconSentry","Fragment","DateTime","SelectControl","Pagination","PanelTable","Tag","Tooltip","t","space","shouldUse24Hours","SettingsPageHeader","avatarStyle","width","height","marginRight","getAvatarDisplay","logEntryUser","isSuperuser","name","email","undefined","addUsernameDisplay","AuditLogList","isLoading","pageLinks","entries","eventType","eventTypes","onCursor","onEventSelect","is24Hours","hasEntries","length","ipv4Length","eventOptions","map","label","value","action","options","entry","actor","note","event","ipAddress","dateCreated","id","SentryAvatar","Name","fontSizeMedium","StaffTag","EventSelector","UserInfo","fontSizeSmall","NameContainer","Note","FlexCenter","IpAddressOverflow","overflowEllipsis","MonoDetail","TimestampInfo","useCallback","useEffect","useState","browserHistory","Sentry","addErrorMessage","decodeScalar","useApi","withOrganization","OrganizationAuditLog","location","organization","state","setState","entryList","entryListPageLinks","query","api","handleCursor","resultsCursor","prevState","currentCursor","fetchAuditLogData","payload","cursor","data","_","response","requestPromise","slug","method","includeAllArgs","rows","sort","getResponseHeader","err","status","captureException","handleEventSelect","push","pathname"],"sourceRoot":""}