{"version":3,"file":"chunks/app_views_settings_account_accountAuthorizations_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/views/asyncView.tsx","webpack:///./app/views/settings/account/accountAuthorizations.tsx"],"sourcesContent":["import AsyncComponent from 'sentry/components/asyncComponent';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\n\ntype AsyncViewState = AsyncComponent['state'];\ntype AsyncViewProps = AsyncComponent['props'];\n\nexport default class AsyncView<\n  P extends AsyncViewProps = AsyncViewProps,\n  S extends AsyncViewState = AsyncViewState\n> extends AsyncComponent<P, S> {\n  getTitle() {\n    return '';\n  }\n\n  render() {\n    return (\n      <SentryDocumentTitle title={this.getTitle()}>\n        {this.renderComponent() as React.ReactChild}\n      </SentryDocumentTitle>\n    );\n  }\n}\n","import {RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport {addErrorMessage, addSuccessMessage} from 'sentry/actionCreators/indicator';\nimport Button from 'sentry/components/button';\nimport ExternalLink from 'sentry/components/links/externalLink';\nimport Link from 'sentry/components/links/link';\nimport {Panel, PanelBody, PanelHeader, PanelItem} from 'sentry/components/panels';\nimport {IconDelete} from 'sentry/icons';\nimport {t, tct} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {ApiApplication} from 'sentry/types';\nimport AsyncView from 'sentry/views/asyncView';\nimport EmptyMessage from 'sentry/views/settings/components/emptyMessage';\nimport SettingsPageHeader from 'sentry/views/settings/components/settingsPageHeader';\n\ntype Authorization = {\n  application: ApiApplication;\n  homepageUrl: string;\n  id: string;\n  scopes: string[];\n};\n\ntype Props = RouteComponentProps<{}, {}>;\n\ntype State = {\n  data: Authorization[];\n} & AsyncView['state'];\n\nclass AccountAuthorizations extends AsyncView<Props, State> {\n  getEndpoints(): ReturnType<AsyncView['getEndpoints']> {\n    return [['data', '/api-authorizations/']];\n  }\n\n  getTitle() {\n    return 'Approved Applications';\n  }\n\n  handleRevoke = authorization => {\n    const oldData = this.state.data;\n\n    this.setState(\n      state => ({\n        data: state.data.filter(({id}) => id !== authorization.id),\n      }),\n      async () => {\n        try {\n          await this.api.requestPromise('/api-authorizations/', {\n            method: 'DELETE',\n            data: {authorization: authorization.id},\n          });\n\n          addSuccessMessage(t('Saved changes'));\n        } catch (_err) {\n          this.setState({\n            data: oldData,\n          });\n          addErrorMessage(t('Unable to save changes, please try again'));\n        }\n      }\n    );\n  };\n\n  renderBody() {\n    const {data} = this.state;\n    const isEmpty = data.length === 0;\n    return (\n      <div>\n        <SettingsPageHeader title=\"Authorized Applications\" />\n        <Description>\n          {tct('You can manage your own applications via the [link:API dashboard].', {\n            link: <Link to=\"/settings/account/api/\" />,\n          })}\n        </Description>\n\n        <Panel>\n          <PanelHeader>{t('Approved Applications')}</PanelHeader>\n\n          <PanelBody>\n            {isEmpty && (\n              <EmptyMessage>\n                {t(\"You haven't approved any third party applications.\")}\n              </EmptyMessage>\n            )}\n\n            {!isEmpty && (\n              <div>\n                {data.map(authorization => (\n                  <PanelItemCenter key={authorization.id}>\n                    <ApplicationDetails>\n                      <ApplicationName>{authorization.application.name}</ApplicationName>\n                      {authorization.homepageUrl && (\n                        <Url>\n                          <ExternalLink href={authorization.homepageUrl}>\n                            {authorization.homepageUrl}\n                          </ExternalLink>\n                        </Url>\n                      )}\n                      <Scopes>{authorization.scopes.join(', ')}</Scopes>\n                    </ApplicationDetails>\n                    <Button\n                      size=\"sm\"\n                      onClick={() => this.handleRevoke(authorization)}\n                      icon={<IconDelete />}\n                      aria-label={t('Delete')}\n                    />\n                  </PanelItemCenter>\n                ))}\n              </div>\n            )}\n          </PanelBody>\n        </Panel>\n      </div>\n    );\n  }\n}\n\nexport default AccountAuthorizations;\n\nconst Description = styled('p')`\n  font-size: ${p => p.theme.fontSizeRelativeSmall};\n  margin-bottom: ${space(4)};\n`;\n\nconst PanelItemCenter = styled(PanelItem)`\n  align-items: center;\n`;\n\nconst ApplicationDetails = styled('div')`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n`;\n\nconst ApplicationName = styled('div')`\n  font-weight: bold;\n  margin-bottom: ${space(0.5)};\n`;\n\n/**\n * Intentionally wrap <a> so that it does not take up full width and cause\n * hit box issues\n */\nconst Url = styled('div')`\n  margin-bottom: ${space(0.5)};\n  font-size: ${p => p.theme.fontSizeRelativeSmall};\n`;\n\nconst Scopes = styled('div')`\n  color: ${p => p.theme.gray300};\n  font-size: ${p => p.theme.fontSizeRelativeSmall};\n`;\n"],"names":["AsyncComponent","SentryDocumentTitle","AsyncView","getTitle","render","renderComponent","addErrorMessage","addSuccessMessage","Button","ExternalLink","Link","Panel","PanelBody","PanelHeader","PanelItem","IconDelete","t","tct","space","EmptyMessage","SettingsPageHeader","AccountAuthorizations","authorization","oldData","state","data","setState","filter","id","api","requestPromise","method","_err","getEndpoints","renderBody","isEmpty","length","link","map","application","name","homepageUrl","scopes","join","handleRevoke","Description","p","theme","fontSizeRelativeSmall","PanelItemCenter","ApplicationDetails","ApplicationName","Url","Scopes","gray300"],"sourceRoot":""}