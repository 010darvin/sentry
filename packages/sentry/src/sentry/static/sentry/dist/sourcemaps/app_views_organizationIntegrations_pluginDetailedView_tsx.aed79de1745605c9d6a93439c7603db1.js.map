{"version":3,"file":"chunks/app_views_organizationIntegrations_pluginDetailedView_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/views/organizationIntegrations/installedPlugin.tsx","webpack:///./app/views/organizationIntegrations/pluginDeprecationAlert.tsx","webpack:///./app/views/organizationIntegrations/pluginDetailedView.tsx"],"sourcesContent":["import {Component, Fragment} from 'react';\nimport styled from '@emotion/styled';\n\nimport {\n  addErrorMessage,\n  addLoadingMessage,\n  addSuccessMessage,\n} from 'sentry/actionCreators/indicator';\nimport {Client} from 'sentry/api';\nimport Access from 'sentry/components/acl/access';\nimport Alert from 'sentry/components/alert';\nimport Button from 'sentry/components/button';\nimport Confirm from 'sentry/components/confirm';\nimport ProjectBadge from 'sentry/components/idBadge/projectBadge';\nimport Switch from 'sentry/components/switchButton';\nimport {IconDelete, IconSettings} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {\n  AvatarProject,\n  Organization,\n  PluginNoProject,\n  PluginProjectItem,\n} from 'sentry/types';\nimport {IntegrationAnalyticsKey} from 'sentry/utils/analytics/integrations';\nimport withApi from 'sentry/utils/withApi';\n\ntype Props = {\n  api: Client;\n  onPluginEnableStatusChange: (projectId: string, status: boolean) => void;\n  onResetConfiguration: (projectId: string) => void;\n  organization: Organization;\n  plugin: PluginNoProject;\n  projectItem: PluginProjectItem;\n  trackIntegrationAnalytics: (eventKey: IntegrationAnalyticsKey) => void; // analytics callback\n  className?: string;\n};\n\nexport class InstalledPlugin extends Component<Props> {\n  get projectId() {\n    return this.props.projectItem.projectId;\n  }\n  getConfirmMessage() {\n    return (\n      <Fragment>\n        <Alert type=\"error\" showIcon>\n          {t(\n            'Deleting this installation will disable the integration for this project and remove any configurations.'\n          )}\n        </Alert>\n      </Fragment>\n    );\n  }\n\n  pluginUpdate = async (data: object, method: 'POST' | 'DELETE' = 'POST') => {\n    const {organization, projectItem, plugin} = this.props;\n    // no try/catch so the caller will have to have it\n    await this.props.api.requestPromise(\n      `/projects/${organization.slug}/${projectItem.projectSlug}/plugins/${plugin.id}/`,\n      {\n        method,\n        data,\n      }\n    );\n  };\n\n  updatePluginEnableStatus = async (enabled: boolean) => {\n    if (enabled) {\n      await this.pluginUpdate({enabled});\n    } else {\n      await this.pluginUpdate({}, 'DELETE');\n    }\n  };\n\n  handleReset = async () => {\n    try {\n      addLoadingMessage(t('Removing...'));\n      await this.pluginUpdate({reset: true});\n      addSuccessMessage(t('Configuration was removed'));\n      this.props.onResetConfiguration(this.projectId);\n      this.props.trackIntegrationAnalytics('integrations.uninstall_completed');\n    } catch (_err) {\n      addErrorMessage(t('Unable to remove configuration'));\n    }\n  };\n\n  handleUninstallClick = () => {\n    this.props.trackIntegrationAnalytics('integrations.uninstall_clicked');\n  };\n\n  toggleEnablePlugin = async (projectId: string, status: boolean = true) => {\n    try {\n      addLoadingMessage(t('Enabling...'));\n      await this.updatePluginEnableStatus(status);\n      addSuccessMessage(\n        status ? t('Configuration was enabled.') : t('Configuration was disabled.')\n      );\n      this.props.onPluginEnableStatusChange(projectId, status);\n      this.props.trackIntegrationAnalytics(\n        status ? 'integrations.enabled' : 'integrations.disabled'\n      );\n    } catch (_err) {\n      addErrorMessage(\n        status\n          ? t('Unable to enable configuration.')\n          : t('Unable to disable configuration.')\n      );\n    }\n  };\n\n  get projectForBadge(): AvatarProject {\n    // this function returns the project as needed for the ProjectBadge component\n    const {projectItem} = this.props;\n    return {\n      slug: projectItem.projectSlug,\n      platform: projectItem.projectPlatform ? projectItem.projectPlatform : undefined,\n    };\n  }\n\n  render() {\n    const {className, plugin, organization, projectItem} = this.props;\n    return (\n      <Container>\n        <Access access={['org:integrations']}>\n          {({hasAccess}) => (\n            <IntegrationFlex className={className}>\n              <IntegrationItemBox>\n                <ProjectBadge project={this.projectForBadge} />\n              </IntegrationItemBox>\n              <div>\n                {\n                  <StyledButton\n                    borderless\n                    icon={<IconSettings />}\n                    disabled={!hasAccess}\n                    to={`/settings/${organization.slug}/projects/${projectItem.projectSlug}/plugins/${plugin.id}/`}\n                    data-test-id=\"integration-configure-button\"\n                  >\n                    {t('Configure')}\n                  </StyledButton>\n                }\n              </div>\n              <div>\n                <Confirm\n                  priority=\"danger\"\n                  onConfirming={this.handleUninstallClick}\n                  disabled={!hasAccess}\n                  confirmText=\"Delete Installation\"\n                  onConfirm={() => this.handleReset()}\n                  message={this.getConfirmMessage()}\n                >\n                  <StyledButton\n                    disabled={!hasAccess}\n                    borderless\n                    icon={<IconDelete />}\n                    data-test-id=\"integration-remove-button\"\n                  >\n                    {t('Uninstall')}\n                  </StyledButton>\n                </Confirm>\n              </div>\n              <Switch\n                isActive={projectItem.enabled}\n                toggle={() =>\n                  this.toggleEnablePlugin(projectItem.projectId, !projectItem.enabled)\n                }\n                isDisabled={!hasAccess}\n              />\n            </IntegrationFlex>\n          )}\n        </Access>\n      </Container>\n    );\n  }\n}\n\nexport default withApi(InstalledPlugin);\n\nconst Container = styled('div')`\n  padding: ${space(2)};\n  border: 1px solid ${p => p.theme.border};\n  border-bottom: none;\n  background-color: ${p => p.theme.background};\n\n  &:last-child {\n    border-bottom: 1px solid ${p => p.theme.border};\n  }\n`;\n\nconst StyledButton = styled(Button)`\n  color: ${p => p.theme.gray300};\n`;\n\nconst IntegrationFlex = styled('div')`\n  display: flex;\n  align-items: center;\n`;\n\nconst IntegrationItemBox = styled('div')`\n  flex: 1 0 fit-content;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: row;\n  min-width: 0;\n`;\n","import {Component, Fragment} from 'react';\nimport styled from '@emotion/styled';\n\nimport Alert from 'sentry/components/alert';\nimport Button from 'sentry/components/button';\nimport {t} from 'sentry/locale';\nimport {Organization, PluginWithProjectList} from 'sentry/types';\nimport {trackIntegrationAnalytics} from 'sentry/utils/integrationUtil';\n\ntype Props = {\n  organization: Organization;\n  plugin: PluginWithProjectList;\n};\n\ntype State = {};\n\nclass PluginDeprecationAlert extends Component<Props, State> {\n  render() {\n    const {organization, plugin} = this.props;\n\n    // Short-circuit if not deprecated.\n    if (!plugin.deprecationDate) {\n      return <Fragment />;\n    }\n    const resource = plugin.altIsSentryApp ? 'sentry-apps' : 'integrations';\n    const upgradeUrl = `/settings/${organization.slug}/${resource}/${plugin.firstPartyAlternative}/`;\n    const queryParams = `?${\n      plugin.altIsSentryApp ? '' : 'tab=configurations&'\n    }referrer=directory_upgrade_now`;\n    return (\n      <div>\n        <Alert\n          type=\"warning\"\n          showIcon\n          trailingItems={\n            <UpgradeNowButton\n              href={`${upgradeUrl}${queryParams}`}\n              size=\"xs\"\n              onClick={() =>\n                trackIntegrationAnalytics('integrations.resolve_now_clicked', {\n                  integration_type: 'plugin',\n                  integration: plugin.slug,\n                  organization,\n                })\n              }\n            >\n              {t('Upgrade Now')}\n            </UpgradeNowButton>\n          }\n        >\n          {`This integration is being deprecated on ${plugin.deprecationDate}. Please upgrade to avoid any disruption.`}\n        </Alert>\n      </div>\n    );\n  }\n}\n\nconst UpgradeNowButton = styled(Button)`\n  color: ${p => p.theme.subText};\n  float: right;\n`;\n\nexport default PluginDeprecationAlert;\n","import {Fragment} from 'react';\nimport styled from '@emotion/styled';\n\nimport * as modal from 'sentry/actionCreators/modal';\nimport AsyncComponent from 'sentry/components/asyncComponent';\nimport Button from 'sentry/components/button';\nimport ContextPickerModal from 'sentry/components/contextPickerModal';\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {PluginProjectItem, PluginWithProjectList} from 'sentry/types';\nimport withOrganization from 'sentry/utils/withOrganization';\n\nimport AbstractIntegrationDetailedView from './abstractIntegrationDetailedView';\nimport InstalledPlugin from './installedPlugin';\nimport PluginDeprecationAlert from './pluginDeprecationAlert';\n\ntype State = {\n  plugins: PluginWithProjectList[];\n};\n\ntype Tab = AbstractIntegrationDetailedView['state']['tab'];\n\nclass PluginDetailedView extends AbstractIntegrationDetailedView<\n  AbstractIntegrationDetailedView['props'],\n  State & AbstractIntegrationDetailedView['state']\n> {\n  getEndpoints(): ReturnType<AsyncComponent['getEndpoints']> {\n    const {orgId, integrationSlug} = this.props.params;\n    return [\n      ['plugins', `/organizations/${orgId}/plugins/configs/?plugins=${integrationSlug}`],\n    ];\n  }\n\n  get integrationType() {\n    return 'plugin' as const;\n  }\n\n  get plugin() {\n    return this.state.plugins[0];\n  }\n\n  get description() {\n    return this.plugin.description || '';\n  }\n\n  get author() {\n    return this.plugin.author?.name;\n  }\n\n  get resourceLinks() {\n    return this.plugin.resourceLinks || [];\n  }\n\n  get installationStatus() {\n    return this.plugin.projectList.length > 0 ? 'Installed' : 'Not Installed';\n  }\n\n  get integrationName() {\n    return `${this.plugin.name}${this.plugin.isHidden ? ' (Legacy)' : ''}`;\n  }\n\n  get featureData() {\n    return this.plugin.featureDescriptions;\n  }\n\n  handleResetConfiguration = (projectId: string) => {\n    // make a copy of our project list\n    const projectList = this.plugin.projectList.slice();\n    // find the index of the project\n    const index = projectList.findIndex(item => item.projectId === projectId);\n    // should match but quit if it doesn't\n    if (index < 0) {\n      return;\n    }\n    // remove from array\n    projectList.splice(index, 1);\n    // update state\n    this.setState({\n      plugins: [{...this.state.plugins[0], projectList}],\n    });\n  };\n\n  handlePluginEnableStatus = (projectId: string, enable: boolean = true) => {\n    // make a copy of our project list\n    const projectList = this.plugin.projectList.slice();\n    // find the index of the project\n    const index = projectList.findIndex(item => item.projectId === projectId);\n    // should match but quit if it doesn't\n    if (index < 0) {\n      return;\n    }\n\n    // update item in array\n    projectList[index] = {\n      ...projectList[index],\n      enabled: enable,\n    };\n\n    // update state\n    this.setState({\n      plugins: [{...this.state.plugins[0], projectList}],\n    });\n  };\n\n  handleAddToProject = () => {\n    const plugin = this.plugin;\n    const {organization, router} = this.props;\n    this.trackIntegrationAnalytics('integrations.plugin_add_to_project_clicked');\n    modal.openModal(\n      modalProps => (\n        <ContextPickerModal\n          {...modalProps}\n          nextPath={`/settings/${organization.slug}/projects/:projectId/plugins/${plugin.id}/`}\n          needProject\n          needOrg={false}\n          onFinish={path => {\n            modalProps.closeModal();\n            router.push(path);\n          }}\n        />\n      ),\n      {allowClickClose: false}\n    );\n  };\n\n  getTabDisplay(tab: Tab) {\n    // we want to show project configurations to make it more clear\n    if (tab === 'configurations') {\n      return 'project configurations';\n    }\n    return 'overview';\n  }\n\n  renderTopButton(disabledFromFeatures: boolean, userHasAccess: boolean) {\n    if (userHasAccess) {\n      return (\n        <AddButton\n          data-test-id=\"install-button\"\n          disabled={disabledFromFeatures}\n          onClick={this.handleAddToProject}\n          size=\"sm\"\n          priority=\"primary\"\n        >\n          {t('Add to Project')}\n        </AddButton>\n      );\n    }\n\n    return this.renderRequestIntegrationButton();\n  }\n\n  renderConfigurations() {\n    const plugin = this.plugin;\n    const {organization} = this.props;\n\n    if (plugin.projectList.length) {\n      return (\n        <Fragment>\n          <PluginDeprecationAlert organization={organization} plugin={plugin} />\n          <div>\n            {plugin.projectList.map((projectItem: PluginProjectItem) => (\n              <InstalledPlugin\n                key={projectItem.projectId}\n                organization={organization}\n                plugin={plugin}\n                projectItem={projectItem}\n                onResetConfiguration={this.handleResetConfiguration}\n                onPluginEnableStatusChange={this.handlePluginEnableStatus}\n                trackIntegrationAnalytics={this.trackIntegrationAnalytics}\n              />\n            ))}\n          </div>\n        </Fragment>\n      );\n    }\n    return this.renderEmptyConfigurations();\n  }\n}\n\nconst AddButton = styled(Button)`\n  margin-bottom: ${space(1)};\n`;\n\nexport default withOrganization(PluginDetailedView);\n"],"names":["Component","Fragment","addErrorMessage","addLoadingMessage","addSuccessMessage","Access","Alert","Button","Confirm","ProjectBadge","Switch","IconDelete","IconSettings","t","space","withApi","InstalledPlugin","data","method","organization","projectItem","plugin","props","api","requestPromise","slug","projectSlug","id","enabled","pluginUpdate","reset","onResetConfiguration","projectId","trackIntegrationAnalytics","_err","status","updatePluginEnableStatus","onPluginEnableStatusChange","getConfirmMessage","projectForBadge","platform","projectPlatform","undefined","render","className","hasAccess","handleUninstallClick","handleReset","toggleEnablePlugin","Container","p","theme","border","background","StyledButton","gray300","IntegrationFlex","IntegrationItemBox","PluginDeprecationAlert","deprecationDate","resource","altIsSentryApp","upgradeUrl","firstPartyAlternative","queryParams","integration_type","integration","UpgradeNowButton","subText","modal","ContextPickerModal","withOrganization","AbstractIntegrationDetailedView","PluginDetailedView","projectList","slice","index","findIndex","item","splice","setState","plugins","state","enable","router","openModal","modalProps","path","closeModal","push","allowClickClose","getEndpoints","orgId","integrationSlug","params","integrationType","description","author","name","resourceLinks","installationStatus","length","integrationName","isHidden","featureData","featureDescriptions","getTabDisplay","tab","renderTopButton","disabledFromFeatures","userHasAccess","handleAddToProject","renderRequestIntegrationButton","renderConfigurations","map","handleResetConfiguration","handlePluginEnableStatus","renderEmptyConfigurations","AddButton"],"sourceRoot":""}