{"version":3,"file":"chunks/app_views_admin_adminRelays_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/links/linkWithConfirmation.tsx","webpack:///./app/views/admin/adminRelays.tsx"],"sourcesContent":["import {ButtonProps} from 'sentry/components/button';\nimport Confirm from 'sentry/components/confirm';\n\nimport Anchor from './anchor';\n\ntype Props = {\n  message: React.ReactNode;\n  onConfirm: () => void;\n  title: string;\n  children?: React.ReactNode;\n  className?: string;\n  disabled?: boolean;\n  priority?: ButtonProps['priority'];\n};\n\n/**\n * <Confirm> is a more generic version of this component\n */\nfunction LinkWithConfirmation({\n  className,\n  disabled,\n  title,\n  children,\n  ...otherProps\n}: Props) {\n  return (\n    <Confirm {...otherProps} disabled={disabled}>\n      <Anchor href=\"#\" className={className} disabled={disabled} title={title}>\n        {children}\n      </Anchor>\n    </Confirm>\n  );\n}\n\nexport default LinkWithConfirmation;\n","import {Component} from 'react';\nimport {RouteComponentProps} from 'react-router';\nimport moment from 'moment';\n\nimport {Client} from 'sentry/api';\nimport LinkWithConfirmation from 'sentry/components/links/linkWithConfirmation';\nimport ResultGrid from 'sentry/components/resultGrid';\nimport {t} from 'sentry/locale';\nimport withApi from 'sentry/utils/withApi';\n\nconst prettyDate = (x: string) => moment(x).format('ll LTS');\n\ntype Props = RouteComponentProps<{}, {}> & {api: Client};\n\ntype State = {\n  loading: boolean;\n};\n\ntype RelayRow = {\n  firstSeen: string;\n  id: string;\n  lastSeen: string;\n  publicKey: string;\n  relayId: string;\n};\n\nclass AdminRelays extends Component<Props, State> {\n  state: State = {\n    loading: false,\n  };\n\n  onDelete(key: string) {\n    this.setState({loading: true});\n    this.props.api.request(`/relays/${key}/`, {\n      method: 'DELETE',\n      success: () => this.setState({loading: false}),\n      error: () => this.setState({loading: false}),\n    });\n  }\n\n  getRow(row: RelayRow) {\n    return [\n      <td key=\"id\">\n        <strong>{row.relayId}</strong>\n      </td>,\n      <td key=\"key\">{row.publicKey}</td>,\n      <td key=\"firstSeen\" style={{textAlign: 'right'}}>\n        {prettyDate(row.firstSeen)}\n      </td>,\n      <td key=\"lastSeen\" style={{textAlign: 'right'}}>\n        {prettyDate(row.lastSeen)}\n      </td>,\n      <td key=\"tools\" style={{textAlign: 'right'}}>\n        <span className=\"editor-tools\">\n          <LinkWithConfirmation\n            className=\"danger\"\n            title=\"Remove\"\n            message={t('Are you sure you wish to delete this relay?')}\n            onConfirm={() => this.onDelete(row.id)}\n          >\n            {t('Remove')}\n          </LinkWithConfirmation>\n        </span>\n      </td>,\n    ];\n  }\n\n  render() {\n    const columns = [\n      <th key=\"id\" style={{width: 350, textAlign: 'left'}}>\n        Relay\n      </th>,\n      <th key=\"key\">Public Key</th>,\n      <th key=\"firstSeen\" style={{width: 150, textAlign: 'right'}}>\n        First seen\n      </th>,\n      <th key=\"lastSeen\" style={{width: 150, textAlign: 'right'}}>\n        Last seen\n      </th>,\n      <th key=\"tools\" />,\n    ];\n\n    return (\n      <div>\n        <h3>{t('Relays')}</h3>\n        <ResultGrid\n          path=\"/manage/relays/\"\n          endpoint=\"/relays/\"\n          method=\"GET\"\n          columns={columns}\n          columnsForRow={this.getRow}\n          hasSearch={false}\n          sortOptions={[\n            ['firstSeen', 'First seen'],\n            ['lastSeen', 'Last seen'],\n            ['relayId', 'Relay ID'],\n          ]}\n          defaultSort=\"firstSeen\"\n          {...this.props}\n        />\n      </div>\n    );\n  }\n}\n\nexport {AdminRelays};\n\nexport default withApi(AdminRelays);\n"],"names":["Confirm","Anchor","LinkWithConfirmation","className","disabled","title","children","otherProps","Component","moment","ResultGrid","t","withApi","prettyDate","x","format","AdminRelays","loading","onDelete","key","setState","props","api","request","method","success","error","getRow","row","relayId","publicKey","textAlign","firstSeen","lastSeen","id","render","columns","width"],"sourceRoot":""}