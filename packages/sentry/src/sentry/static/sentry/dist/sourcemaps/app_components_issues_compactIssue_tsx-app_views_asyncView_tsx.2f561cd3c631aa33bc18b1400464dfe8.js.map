{"version":3,"file":"chunks/app_components_issues_compactIssue_tsx-app_views_asyncView_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/events/errorLevel.tsx","webpack:///./app/components/issues/compactIssue.tsx","webpack:///./app/views/asyncView.tsx"],"sourcesContent":["import styled from '@emotion/styled';\n\nimport {Level} from 'sentry/types';\n\nconst DEFAULT_SIZE = '13px';\n\ntype Props = {\n  level?: Level;\n  size?: string;\n};\n\nconst ErrorLevel = styled('span')<Props>`\n  padding: 0;\n  position: relative;\n  width: ${p => p.size || DEFAULT_SIZE};\n  height: ${p => p.size || DEFAULT_SIZE};\n  text-indent: -9999em;\n  display: inline-block;\n  border-radius: 50%;\n  flex-shrink: 0;\n  background-color: ${p => (p.level ? p.theme.level[p.level] : p.theme.level.error)};\n`;\n\nexport default ErrorLevel;\n","import {Component, Fragment} from 'react';\nimport styled from '@emotion/styled';\n\nimport {bulkUpdate} from 'sentry/actionCreators/group';\nimport {addLoadingMessage, clearIndicators} from 'sentry/actionCreators/indicator';\nimport {Client} from 'sentry/api';\nimport EventOrGroupTitle from 'sentry/components/eventOrGroupTitle';\nimport ErrorLevel from 'sentry/components/events/errorLevel';\nimport Link from 'sentry/components/links/link';\nimport {PanelItem} from 'sentry/components/panels';\nimport {IconChat, IconMute, IconStar} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport GroupStore from 'sentry/stores/groupStore';\nimport space from 'sentry/styles/space';\nimport {BaseGroup, Organization} from 'sentry/types';\nimport {getMessage} from 'sentry/utils/events';\nimport {Aliases} from 'sentry/utils/theme';\nimport withApi from 'sentry/utils/withApi';\nimport withOrganization from 'sentry/utils/withOrganization';\n\ntype HeaderProps = {\n  data: BaseGroup;\n  organization: Organization;\n  projectId: string;\n  eventId?: string;\n};\n\nfunction CompactIssueHeader({data, organization, projectId, eventId}: HeaderProps) {\n  const basePath = `/organizations/${organization.slug}/issues/`;\n\n  const issueLink = eventId\n    ? `/organizations/${organization.slug}/projects/${projectId}/events/${eventId}/`\n    : `${basePath}${data.id}/`;\n\n  const commentColor: keyof Aliases =\n    data.subscriptionDetails && data.subscriptionDetails.reason === 'mentioned'\n      ? 'success'\n      : 'textColor';\n\n  return (\n    <Fragment>\n      <IssueHeaderMetaWrapper>\n        <StyledErrorLevel size=\"12px\" level={data.level} title={data.level} />\n        <h3 className=\"truncate\">\n          <IconLink to={issueLink || ''}>\n            {data.status === 'ignored' && <IconMute size=\"xs\" />}\n            {data.isBookmarked && <IconStar isSolid size=\"xs\" />}\n            <EventOrGroupTitle data={data} />\n          </IconLink>\n        </h3>\n      </IssueHeaderMetaWrapper>\n      <div className=\"event-extra\">\n        <span className=\"project-name\">\n          <strong>{data.project.slug}</strong>\n        </span>\n        {data.numComments !== 0 && (\n          <span>\n            <IconLink to={`${basePath}${data.id}/activity/`} className=\"comments\">\n              <IconChat size=\"xs\" color={commentColor} />\n              <span className=\"tag-count\">{data.numComments}</span>\n            </IconLink>\n          </span>\n        )}\n        <span className=\"culprit\">{getMessage(data)}</span>\n      </div>\n    </Fragment>\n  );\n}\n\ntype GroupTypes = ReturnType<typeof GroupStore.get>;\n\n/**\n * Type assertion to disambiguate GroupTypes\n *\n * The GroupCollapseRelease type isn't compatible with BaseGroup\n */\nfunction isGroup(maybe: GroupTypes): maybe is BaseGroup {\n  return (maybe as BaseGroup).status !== undefined;\n}\n\ntype Props = {\n  api: Client;\n  id: string;\n  organization: Organization;\n  data?: BaseGroup;\n  eventId?: string;\n};\n\ntype State = {\n  issue?: GroupTypes;\n};\n\nclass CompactIssue extends Component<Props, State> {\n  state: State = {\n    issue: this.props.data || GroupStore.get(this.props.id),\n  };\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.id !== this.props.id) {\n      this.setState({\n        issue: GroupStore.get(this.props.id),\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.listener();\n  }\n\n  listener = GroupStore.listen(\n    (itemIds: Set<string>) => this.onGroupChange(itemIds),\n    undefined\n  );\n\n  onGroupChange(itemIds: Set<string>) {\n    if (!itemIds.has(this.props.id)) {\n      return;\n    }\n    const id = this.props.id;\n    const issue = GroupStore.get(id);\n    this.setState({\n      issue,\n    });\n  }\n\n  onUpdate(data: Record<string, string>) {\n    const issue = this.state.issue;\n    if (!issue) {\n      return;\n    }\n    addLoadingMessage(t('Saving changes\\u2026'));\n\n    bulkUpdate(\n      this.props.api,\n      {\n        orgId: this.props.organization.slug,\n        projectId: issue.project.slug,\n        itemIds: [issue.id],\n        data,\n      },\n      {\n        complete: () => {\n          clearIndicators();\n        },\n      }\n    );\n  }\n\n  render() {\n    const issue = this.state.issue;\n    const {organization} = this.props;\n    if (!isGroup(issue)) {\n      return null;\n    }\n\n    let className = 'issue';\n    if (issue.isBookmarked) {\n      className += ' isBookmarked';\n    }\n    if (issue.hasSeen) {\n      className += ' hasSeen';\n    }\n    if (issue.status === 'resolved') {\n      className += ' isResolved';\n    }\n    if (issue.status === 'ignored') {\n      className += ' isIgnored';\n    }\n\n    return (\n      <IssueRow className={className}>\n        <CompactIssueHeader\n          data={issue}\n          organization={organization}\n          projectId={issue.project.slug}\n          eventId={this.props.eventId}\n        />\n        {this.props.children}\n      </IssueRow>\n    );\n  }\n}\n\nexport {CompactIssue};\nexport default withApi(withOrganization(CompactIssue));\n\nconst IssueHeaderMetaWrapper = styled('div')`\n  display: flex;\n  align-items: center;\n`;\n\nconst StyledErrorLevel = styled(ErrorLevel)`\n  display: block;\n  margin-right: ${space(1)};\n`;\n\nconst IconLink = styled(Link)`\n  & > svg {\n    margin-right: ${space(0.5)};\n  }\n`;\n\nconst IssueRow = styled(PanelItem)`\n  padding-top: ${space(1.5)};\n  padding-bottom: ${space(0.75)};\n  flex-direction: column;\n`;\n","import AsyncComponent from 'sentry/components/asyncComponent';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\n\ntype AsyncViewState = AsyncComponent['state'];\ntype AsyncViewProps = AsyncComponent['props'];\n\nexport default class AsyncView<\n  P extends AsyncViewProps = AsyncViewProps,\n  S extends AsyncViewState = AsyncViewState\n> extends AsyncComponent<P, S> {\n  getTitle() {\n    return '';\n  }\n\n  render() {\n    return (\n      <SentryDocumentTitle title={this.getTitle()}>\n        {this.renderComponent() as React.ReactChild}\n      </SentryDocumentTitle>\n    );\n  }\n}\n"],"names":["DEFAULT_SIZE","ErrorLevel","p","size","level","theme","error","Component","Fragment","bulkUpdate","addLoadingMessage","clearIndicators","EventOrGroupTitle","Link","PanelItem","IconChat","IconMute","IconStar","t","GroupStore","space","getMessage","withApi","withOrganization","CompactIssueHeader","data","organization","projectId","eventId","basePath","slug","issueLink","id","commentColor","subscriptionDetails","reason","status","isBookmarked","project","numComments","isGroup","maybe","undefined","CompactIssue","issue","props","get","listen","itemIds","onGroupChange","componentWillReceiveProps","nextProps","setState","componentWillUnmount","listener","has","onUpdate","state","api","orgId","complete","render","className","hasSeen","children","IssueHeaderMetaWrapper","StyledErrorLevel","IconLink","IssueRow","AsyncComponent","SentryDocumentTitle","AsyncView","getTitle","renderComponent"],"sourceRoot":""}