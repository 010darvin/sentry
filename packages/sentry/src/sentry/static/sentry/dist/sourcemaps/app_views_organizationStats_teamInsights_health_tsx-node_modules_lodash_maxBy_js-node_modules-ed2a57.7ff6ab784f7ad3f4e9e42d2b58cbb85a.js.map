{"version":3,"file":"chunks/app_views_organizationStats_teamInsights_health_tsx-node_modules_lodash_maxBy_js-node_modules-ed2a57.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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mBAAO,CAAC,gEAAiB;AAC5C,aAAa,mBAAO,CAAC,oDAAW;AAChC,mBAAmB,mBAAO,CAAC,gEAAiB;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB,aAAa,GAAG;AAChB;AACA;AACA,oBAAoB,QAAQ,IAAI,QAAQ;AACxC;AACA,kCAAkC,aAAa;AAC/C,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;ACjCA,eAAe,mBAAO,CAAC,wDAAa;AACpC,eAAe,mBAAO,CAAC,sDAAY;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;ACrBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;ACvCA,mBAAmB,mBAAO,CAAC,gEAAiB;AAC5C,aAAa,mBAAO,CAAC,kDAAU;AAC/B,aAAa,mBAAO,CAAC,kDAAU;;AAE/B;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,aAAa,QAAQ;AACrB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;;AAEA","sources":["webpack:///./app/utils/discover/discoverQuery.tsx","webpack:///./app/utils/performance/urls.ts","webpack:///./app/views/organizationStats/teamInsights/health.tsx","webpack:///./app/views/organizationStats/teamInsights/teamAlertsTriggered.tsx","webpack:///./app/views/organizationStats/teamInsights/teamMisery.tsx","webpack:///./app/views/organizationStats/teamInsights/teamReleases.tsx","webpack:///./app/views/organizationStats/teamInsights/teamStability.tsx","webpack:///./app/views/performance/transactionSummary/utils.tsx","webpack:///../node_modules/lodash/_baseExtremum.js","webpack:///../node_modules/lodash/_baseGt.js","webpack:///../node_modules/lodash/_baseMean.js","webpack:///../node_modules/lodash/_baseSum.js","webpack:///../node_modules/lodash/maxBy.js","webpack:///../node_modules/lodash/mean.js","webpack:///../node_modules/lodash/negate.js","webpack:///../node_modules/lodash/omitBy.js"],"sourcesContent":["import {EventsMetaType, MetaType} from 'sentry/utils/discover/eventView';\nimport withApi from 'sentry/utils/withApi';\nimport {TransactionThresholdMetric} from 'sentry/views/performance/transactionSummary/transactionThresholdModal';\n\nimport GenericDiscoverQuery, {\n  DiscoverQueryProps,\n  GenericChildrenProps,\n} from './genericDiscoverQuery';\n\n/**\n * An individual row in a DiscoverQuery result\n */\nexport type TableDataRow = {\n  [key: string]: React.ReactText;\n  id: string;\n};\n\n/**\n * A DiscoverQuery result including rows and metadata.\n */\nexport type TableData = {\n  data: Array<TableDataRow>;\n  meta?: MetaType;\n};\n\n/**\n * A DiscoverQuery result including rows and metadata from the events endpoint.\n */\nexport type EventsTableData = {\n  data: Array<TableDataRow>;\n  meta?: EventsMetaType;\n};\n\nexport type TableDataWithTitle = TableData & {title: string};\n\ntype DiscoverQueryPropsWithThresholds = DiscoverQueryProps & {\n  transactionName?: string;\n  transactionThreshold?: number;\n  transactionThresholdMetric?: TransactionThresholdMetric;\n};\n\ntype DiscoverQueryComponentProps = DiscoverQueryPropsWithThresholds & {\n  children: (props: GenericChildrenProps<TableData>) => React.ReactNode;\n  useEvents?: boolean;\n};\n\nfunction shouldRefetchData(\n  prevProps: DiscoverQueryPropsWithThresholds,\n  nextProps: DiscoverQueryPropsWithThresholds\n) {\n  return (\n    prevProps.transactionName !== nextProps.transactionName ||\n    prevProps.transactionThreshold !== nextProps.transactionThreshold ||\n    prevProps.transactionThresholdMetric !== nextProps.transactionThresholdMetric\n  );\n}\n\nfunction DiscoverQuery(props: DiscoverQueryComponentProps) {\n  const endpoint = props.useEvents ? 'events' : 'eventsv2';\n  const afterFetch = props.useEvents\n    ? (data, _) => {\n        const {fields, ...otherMeta} = data.meta ?? {};\n        return {\n          ...data,\n          meta: {...fields, ...otherMeta},\n        };\n      }\n    : undefined;\n  return (\n    <GenericDiscoverQuery<TableData, DiscoverQueryPropsWithThresholds>\n      route={endpoint}\n      shouldRefetchData={shouldRefetchData}\n      afterFetch={afterFetch}\n      {...props}\n    />\n  );\n}\n\nexport default withApi(DiscoverQuery);\n","import {LocationDescriptor, Query} from 'history';\n\nimport {spanTargetHash} from 'sentry/components/events/interfaces/spans/utils';\nimport {Organization} from 'sentry/types';\nimport {defined} from 'sentry/utils';\n\nexport function getTransactionDetailsUrl(\n  orgSlug: Organization['slug'],\n  eventSlug: string,\n  transaction?: string,\n  query?: Query,\n  spanId?: string\n): LocationDescriptor {\n  const locationQuery = {\n    ...(query || {}),\n    transaction,\n  };\n  if (!defined(locationQuery.transaction)) {\n    delete locationQuery.transaction;\n  }\n\n  const target = {\n    pathname: `/organizations/${orgSlug}/performance/${eventSlug}/`,\n    query: locationQuery,\n    hash: defined(spanId) ? spanTargetHash(spanId) : undefined,\n  };\n  if (!defined(target.hash)) {\n    delete target.hash;\n  }\n\n  return target;\n}\n","import {Fragment, useEffect} from 'react';\nimport {RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport * as Layout from 'sentry/components/layouts/thirds';\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport NoProjectMessage from 'sentry/components/noProjectMessage';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\nimport {t} from 'sentry/locale';\nimport {TeamWithProjects} from 'sentry/types';\nimport trackAdvancedAnalyticsEvent from 'sentry/utils/analytics/trackAdvancedAnalyticsEvent';\nimport localStorage from 'sentry/utils/localStorage';\nimport useOrganization from 'sentry/utils/useOrganization';\nimport useTeams from 'sentry/utils/useTeams';\n\nimport Header from '../header';\n\nimport TeamStatsControls from './controls';\nimport DescriptionCard from './descriptionCard';\nimport TeamAlertsTriggered from './teamAlertsTriggered';\nimport TeamMisery from './teamMisery';\nimport TeamReleases from './teamReleases';\nimport TeamStability from './teamStability';\nimport {dataDatetime} from './utils';\n\ntype Props = RouteComponentProps<{orgId: string}, {}>;\n\nfunction TeamStatsHealth({location, router}: Props) {\n  const organization = useOrganization();\n  const {teams, initiallyLoaded} = useTeams({provideUserTeams: true});\n\n  const query = location?.query ?? {};\n  const localStorageKey = `teamInsightsSelectedTeamId:${organization.slug}`;\n\n  let localTeamId: string | null | undefined =\n    query.team ?? localStorage.getItem(localStorageKey);\n  if (localTeamId && !teams.find(team => team.id === localTeamId)) {\n    localTeamId = null;\n  }\n  const currentTeamId = localTeamId ?? teams[0]?.id;\n  const currentTeam = teams.find(team => team.id === currentTeamId) as\n    | TeamWithProjects\n    | undefined;\n  const projects = currentTeam?.projects ?? [];\n\n  useEffect(() => {\n    trackAdvancedAnalyticsEvent('team_insights.viewed', {\n      organization,\n    });\n  }, [organization]);\n\n  const {period, start, end, utc} = dataDatetime(query);\n\n  if (teams.length === 0) {\n    return (\n      <NoProjectMessage organization={organization} superuserNeedsToBeProjectMember />\n    );\n  }\n\n  return (\n    <Fragment>\n      <SentryDocumentTitle title={t('Project Health')} orgSlug={organization.slug} />\n      <Header organization={organization} activeTab=\"health\" />\n\n      <Body>\n        <TeamStatsControls\n          location={location}\n          router={router}\n          currentTeam={currentTeam}\n        />\n\n        {!initiallyLoaded && <LoadingIndicator />}\n        {initiallyLoaded && (\n          <Layout.Main fullWidth>\n            <DescriptionCard\n              title={t('Crash Free Sessions')}\n              description={t(\n                'The percentage of healthy, errored, and abnormal sessions that didn’t cause a crash.'\n              )}\n            >\n              <TeamStability\n                projects={projects}\n                organization={organization}\n                period={period}\n                start={start}\n                end={end}\n                utc={utc}\n              />\n            </DescriptionCard>\n\n            <DescriptionCard\n              title={t('User Misery')}\n              description={t(\n                'The number of unique users that experienced load times 4x the project’s configured threshold.'\n              )}\n            >\n              <TeamMisery\n                organization={organization}\n                projects={projects}\n                teamId={currentTeam!.id}\n                period={period}\n                start={start?.toString()}\n                end={end?.toString()}\n                location={location}\n              />\n            </DescriptionCard>\n\n            <DescriptionCard\n              title={t('Metric Alerts Triggered')}\n              description={t('Alerts triggered from the Alert Rules your team created.')}\n            >\n              <TeamAlertsTriggered\n                organization={organization}\n                projects={projects}\n                teamSlug={currentTeam!.slug}\n                period={period}\n                start={start?.toString()}\n                end={end?.toString()}\n                location={location}\n              />\n            </DescriptionCard>\n\n            <DescriptionCard\n              title={t('Number of Releases')}\n              description={t('The releases that were created in your team’s projects.')}\n            >\n              <TeamReleases\n                projects={projects}\n                organization={organization}\n                teamSlug={currentTeam!.slug}\n                period={period}\n                start={start}\n                end={end}\n                utc={utc}\n              />\n            </DescriptionCard>\n          </Layout.Main>\n        )}\n      </Body>\n    </Fragment>\n  );\n}\n\nexport default TeamStatsHealth;\n\nconst Body = styled(Layout.Body)`\n  @media (min-width: ${p => p.theme.breakpoints.medium}) {\n    display: block;\n  }\n`;\n","import {Fragment} from 'react';\nimport {css} from '@emotion/react';\nimport styled from '@emotion/styled';\nimport round from 'lodash/round';\n\nimport AsyncComponent from 'sentry/components/asyncComponent';\nimport Button from 'sentry/components/button';\nimport {BarChart} from 'sentry/components/charts/barChart';\nimport {DateTimeObject} from 'sentry/components/charts/utils';\nimport Link from 'sentry/components/links/link';\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport {normalizeDateTimeParams} from 'sentry/components/organizations/pageFilters/parse';\nimport PanelTable from 'sentry/components/panels/panelTable';\nimport {IconArrow} from 'sentry/icons';\nimport {t, tct} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {Organization, Project} from 'sentry/types';\nimport {formatPercentage} from 'sentry/utils/formatters';\nimport {Color} from 'sentry/utils/theme';\nimport {MetricRule} from 'sentry/views/alerts/rules/metric/types';\n\nimport {ProjectBadge, ProjectBadgeContainer} from './styles';\nimport {barAxisLabel, convertDayValueObjectToSeries, sortSeriesByDay} from './utils';\n\ntype AlertsTriggered = Record<string, number>;\n\ntype AlertsTriggeredRule = MetricRule & {\n  totalThisWeek: number;\n  weeklyAvg: number;\n};\n\ntype Props = AsyncComponent['props'] & {\n  organization: Organization;\n  projects: Project[];\n  teamSlug: string;\n} & DateTimeObject;\n\ntype State = AsyncComponent['state'] & {\n  alertsTriggered: AlertsTriggered | null;\n  alertsTriggeredRules: AlertsTriggeredRule[] | null;\n};\n\nclass TeamAlertsTriggered extends AsyncComponent<Props, State> {\n  shouldRenderBadRequests = true;\n\n  getDefaultState(): State {\n    return {\n      ...super.getDefaultState(),\n      alertsTriggered: null,\n      alertsTriggeredRules: null,\n    };\n  }\n\n  getEndpoints(): ReturnType<AsyncComponent['getEndpoints']> {\n    const {organization, start, end, period, utc, teamSlug} = this.props;\n    const datetime = {start, end, period, utc};\n\n    return [\n      [\n        'alertsTriggered',\n        `/teams/${organization.slug}/${teamSlug}/alerts-triggered/`,\n        {\n          query: {\n            ...normalizeDateTimeParams(datetime),\n          },\n        },\n      ],\n      [\n        'alertsTriggeredRules',\n        `/teams/${organization.slug}/${teamSlug}/alerts-triggered-index/`,\n        {\n          query: {\n            ...normalizeDateTimeParams(datetime),\n          },\n        },\n      ],\n    ];\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const {start, end, period, utc, teamSlug} = this.props;\n\n    if (\n      prevProps.start !== start ||\n      prevProps.end !== end ||\n      prevProps.period !== period ||\n      prevProps.utc !== utc ||\n      prevProps.teamSlug !== teamSlug\n    ) {\n      this.remountComponent();\n    }\n  }\n\n  renderTrend(rule: AlertsTriggeredRule) {\n    const {weeklyAvg, totalThisWeek} = rule;\n    const diff = totalThisWeek - weeklyAvg;\n\n    // weeklyAvg can only be 0 only if totalThisWeek is also 0\n    // but those should never be returned in alerts-triggered-index request\n    if (weeklyAvg === 0) {\n      return '\\u2014';\n    }\n\n    return (\n      <SubText color={diff <= 0 ? 'green300' : 'red300'}>\n        {formatPercentage(Math.abs(diff / weeklyAvg), 0)}\n        <PaddedIconArrow direction={diff <= 0 ? 'down' : 'up'} size=\"xs\" />\n      </SubText>\n    );\n  }\n\n  renderLoading() {\n    return (\n      <ChartWrapper>\n        <LoadingIndicator />\n      </ChartWrapper>\n    );\n  }\n\n  renderBody() {\n    const {organization, period, projects} = this.props;\n    const {alertsTriggered, alertsTriggeredRules} = this.state;\n    const seriesData = sortSeriesByDay(\n      convertDayValueObjectToSeries(alertsTriggered ?? {})\n    );\n\n    return (\n      <Fragment>\n        <ChartWrapper>\n          <BarChart\n            style={{height: 190}}\n            isGroupedByDate\n            useShortDate\n            period=\"7d\"\n            legend={{right: 0, top: 0}}\n            yAxis={{minInterval: 1}}\n            xAxis={barAxisLabel(seriesData.length)}\n            series={[\n              {\n                seriesName: t('Alerts Triggered'),\n                data: seriesData,\n                silent: true,\n                barCategoryGap: '5%',\n              },\n            ]}\n          />\n        </ChartWrapper>\n        <StyledPanelTable\n          isEmpty={\n            !alertsTriggered || !alertsTriggeredRules || alertsTriggeredRules.length === 0\n          }\n          emptyMessage={t('No alerts triggered for this team’s projects')}\n          emptyAction={\n            <ButtonsContainer>\n              <Button\n                priority=\"primary\"\n                size=\"sm\"\n                to={`/organizations/${organization.slug}/alerts/rules/`}\n              >\n                {t('Create Alert')}\n              </Button>\n              <Button\n                size=\"sm\"\n                external\n                to=\"https://docs.sentry.io/product/alerts/create-alerts/\"\n              >\n                {t('Learn more')}\n              </Button>\n            </ButtonsContainer>\n          }\n          headers={[\n            t('Alert Rule'),\n            t('Project'),\n            <AlignRight key=\"last\">{tct('Last [period] Average', {period})}</AlignRight>,\n            <AlignRight key=\"curr\">{t('This Week')}</AlignRight>,\n            <AlignRight key=\"diff\">{t('Difference')}</AlignRight>,\n          ]}\n        >\n          {alertsTriggeredRules?.map(rule => {\n            const project = projects.find(p => p.slug === rule.projects[0]);\n\n            return (\n              <Fragment key={rule.id}>\n                <AlertNameContainer>\n                  <Link\n                    to={`/organizations/${organization.slug}/alerts/rules/details/${rule.id}/`}\n                  >\n                    {rule.name}\n                  </Link>\n                </AlertNameContainer>\n                <ProjectBadgeContainer>\n                  {project && <ProjectBadge avatarSize={18} project={project} />}\n                </ProjectBadgeContainer>\n                <AlignRight>{round(rule.weeklyAvg, 2)}</AlignRight>\n                <AlignRight>{rule.totalThisWeek}</AlignRight>\n                <AlignRight>{this.renderTrend(rule)}</AlignRight>\n              </Fragment>\n            );\n          })}\n        </StyledPanelTable>\n      </Fragment>\n    );\n  }\n}\n\nexport default TeamAlertsTriggered;\n\nconst ChartWrapper = styled('div')`\n  padding: ${space(2)} ${space(2)} 0 ${space(2)};\n  border-bottom: 1px solid ${p => p.theme.border};\n`;\n\nconst StyledPanelTable = styled(PanelTable)`\n  grid-template-columns: 1fr 0.5fr 0.2fr 0.2fr 0.2fr;\n  font-size: ${p => p.theme.fontSizeMedium};\n  white-space: nowrap;\n  margin-bottom: 0;\n  border: 0;\n  box-shadow: unset;\n\n  & > div {\n    padding: ${space(1)} ${space(2)};\n  }\n\n  ${p =>\n    p.isEmpty &&\n    css`\n      & > div:last-child {\n        padding: 48px ${space(2)};\n      }\n    `}\n`;\n\nconst AlertNameContainer = styled('div')`\n  ${p => p.theme.overflowEllipsis}\n`;\n\nconst AlignRight = styled('div')`\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n`;\n\nconst PaddedIconArrow = styled(IconArrow)`\n  margin: 0 ${space(0.5)};\n`;\n\nconst SubText = styled('div')<{color: Color}>`\n  color: ${p => p.theme[p.color]};\n`;\n\nconst ButtonsContainer = styled('div')`\n  & > a {\n    margin-right: ${space(0.5)};\n    margin-left: ${space(0.5)};\n  }\n`;\n","import {Fragment} from 'react';\nimport {css} from '@emotion/react';\nimport styled from '@emotion/styled';\nimport {Location} from 'history';\n\nimport AsyncComponent from 'sentry/components/asyncComponent';\nimport Button from 'sentry/components/button';\nimport {DateTimeObject} from 'sentry/components/charts/utils';\nimport CollapsePanel, {COLLAPSE_COUNT} from 'sentry/components/collapsePanel';\nimport Link from 'sentry/components/links/link';\nimport LoadingError from 'sentry/components/loadingError';\nimport PanelTable from 'sentry/components/panels/panelTable';\nimport {IconStar} from 'sentry/icons';\nimport {t, tct} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {Organization, Project, SavedQueryVersions} from 'sentry/types';\nimport DiscoverQuery, {\n  TableData,\n  TableDataRow,\n} from 'sentry/utils/discover/discoverQuery';\nimport EventView from 'sentry/utils/discover/eventView';\nimport {getFieldRenderer} from 'sentry/utils/discover/fieldRenderers';\nimport type {QueryError} from 'sentry/utils/discover/genericDiscoverQuery';\nimport type {Color} from 'sentry/utils/theme';\nimport {transactionSummaryRouteWithQuery} from 'sentry/views/performance/transactionSummary/utils';\n\nimport {ProjectBadge, ProjectBadgeContainer} from './styles';\nimport {groupByTrend} from './utils';\n\ntype TeamMiseryProps = {\n  isLoading: boolean;\n  location: Location;\n  organization: Organization;\n  periodTableData: TableData | null;\n  projects: Project[];\n  weekTableData: TableData | null;\n  error?: QueryError | null;\n  period?: string | null;\n};\n\nfunction TeamMisery({\n  organization,\n  location,\n  projects,\n  periodTableData,\n  weekTableData,\n  isLoading,\n  period,\n  error,\n}: TeamMiseryProps) {\n  const miseryRenderer =\n    periodTableData?.meta &&\n    getFieldRenderer('user_misery()', periodTableData.meta, false);\n\n  // Calculate trend, so we can sort based on it\n  const sortedTableData = (periodTableData?.data ?? [])\n    .map(dataRow => {\n      const weekRow = weekTableData?.data.find(\n        row => row.project === dataRow.project && row.transaction === dataRow.transaction\n      );\n\n      const trend = weekRow\n        ? ((dataRow['user_misery()'] as number) - (weekRow['user_misery()'] as number)) *\n          100\n        : null;\n\n      return {\n        ...dataRow,\n        trend,\n      } as TableDataRow & {trend: number};\n    })\n    .filter(x => x.trend !== null)\n    .sort((a, b) => Math.abs(b.trend) - Math.abs(a.trend));\n\n  const groupedData = groupByTrend(sortedTableData);\n\n  if (error) {\n    return <LoadingError />;\n  }\n\n  return (\n    <CollapsePanel items={groupedData.length}>\n      {({isExpanded, showMoreButton}) => (\n        <Fragment>\n          <StyledPanelTable\n            isEmpty={projects.length === 0 || periodTableData?.data.length === 0}\n            emptyMessage={t('No key transactions starred by this team')}\n            emptyAction={\n              <Button\n                size=\"sm\"\n                external\n                href=\"https://docs.sentry.io/product/performance/transaction-summary/#starring-key-transactions\"\n              >\n                {t('Learn More')}\n              </Button>\n            }\n            headers={[\n              <FlexCenter key=\"transaction\">\n                <StyledIconStar isSolid color=\"yellow300\" /> {t('Key transaction')}\n              </FlexCenter>,\n              t('Project'),\n              tct('Last [period]', {period}),\n              t('Last 7 Days'),\n              <RightAligned key=\"change\">{t('Change')}</RightAligned>,\n            ]}\n            isLoading={isLoading}\n          >\n            {groupedData.map((dataRow, idx) => {\n              const project = projects.find(({slug}) => dataRow.project === slug);\n              const {trend, project: projectId, transaction} = dataRow;\n\n              const weekRow = weekTableData?.data.find(\n                row => row.project === projectId && row.transaction === transaction\n              );\n              if (!weekRow || trend === null) {\n                return null;\n              }\n\n              const periodMisery = miseryRenderer?.(dataRow, {organization, location});\n              const weekMisery =\n                weekRow && miseryRenderer?.(weekRow, {organization, location});\n              const trendValue = Math.round(Math.abs(trend));\n\n              if (idx >= COLLAPSE_COUNT && !isExpanded) {\n                return null;\n              }\n\n              return (\n                <Fragment key={idx}>\n                  <KeyTransactionTitleWrapper>\n                    <div>\n                      <StyledIconStar isSolid color=\"yellow300\" />\n                    </div>\n                    <TransactionWrapper>\n                      <Link\n                        to={transactionSummaryRouteWithQuery({\n                          orgSlug: organization.slug,\n                          transaction: dataRow.transaction as string,\n                          projectID: project?.id,\n                          query: {query: 'transaction.duration:<15m'},\n                        })}\n                      >\n                        {dataRow.transaction}\n                      </Link>\n                    </TransactionWrapper>\n                  </KeyTransactionTitleWrapper>\n                  <FlexCenter>\n                    <ProjectBadgeContainer>\n                      {project && <ProjectBadge avatarSize={18} project={project} />}\n                    </ProjectBadgeContainer>\n                  </FlexCenter>\n                  <FlexCenter>{periodMisery}</FlexCenter>\n                  <FlexCenter>{weekMisery ?? '\\u2014'}</FlexCenter>\n                  <ScoreWrapper>\n                    {trendValue === 0 ? (\n                      <SubText>\n                        {`0\\u0025 `}\n                        {t('change')}\n                      </SubText>\n                    ) : (\n                      <TrendText color={trend >= 0 ? 'green300' : 'red300'}>\n                        {`${trendValue}\\u0025 `}\n                        {trend >= 0 ? t('better') : t('worse')}\n                      </TrendText>\n                    )}\n                  </ScoreWrapper>\n                </Fragment>\n              );\n            })}\n          </StyledPanelTable>\n          {!isLoading && showMoreButton}\n        </Fragment>\n      )}\n    </CollapsePanel>\n  );\n}\n\ntype Props = AsyncComponent['props'] & {\n  location: Location;\n  organization: Organization;\n  projects: Project[];\n  teamId: string;\n  end?: string;\n  period?: string | null;\n  start?: string;\n} & DateTimeObject;\n\nfunction TeamMiseryWrapper({\n  organization,\n  teamId,\n  projects,\n  location,\n  period,\n  start,\n  end,\n}: Props) {\n  if (projects.length === 0) {\n    return (\n      <TeamMisery\n        isLoading={false}\n        organization={organization}\n        location={location}\n        projects={[]}\n        period={period}\n        periodTableData={{data: []}}\n        weekTableData={{data: []}}\n      />\n    );\n  }\n\n  const commonEventView = {\n    id: undefined,\n    query: 'transaction.duration:<15m team_key_transaction:true',\n    projects: [],\n    version: 2 as SavedQueryVersions,\n    orderby: '-tpm',\n    teams: [Number(teamId)],\n    fields: [\n      'transaction',\n      'project',\n      'tpm()',\n      'count_unique(user)',\n      'count_miserable(user)',\n      'user_misery()',\n    ],\n  };\n  const periodEventView = EventView.fromSavedQuery({\n    ...commonEventView,\n    name: 'periodMisery',\n    range: period ?? undefined,\n    start,\n    end,\n  });\n\n  const weekEventView = EventView.fromSavedQuery({\n    ...commonEventView,\n    name: 'weekMisery',\n    range: '7d',\n  });\n\n  return (\n    <DiscoverQuery\n      eventView={periodEventView}\n      orgSlug={organization.slug}\n      location={location}\n      useEvents\n    >\n      {({isLoading, tableData: periodTableData, error}) => (\n        <DiscoverQuery\n          eventView={weekEventView}\n          orgSlug={organization.slug}\n          location={location}\n          useEvents\n        >\n          {({isLoading: isWeekLoading, tableData: weekTableData, error: weekError}) => (\n            <TeamMisery\n              isLoading={isLoading || isWeekLoading}\n              organization={organization}\n              location={location}\n              projects={projects}\n              period={period}\n              periodTableData={periodTableData}\n              weekTableData={weekTableData}\n              error={error ?? weekError}\n            />\n          )}\n        </DiscoverQuery>\n      )}\n    </DiscoverQuery>\n  );\n}\n\nexport default TeamMiseryWrapper;\n\nconst StyledPanelTable = styled(PanelTable)<{isEmpty: boolean}>`\n  grid-template-columns: 1.25fr 0.5fr 112px 112px 0.25fr;\n  font-size: ${p => p.theme.fontSizeMedium};\n  white-space: nowrap;\n  margin-bottom: 0;\n  border: 0;\n  box-shadow: unset;\n\n  & > div {\n    padding: ${space(1)} ${space(2)};\n  }\n\n  ${p =>\n    p.isEmpty &&\n    css`\n      & > div:last-child {\n        padding: 48px ${space(2)};\n      }\n    `}\n`;\n\nconst FlexCenter = styled('div')`\n  display: flex;\n  align-items: center;\n`;\n\nconst KeyTransactionTitleWrapper = styled('div')`\n  ${p => p.theme.overflowEllipsis};\n  display: flex;\n  align-items: center;\n`;\n\nconst StyledIconStar = styled(IconStar)`\n  display: block;\n  margin-right: ${space(1)};\n  margin-bottom: ${space(0.5)};\n`;\n\nconst TransactionWrapper = styled('div')`\n  ${p => p.theme.overflowEllipsis};\n`;\n\nconst RightAligned = styled('span')`\n  text-align: right;\n`;\n\nconst ScoreWrapper = styled('div')`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  text-align: right;\n`;\n\nconst SubText = styled('div')`\n  color: ${p => p.theme.subText};\n`;\n\nconst TrendText = styled('div')<{color: Color}>`\n  color: ${p => p.theme[p.color]};\n`;\n","import {ComponentType, Fragment} from 'react';\nimport {css, withTheme} from '@emotion/react';\nimport styled from '@emotion/styled';\nimport isEqual from 'lodash/isEqual';\nimport round from 'lodash/round';\nimport moment from 'moment';\n\nimport AsyncComponent from 'sentry/components/asyncComponent';\nimport Button from 'sentry/components/button';\nimport {BarChart} from 'sentry/components/charts/barChart';\nimport MarkLine from 'sentry/components/charts/components/markLine';\nimport {DateTimeObject} from 'sentry/components/charts/utils';\nimport Link from 'sentry/components/links/link';\nimport {normalizeDateTimeParams} from 'sentry/components/organizations/pageFilters/parse';\nimport PanelTable from 'sentry/components/panels/panelTable';\nimport Placeholder from 'sentry/components/placeholder';\nimport {IconArrow} from 'sentry/icons';\nimport {t, tct} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {Organization, Project} from 'sentry/types';\nimport {Color, Theme} from 'sentry/utils/theme';\n\nimport {ProjectBadge, ProjectBadgeContainer} from './styles';\nimport {barAxisLabel, groupByTrend, sortSeriesByDay} from './utils';\n\ntype Props = AsyncComponent['props'] & {\n  organization: Organization;\n  projects: Project[];\n  teamSlug: string;\n  theme: Theme;\n} & DateTimeObject;\n\ntype ProjectReleaseCount = {\n  last_week_totals: Record<string, number>;\n  project_avgs: Record<string, number>;\n  release_counts: Record<string, number>;\n};\n\ntype State = AsyncComponent['state'] & {\n  /** weekly selected date range */\n  periodReleases: ProjectReleaseCount | null;\n  /** Locked to last 7 days */\n  weekReleases: ProjectReleaseCount | null;\n};\n\nclass TeamReleases extends AsyncComponent<Props, State> {\n  shouldRenderBadRequests = true;\n\n  getDefaultState(): State {\n    return {\n      ...super.getDefaultState(),\n      weekReleases: null,\n      periodReleases: null,\n    };\n  }\n\n  getEndpoints() {\n    const {organization, start, end, period, utc, teamSlug} = this.props;\n\n    const datetime = {start, end, period, utc};\n\n    const endpoints: ReturnType<AsyncComponent['getEndpoints']> = [\n      [\n        'periodReleases',\n        `/teams/${organization.slug}/${teamSlug}/release-count/`,\n        {\n          query: {\n            ...normalizeDateTimeParams(datetime),\n          },\n        },\n      ],\n      [\n        'weekReleases',\n        `/teams/${organization.slug}/${teamSlug}/release-count/`,\n        {\n          query: {\n            statsPeriod: '7d',\n          },\n        },\n      ],\n    ];\n\n    return endpoints;\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const {teamSlug, start, end, period, utc} = this.props;\n\n    if (\n      prevProps.start !== start ||\n      prevProps.end !== end ||\n      prevProps.period !== period ||\n      prevProps.utc !== utc ||\n      !isEqual(prevProps.teamSlug, teamSlug)\n    ) {\n      this.remountComponent();\n    }\n  }\n\n  getReleaseCount(projectId: number, dataset: 'week' | 'period'): number | null {\n    const {periodReleases, weekReleases} = this.state;\n\n    const releasesPeriod =\n      dataset === 'week' ? weekReleases?.last_week_totals : periodReleases?.project_avgs;\n\n    const count = releasesPeriod?.[projectId]\n      ? Math.ceil(releasesPeriod?.[projectId])\n      : 0;\n\n    return count;\n  }\n\n  getTrend(projectId: number): number | null {\n    const periodCount = this.getReleaseCount(projectId, 'period');\n    const weekCount = this.getReleaseCount(projectId, 'week');\n\n    if (periodCount === null || weekCount === null) {\n      return null;\n    }\n\n    return weekCount - periodCount;\n  }\n\n  renderLoading() {\n    return this.renderBody();\n  }\n\n  renderReleaseCount(projectId: string, dataset: 'week' | 'period') {\n    const {loading} = this.state;\n\n    if (loading) {\n      return (\n        <div>\n          <Placeholder width=\"80px\" height=\"25px\" />\n        </div>\n      );\n    }\n\n    const count = this.getReleaseCount(Number(projectId), dataset);\n\n    if (count === null) {\n      return '\\u2014';\n    }\n\n    return count;\n  }\n\n  renderTrend(projectId: string) {\n    const {loading} = this.state;\n\n    if (loading) {\n      return (\n        <div>\n          <Placeholder width=\"80px\" height=\"25px\" />\n        </div>\n      );\n    }\n\n    const trend = this.getTrend(Number(projectId));\n\n    if (trend === null) {\n      return '\\u2014';\n    }\n\n    return (\n      <SubText color={trend >= 0 ? 'green300' : 'red300'}>\n        {`${round(Math.abs(trend), 3)}`}\n        <PaddedIconArrow direction={trend >= 0 ? 'up' : 'down'} size=\"xs\" />\n      </SubText>\n    );\n  }\n\n  renderBody() {\n    const {projects, period, theme, organization} = this.props;\n    const {periodReleases} = this.state;\n\n    const sortedProjects = projects\n      .map(project => ({project, trend: this.getTrend(Number(project.id)) ?? 0}))\n      .sort((a, b) => Math.abs(b.trend) - Math.abs(a.trend));\n\n    const groupedProjects = groupByTrend(sortedProjects);\n\n    const data = Object.entries(periodReleases?.release_counts ?? {}).map(\n      ([bucket, count]) => ({\n        value: Math.ceil(count),\n        name: new Date(bucket).getTime(),\n      })\n    );\n    const seriesData = sortSeriesByDay(data);\n\n    const averageValues = Object.values(periodReleases?.project_avgs ?? {});\n    const projectAvgSum = averageValues.reduce(\n      (total, currentData) => total + currentData,\n      0\n    );\n    const totalPeriodAverage = Math.ceil(projectAvgSum / averageValues.length);\n\n    return (\n      <div>\n        <ChartWrapper>\n          <BarChart\n            style={{height: 190}}\n            isGroupedByDate\n            useShortDate\n            period=\"7d\"\n            legend={{right: 3, top: 0}}\n            yAxis={{minInterval: 1}}\n            xAxis={barAxisLabel(seriesData.length)}\n            series={[\n              {\n                seriesName: t('This Period'),\n                silent: true,\n                data: seriesData,\n                markLine: MarkLine({\n                  silent: true,\n                  lineStyle: {color: theme.gray200, type: 'dashed', width: 1},\n                  data: [{yAxis: totalPeriodAverage}],\n                  label: {\n                    show: false,\n                  },\n                }),\n                barCategoryGap: '5%',\n              },\n            ]}\n            tooltip={{\n              formatter: seriesParams => {\n                // `seriesParams` can be an array or an object :/\n                const [series] = Array.isArray(seriesParams)\n                  ? seriesParams\n                  : [seriesParams];\n\n                const dateFormat = 'MMM D';\n                const startDate = moment(series.data[0]).format(dateFormat);\n                const endDate = moment(series.data[0]).add(7, 'days').format(dateFormat);\n                return [\n                  '<div class=\"tooltip-series\">',\n                  `<div><span class=\"tooltip-label\">${series.marker} <strong>${series.seriesName}</strong></span> ${series.data[1]}</div>`,\n                  `<div><span class=\"tooltip-label\"><strong>Last ${period} Average</strong></span> ${totalPeriodAverage}</div>`,\n                  '</div>',\n                  `<div class=\"tooltip-date\">${startDate} - ${endDate}</div>`,\n                  '<div class=\"tooltip-arrow\"></div>',\n                ].join('');\n              },\n            }}\n          />\n        </ChartWrapper>\n        <StyledPanelTable\n          isEmpty={projects.length === 0}\n          emptyMessage={t('No releases were setup for this team’s projects')}\n          emptyAction={\n            <Button\n              size=\"sm\"\n              external\n              href=\"https://docs.sentry.io/product/releases/setup/\"\n            >\n              {t('Learn More')}\n            </Button>\n          }\n          headers={[\n            t('Releases Per Project'),\n            <RightAligned key=\"last\">\n              {tct('Last [period] Average', {period})}\n            </RightAligned>,\n            <RightAligned key=\"curr\">{t('Last 7 Days')}</RightAligned>,\n            <RightAligned key=\"diff\">{t('Difference')}</RightAligned>,\n          ]}\n        >\n          {groupedProjects.map(({project}) => (\n            <Fragment key={project.id}>\n              <ProjectBadgeContainer>\n                <ProjectBadge\n                  avatarSize={18}\n                  project={project}\n                  to={{\n                    pathname: `/organizations/${organization.slug}/releases/`,\n                    query: {project: project.id},\n                  }}\n                />\n              </ProjectBadgeContainer>\n\n              <ScoreWrapper>{this.renderReleaseCount(project.id, 'period')}</ScoreWrapper>\n              <ScoreWrapper>\n                <Link\n                  to={{\n                    pathname: `/organizations/${organization.slug}/releases/`,\n                    query: {project: project.id, statsPeriod: '7d'},\n                  }}\n                >\n                  {this.renderReleaseCount(project.id, 'week')}\n                </Link>\n              </ScoreWrapper>\n              <ScoreWrapper>{this.renderTrend(project.id)}</ScoreWrapper>\n            </Fragment>\n          ))}\n        </StyledPanelTable>\n      </div>\n    );\n  }\n}\n\nexport default withTheme(TeamReleases as ComponentType<Props>);\n\nconst ChartWrapper = styled('div')`\n  padding: ${space(2)} ${space(2)} 0 ${space(2)};\n  border-bottom: 1px solid ${p => p.theme.border};\n`;\n\nconst StyledPanelTable = styled(PanelTable)<{isEmpty: boolean}>`\n  grid-template-columns: 1fr 0.2fr 0.2fr 0.2fr;\n  white-space: nowrap;\n  margin-bottom: 0;\n  border: 0;\n  font-size: ${p => p.theme.fontSizeMedium};\n  box-shadow: unset;\n\n  & > div {\n    padding: ${space(1)} ${space(2)};\n  }\n\n  ${p =>\n    p.isEmpty &&\n    css`\n      & > div:last-child {\n        padding: 48px ${space(2)};\n      }\n    `}\n`;\n\nconst RightAligned = styled('span')`\n  text-align: right;\n`;\n\nconst ScoreWrapper = styled('div')`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  text-align: right;\n`;\n\nconst PaddedIconArrow = styled(IconArrow)`\n  margin: 0 ${space(0.5)};\n`;\n\nconst SubText = styled('div')<{color: Color}>`\n  color: ${p => p.theme[p.color]};\n`;\n","import {Fragment} from 'react';\nimport {css} from '@emotion/react';\nimport styled from '@emotion/styled';\nimport isEqual from 'lodash/isEqual';\nimport round from 'lodash/round';\n\nimport AsyncComponent from 'sentry/components/asyncComponent';\nimport Button from 'sentry/components/button';\nimport MiniBarChart from 'sentry/components/charts/miniBarChart';\nimport SessionsRequest from 'sentry/components/charts/sessionsRequest';\nimport {DateTimeObject} from 'sentry/components/charts/utils';\nimport {normalizeDateTimeParams} from 'sentry/components/organizations/pageFilters/parse';\nimport PanelTable from 'sentry/components/panels/panelTable';\nimport Placeholder from 'sentry/components/placeholder';\nimport {IconArrow} from 'sentry/icons';\nimport {t, tct} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {\n  Organization,\n  Project,\n  SessionApiResponse,\n  SessionFieldWithOperation,\n  SessionStatus,\n} from 'sentry/types';\nimport {formatFloat} from 'sentry/utils/formatters';\nimport {getCountSeries, getCrashFreeRate, getSeriesSum} from 'sentry/utils/sessions';\nimport {Color} from 'sentry/utils/theme';\nimport {displayCrashFreePercent} from 'sentry/views/releases/utils';\n\nimport {ProjectBadge, ProjectBadgeContainer} from './styles';\nimport {groupByTrend} from './utils';\n\ntype Props = AsyncComponent['props'] & {\n  organization: Organization;\n  projects: Project[];\n  period?: string | null;\n} & DateTimeObject;\n\ntype State = AsyncComponent['state'] & {\n  /** weekly selected date range */\n  periodSessions: SessionApiResponse | null;\n  /** Locked to last 7 days */\n  weekSessions: SessionApiResponse | null;\n};\n\nclass TeamStability extends AsyncComponent<Props, State> {\n  shouldRenderBadRequests = true;\n\n  getDefaultState(): State {\n    return {\n      ...super.getDefaultState(),\n      weekSessions: null,\n      periodSessions: null,\n    };\n  }\n\n  getEndpoints() {\n    const {organization, start, end, period, utc, projects} = this.props;\n\n    const projectsWithSessions = projects.filter(project => project.hasSessions);\n\n    if (projectsWithSessions.length === 0) {\n      return [];\n    }\n\n    const datetime = {start, end, period, utc};\n    const commonQuery = {\n      environment: [],\n      project: projectsWithSessions.map(p => p.id),\n      field: 'sum(session)',\n      groupBy: ['session.status', 'project'],\n      interval: '1d',\n    };\n\n    const endpoints: ReturnType<AsyncComponent['getEndpoints']> = [\n      [\n        'periodSessions',\n        `/organizations/${organization.slug}/sessions/`,\n        {\n          query: {\n            ...commonQuery,\n            ...normalizeDateTimeParams(datetime),\n          },\n        },\n      ],\n      [\n        'weekSessions',\n        `/organizations/${organization.slug}/sessions/`,\n        {\n          query: {\n            ...commonQuery,\n            statsPeriod: '7d',\n          },\n        },\n      ],\n    ];\n\n    return endpoints;\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const {projects, start, end, period, utc} = this.props;\n\n    if (\n      prevProps.start !== start ||\n      prevProps.end !== end ||\n      prevProps.period !== period ||\n      prevProps.utc !== utc ||\n      !isEqual(prevProps.projects, projects)\n    ) {\n      this.remountComponent();\n    }\n  }\n\n  getScore(projectId: number, dataset: 'week' | 'period'): number | null {\n    const {periodSessions, weekSessions} = this.state;\n    const sessions = dataset === 'week' ? weekSessions : periodSessions;\n    const projectGroups = sessions?.groups.filter(\n      group => group.by.project === projectId\n    );\n\n    return getCrashFreeRate(projectGroups, SessionFieldWithOperation.SESSIONS);\n  }\n\n  getTrend(projectId: number): number | null {\n    const periodScore = this.getScore(projectId, 'period');\n    const weekScore = this.getScore(projectId, 'week');\n\n    if (periodScore === null || weekScore === null) {\n      return null;\n    }\n\n    return weekScore - periodScore;\n  }\n\n  getMiniBarChartSeries(project: Project, response: SessionApiResponse) {\n    const sumSessions = getSeriesSum(\n      response.groups.filter(group => group.by.project === Number(project.id)),\n      SessionFieldWithOperation.SESSIONS,\n      response.intervals\n    );\n\n    const countSeries = getCountSeries(\n      SessionFieldWithOperation.SESSIONS,\n      response.groups.find(\n        g =>\n          g.by.project === Number(project.id) &&\n          g.by['session.status'] === SessionStatus.HEALTHY\n      ),\n      response.intervals\n    );\n\n    const countSeriesWeeklyTotals: number[] = Array(sumSessions.length / 7).fill(0);\n    countSeries.forEach(\n      (s, idx) => (countSeriesWeeklyTotals[Math.floor(idx / 7)] += s.value)\n    );\n\n    const sumSessionsWeeklyTotals: number[] = Array(sumSessions.length / 7).fill(0);\n    sumSessions.forEach((s, idx) => (sumSessionsWeeklyTotals[Math.floor(idx / 7)] += s));\n\n    const data = countSeriesWeeklyTotals.map((value, idx) => ({\n      name: countSeries[idx * 7].name,\n      value: sumSessionsWeeklyTotals[idx]\n        ? formatFloat((value / sumSessionsWeeklyTotals[idx]) * 100, 2)\n        : 0,\n    }));\n\n    return [{seriesName: t('Crash Free Sessions'), data}];\n  }\n\n  renderLoading() {\n    return this.renderBody();\n  }\n\n  renderScore(projectId: string, dataset: 'week' | 'period') {\n    const {loading} = this.state;\n\n    if (loading) {\n      return (\n        <div>\n          <Placeholder width=\"80px\" height=\"25px\" />\n        </div>\n      );\n    }\n\n    const score = this.getScore(Number(projectId), dataset);\n\n    if (score === null) {\n      return '\\u2014';\n    }\n\n    return displayCrashFreePercent(score);\n  }\n\n  renderTrend(projectId: string) {\n    const {loading} = this.state;\n\n    if (loading) {\n      return (\n        <div>\n          <Placeholder width=\"80px\" height=\"25px\" />\n        </div>\n      );\n    }\n\n    const trend = this.getTrend(Number(projectId));\n\n    if (trend === null) {\n      return '\\u2014';\n    }\n\n    return (\n      <SubText color={trend >= 0 ? 'green300' : 'red300'}>\n        {`${round(Math.abs(trend), 3)}\\u0025`}\n        <PaddedIconArrow direction={trend >= 0 ? 'up' : 'down'} size=\"xs\" />\n      </SubText>\n    );\n  }\n\n  renderBody() {\n    const {organization, projects, period} = this.props;\n\n    const sortedProjects = projects\n      .map(project => ({project, trend: this.getTrend(Number(project.id)) ?? 0}))\n      .sort((a, b) => Math.abs(b.trend) - Math.abs(a.trend));\n\n    const groupedProjects = groupByTrend(sortedProjects);\n\n    return (\n      <SessionsRequest\n        api={this.api}\n        project={projects.map(({id}) => Number(id))}\n        organization={organization}\n        interval=\"1d\"\n        groupBy={['session.status', 'project']}\n        field={[SessionFieldWithOperation.SESSIONS]}\n        statsPeriod={period}\n      >\n        {({response, loading}) => (\n          <StyledPanelTable\n            isEmpty={projects.length === 0}\n            emptyMessage={t('No projects with release health enabled')}\n            emptyAction={\n              <Button\n                size=\"sm\"\n                external\n                href=\"https://docs.sentry.io/platforms/dotnet/guides/nlog/configuration/releases/#release-health\"\n              >\n                {t('Learn More')}\n              </Button>\n            }\n            headers={[\n              t('Project'),\n              <RightAligned key=\"last\">{tct('Last [period]', {period})}</RightAligned>,\n              <RightAligned key=\"avg\">{tct('[period] Avg', {period})}</RightAligned>,\n              <RightAligned key=\"curr\">{t('Last 7 Days')}</RightAligned>,\n              <RightAligned key=\"diff\">{t('Difference')}</RightAligned>,\n            ]}\n          >\n            {groupedProjects.map(({project}) => (\n              <Fragment key={project.id}>\n                <ProjectBadgeContainer>\n                  <ProjectBadge avatarSize={18} project={project} />\n                </ProjectBadgeContainer>\n\n                <div>\n                  {response && !loading && (\n                    <MiniBarChart\n                      isGroupedByDate\n                      showTimeInTooltip\n                      series={this.getMiniBarChartSeries(project, response)}\n                      height={25}\n                      tooltipFormatter={(value: number) => `${value.toLocaleString()}%`}\n                    />\n                  )}\n                </div>\n                <ScoreWrapper>{this.renderScore(project.id, 'period')}</ScoreWrapper>\n                <ScoreWrapper>{this.renderScore(project.id, 'week')}</ScoreWrapper>\n                <ScoreWrapper>{this.renderTrend(project.id)}</ScoreWrapper>\n              </Fragment>\n            ))}\n          </StyledPanelTable>\n        )}\n      </SessionsRequest>\n    );\n  }\n}\n\nexport default TeamStability;\n\nconst StyledPanelTable = styled(PanelTable)<{isEmpty: boolean}>`\n  grid-template-columns: 1fr 0.2fr 0.2fr 0.2fr 0.2fr;\n  font-size: ${p => p.theme.fontSizeMedium};\n  white-space: nowrap;\n  margin-bottom: 0;\n  border: 0;\n  box-shadow: unset;\n  /* overflow when bar chart tooltip gets cutoff for the top row */\n  overflow: visible;\n\n  & > div {\n    padding: ${space(1)} ${space(2)};\n  }\n\n  ${p =>\n    p.isEmpty &&\n    css`\n      & > div:last-child {\n        padding: 48px ${space(2)};\n      }\n    `}\n`;\n\nconst RightAligned = styled('span')`\n  text-align: right;\n`;\n\nconst ScoreWrapper = styled('div')`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  text-align: right;\n`;\n\nconst PaddedIconArrow = styled(IconArrow)`\n  margin: 0 ${space(0.5)};\n`;\n\nconst SubText = styled('div')<{color: Color}>`\n  color: ${p => p.theme[p.color]};\n`;\n","import styled from '@emotion/styled';\nimport {LocationDescriptor, Query} from 'history';\n\nimport space from 'sentry/styles/space';\nimport {Organization} from 'sentry/types';\nimport {TableDataRow} from 'sentry/utils/discover/discoverQuery';\nimport {generateEventSlug} from 'sentry/utils/discover/urls';\nimport {getTransactionDetailsUrl} from 'sentry/utils/performance/urls';\nimport {MutableSearch} from 'sentry/utils/tokenizeSearch';\nimport {getTraceDetailsUrl} from 'sentry/views/performance/traceDetails/utils';\n\nimport {DisplayModes} from './transactionOverview/charts';\n\nexport enum TransactionFilterOptions {\n  FASTEST = 'fastest',\n  SLOW = 'slow',\n  OUTLIER = 'outlier',\n  RECENT = 'recent',\n}\n\nexport function generateTransactionSummaryRoute({orgSlug}: {orgSlug: String}): string {\n  return `/organizations/${orgSlug}/performance/summary/`;\n}\n\n// normalizes search conditions by removing any redundant search conditions before presenting them in:\n// - query strings\n// - search UI\nexport function normalizeSearchConditions(query: string): MutableSearch {\n  const filterParams = normalizeSearchConditionsWithTransactionName(query);\n\n  // no need to include transaction as its already in the query params\n  filterParams.removeFilter('transaction');\n\n  return filterParams;\n}\n\n// normalizes search conditions by removing any redundant search conditions, but retains any transaction name\nexport function normalizeSearchConditionsWithTransactionName(\n  query: string\n): MutableSearch {\n  const filterParams = new MutableSearch(query);\n\n  // remove any event.type queries since it is implied to apply to only transactions\n  filterParams.removeFilter('event.type');\n\n  return filterParams;\n}\n\nexport function transactionSummaryRouteWithQuery({\n  orgSlug,\n  transaction,\n  projectID,\n  query,\n  unselectedSeries = 'p100()',\n  display,\n  trendFunction,\n  trendColumn,\n  showTransactions,\n  additionalQuery,\n}: {\n  orgSlug: string;\n  query: Query;\n  transaction: string;\n  additionalQuery?: Record<string, string>;\n  display?: DisplayModes;\n  projectID?: string | string[];\n  showTransactions?: TransactionFilterOptions;\n  trendColumn?: string;\n  trendFunction?: string;\n  unselectedSeries?: string | string[];\n}) {\n  const pathname = generateTransactionSummaryRoute({\n    orgSlug,\n  });\n\n  let searchFilter: typeof query.query;\n  if (typeof query.query === 'string') {\n    searchFilter = normalizeSearchConditions(query.query).formatString();\n  } else {\n    searchFilter = query.query;\n  }\n\n  return {\n    pathname,\n    query: {\n      transaction,\n      project: projectID,\n      environment: query.environment,\n      statsPeriod: query.statsPeriod,\n      start: query.start,\n      end: query.end,\n      query: searchFilter,\n      unselectedSeries,\n      showTransactions,\n      display,\n      trendFunction,\n      trendColumn,\n      ...additionalQuery,\n    },\n  };\n}\n\nexport function generateTraceLink(dateSelection) {\n  return (\n    organization: Organization,\n    tableRow: TableDataRow,\n    _query: Query\n  ): LocationDescriptor => {\n    const traceId = `${tableRow.trace}`;\n    if (!traceId) {\n      return {};\n    }\n\n    return getTraceDetailsUrl(organization, traceId, dateSelection, {});\n  };\n}\n\nexport function generateTransactionLink(transactionName: string) {\n  return (\n    organization: Organization,\n    tableRow: TableDataRow,\n    query: Query,\n    spanId?: string\n  ): LocationDescriptor => {\n    const eventSlug = generateEventSlug(tableRow);\n    return getTransactionDetailsUrl(\n      organization.slug,\n      eventSlug,\n      transactionName,\n      query,\n      spanId\n    );\n  };\n}\n\nexport const SidebarSpacer = styled('div')`\n  margin-top: ${space(3)};\n`;\n","var isSymbol = require('./isSymbol');\n\n/**\n * The base implementation of methods like `_.max` and `_.min` which accepts a\n * `comparator` to determine the extremum value.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The iteratee invoked per iteration.\n * @param {Function} comparator The comparator used to compare values.\n * @returns {*} Returns the extremum value.\n */\nfunction baseExtremum(array, iteratee, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index],\n        current = iteratee(value);\n\n    if (current != null && (computed === undefined\n          ? (current === current && !isSymbol(current))\n          : comparator(current, computed)\n        )) {\n      var computed = current,\n          result = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseExtremum;\n","/**\n * The base implementation of `_.gt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is greater than `other`,\n *  else `false`.\n */\nfunction baseGt(value, other) {\n  return value > other;\n}\n\nmodule.exports = baseGt;\n","var baseSum = require('./_baseSum');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/**\n * The base implementation of `_.mean` and `_.meanBy` without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {number} Returns the mean.\n */\nfunction baseMean(array, iteratee) {\n  var length = array == null ? 0 : array.length;\n  return length ? (baseSum(array, iteratee) / length) : NAN;\n}\n\nmodule.exports = baseMean;\n","/**\n * The base implementation of `_.sum` and `_.sumBy` without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {number} Returns the sum.\n */\nfunction baseSum(array, iteratee) {\n  var result,\n      index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var current = iteratee(array[index]);\n    if (current !== undefined) {\n      result = result === undefined ? current : (result + current);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseSum;\n","var baseExtremum = require('./_baseExtremum'),\n    baseGt = require('./_baseGt'),\n    baseIteratee = require('./_baseIteratee');\n\n/**\n * This method is like `_.max` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * the value is ranked. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {*} Returns the maximum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * _.maxBy(objects, function(o) { return o.n; });\n * // => { 'n': 2 }\n *\n * // The `_.property` iteratee shorthand.\n * _.maxBy(objects, 'n');\n * // => { 'n': 2 }\n */\nfunction maxBy(array, iteratee) {\n  return (array && array.length)\n    ? baseExtremum(array, baseIteratee(iteratee, 2), baseGt)\n    : undefined;\n}\n\nmodule.exports = maxBy;\n","var baseMean = require('./_baseMean'),\n    identity = require('./identity');\n\n/**\n * Computes the mean of the values in `array`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {number} Returns the mean.\n * @example\n *\n * _.mean([4, 2, 8, 6]);\n * // => 5\n */\nfunction mean(array) {\n  return baseMean(array, identity);\n}\n\nmodule.exports = mean;\n","/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that negates the result of the predicate `func`. The\n * `func` predicate is invoked with the `this` binding and arguments of the\n * created function.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {Function} predicate The predicate to negate.\n * @returns {Function} Returns the new negated function.\n * @example\n *\n * function isEven(n) {\n *   return n % 2 == 0;\n * }\n *\n * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n * // => [1, 3, 5]\n */\nfunction negate(predicate) {\n  if (typeof predicate != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  return function() {\n    var args = arguments;\n    switch (args.length) {\n      case 0: return !predicate.call(this);\n      case 1: return !predicate.call(this, args[0]);\n      case 2: return !predicate.call(this, args[0], args[1]);\n      case 3: return !predicate.call(this, args[0], args[1], args[2]);\n    }\n    return !predicate.apply(this, args);\n  };\n}\n\nmodule.exports = negate;\n","var baseIteratee = require('./_baseIteratee'),\n    negate = require('./negate'),\n    pickBy = require('./pickBy');\n\n/**\n * The opposite of `_.pickBy`; this method creates an object composed of\n * the own and inherited enumerable string keyed properties of `object` that\n * `predicate` doesn't return truthy for. The predicate is invoked with two\n * arguments: (value, key).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The source object.\n * @param {Function} [predicate=_.identity] The function invoked per property.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omitBy(object, _.isNumber);\n * // => { 'b': '2' }\n */\nfunction omitBy(object, predicate) {\n  return pickBy(object, negate(baseIteratee(predicate)));\n}\n\nmodule.exports = omitBy;\n"],"names":["withApi","GenericDiscoverQuery","shouldRefetchData","prevProps","nextProps","transactionName","transactionThreshold","transactionThresholdMetric","DiscoverQuery","props","endpoint","useEvents","afterFetch","data","_","fields","otherMeta","meta","undefined","spanTargetHash","defined","getTransactionDetailsUrl","orgSlug","eventSlug","transaction","query","spanId","locationQuery","target","pathname","hash","Fragment","useEffect","Layout","LoadingIndicator","NoProjectMessage","SentryDocumentTitle","t","trackAdvancedAnalyticsEvent","localStorage","useOrganization","useTeams","Header","TeamStatsControls","DescriptionCard","TeamAlertsTriggered","TeamMisery","TeamReleases","TeamStability","dataDatetime","TeamStatsHealth","location","router","organization","teams","initiallyLoaded","provideUserTeams","localStorageKey","slug","localTeamId","team","getItem","find","id","currentTeamId","currentTeam","projects","period","start","end","utc","length","toString","Body","p","theme","breakpoints","medium","css","round","AsyncComponent","Button","BarChart","Link","normalizeDateTimeParams","PanelTable","IconArrow","tct","space","formatPercentage","ProjectBadge","ProjectBadgeContainer","barAxisLabel","convertDayValueObjectToSeries","sortSeriesByDay","getDefaultState","alertsTriggered","alertsTriggeredRules","getEndpoints","teamSlug","datetime","componentDidUpdate","remountComponent","renderTrend","rule","weeklyAvg","totalThisWeek","diff","Math","abs","renderLoading","renderBody","state","seriesData","height","right","top","minInterval","seriesName","silent","barCategoryGap","map","project","name","ChartWrapper","border","StyledPanelTable","fontSizeMedium","isEmpty","AlertNameContainer","overflowEllipsis","AlignRight","PaddedIconArrow","SubText","color","ButtonsContainer","CollapsePanel","COLLAPSE_COUNT","LoadingError","IconStar","EventView","getFieldRenderer","transactionSummaryRouteWithQuery","groupByTrend","periodTableData","weekTableData","isLoading","error","miseryRenderer","sortedTableData","dataRow","weekRow","row","trend","filter","x","sort","a","b","groupedData","isExpanded","showMoreButton","idx","projectId","periodMisery","weekMisery","trendValue","projectID","TeamMiseryWrapper","teamId","commonEventView","version","orderby","Number","periodEventView","fromSavedQuery","range","weekEventView","tableData","isWeekLoading","weekError","FlexCenter","KeyTransactionTitleWrapper","StyledIconStar","TransactionWrapper","RightAligned","ScoreWrapper","subText","TrendText","withTheme","isEqual","moment","MarkLine","Placeholder","weekReleases","periodReleases","endpoints","statsPeriod","getReleaseCount","dataset","releasesPeriod","last_week_totals","project_avgs","count","ceil","getTrend","periodCount","weekCount","renderReleaseCount","loading","sortedProjects","groupedProjects","Object","entries","release_counts","bucket","value","Date","getTime","averageValues","values","projectAvgSum","reduce","total","currentData","totalPeriodAverage","markLine","lineStyle","gray200","type","width","yAxis","label","show","formatter","seriesParams","series","Array","isArray","dateFormat","startDate","format","endDate","add","marker","join","MiniBarChart","SessionsRequest","SessionFieldWithOperation","SessionStatus","formatFloat","getCountSeries","getCrashFreeRate","getSeriesSum","displayCrashFreePercent","weekSessions","periodSessions","projectsWithSessions","hasSessions","commonQuery","environment","field","groupBy","interval","getScore","sessions","projectGroups","groups","group","by","SESSIONS","periodScore","weekScore","getMiniBarChartSeries","response","sumSessions","intervals","countSeries","g","HEALTHY","countSeriesWeeklyTotals","fill","forEach","s","floor","sumSessionsWeeklyTotals","renderScore","score","api","toLocaleString","generateEventSlug","MutableSearch","getTraceDetailsUrl","TransactionFilterOptions","generateTransactionSummaryRoute","normalizeSearchConditions","filterParams","normalizeSearchConditionsWithTransactionName","removeFilter","unselectedSeries","display","trendFunction","trendColumn","showTransactions","additionalQuery","searchFilter","formatString","generateTraceLink","dateSelection","tableRow","_query","traceId","trace","generateTransactionLink","SidebarSpacer"],"sourceRoot":""}