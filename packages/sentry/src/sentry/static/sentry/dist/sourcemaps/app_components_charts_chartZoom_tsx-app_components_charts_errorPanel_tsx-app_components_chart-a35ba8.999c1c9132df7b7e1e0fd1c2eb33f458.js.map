{"version":3,"file":"chunks/app_components_charts_chartZoom_tsx-app_components_charts_errorPanel_tsx-app_components_chart-a35ba8.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/charts/chartZoom.tsx","webpack:///./app/components/charts/components/dataZoomInside.tsx","webpack:///./app/components/charts/components/dataZoomSlider.tsx","webpack:///./app/components/charts/components/toolBox.tsx","webpack:///./app/components/charts/components/visualMap.tsx","webpack:///./app/components/charts/errorPanel.tsx","webpack:///./app/components/charts/lineChart.tsx","webpack:///./app/components/charts/series/mapSeries.tsx","webpack:///./app/components/charts/transitionChart.tsx","webpack:///./app/components/charts/transparentLoadingMask.tsx","webpack:///./app/components/charts/worldMapChart.tsx","webpack:///./app/utils/touch.tsx","webpack:///./app/utils/userselect.tsx","webpack:///./app/views/dashboardsV2/widgetBuilder/issueWidget/fields.tsx","webpack:///./app/views/eventsV2/table/columnEditCollection.tsx","webpack:///./app/views/eventsV2/table/topResultsIndicator.tsx"],"sourcesContent":["import {Component} from 'react';\nimport {InjectedRouter} from 'react-router';\nimport type {\n  DataZoomComponentOption,\n  InsideDataZoomComponentOption,\n  ToolboxComponentOption,\n  XAXisComponentOption,\n} from 'echarts';\nimport moment from 'moment';\nimport * as qs from 'query-string';\n\nimport {updateDateTime} from 'sentry/actionCreators/pageFilters';\nimport DataZoomInside from 'sentry/components/charts/components/dataZoomInside';\nimport DataZoomSlider from 'sentry/components/charts/components/dataZoomSlider';\nimport ToolBox from 'sentry/components/charts/components/toolBox';\nimport {DateString} from 'sentry/types';\nimport {\n  EChartChartReadyHandler,\n  EChartDataZoomHandler,\n  EChartFinishedHandler,\n  EChartRestoreHandler,\n} from 'sentry/types/echarts';\nimport {callIfFunction} from 'sentry/utils/callIfFunction';\nimport {getUtcDateString, getUtcToLocalDateObject} from 'sentry/utils/dates';\n\nconst getDate = date =>\n  date ? moment.utc(date).format(moment.HTML5_FMT.DATETIME_LOCAL_SECONDS) : null;\n\ntype Period = {\n  end: DateString;\n  period: string | null;\n  start: DateString;\n};\n\nconst ZoomPropKeys = [\n  'period',\n  'xAxis',\n  'onChartReady',\n  'onDataZoom',\n  'onRestore',\n  'onFinished',\n] as const;\n\nexport type ZoomRenderProps = Pick<Props, typeof ZoomPropKeys[number]> & {\n  dataZoom?: DataZoomComponentOption[];\n  end?: Date;\n  isGroupedByDate?: boolean;\n  showTimeInTooltip?: boolean;\n  start?: Date;\n  toolBox?: ToolboxComponentOption;\n  utc?: boolean;\n};\n\ntype Props = {\n  children: (props: ZoomRenderProps) => React.ReactNode;\n  chartZoomOptions?: DataZoomComponentOption;\n  disabled?: boolean;\n  end?: DateString;\n  onChartReady?: EChartChartReadyHandler;\n  onDataZoom?: EChartDataZoomHandler;\n  onFinished?: EChartFinishedHandler;\n  onRestore?: EChartRestoreHandler;\n  onZoom?: (period: Period) => void;\n  period?: string | null;\n  router?: InjectedRouter;\n  showSlider?: boolean;\n  start?: DateString;\n  usePageDate?: boolean;\n  utc?: boolean | null;\n  xAxis?: XAXisComponentOption;\n  xAxisIndex?: number | number[];\n};\n\n/**\n * This is a very opinionated component that takes a render prop through `children`. It\n * will provide props to be passed to `BaseChart` to enable support of zooming without\n * eCharts' clunky zoom toolboxes.\n *\n * This also is very tightly coupled with the Global Selection Header. We can make it more\n * generic if need be in the future.\n */\nclass ChartZoom extends Component<Props> {\n  constructor(props: Props) {\n    super(props);\n\n    // Zoom history\n    this.history = [];\n\n    // Initialize current period instance state for zoom history\n    this.saveCurrentPeriod(props);\n  }\n\n  componentDidUpdate() {\n    if (this.props.disabled) {\n      return;\n    }\n\n    // When component updates, make sure we sync current period state\n    // for use in zoom history\n    this.saveCurrentPeriod(this.props);\n  }\n\n  history: Period[];\n  currentPeriod?: Period;\n  zooming: (() => void) | null = null;\n\n  /**\n   * Save current period state from period in props to be used\n   * in handling chart's zoom history state\n   */\n  saveCurrentPeriod = props => {\n    this.currentPeriod = {\n      period: props.period,\n      start: getDate(props.start),\n      end: getDate(props.end),\n    };\n  };\n\n  /**\n   * Sets the new period due to a zoom related action\n   *\n   * Saves the current period to an instance property so that we\n   * can control URL state when zoom history is being manipulated\n   * by the chart controls.\n   *\n   * Saves a callback function to be called after chart animation is completed\n   */\n  setPeriod = ({period, start, end}, saveHistory = false) => {\n    const {router, onZoom, usePageDate} = this.props;\n    const startFormatted = getDate(start);\n    const endFormatted = getDate(end);\n\n    // Save period so that we can revert back to it when using echarts \"back\" navigation\n    if (saveHistory) {\n      this.history.push(this.currentPeriod!);\n    }\n\n    // Callback to let parent component know zoom has changed\n    // This is required for some more perceived responsiveness since\n    // we delay updating URL state so that chart animation can finish\n    //\n    // Parent container can use this to change into a loading state before\n    // URL parameters are changed\n    callIfFunction(onZoom, {\n      period,\n      start: startFormatted,\n      end: endFormatted,\n    });\n\n    this.zooming = () => {\n      if (usePageDate && router) {\n        const newQuery = {\n          ...router.location.query,\n          pageStart: start ? getUtcDateString(start) : undefined,\n          pageEnd: end ? getUtcDateString(end) : undefined,\n          pageStatsPeriod: period ?? undefined,\n        };\n\n        // Only push new location if query params has changed because this will cause a heavy re-render\n        if (qs.stringify(newQuery) !== qs.stringify(router.location.query)) {\n          router.push({\n            pathname: router.location.pathname,\n            query: newQuery,\n          });\n        }\n      } else {\n        updateDateTime(\n          {\n            period,\n            start: startFormatted\n              ? getUtcToLocalDateObject(startFormatted)\n              : startFormatted,\n            end: endFormatted ? getUtcToLocalDateObject(endFormatted) : endFormatted,\n          },\n          router\n        );\n      }\n\n      this.saveCurrentPeriod({period, start, end});\n    };\n  };\n\n  /**\n   * Enable zoom immediately instead of having to toggle to zoom\n   */\n  handleChartReady = chart => {\n    callIfFunction(this.props.onChartReady, chart);\n  };\n\n  /**\n   * Restores the chart to initial viewport/zoom level\n   *\n   * Updates URL state to reflect initial params\n   */\n  handleZoomRestore = (evt, chart) => {\n    if (!this.history.length) {\n      return;\n    }\n\n    this.setPeriod(this.history[0]);\n\n    // reset history\n    this.history = [];\n\n    callIfFunction(this.props.onRestore, evt, chart);\n  };\n\n  handleDataZoom = (evt, chart) => {\n    const model = chart.getModel();\n    const {startValue, endValue} = model._payload.batch[0];\n\n    // if `rangeStart` and `rangeEnd` are null, then we are going back\n    if (startValue === null && endValue === null) {\n      const previousPeriod = this.history.pop();\n\n      if (!previousPeriod) {\n        return;\n      }\n\n      this.setPeriod(previousPeriod);\n    } else {\n      const start = moment.utc(startValue);\n\n      // Add a day so we go until the end of the day (e.g. next day at midnight)\n      const end = moment.utc(endValue);\n\n      this.setPeriod({period: null, start, end}, true);\n    }\n\n    callIfFunction(this.props.onDataZoom, evt, chart);\n  };\n\n  /**\n   * Chart event when *any* rendering+animation finishes\n   *\n   * `this.zooming` acts as a callback function so that\n   * we can let the native zoom animation on the chart complete\n   * before we update URL state and re-render\n   */\n  handleChartFinished = (_props, chart) => {\n    if (typeof this.zooming === 'function') {\n      this.zooming();\n      this.zooming = null;\n    }\n\n    // This attempts to activate the area zoom toolbox feature\n    const zoom = chart._componentsViews?.find(c => c._features && c._features.dataZoom);\n    if (zoom && !zoom._features.dataZoom._isZoomActive) {\n      // Calling dispatchAction will re-trigger handleChartFinished\n      chart.dispatchAction({\n        type: 'takeGlobalCursor',\n        key: 'dataZoomSelect',\n        dataZoomSelectActive: true,\n      });\n    }\n\n    callIfFunction(this.props.onFinished);\n  };\n\n  render() {\n    const {\n      utc: _utc,\n      start: _start,\n      end: _end,\n      disabled,\n      children,\n      xAxisIndex,\n\n      router: _router,\n      onZoom: _onZoom,\n      onRestore: _onRestore,\n      onChartReady: _onChartReady,\n      onDataZoom: _onDataZoom,\n      onFinished: _onFinished,\n      showSlider,\n      chartZoomOptions,\n      ...props\n    } = this.props;\n\n    const utc = _utc ?? undefined;\n    const start = _start ? getUtcToLocalDateObject(_start) : undefined;\n    const end = _end ? getUtcToLocalDateObject(_end) : undefined;\n\n    if (disabled) {\n      return children({\n        utc,\n        start,\n        end,\n        ...props,\n      });\n    }\n    const renderProps = {\n      // Zooming only works when grouped by date\n      isGroupedByDate: true,\n      onChartReady: this.handleChartReady,\n      utc,\n      start,\n      end,\n      dataZoom: showSlider\n        ? [\n            ...DataZoomSlider({xAxisIndex, ...chartZoomOptions}),\n            ...DataZoomInside({\n              xAxisIndex,\n              ...(chartZoomOptions as InsideDataZoomComponentOption),\n            }),\n          ]\n        : DataZoomInside({\n            xAxisIndex,\n            ...(chartZoomOptions as InsideDataZoomComponentOption),\n          }),\n      showTimeInTooltip: true,\n      toolBox: ToolBox(\n        {},\n        {\n          dataZoom: {\n            title: {\n              zoom: '',\n              back: '',\n            },\n            iconStyle: {\n              borderWidth: 0,\n              color: 'transparent',\n              opacity: 0,\n            },\n          },\n        }\n      ),\n      onDataZoom: this.handleDataZoom,\n      onFinished: this.handleChartFinished,\n      onRestore: this.handleZoomRestore,\n      ...props,\n    };\n\n    return children(renderProps);\n  }\n}\n\nexport default ChartZoom;\n","import 'echarts/lib/component/dataZoomInside';\n\nimport type {InsideDataZoomComponentOption} from 'echarts';\n\nconst DEFAULT: InsideDataZoomComponentOption = {\n  type: 'inside',\n  // Mouse wheel can not trigger zoom\n  zoomOnMouseWheel: false,\n  // The translation (by mouse drag or touch drag) is available but zoom is not\n  zoomLock: true,\n  throttle: 50,\n};\n\nexport default function DataZoomInside(\n  props: InsideDataZoomComponentOption | InsideDataZoomComponentOption[]\n): InsideDataZoomComponentOption[] {\n  // `props` can be boolean, if so return default\n  if (!props || !Array.isArray(props)) {\n    const dataZoom = {\n      ...DEFAULT,\n      ...props,\n    };\n    return [dataZoom];\n  }\n\n  return props;\n}\n","import 'echarts/lib/component/dataZoomSlider';\n\nimport type {SliderDataZoomComponentOption} from 'echarts';\n\nconst DEFAULT: SliderDataZoomComponentOption = {\n  realtime: false,\n  showDetail: false,\n  left: 0,\n  right: 6,\n  bottom: 8,\n};\n\nexport default function DataZoomSlider(\n  props: SliderDataZoomComponentOption | SliderDataZoomComponentOption[]\n): SliderDataZoomComponentOption[] {\n  // `props` can be boolean, if so return default\n  if (!props || !Array.isArray(props)) {\n    const dataZoom = {\n      ...DEFAULT,\n      ...props,\n    };\n    return [dataZoom];\n  }\n\n  return props;\n}\n","import type {ToolboxComponentOption} from 'echarts';\n\nfunction getFeatures({\n  dataZoom,\n  ...features\n}: ToolboxComponentOption['feature'] = {}): ToolboxComponentOption['feature'] {\n  return {\n    ...(dataZoom\n      ? {\n          dataZoom: {\n            yAxisIndex: 'none',\n            title: {\n              zoom: 'zoom',\n              back: 'undo',\n            },\n            ...dataZoom,\n          },\n        }\n      : {}),\n    ...features,\n  };\n}\n\nexport default function ToolBox(\n  options: ToolboxComponentOption,\n  features: ToolboxComponentOption['feature']\n): ToolboxComponentOption {\n  return {\n    right: 0,\n    top: 0,\n    itemSize: 16,\n    // Stack the toolbox under the legend.\n    // so all series names are clickable.\n    z: -1,\n\n    feature: getFeatures(features),\n    ...options,\n  };\n}\n","import 'echarts/lib/component/visualMap';\n\nimport type {VisualMapComponentOption} from 'echarts';\n\nexport default function VisualMap(\n  visualMap: VisualMapComponentOption\n): VisualMapComponentOption {\n  return visualMap;\n}\n","import styled from '@emotion/styled';\n\nconst ErrorPanel = styled('div')<{height?: string}>`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  flex: 1;\n  flex-shrink: 0;\n  overflow: hidden;\n  height: ${p => p.height || '200px'};\n  position: relative;\n  border-color: transparent;\n  margin-bottom: 0;\n  color: ${p => p.theme.gray300};\n  font-size: ${p => p.theme.fontSizeExtraLarge};\n`;\n\nexport default ErrorPanel;\n","import type {LineSeriesOption} from 'echarts';\n\nimport {Series} from 'sentry/types/echarts';\n\nimport LineSeries from './series/lineSeries';\nimport BaseChart from './baseChart';\n\ntype ChartProps = Omit<React.ComponentProps<typeof BaseChart>, 'css'>;\n\nexport type LineChartSeries = Series &\n  Omit<LineSeriesOption, 'data' | 'name'> & {\n    dataArray?: LineSeriesOption['data'];\n  };\n\nexport interface LineChartProps extends Omit<ChartProps, 'series'> {\n  series: LineChartSeries[];\n  seriesOptions?: LineSeriesOption;\n}\n\nexport function LineChart({series, seriesOptions, ...props}: LineChartProps) {\n  return (\n    <BaseChart\n      {...props}\n      series={series.map(({seriesName, data, dataArray, ...options}) =>\n        LineSeries({\n          ...seriesOptions,\n          ...options,\n          name: seriesName,\n          data: dataArray || data?.map(({value, name}) => [name, value]),\n          animation: false,\n          animationThreshold: 1,\n          animationDuration: 0,\n        })\n      )}\n    />\n  );\n}\n","import 'echarts/lib/chart/map';\n\nimport type {MapSeriesOption} from 'echarts';\n\nexport default function MapSeries(props: MapSeriesOption = {map: ''}): MapSeriesOption {\n  return {\n    roam: true,\n    ...props,\n    emphasis: {\n      label: {show: false},\n      ...props.emphasis,\n    },\n    type: 'map',\n  };\n}\n","import {Component, Fragment} from 'react';\n\nimport LoadingPanel from 'sentry/components/charts/loadingPanel';\n\nconst defaultProps = {\n  height: '200px',\n};\n\ntype Props = {\n  loading: boolean;\n  reloading: boolean;\n} & typeof defaultProps;\n\ntype State = {\n  key: number;\n  prevLoading: boolean;\n  prevReloading: boolean;\n};\n\nclass TransitionChart extends Component<Props, State> {\n  static defaultProps = defaultProps;\n\n  state: State = {\n    prevReloading: this.props.reloading,\n    prevLoading: this.props.loading,\n    key: 1,\n  };\n\n  static getDerivedStateFromProps(props: Readonly<Props>, state: State) {\n    // Transitions are controlled using variables called:\n    // - loading and,\n    // - reloading (also called pending in other apps)\n    //\n    // This component remounts the chart to ensure the stable transition\n    // from one dataset to the next.\n\n    const prevReloading = state.prevReloading;\n    const nextReloading = props.reloading;\n\n    const prevLoading = state.prevLoading;\n    const nextLoading = props.loading;\n\n    // whenever loading changes, we explicitly remount the children by updating\n    // the key prop; regardless of what state reloading is in\n    if (prevLoading !== nextLoading) {\n      return {\n        prevReloading: nextReloading,\n        prevLoading: nextLoading,\n        key: state.key + 1,\n      };\n    }\n\n    // invariant: prevLoading === nextLoading\n\n    // if loading is true, and hasn't changed from the previous re-render,\n    // do not remount the children.\n    if (nextLoading) {\n      return {\n        prevReloading: nextReloading,\n        prevLoading: nextLoading,\n        key: state.key,\n      };\n    }\n\n    // invariant: loading is false\n\n    // whenever the chart is transitioning from the reloading (pending) state to a non-loading state,\n    // remount the children\n    if (prevReloading && !nextReloading) {\n      return {\n        prevReloading: nextReloading,\n        prevLoading: nextLoading,\n        key: state.key + 1,\n      };\n    }\n\n    // do not remount the children in these remaining cases:\n    // !prevReloading && !nextReloading (re-render with no prop change)\n    // prevReloading && nextReloading (re-render with no prop change)\n    // !prevReloading && nextReloading (from loaded to pending state)\n\n    return {\n      prevReloading: nextReloading,\n      prevLoading: nextLoading,\n      key: state.key,\n    };\n  }\n\n  render() {\n    const {height, loading, reloading} = this.props;\n\n    if (loading && !reloading) {\n      return <LoadingPanel height={height} data-test-id=\"events-request-loading\" />;\n    }\n\n    // We make use of the key prop to explicitly remount the children\n    // https://reactjs.org/docs/lists-and-keys.html#keys\n    return <Fragment key={String(this.state.key)}>{this.props.children}</Fragment>;\n  }\n}\n\nexport default TransitionChart;\n","import styled from '@emotion/styled';\n\nimport LoadingMask, {LoadingMaskProps} from 'sentry/components/loadingMask';\n\ninterface TransparentLoadingMaskProps extends LoadingMaskProps {\n  visible: boolean;\n  children?: React.ReactNode;\n  className?: string;\n}\n\nconst TransparentLoadingMask = styled(\n  ({className, visible, children, ...props}: TransparentLoadingMaskProps) => {\n    const other = visible ? {...props, 'data-test-id': 'loading-placeholder'} : props;\n    return (\n      <LoadingMask className={className} {...other}>\n        {children}\n      </LoadingMask>\n    );\n  }\n)<TransparentLoadingMaskProps>`\n  ${p => !p.visible && 'display: none;'};\n  opacity: 0.4;\n  z-index: 1;\n`;\n\nexport default TransparentLoadingMask;\n","import {useEffect, useState} from 'react';\nimport {useTheme} from '@emotion/react';\nimport type {MapSeriesOption, TooltipComponentOption} from 'echarts';\nimport * as echarts from 'echarts/core';\nimport max from 'lodash/max';\n\nimport {Series, SeriesDataUnit} from 'sentry/types/echarts';\n\nimport VisualMap from './components/visualMap';\nimport MapSeries from './series/mapSeries';\nimport BaseChart from './baseChart';\n\ntype ChartProps = Omit<React.ComponentProps<typeof BaseChart>, 'css'>;\n\ntype MapChartSeriesDataUnit = Omit<SeriesDataUnit, 'name' | 'itemStyle'> & {\n  // Docs for map itemStyle differ from Series data unit. See https://echarts.apache.org/en/option.html#series-map.data.itemStyle\n  itemStyle?: MapSeriesOption['itemStyle'];\n  name?: string;\n};\n\ntype MapChartSeries = Omit<Series, 'data'> & {\n  data: MapChartSeriesDataUnit[];\n};\n\nexport interface WorldMapChartProps extends Omit<ChartProps, 'series'> {\n  series: MapChartSeries[];\n  fromDiscover?: boolean;\n  fromDiscoverQueryList?: boolean;\n  seriesOptions?: MapSeriesOption;\n}\n\ntype JSONResult = Record<string, any>;\n\ntype State = {\n  codeToCountryMap: JSONResult | null;\n  countryToCodeMap: JSONResult | null;\n  map: JSONResult | null;\n};\n\nconst DEFAULT_ZOOM = 1.3;\nconst DISCOVER_ZOOM = 1.1;\nconst DISCOVER_QUERY_LIST_ZOOM = 0.9;\nconst DEFAULT_CENTER_X = 10.97;\nconst DISCOVER_QUERY_LIST_CENTER_Y = -12;\nconst DEFAULT_CENTER_Y = 9.71;\n\nexport function WorldMapChart({\n  series,\n  seriesOptions,\n  fromDiscover,\n  fromDiscoverQueryList,\n  ...props\n}: WorldMapChartProps) {\n  const theme = useTheme();\n  const [state, setState] = useState<State>(() => ({\n    countryToCodeMap: null,\n    map: null,\n    codeToCountryMap: null,\n  }));\n\n  useEffect(() => {\n    let unmounted = false;\n\n    if (!unmounted) {\n      loadWorldMap();\n    }\n\n    return () => {\n      unmounted = true;\n    };\n  }, []);\n\n  async function loadWorldMap() {\n    try {\n      const [countryCodesMap, world] = await Promise.all([\n        import('sentry/data/countryCodesMap'),\n        import('sentry/data/world.json'),\n      ]);\n\n      const countryToCodeMap = countryCodesMap.default;\n      const worldMap = world.default;\n\n      // Echarts not available in tests\n      echarts.registerMap?.('sentryWorld', worldMap as any);\n\n      const codeToCountryMap: Record<string, string> = {};\n\n      for (const country in worldMap) {\n        codeToCountryMap[countryToCodeMap[country]] = country;\n      }\n\n      setState({\n        countryToCodeMap,\n        map: worldMap,\n        codeToCountryMap,\n      });\n    } catch {\n      // do nothing\n    }\n  }\n\n  if (state.countryToCodeMap === null || state.map === null) {\n    return null;\n  }\n\n  const processedSeries = series.map(({seriesName, data, ...options}) =>\n    MapSeries({\n      ...seriesOptions,\n      ...options,\n      map: 'sentryWorld',\n      name: seriesName,\n      nameMap: state.countryToCodeMap ?? undefined,\n      aspectScale: 0.85,\n      zoom: fromDiscover\n        ? DISCOVER_ZOOM\n        : fromDiscoverQueryList\n        ? DISCOVER_QUERY_LIST_ZOOM\n        : DEFAULT_ZOOM,\n      center: [\n        DEFAULT_CENTER_X,\n        fromDiscoverQueryList ? DISCOVER_QUERY_LIST_CENTER_Y : DEFAULT_CENTER_Y,\n      ],\n      itemStyle: {\n        areaColor: theme.gray200,\n        borderColor: theme.backgroundSecondary,\n      },\n      emphasis: {\n        itemStyle: {\n          areaColor: theme.pink300,\n        },\n        label: {\n          show: false,\n        },\n      },\n      data,\n      silent: fromDiscoverQueryList,\n      roam: !fromDiscoverQueryList,\n    })\n  );\n\n  // TODO(billy):\n  // For absolute values, we want min/max to based on min/max of series\n  // Otherwise it should be 0-100\n  const maxValue = max(series.map(({data}) => max(data.map(({value}) => value)))) || 1;\n\n  const tooltipFormatter: TooltipComponentOption['formatter'] = (format: any) => {\n    const {marker, name, value} = Array.isArray(format) ? format[0] : format;\n    // If value is NaN, don't show anything because we won't have a country code either\n    if (isNaN(value as number)) {\n      return '';\n    }\n\n    // `value` should be a number\n    const formattedValue = typeof value === 'number' ? value.toLocaleString() : '';\n    const countryOrCode = state.codeToCountryMap?.[name as string] || name;\n\n    return [\n      `<div class=\"tooltip-series tooltip-series-solo\">\n               <div><span class=\"tooltip-label\">${marker} <strong>${countryOrCode}</strong></span> ${formattedValue}</div>\n            </div>`,\n      '<div class=\"tooltip-arrow\"></div>',\n    ].join('');\n  };\n\n  return (\n    <BaseChart\n      options={{\n        backgroundColor: fromDiscoverQueryList ? undefined : theme.background,\n        visualMap: [\n          VisualMap({\n            show: !fromDiscoverQueryList,\n            left: fromDiscover ? undefined : 'right',\n            right: fromDiscover ? 5 : undefined,\n            min: 0,\n            max: maxValue,\n            inRange: {\n              color: [theme.purple200, theme.purple300],\n            },\n            text: ['High', 'Low'],\n            textStyle: {\n              color: theme.textColor,\n            },\n\n            // Whether show handles, which can be dragged to adjust \"selected range\".\n            // False because the handles are pretty ugly\n            calculable: false,\n          }),\n        ],\n      }}\n      {...props}\n      yAxis={null}\n      xAxis={null}\n      series={processedSeries}\n      tooltip={{\n        formatter: tooltipFormatter,\n      }}\n      height={fromDiscover ? 400 : undefined}\n    />\n  );\n}\n","function isReactEvent(\n  maybe: MouseEvent | TouchEvent | React.MouseEvent | React.TouchEvent\n): maybe is React.MouseEvent | React.TouchEvent {\n  return 'nativeEvent' in maybe;\n}\n\n/**\n * Handle getting position out of both React and Raw DOM events\n * as both are handled here due to mousedown/mousemove events\n * working differently.\n */\nexport function getPointerPosition(\n  event: MouseEvent | TouchEvent | React.MouseEvent | React.TouchEvent,\n  property: 'pageX' | 'pageY' | 'clientX' | 'clientY'\n): number {\n  const actual = isReactEvent(event) ? event.nativeEvent : event;\n  if (window.TouchEvent && actual instanceof TouchEvent) {\n    return actual.targetTouches[0][property];\n  }\n  if (actual instanceof MouseEvent) {\n    return actual[property];\n  }\n  return 0;\n}\n","export type UserSelectValues = {\n  MozUserSelect: string | null;\n  msUserSelect: string | null;\n  userSelect: string | null;\n  webkitUserSelect: string | null;\n};\n\nexport const setBodyUserSelect = (nextValues: UserSelectValues): UserSelectValues => {\n  // NOTE: Vendor prefixes other than `ms` should begin with a capital letter.\n  // ref: https://reactjs.org/docs/dom-elements.html#style\n\n  const previousValues = {\n    userSelect: document.body.style.userSelect,\n    // MozUserSelect is not typed in TS\n    // @ts-expect-error\n    MozUserSelect: document.body.style.MozUserSelect,\n    // msUserSelect is not typed in TS\n    // @ts-expect-error\n    msUserSelect: document.body.style.msUserSelect,\n    webkitUserSelect: document.body.style.webkitUserSelect,\n  };\n\n  document.body.style.userSelect = nextValues.userSelect || '';\n  // MozUserSelect is not typed in TS\n  // @ts-expect-error\n  document.body.style.MozUserSelect = nextValues.MozUserSelect || '';\n  // msUserSelect is not typed in TS\n  // @ts-expect-error\n  document.body.style.msUserSelect = nextValues.msUserSelect || '';\n  document.body.style.webkitUserSelect = nextValues.webkitUserSelect || '';\n\n  return previousValues;\n};\n","export type ColumnType =\n  | 'boolean'\n  | 'date'\n  | 'duration'\n  | 'integer'\n  | 'number'\n  | 'percentage'\n  | 'string';\n\nexport enum FieldKey {\n  ASSIGNEE = 'assignee',\n  TITLE = 'title',\n  ISSUE = 'issue',\n  LEVEL = 'level',\n  STATUS = 'status',\n  PLATFORM = 'platform',\n  IS_BOOKMARKED = 'isBookmarked',\n  IS_SUBSCRIBED = 'isSubscribed',\n  IS_HANDLED = 'isHandled',\n  LAST_SEEN = 'lastSeen',\n  FIRST_SEEN = 'firstSeen',\n  EVENTS = 'events',\n  USERS = 'users',\n  LIFETIME_EVENTS = 'lifetimeEvents',\n  LIFETIME_USERS = 'lifetimeUsers',\n  PROJECT = 'project',\n  LINKS = 'links',\n}\n\nexport const ISSUE_FIELDS: Readonly<Record<FieldKey, ColumnType>> = {\n  [FieldKey.ASSIGNEE]: 'string',\n  [FieldKey.TITLE]: 'string',\n  [FieldKey.ISSUE]: 'string',\n  [FieldKey.LEVEL]: 'string',\n  [FieldKey.STATUS]: 'string',\n  [FieldKey.PLATFORM]: 'string',\n  [FieldKey.IS_BOOKMARKED]: 'boolean',\n  [FieldKey.IS_SUBSCRIBED]: 'boolean',\n  [FieldKey.IS_HANDLED]: 'boolean',\n  [FieldKey.LAST_SEEN]: 'date',\n  [FieldKey.FIRST_SEEN]: 'date',\n  [FieldKey.EVENTS]: 'string',\n  [FieldKey.USERS]: 'string',\n  [FieldKey.LIFETIME_EVENTS]: 'string',\n  [FieldKey.LIFETIME_USERS]: 'string',\n  [FieldKey.PROJECT]: 'string',\n  [FieldKey.LINKS]: 'string',\n};\n\nexport const ISSUE_FIELD_TO_HEADER_MAP = {\n  [FieldKey.LIFETIME_EVENTS]: 'Lifetime Events',\n  [FieldKey.LIFETIME_USERS]: 'Lifetime Users',\n};\n","import {Component, createRef, Fragment} from 'react';\nimport {createPortal} from 'react-dom';\nimport {css} from '@emotion/react';\nimport styled from '@emotion/styled';\n\nimport {parseArithmetic} from 'sentry/components/arithmeticInput/parser';\nimport Button from 'sentry/components/button';\nimport ButtonBar from 'sentry/components/buttonBar';\nimport {SectionHeading} from 'sentry/components/charts/styles';\nimport Input from 'sentry/components/input';\nimport {getOffsetOfElement} from 'sentry/components/performance/waterfall/utils';\nimport {IconAdd, IconDelete, IconGrabbable} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {Organization} from 'sentry/types';\nimport {trackAnalyticsEvent} from 'sentry/utils/analytics';\nimport {\n  AGGREGATIONS,\n  Column,\n  generateFieldAsString,\n  hasDuplicate,\n  isLegalEquationColumn,\n} from 'sentry/utils/discover/fields';\nimport theme from 'sentry/utils/theme';\nimport {getPointerPosition} from 'sentry/utils/touch';\nimport {setBodyUserSelect, UserSelectValues} from 'sentry/utils/userselect';\nimport {WidgetType} from 'sentry/views/dashboardsV2/types';\nimport {FieldKey} from 'sentry/views/dashboardsV2/widgetBuilder/issueWidget/fields';\nimport {SESSIONS_OPERATIONS} from 'sentry/views/dashboardsV2/widgetBuilder/releaseWidget/fields';\n\nimport {generateFieldOptions} from '../utils';\n\nimport {FieldValueOption, QueryField} from './queryField';\nimport {FieldValueKind} from './types';\n\ntype Sources = WidgetType;\n\ntype Props = {\n  // Input columns\n  columns: Column[];\n  fieldOptions: ReturnType<typeof generateFieldOptions>;\n  // Fired when columns are added/removed/modified\n  onChange: (columns: Column[]) => void;\n  organization: Organization;\n  className?: string;\n  filterAggregateParameters?: (option: FieldValueOption) => boolean;\n  filterPrimaryOptions?: (option: FieldValueOption) => boolean;\n  noFieldsMessage?: string;\n  showAliasField?: boolean;\n  source?: Sources;\n};\n\ntype State = {\n  draggingGrabbedOffset: undefined | {x: number; y: number};\n  draggingIndex: undefined | number;\n  draggingTargetIndex: undefined | number;\n  error: Map<number, string | undefined>;\n  isDragging: boolean;\n  left: undefined | number;\n  top: undefined | number;\n};\n\nconst DRAG_CLASS = 'draggable-item';\nconst GHOST_PADDING = 4;\nconst MAX_COL_COUNT = 20;\n\nenum PlaceholderPosition {\n  TOP,\n  BOTTOM,\n}\n\nclass ColumnEditCollection extends Component<Props, State> {\n  state: State = {\n    isDragging: false,\n    draggingIndex: void 0,\n    draggingTargetIndex: void 0,\n    draggingGrabbedOffset: void 0,\n    error: new Map(),\n    left: void 0,\n    top: void 0,\n  };\n\n  componentDidMount() {\n    if (!this.portal) {\n      const portal = document.createElement('div');\n\n      portal.style.position = 'absolute';\n      portal.style.top = '0';\n      portal.style.left = '0';\n      portal.style.zIndex = String(theme.zIndex.modal);\n\n      this.portal = portal;\n\n      document.body.appendChild(this.portal);\n    }\n    this.checkColumnErrors(this.props.columns);\n  }\n\n  componentWillUnmount() {\n    if (this.portal) {\n      document.body.removeChild(this.portal);\n    }\n    this.cleanUpListeners();\n  }\n\n  checkColumnErrors(columns: Column[]) {\n    const error = new Map();\n    for (let i = 0; i < columns.length; i += 1) {\n      const column = columns[i];\n      if (column.kind === 'equation') {\n        const result = parseArithmetic(column.field);\n        if (result.error) {\n          error.set(i, result.error);\n        }\n      }\n    }\n    this.setState({error});\n  }\n\n  previousUserSelect: UserSelectValues | null = null;\n  portal: HTMLElement | null = null;\n  dragGhostRef = createRef<HTMLDivElement>();\n\n  keyForColumn(column: Column, isGhost: boolean): string {\n    if (column.kind === 'function') {\n      return [...column.function, isGhost].join(':');\n    }\n    return [...column.field, isGhost].join(':');\n  }\n\n  cleanUpListeners() {\n    if (this.state.isDragging) {\n      window.removeEventListener('mousemove', this.onDragMove);\n      window.removeEventListener('touchmove', this.onDragMove);\n      window.removeEventListener('mouseup', this.onDragEnd);\n      window.removeEventListener('touchend', this.onDragEnd);\n    }\n  }\n\n  // Signal to the parent that a new column has been added.\n  handleAddColumn = () => {\n    const newColumn: Column = {kind: 'field', field: ''};\n    this.props.onChange([...this.props.columns, newColumn]);\n  };\n\n  handleAddEquation = () => {\n    const {organization} = this.props;\n    const newColumn: Column = {kind: FieldValueKind.EQUATION, field: ''};\n    trackAnalyticsEvent({\n      eventKey: 'discover_v2.add_equation',\n      eventName: 'Discoverv2: Equation added',\n      organization_id: parseInt(organization.id, 10),\n    });\n    this.props.onChange([...this.props.columns, newColumn]);\n  };\n\n  handleUpdateColumn = (index: number, updatedColumn: Column) => {\n    const newColumns = [...this.props.columns];\n\n    if (updatedColumn.kind === 'equation') {\n      this.setState(prevState => {\n        const error = new Map(prevState.error);\n        error.set(index, parseArithmetic(updatedColumn.field).error);\n        return {\n          ...prevState,\n          error,\n        };\n      });\n    } else {\n      // Update any equations that contain the existing column\n      this.updateEquationFields(newColumns, index, updatedColumn);\n    }\n\n    newColumns.splice(index, 1, updatedColumn);\n    this.props.onChange(newColumns);\n  };\n\n  updateEquationFields = (newColumns: Column[], index: number, updatedColumn: Column) => {\n    const oldColumn = newColumns[index];\n    const existingColumn = generateFieldAsString(newColumns[index]);\n    const updatedColumnString = generateFieldAsString(updatedColumn);\n    if (!isLegalEquationColumn(updatedColumn) || hasDuplicate(newColumns, oldColumn)) {\n      return;\n    }\n    // Find the equations in the list of columns\n    for (let i = 0; i < newColumns.length; i++) {\n      const newColumn = newColumns[i];\n\n      if (newColumn.kind === 'equation') {\n        const result = parseArithmetic(newColumn.field);\n        let newEquation = '';\n        // Track where to continue from, not reconstructing from result so we don't have to worry\n        // about spacing\n        let lastIndex = 0;\n\n        // the parser separates fields & functions, so we only need to check one\n        const fields =\n          oldColumn.kind === 'function' ? result.tc.functions : result.tc.fields;\n\n        // for each field, add the text before it, then the new function and update index\n        // to be where we want to start again\n        for (const field of fields) {\n          if (field.term === existingColumn && lastIndex !== field.location.end.offset) {\n            newEquation +=\n              newColumn.field.substring(lastIndex, field.location.start.offset) +\n              updatedColumnString;\n            lastIndex = field.location.end.offset;\n          }\n        }\n\n        // Add whatever remains to be added from the equation, if existing field wasn't found\n        // add the entire equation\n        newEquation += newColumn.field.substring(lastIndex);\n        newColumns[i] = {\n          kind: 'equation',\n          field: newEquation,\n          alias: newColumns[i].alias,\n        };\n      }\n    }\n  };\n\n  removeColumn(index: number) {\n    const newColumns = [...this.props.columns];\n    newColumns.splice(index, 1);\n    this.checkColumnErrors(newColumns);\n    this.props.onChange(newColumns);\n  }\n\n  startDrag(\n    event: React.MouseEvent<HTMLButtonElement> | React.TouchEvent<HTMLButtonElement>,\n    index: number\n  ) {\n    const isDragging = this.state.isDragging;\n    if (isDragging || !['mousedown', 'touchstart'].includes(event.type)) {\n      return;\n    }\n    event.preventDefault();\n    event.stopPropagation();\n\n    const top = getPointerPosition(event, 'pageY');\n    const left = getPointerPosition(event, 'pageX');\n\n    // Compute where the user clicked on the drag handle. Avoids the element\n    // jumping from the cursor on mousedown.\n    const draggingElement = Array.from(document.querySelectorAll(`.${DRAG_CLASS}`)).find(\n      n => n.contains(event.currentTarget)\n    )!;\n    const {x, y} = getOffsetOfElement(draggingElement);\n\n    const draggingGrabbedOffset = {\n      x: left - x + GHOST_PADDING,\n      y: top - y + GHOST_PADDING,\n    };\n\n    // prevent the user from selecting things when dragging a column.\n    this.previousUserSelect = setBodyUserSelect({\n      userSelect: 'none',\n      MozUserSelect: 'none',\n      msUserSelect: 'none',\n      webkitUserSelect: 'none',\n    });\n\n    // attach event listeners so that the mouse cursor can drag anywhere\n    window.addEventListener('mousemove', this.onDragMove);\n    window.addEventListener('touchmove', this.onDragMove);\n    window.addEventListener('mouseup', this.onDragEnd);\n    window.addEventListener('touchend', this.onDragEnd);\n\n    this.setState({\n      isDragging: true,\n      draggingIndex: index,\n      draggingTargetIndex: index,\n      draggingGrabbedOffset,\n      top,\n      left,\n    });\n  }\n\n  onDragMove = (event: MouseEvent | TouchEvent) => {\n    const {isDragging, draggingTargetIndex, draggingGrabbedOffset} = this.state;\n\n    if (!isDragging || !['mousemove', 'touchmove'].includes(event.type)) {\n      return;\n    }\n    event.preventDefault();\n    event.stopPropagation();\n\n    const pointerX = getPointerPosition(event, 'pageX');\n    const pointerY = getPointerPosition(event, 'pageY');\n\n    const dragOffsetX = draggingGrabbedOffset?.x ?? 0;\n    const dragOffsetY = draggingGrabbedOffset?.y ?? 0;\n\n    if (this.dragGhostRef.current) {\n      // move the ghost box\n      const ghostDOM = this.dragGhostRef.current;\n      // Adjust so cursor is over the grab handle.\n      ghostDOM.style.left = `${pointerX - dragOffsetX}px`;\n      ghostDOM.style.top = `${pointerY - dragOffsetY}px`;\n    }\n\n    const dragItems = document.querySelectorAll(`.${DRAG_CLASS}`);\n    // Find the item that the ghost is currently over.\n    const targetIndex = Array.from(dragItems).findIndex(dragItem => {\n      const rects = dragItem.getBoundingClientRect();\n      const top = pointerY;\n\n      const thresholdStart = window.scrollY + rects.top;\n      const thresholdEnd = window.scrollY + rects.top + rects.height;\n\n      return top >= thresholdStart && top <= thresholdEnd;\n    });\n\n    // Issue column in Issue widgets are fixed (cannot be moved or deleted)\n    if (targetIndex >= 0 && targetIndex !== draggingTargetIndex) {\n      this.setState({draggingTargetIndex: targetIndex});\n    }\n  };\n\n  isFixedIssueColumn = (columnIndex: number) => {\n    const {source, columns} = this.props;\n    const column = columns[columnIndex];\n    const issueFieldColumnCount = columns.filter(\n      col => col.kind === 'field' && col.field === FieldKey.ISSUE\n    ).length;\n    return (\n      issueFieldColumnCount <= 1 &&\n      source === WidgetType.ISSUE &&\n      column.kind === 'field' &&\n      column.field === FieldKey.ISSUE\n    );\n  };\n\n  isRemainingReleaseHealthAggregate = (columnIndex: number) => {\n    const {source, columns} = this.props;\n    const column = columns[columnIndex];\n    const aggregateCount = columns.filter(\n      col => col.kind === FieldValueKind.FUNCTION\n    ).length;\n    return (\n      aggregateCount <= 1 &&\n      source === WidgetType.RELEASE &&\n      column.kind === FieldValueKind.FUNCTION\n    );\n  };\n\n  onDragEnd = (event: MouseEvent | TouchEvent) => {\n    if (!this.state.isDragging || !['mouseup', 'touchend'].includes(event.type)) {\n      return;\n    }\n\n    const sourceIndex = this.state.draggingIndex;\n    const targetIndex = this.state.draggingTargetIndex;\n    if (typeof sourceIndex !== 'number' || typeof targetIndex !== 'number') {\n      return;\n    }\n\n    // remove listeners that were attached in startColumnDrag\n    this.cleanUpListeners();\n\n    // restore body user-select values\n    if (this.previousUserSelect) {\n      setBodyUserSelect(this.previousUserSelect);\n      this.previousUserSelect = null;\n    }\n\n    // Reorder columns and trigger change.\n    const newColumns = [...this.props.columns];\n    const removed = newColumns.splice(sourceIndex, 1);\n    newColumns.splice(targetIndex, 0, removed[0]);\n    this.checkColumnErrors(newColumns);\n    this.props.onChange(newColumns);\n\n    this.setState({\n      isDragging: false,\n      left: undefined,\n      top: undefined,\n      draggingIndex: undefined,\n      draggingTargetIndex: undefined,\n      draggingGrabbedOffset: undefined,\n    });\n  };\n\n  renderGhost({gridColumns, singleColumn}: {gridColumns: number; singleColumn: boolean}) {\n    const {isDragging, draggingIndex, draggingGrabbedOffset} = this.state;\n\n    const index = draggingIndex;\n    if (typeof index !== 'number' || !isDragging || !this.portal) {\n      return null;\n    }\n    const dragOffsetX = draggingGrabbedOffset?.x ?? 0;\n    const dragOffsetY = draggingGrabbedOffset?.y ?? 0;\n\n    const top = Number(this.state.top) - dragOffsetY;\n    const left = Number(this.state.left) - dragOffsetX;\n    const col = this.props.columns[index];\n\n    const style = {\n      top: `${top}px`,\n      left: `${left}px`,\n    };\n    const ghost = (\n      <Ghost ref={this.dragGhostRef} style={style}>\n        {this.renderItem(col, index, {\n          singleColumn,\n          isGhost: true,\n          gridColumns,\n        })}\n      </Ghost>\n    );\n\n    return createPortal(ghost, this.portal);\n  }\n\n  renderItem(\n    col: Column,\n    i: number,\n    {\n      singleColumn = false,\n      canDelete = true,\n      canDrag = true,\n      isGhost = false,\n      gridColumns = 2,\n      disabled = false,\n    }: {\n      gridColumns: number;\n      singleColumn: boolean;\n      canDelete?: boolean;\n      canDrag?: boolean;\n      disabled?: boolean;\n      isGhost?: boolean;\n    }\n  ) {\n    const {\n      columns,\n      fieldOptions,\n      filterAggregateParameters,\n      filterPrimaryOptions,\n      noFieldsMessage,\n      showAliasField,\n    } = this.props;\n    const {isDragging, draggingTargetIndex, draggingIndex} = this.state;\n\n    let placeholder: React.ReactNode = null;\n    // Add a placeholder above the target row.\n    if (isDragging && isGhost === false && draggingTargetIndex === i) {\n      placeholder = (\n        <DragPlaceholder\n          key={`placeholder:${this.keyForColumn(col, isGhost)}`}\n          className={DRAG_CLASS}\n        />\n      );\n    }\n\n    // If the current row is the row in the drag ghost return the placeholder\n    // or a hole if the placeholder is elsewhere.\n    if (isDragging && isGhost === false && draggingIndex === i) {\n      return placeholder;\n    }\n\n    const position =\n      Number(draggingTargetIndex) <= Number(draggingIndex)\n        ? PlaceholderPosition.TOP\n        : PlaceholderPosition.BOTTOM;\n\n    return (\n      <Fragment key={`${i}:${this.keyForColumn(col, isGhost)}`}>\n        {position === PlaceholderPosition.TOP && placeholder}\n        <RowContainer\n          showAliasField={showAliasField}\n          singleColumn={singleColumn}\n          className={isGhost ? '' : DRAG_CLASS}\n        >\n          {canDrag ? (\n            <DragAndReorderButton\n              aria-label={t('Drag to reorder')}\n              onMouseDown={event => this.startDrag(event, i)}\n              onTouchStart={event => this.startDrag(event, i)}\n              icon={<IconGrabbable size=\"xs\" />}\n              size=\"zero\"\n              borderless\n            />\n          ) : singleColumn && showAliasField ? null : (\n            <span />\n          )}\n          <QueryField\n            fieldOptions={fieldOptions}\n            gridColumns={gridColumns}\n            fieldValue={col}\n            onChange={value => this.handleUpdateColumn(i, value)}\n            error={this.state.error.get(i)}\n            takeFocus={i === this.props.columns.length - 1}\n            otherColumns={columns}\n            shouldRenderTag\n            disabled={disabled}\n            filterPrimaryOptions={filterPrimaryOptions}\n            filterAggregateParameters={filterAggregateParameters}\n            noFieldsMessage={noFieldsMessage}\n            skipParameterPlaceholder={showAliasField}\n          />\n          {showAliasField && (\n            <AliasField singleColumn={singleColumn}>\n              <AliasInput\n                name=\"alias\"\n                placeholder={t('Alias')}\n                value={col.alias ?? ''}\n                onChange={value => {\n                  this.handleUpdateColumn(i, {\n                    ...col,\n                    alias: value.target.value,\n                  });\n                }}\n              />\n            </AliasField>\n          )}\n          {canDelete || col.kind === 'equation' ? (\n            showAliasField ? (\n              <RemoveButton\n                data-test-id={`remove-column-${i}`}\n                aria-label={t('Remove column')}\n                title={t('Remove column')}\n                onClick={() => this.removeColumn(i)}\n                icon={<IconDelete />}\n                borderless\n              />\n            ) : (\n              <RemoveButton\n                data-test-id={`remove-column-${i}`}\n                aria-label={t('Remove column')}\n                onClick={() => this.removeColumn(i)}\n                icon={<IconDelete />}\n                borderless\n              />\n            )\n          ) : singleColumn && showAliasField ? null : (\n            <span />\n          )}\n        </RowContainer>\n        {position === PlaceholderPosition.BOTTOM && placeholder}\n      </Fragment>\n    );\n  }\n\n  render() {\n    const {className, columns, showAliasField, source} = this.props;\n    const canDelete = columns.filter(field => field.kind !== 'equation').length > 1;\n    const canDrag = columns.length > 1;\n    const canAdd = columns.length < MAX_COL_COUNT;\n    const title = canAdd\n      ? undefined\n      : t(\n          `Sorry, you've reached the maximum number of columns (${MAX_COL_COUNT}). Delete columns to add more.`\n        );\n\n    const singleColumn = columns.length === 1;\n\n    // Get the longest number of columns so we can layout the rows.\n    // We always want at least 2 columns.\n    const gridColumns =\n      source === WidgetType.ISSUE\n        ? 1\n        : Math.max(\n            ...columns.map(col => {\n              if (col.kind !== 'function') {\n                return 2;\n              }\n              const operation =\n                AGGREGATIONS[col.function[0]] ?? SESSIONS_OPERATIONS[col.function[0]];\n              return operation.parameters.length === 2 ? 3 : 2;\n            })\n          );\n\n    return (\n      <div className={className}>\n        {this.renderGhost({gridColumns, singleColumn})}\n        {!showAliasField && source !== WidgetType.ISSUE && (\n          <RowContainer showAliasField={showAliasField} singleColumn={singleColumn}>\n            <Heading gridColumns={gridColumns}>\n              <StyledSectionHeading>{t('Tag / Field / Function')}</StyledSectionHeading>\n              <StyledSectionHeading>{t('Field Parameter')}</StyledSectionHeading>\n            </Heading>\n          </RowContainer>\n        )}\n        {columns.map((col: Column, i: number) => {\n          // Issue column in Issue widgets are fixed (cannot be changed or deleted)\n          if (this.isFixedIssueColumn(i)) {\n            return this.renderItem(col, i, {\n              singleColumn,\n              canDelete: false,\n              canDrag,\n              gridColumns,\n              disabled: true,\n            });\n          }\n          if (this.isRemainingReleaseHealthAggregate(i)) {\n            return this.renderItem(col, i, {\n              singleColumn,\n              canDelete: false,\n              canDrag,\n              gridColumns,\n            });\n          }\n          return this.renderItem(col, i, {\n            singleColumn,\n            canDelete,\n            canDrag,\n            gridColumns,\n          });\n        })}\n        <RowContainer showAliasField={showAliasField} singleColumn={singleColumn}>\n          <Actions gap={1} showAliasField={showAliasField}>\n            <Button\n              size=\"sm\"\n              aria-label={t('Add a Column')}\n              onClick={this.handleAddColumn}\n              title={title}\n              disabled={!canAdd}\n              icon={<IconAdd isCircled size=\"xs\" />}\n            >\n              {t('Add a Column')}\n            </Button>\n            {source !== WidgetType.ISSUE && source !== WidgetType.RELEASE && (\n              <Button\n                size=\"sm\"\n                aria-label={t('Add an Equation')}\n                onClick={this.handleAddEquation}\n                title={title}\n                disabled={!canAdd}\n                icon={<IconAdd isCircled size=\"xs\" />}\n              >\n                {t('Add an Equation')}\n              </Button>\n            )}\n          </Actions>\n        </RowContainer>\n      </div>\n    );\n  }\n}\n\nconst Actions = styled(ButtonBar)<{showAliasField?: boolean}>`\n  grid-column: ${p => (p.showAliasField ? '1/-1' : ' 2/3')};\n  justify-content: flex-start;\n`;\n\nconst RowContainer = styled('div')<{\n  singleColumn: boolean;\n  showAliasField?: boolean;\n}>`\n  display: grid;\n  grid-template-columns: ${space(3)} 1fr 40px;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  touch-action: none;\n  padding-bottom: ${space(1)};\n\n  ${p =>\n    p.showAliasField &&\n    css`\n      align-items: flex-start;\n      grid-template-columns: ${p.singleColumn ? `1fr` : `${space(3)} 1fr 40px`};\n\n      @media (min-width: ${p.theme.breakpoints.small}) {\n        grid-template-columns: ${p.singleColumn\n          ? `1fr calc(200px + ${space(1)})`\n          : `${space(3)} 1fr calc(200px + ${space(1)}) 40px`};\n      }\n    `};\n`;\n\nconst Ghost = styled('div')`\n  background: ${p => p.theme.background};\n  display: block;\n  position: absolute;\n  padding: ${GHOST_PADDING}px;\n  border-radius: ${p => p.theme.borderRadius};\n  box-shadow: 0 0 15px rgba(0, 0, 0, 0.15);\n  width: 710px;\n  opacity: 0.8;\n  cursor: grabbing;\n  padding-right: ${space(2)};\n\n  & > ${RowContainer} {\n    padding-bottom: 0;\n  }\n\n  & svg {\n    cursor: grabbing;\n  }\n`;\n\nconst DragPlaceholder = styled('div')`\n  margin: 0 ${space(3)} ${space(1)} ${space(3)};\n  border: 2px dashed ${p => p.theme.border};\n  border-radius: ${p => p.theme.borderRadius};\n  height: 41px;\n`;\n\nconst Heading = styled('div')<{gridColumns: number}>`\n  grid-column: 2 / 3;\n\n  /* Emulate the grid used in the column editor rows */\n  display: grid;\n  grid-template-columns: repeat(${p => p.gridColumns}, 1fr);\n  grid-column-gap: ${space(1)};\n`;\n\nconst StyledSectionHeading = styled(SectionHeading)`\n  margin: 0;\n`;\n\nconst AliasInput = styled(Input)`\n  /* Match the height of the select boxes */\n  height: 40px;\n  min-width: 50px;\n`;\n\nconst AliasField = styled('div')<{singleColumn: boolean}>`\n  margin-top: ${space(1)};\n  @media (min-width: ${p => p.theme.breakpoints.small}) {\n    margin-top: 0;\n    margin-left: ${space(1)};\n  }\n\n  @media (max-width: ${p => p.theme.breakpoints.small}) {\n    grid-row: 2/2;\n    grid-column: ${p => (p.singleColumn ? '1/-1' : '2/2')};\n  }\n`;\n\nconst RemoveButton = styled(Button)`\n  margin-left: ${space(1)};\n  height: 40px;\n`;\n\nconst DragAndReorderButton = styled(Button)`\n  height: 40px;\n`;\n\nexport default ColumnEditCollection;\n","import styled from '@emotion/styled';\n\ntype TopResultsIndicatorProps = {\n  count: number;\n  index: number;\n};\n\nconst TopResultsIndicator = styled('div')<TopResultsIndicatorProps>`\n  position: absolute;\n  left: -1px;\n  margin-top: 4.5px;\n  width: 9px;\n  height: 15px;\n  border-radius: 0 3px 3px 0;\n\n  background-color: ${p => {\n    // this background color needs to match the colors used in\n    // app/components/charts/eventsChart so that the ordering matches\n\n    // the color pallete contains n + 2 colors, so we subtract 2 here\n    return p.theme.charts.getColorPalette(p.count - 2)[p.index];\n  }};\n`;\n\nexport default TopResultsIndicator;\n"],"names":["Component","moment","qs","updateDateTime","DataZoomInside","DataZoomSlider","ToolBox","callIfFunction","getUtcDateString","getUtcToLocalDateObject","getDate","date","utc","format","HTML5_FMT","DATETIME_LOCAL_SECONDS","ZoomPropKeys","ChartZoom","constructor","props","currentPeriod","period","start","end","saveHistory","router","onZoom","usePageDate","startFormatted","endFormatted","history","push","zooming","newQuery","location","query","pageStart","undefined","pageEnd","pageStatsPeriod","stringify","pathname","saveCurrentPeriod","chart","onChartReady","evt","length","setPeriod","onRestore","model","getModel","startValue","endValue","_payload","batch","previousPeriod","pop","onDataZoom","_props","zoom","_componentsViews","find","c","_features","dataZoom","_isZoomActive","dispatchAction","type","key","dataZoomSelectActive","onFinished","componentDidUpdate","disabled","render","_utc","_start","_end","children","xAxisIndex","_router","_onZoom","_onRestore","_onChartReady","_onDataZoom","_onFinished","showSlider","chartZoomOptions","renderProps","isGroupedByDate","handleChartReady","showTimeInTooltip","toolBox","title","back","iconStyle","borderWidth","color","opacity","handleDataZoom","handleChartFinished","handleZoomRestore","DEFAULT","zoomOnMouseWheel","zoomLock","throttle","Array","isArray","realtime","showDetail","left","right","bottom","getFeatures","features","yAxisIndex","options","top","itemSize","z","feature","VisualMap","visualMap","ErrorPanel","p","height","theme","gray300","fontSizeExtraLarge","LineSeries","BaseChart","LineChart","series","seriesOptions","map","seriesName","data","dataArray","name","value","animation","animationThreshold","animationDuration","MapSeries","roam","emphasis","label","show","Fragment","LoadingPanel","defaultProps","TransitionChart","prevReloading","reloading","prevLoading","loading","getDerivedStateFromProps","state","nextReloading","nextLoading","String","LoadingMask","TransparentLoadingMask","className","visible","other","useEffect","useState","useTheme","echarts","max","DEFAULT_ZOOM","DISCOVER_ZOOM","DISCOVER_QUERY_LIST_ZOOM","DEFAULT_CENTER_X","DISCOVER_QUERY_LIST_CENTER_Y","DEFAULT_CENTER_Y","WorldMapChart","fromDiscover","fromDiscoverQueryList","setState","countryToCodeMap","codeToCountryMap","unmounted","loadWorldMap","countryCodesMap","world","Promise","all","default","worldMap","registerMap","country","processedSeries","nameMap","aspectScale","center","itemStyle","areaColor","gray200","borderColor","backgroundSecondary","pink300","silent","maxValue","tooltipFormatter","marker","isNaN","formattedValue","toLocaleString","countryOrCode","join","backgroundColor","background","min","inRange","purple200","purple300","text","textStyle","textColor","calculable","formatter","isReactEvent","maybe","getPointerPosition","event","property","actual","nativeEvent","window","TouchEvent","targetTouches","MouseEvent","setBodyUserSelect","nextValues","previousValues","userSelect","document","body","style","MozUserSelect","msUserSelect","webkitUserSelect","FieldKey","ISSUE_FIELDS","ASSIGNEE","TITLE","ISSUE","LEVEL","STATUS","PLATFORM","IS_BOOKMARKED","IS_SUBSCRIBED","IS_HANDLED","LAST_SEEN","FIRST_SEEN","EVENTS","USERS","LIFETIME_EVENTS","LIFETIME_USERS","PROJECT","LINKS","ISSUE_FIELD_TO_HEADER_MAP","createRef","createPortal","css","parseArithmetic","Button","ButtonBar","SectionHeading","Input","getOffsetOfElement","IconAdd","IconDelete","IconGrabbable","t","space","trackAnalyticsEvent","AGGREGATIONS","generateFieldAsString","hasDuplicate","isLegalEquationColumn","WidgetType","SESSIONS_OPERATIONS","QueryField","FieldValueKind","DRAG_CLASS","GHOST_PADDING","MAX_COL_COUNT","PlaceholderPosition","ColumnEditCollection","isDragging","draggingIndex","draggingTargetIndex","draggingGrabbedOffset","error","Map","newColumn","kind","field","onChange","columns","organization","EQUATION","eventKey","eventName","organization_id","parseInt","id","index","updatedColumn","newColumns","prevState","set","updateEquationFields","splice","oldColumn","existingColumn","updatedColumnString","i","result","newEquation","lastIndex","fields","tc","functions","term","offset","substring","alias","includes","preventDefault","stopPropagation","pointerX","pointerY","dragOffsetX","x","dragOffsetY","y","dragGhostRef","current","ghostDOM","dragItems","querySelectorAll","targetIndex","from","findIndex","dragItem","rects","getBoundingClientRect","thresholdStart","scrollY","thresholdEnd","columnIndex","source","column","issueFieldColumnCount","filter","col","aggregateCount","FUNCTION","RELEASE","sourceIndex","cleanUpListeners","previousUserSelect","removed","checkColumnErrors","componentDidMount","portal","createElement","position","zIndex","modal","appendChild","componentWillUnmount","removeChild","keyForColumn","isGhost","function","removeEventListener","onDragMove","onDragEnd","removeColumn","startDrag","draggingElement","n","contains","currentTarget","addEventListener","renderGhost","gridColumns","singleColumn","Number","ghost","renderItem","canDelete","canDrag","fieldOptions","filterAggregateParameters","filterPrimaryOptions","noFieldsMessage","showAliasField","placeholder","TOP","BOTTOM","handleUpdateColumn","get","target","canAdd","Math","operation","parameters","isFixedIssueColumn","isRemainingReleaseHealthAggregate","handleAddColumn","handleAddEquation","Actions","RowContainer","breakpoints","small","Ghost","borderRadius","DragPlaceholder","border","Heading","StyledSectionHeading","AliasInput","AliasField","RemoveButton","DragAndReorderButton","TopResultsIndicator","charts","getColorPalette","count"],"sourceRoot":""}