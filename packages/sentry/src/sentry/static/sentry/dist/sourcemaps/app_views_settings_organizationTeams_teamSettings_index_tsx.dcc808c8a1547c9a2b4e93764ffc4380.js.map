{"version":3,"file":"chunks/app_views_settings_organizationTeams_teamSettings_index_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/data/forms/teamSettingsFields.tsx","webpack:///./app/utils/slugify.tsx","webpack:///./app/views/asyncView.tsx","webpack:///./app/views/settings/organizationTeams/teamSettings/index.tsx"],"sourcesContent":["import {JsonFormObject} from 'sentry/components/forms/type';\nimport {t} from 'sentry/locale';\nimport slugify from 'sentry/utils/slugify';\n\n// Export route to make these forms searchable by label/help\nexport const route = '/settings/:orgId/teams/:teamId/settings/';\n\nconst formGroups: JsonFormObject[] = [\n  {\n    // Form \"section\"/\"panel\"\n    title: 'Team Settings',\n    fields: [\n      {\n        name: 'slug',\n        type: 'string',\n        required: true,\n        label: t('Name'),\n        placeholder: 'e.g. api-team',\n        help: t('A unique ID used to identify the team'),\n        disabled: ({access}) => !access.has('team:write'),\n        transformInput: slugify,\n\n        saveOnBlur: false,\n        saveMessageAlertType: 'info',\n        saveMessage: t('You will be redirected to the new team slug after saving'),\n      },\n    ],\n  },\n];\n\nexport default formGroups;\n","// XXX: This is NOT an exhaustive slugify function\n// Only forces lowercase and replaces spaces with hyphens\nexport default function slugify(str: any): string {\n  return typeof str === 'string' ? str.toLowerCase().replace(' ', '-') : '';\n}\n","import AsyncComponent from 'sentry/components/asyncComponent';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\n\ntype AsyncViewState = AsyncComponent['state'];\ntype AsyncViewProps = AsyncComponent['props'];\n\nexport default class AsyncView<\n  P extends AsyncViewProps = AsyncViewProps,\n  S extends AsyncViewState = AsyncViewState\n> extends AsyncComponent<P, S> {\n  getTitle() {\n    return '';\n  }\n\n  render() {\n    return (\n      <SentryDocumentTitle title={this.getTitle()}>\n        {this.renderComponent() as React.ReactChild}\n      </SentryDocumentTitle>\n    );\n  }\n}\n","import {Fragment} from 'react';\nimport {browserHistory, RouteComponentProps} from 'react-router';\n\nimport {addErrorMessage, addSuccessMessage} from 'sentry/actionCreators/indicator';\nimport {removeTeam, updateTeamSuccess} from 'sentry/actionCreators/teams';\nimport Button from 'sentry/components/button';\nimport Confirm from 'sentry/components/confirm';\nimport Field from 'sentry/components/forms/field';\nimport Form from 'sentry/components/forms/form';\nimport JsonForm from 'sentry/components/forms/jsonForm';\nimport {Panel, PanelHeader} from 'sentry/components/panels';\nimport teamSettingsFields from 'sentry/data/forms/teamSettingsFields';\nimport {IconDelete} from 'sentry/icons';\nimport {t, tct} from 'sentry/locale';\nimport {Organization, Scope, Team} from 'sentry/types';\nimport withOrganization from 'sentry/utils/withOrganization';\nimport AsyncView from 'sentry/views/asyncView';\n\ntype Props = RouteComponentProps<{orgId: string; teamId: string}, {}> & {\n  organization: Organization;\n  team: Team;\n};\n\ntype State = AsyncView['state'];\n\nclass TeamSettings extends AsyncView<Props, State> {\n  getTitle() {\n    return 'Team Settings';\n  }\n\n  getEndpoints() {\n    return [];\n  }\n\n  handleSubmitSuccess: Form['props']['onSubmitSuccess'] = (resp, model, id) => {\n    // Use the old slug when triggering the update so we correctly replace the\n    // previous team in the store\n    updateTeamSuccess(this.props.team.slug, resp);\n    if (id === 'slug') {\n      addSuccessMessage(t('Team name changed'));\n      browserHistory.replace(\n        `/settings/${this.props.params.orgId}/teams/${model.getValue(id)}/settings/`\n      );\n      this.setState({loading: true});\n    }\n  };\n\n  handleRemoveTeam = async () => {\n    await removeTeam(this.api, this.props.params);\n    browserHistory.replace(`/settings/${this.props.params.orgId}/teams/`);\n  };\n\n  renderBody() {\n    const {organization, team, params} = this.props;\n\n    const access = new Set<Scope>(organization.access);\n\n    return (\n      <Fragment>\n        <Form\n          apiMethod=\"PUT\"\n          apiEndpoint={`/teams/${params.orgId}/${team.slug}/`}\n          saveOnBlur\n          allowUndo\n          onSubmitSuccess={this.handleSubmitSuccess}\n          onSubmitError={() => addErrorMessage(t('Unable to save change'))}\n          initialData={{\n            name: team.name,\n            slug: team.slug,\n          }}\n        >\n          <JsonForm access={access} forms={teamSettingsFields} />\n        </Form>\n\n        <Panel>\n          <PanelHeader>{t('Remove Team')}</PanelHeader>\n          <Field\n            help={t(\n              \"This may affect team members' access to projects and associated alert delivery.\"\n            )}\n          >\n            <div>\n              <Confirm\n                disabled={!access.has('team:admin')}\n                onConfirm={this.handleRemoveTeam}\n                priority=\"danger\"\n                message={tct('Are you sure you want to remove the team [team]?', {\n                  team: `#${team.slug}`,\n                })}\n              >\n                <Button\n                  icon={<IconDelete />}\n                  priority=\"danger\"\n                  disabled={!access.has('team:admin')}\n                >\n                  {t('Remove Team')}\n                </Button>\n              </Confirm>\n            </div>\n          </Field>\n        </Panel>\n      </Fragment>\n    );\n  }\n}\nexport default withOrganization(TeamSettings);\n"],"names":["t","slugify","route","formGroups","title","fields","name","type","required","label","placeholder","help","disabled","access","has","transformInput","saveOnBlur","saveMessageAlertType","saveMessage","str","toLowerCase","replace","AsyncComponent","SentryDocumentTitle","AsyncView","getTitle","render","renderComponent","Fragment","browserHistory","addErrorMessage","addSuccessMessage","removeTeam","updateTeamSuccess","Button","Confirm","Field","Form","JsonForm","Panel","PanelHeader","teamSettingsFields","IconDelete","tct","withOrganization","TeamSettings","resp","model","id","props","team","slug","params","orgId","getValue","setState","loading","api","getEndpoints","renderBody","organization","Set","handleSubmitSuccess","handleRemoveTeam"],"sourceRoot":""}