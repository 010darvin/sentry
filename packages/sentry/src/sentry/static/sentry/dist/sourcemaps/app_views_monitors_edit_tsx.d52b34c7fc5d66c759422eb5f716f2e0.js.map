{"version":3,"file":"chunks/app_views_monitors_edit_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/views/asyncView.tsx","webpack:///./app/views/monitors/edit.tsx","webpack:///./app/views/monitors/monitorForm.tsx","webpack:///./app/views/monitors/monitorModel.tsx"],"sourcesContent":["import AsyncComponent from 'sentry/components/asyncComponent';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\n\ntype AsyncViewState = AsyncComponent['state'];\ntype AsyncViewProps = AsyncComponent['props'];\n\nexport default class AsyncView<\n  P extends AsyncViewProps = AsyncViewProps,\n  S extends AsyncViewState = AsyncViewState\n> extends AsyncComponent<P, S> {\n  getTitle() {\n    return '';\n  }\n\n  render() {\n    return (\n      <SentryDocumentTitle title={this.getTitle()}>\n        {this.renderComponent() as React.ReactChild}\n      </SentryDocumentTitle>\n    );\n  }\n}\n","import {Fragment} from 'react';\nimport {browserHistory, RouteComponentProps} from 'react-router';\n\nimport AsyncView from 'sentry/views/asyncView';\n\nimport MonitorForm from './monitorForm';\nimport {Monitor} from './types';\n\ntype Props = AsyncView['props'] &\n  RouteComponentProps<{monitorId: string; orgId: string}, {}>;\n\ntype State = AsyncView['state'] & {\n  monitor: Monitor | null;\n};\n\nexport default class EditMonitor extends AsyncView<Props, State> {\n  getEndpoints(): ReturnType<AsyncView['getEndpoints']> {\n    const {params} = this.props;\n    return [['monitor', `/monitors/${params.monitorId}/`]];\n  }\n\n  onUpdate = (data: Monitor) =>\n    this.setState(state => ({monitor: {...state.monitor, ...data}}));\n\n  onSubmitSuccess = (data: Monitor) =>\n    browserHistory.push(`/organizations/${this.props.params.orgId}/monitors/${data.id}/`);\n\n  getTitle() {\n    if (this.state.monitor) {\n      return `${this.state.monitor.name} - Monitors - ${this.props.params.orgId}`;\n    }\n    return `Monitors - ${this.props.params.orgId}`;\n  }\n\n  renderBody() {\n    const {monitor} = this.state;\n\n    if (monitor === null) {\n      return null;\n    }\n\n    return (\n      <Fragment>\n        <h1>Edit Monitor</h1>\n\n        <MonitorForm\n          monitor={monitor}\n          apiMethod=\"PUT\"\n          apiEndpoint={`/monitors/${monitor.id}/`}\n          onSubmitSuccess={this.onSubmitSuccess}\n        />\n      </Fragment>\n    );\n  }\n}\n","import {Component, Fragment} from 'react';\nimport {Observer} from 'mobx-react';\n\nimport Access from 'sentry/components/acl/access';\nimport Field from 'sentry/components/forms/field';\nimport Form from 'sentry/components/forms/form';\nimport NumberField from 'sentry/components/forms/numberField';\nimport SelectField from 'sentry/components/forms/selectField';\nimport TextCopyInput from 'sentry/components/forms/textCopyInput';\nimport TextField from 'sentry/components/forms/textField';\nimport {Panel, PanelBody, PanelHeader} from 'sentry/components/panels';\nimport {t, tct} from 'sentry/locale';\nimport {PageFilters, Project, SelectValue} from 'sentry/types';\nimport withPageFilters from 'sentry/utils/withPageFilters';\nimport withProjects from 'sentry/utils/withProjects';\n\nimport MonitorModel from './monitorModel';\nimport {Monitor, MonitorConfig, MonitorTypes, ScheduleType} from './types';\n\nconst SCHEDULE_TYPES: SelectValue<ScheduleType>[] = [\n  {value: 'crontab', label: 'Crontab'},\n  {value: 'interval', label: 'Interval'},\n];\n\nconst MONITOR_TYPES: SelectValue<MonitorTypes>[] = [\n  {value: 'cron_job', label: 'Cron Job'},\n];\n\nconst INTERVALS: SelectValue<string>[] = [\n  {value: 'minute', label: 'minute(s)'},\n  {value: 'hour', label: 'hour(s)'},\n  {value: 'day', label: 'day(s)'},\n  {value: 'week', label: 'week(s)'},\n  {value: 'month', label: 'month(s)'},\n  {value: 'year', label: 'year(s)'},\n];\n\ntype Props = {\n  apiEndpoint: string;\n  apiMethod: Form['props']['apiMethod'];\n  onSubmitSuccess: Form['props']['onSubmitSuccess'];\n  projects: Project[];\n  selection: PageFilters;\n  monitor?: Monitor;\n};\n\nclass MonitorForm extends Component<Props> {\n  form = new MonitorModel();\n\n  formDataFromConfig(type: MonitorTypes, config: MonitorConfig) {\n    const rv = {};\n    switch (type) {\n      case 'cron_job':\n        rv['config.schedule_type'] = config.schedule_type;\n        rv['config.checkin_margin'] = config.checkin_margin;\n        rv['config.max_runtime'] = config.max_runtime;\n\n        switch (config.schedule_type) {\n          case 'interval':\n            rv['config.schedule.frequency'] = config.schedule[0];\n            rv['config.schedule.interval'] = config.schedule[1];\n            break;\n          case 'crontab':\n          default:\n            rv['config.schedule'] = config.schedule;\n        }\n        break;\n      default:\n    }\n    return rv;\n  }\n\n  render() {\n    const {monitor} = this.props;\n    const selectedProjectId = this.props.selection.projects[0];\n    const selectedProject = selectedProjectId\n      ? this.props.projects.find(p => p.id === selectedProjectId + '')\n      : null;\n    return (\n      <Access access={['project:write']}>\n        {({hasAccess}) => (\n          <Form\n            allowUndo\n            requireChanges\n            apiEndpoint={this.props.apiEndpoint}\n            apiMethod={this.props.apiMethod}\n            model={this.form}\n            initialData={\n              monitor\n                ? {\n                    name: monitor.name,\n                    type: monitor.type,\n                    project: monitor.project.slug,\n                    ...this.formDataFromConfig(monitor.type, monitor.config),\n                  }\n                : {\n                    project: selectedProject ? selectedProject.slug : null,\n                  }\n            }\n            onSubmitSuccess={this.props.onSubmitSuccess}\n          >\n            <Panel>\n              <PanelHeader>{t('Details')}</PanelHeader>\n\n              <PanelBody>\n                {monitor && (\n                  <Field label={t('ID')}>\n                    <div className=\"controls\">\n                      <TextCopyInput>{monitor.id}</TextCopyInput>\n                    </div>\n                  </Field>\n                )}\n                <SelectField\n                  name=\"project\"\n                  label={t('Project')}\n                  disabled={!hasAccess}\n                  options={this.props.projects\n                    .filter(p => p.isMember)\n                    .map(p => ({value: p.slug, label: p.slug}))}\n                  required\n                />\n                <TextField\n                  name=\"name\"\n                  placeholder={t('My Cron Job')}\n                  label={t('Name')}\n                  disabled={!hasAccess}\n                  required\n                />\n              </PanelBody>\n            </Panel>\n            <Panel>\n              <PanelHeader>{t('Config')}</PanelHeader>\n\n              <PanelBody>\n                <SelectField\n                  name=\"type\"\n                  label={t('Type')}\n                  disabled={!hasAccess}\n                  options={MONITOR_TYPES}\n                  required\n                />\n                <Observer>\n                  {() => {\n                    switch (this.form.getValue('type')) {\n                      case 'cron_job':\n                        return (\n                          <Fragment>\n                            <NumberField\n                              name=\"config.max_runtime\"\n                              label={t('Max Runtime')}\n                              disabled={!hasAccess}\n                              help={t(\n                                \"The maximum runtime (in minutes) a check-in is allowed before it's marked as a failure.\"\n                              )}\n                              placeholder=\"e.g. 30\"\n                            />\n                            <SelectField\n                              name=\"config.schedule_type\"\n                              label={t('Schedule Type')}\n                              disabled={!hasAccess}\n                              options={SCHEDULE_TYPES}\n                              required\n                            />\n                          </Fragment>\n                        );\n                      default:\n                        return null;\n                    }\n                  }}\n                </Observer>\n                <Observer>\n                  {() => {\n                    switch (this.form.getValue('config.schedule_type')) {\n                      case 'crontab':\n                        return (\n                          <Fragment>\n                            <TextField\n                              name=\"config.schedule\"\n                              label={t('Schedule')}\n                              disabled={!hasAccess}\n                              placeholder=\"*/5 * * * *\"\n                              required\n                              help={tct(\n                                'Changes to the schedule will apply on the next check-in. See [link:Wikipedia] for crontab syntax.',\n                                {\n                                  link: <a href=\"https://en.wikipedia.org/wiki/Cron\" />,\n                                }\n                              )}\n                            />\n                            <NumberField\n                              name=\"config.checkin_margin\"\n                              label={t('Check-in Margin')}\n                              disabled={!hasAccess}\n                              help={t(\n                                \"The margin (in minutes) a check-in is allowed to exceed it's scheduled window before being treated as missed.\"\n                              )}\n                              placeholder=\"e.g. 30\"\n                            />\n                          </Fragment>\n                        );\n                      case 'interval':\n                        return (\n                          <Fragment>\n                            <NumberField\n                              name=\"config.schedule.frequency\"\n                              label={t('Frequency')}\n                              disabled={!hasAccess}\n                              placeholder=\"e.g. 1\"\n                              required\n                            />\n                            <SelectField\n                              name=\"config.schedule.interval\"\n                              label={t('Interval')}\n                              disabled={!hasAccess}\n                              options={INTERVALS}\n                              required\n                            />\n                            <NumberField\n                              name=\"config.checkin_margin\"\n                              label={t('Check-in Margin')}\n                              disabled={!hasAccess}\n                              help={t(\n                                \"The margin (in minutes) a check-in is allowed to exceed it's scheduled window before being treated as missed.\"\n                              )}\n                              placeholder=\"e.g. 30\"\n                            />\n                          </Fragment>\n                        );\n                      default:\n                        return null;\n                    }\n                  }}\n                </Observer>\n              </PanelBody>\n            </Panel>\n          </Form>\n        )}\n      </Access>\n    );\n  }\n}\n\nexport default withPageFilters(withProjects(MonitorForm));\n","import FormModel from 'sentry/components/forms/model';\n\nimport {MonitorConfig} from './types';\n\ntype TransformedData = {\n  config?: Partial<MonitorConfig>;\n};\n\nexport default class MonitorModel extends FormModel {\n  getTransformedData() {\n    return this.fields.toJSON().reduce<TransformedData>((data, [k, v]) => {\n      if (k.indexOf('config.') !== 0) {\n        data[k] = v;\n        return data;\n      }\n\n      if (!data.config) {\n        data.config = {};\n      }\n      if (k === 'config.schedule.frequency' || k === 'config.schedule.interval') {\n        if (!Array.isArray(data.config.schedule)) {\n          data.config.schedule = [null, null];\n        }\n      }\n\n      if (k === 'config.schedule.frequency') {\n        data.config!.schedule![0] = parseInt(v as string, 10);\n      } else if (k === 'config.schedule.interval') {\n        data.config!.schedule![1] = v;\n      } else {\n        data.config[k.substr(7)] = v;\n      }\n\n      return data;\n    }, {});\n  }\n\n  getTransformedValue(id: string) {\n    return id.indexOf('config') === 0 ? this.getValue(id) : super.getTransformedValue(id);\n  }\n}\n"],"names":["AsyncComponent","SentryDocumentTitle","AsyncView","getTitle","render","renderComponent","Fragment","browserHistory","MonitorForm","EditMonitor","data","setState","state","monitor","push","props","params","orgId","id","getEndpoints","monitorId","name","renderBody","onSubmitSuccess","Component","Observer","Access","Field","Form","NumberField","SelectField","TextCopyInput","TextField","Panel","PanelBody","PanelHeader","t","tct","withPageFilters","withProjects","MonitorModel","SCHEDULE_TYPES","value","label","MONITOR_TYPES","INTERVALS","formDataFromConfig","type","config","rv","schedule_type","checkin_margin","max_runtime","schedule","selectedProjectId","selection","projects","selectedProject","find","p","hasAccess","apiEndpoint","apiMethod","form","project","slug","filter","isMember","map","getValue","link","FormModel","getTransformedData","fields","toJSON","reduce","k","v","indexOf","Array","isArray","parseInt","substr","getTransformedValue"],"sourceRoot":""}