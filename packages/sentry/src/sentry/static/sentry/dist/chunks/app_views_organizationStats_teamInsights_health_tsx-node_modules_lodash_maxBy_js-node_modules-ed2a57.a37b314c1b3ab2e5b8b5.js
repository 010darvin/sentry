(globalThis["webpackChunk"] = globalThis["webpackChunk"] || []).push([["app_views_organizationStats_teamInsights_health_tsx-node_modules_lodash_maxBy_js-node_modules-ed2a57"],{

/***/ "./app/utils/discover/discoverQuery.tsx":
/*!**********************************************!*\
  !*** ./app/utils/discover/discoverQuery.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var sentry_utils_withApi__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sentry/utils/withApi */ "./app/utils/withApi.tsx");
/* harmony import */ var _genericDiscoverQuery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./genericDiscoverQuery */ "./app/utils/discover/genericDiscoverQuery.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");


/**
 * An individual row in a DiscoverQuery result
 */



function shouldRefetchData(prevProps, nextProps) {
  return prevProps.transactionName !== nextProps.transactionName || prevProps.transactionThreshold !== nextProps.transactionThreshold || prevProps.transactionThresholdMetric !== nextProps.transactionThresholdMetric;
}

function DiscoverQuery(props) {
  const endpoint = props.useEvents ? 'events' : 'eventsv2';
  const afterFetch = props.useEvents ? (data, _) => {
    var _data$meta;

    const {
      fields,
      ...otherMeta
    } = (_data$meta = data.meta) !== null && _data$meta !== void 0 ? _data$meta : {};
    return { ...data,
      meta: { ...fields,
        ...otherMeta
      }
    };
  } : undefined;
  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_genericDiscoverQuery__WEBPACK_IMPORTED_MODULE_1__["default"], {
    route: endpoint,
    shouldRefetchData: shouldRefetchData,
    afterFetch: afterFetch,
    ...props
  });
}

DiscoverQuery.displayName = "DiscoverQuery";
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,sentry_utils_withApi__WEBPACK_IMPORTED_MODULE_0__["default"])(DiscoverQuery));

/***/ }),

/***/ "./app/utils/performance/urls.ts":
/*!***************************************!*\
  !*** ./app/utils/performance/urls.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getTransactionDetailsUrl": () => (/* binding */ getTransactionDetailsUrl)
/* harmony export */ });
/* harmony import */ var sentry_components_events_interfaces_spans_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sentry/components/events/interfaces/spans/utils */ "./app/components/events/interfaces/spans/utils.tsx");
/* harmony import */ var sentry_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sentry/utils */ "./app/utils.tsx");


function getTransactionDetailsUrl(orgSlug, eventSlug, transaction, query, spanId) {
  const locationQuery = { ...(query || {}),
    transaction
  };

  if (!(0,sentry_utils__WEBPACK_IMPORTED_MODULE_1__.defined)(locationQuery.transaction)) {
    delete locationQuery.transaction;
  }

  const target = {
    pathname: `/organizations/${orgSlug}/performance/${eventSlug}/`,
    query: locationQuery,
    hash: (0,sentry_utils__WEBPACK_IMPORTED_MODULE_1__.defined)(spanId) ? (0,sentry_components_events_interfaces_spans_utils__WEBPACK_IMPORTED_MODULE_0__.spanTargetHash)(spanId) : undefined
  };

  if (!(0,sentry_utils__WEBPACK_IMPORTED_MODULE_1__.defined)(target.hash)) {
    delete target.hash;
  }

  return target;
}

/***/ }),

/***/ "./app/views/organizationStats/teamInsights/health.tsx":
/*!*************************************************************!*\
  !*** ./app/views/organizationStats/teamInsights/health.tsx ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/styled/base */ "../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var sentry_components_layouts_thirds__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! sentry/components/layouts/thirds */ "./app/components/layouts/thirds.tsx");
/* harmony import */ var sentry_components_loadingIndicator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sentry/components/loadingIndicator */ "./app/components/loadingIndicator.tsx");
/* harmony import */ var sentry_components_noProjectMessage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! sentry/components/noProjectMessage */ "./app/components/noProjectMessage.tsx");
/* harmony import */ var sentry_components_sentryDocumentTitle__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sentry/components/sentryDocumentTitle */ "./app/components/sentryDocumentTitle.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_utils_analytics_trackAdvancedAnalyticsEvent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sentry/utils/analytics/trackAdvancedAnalyticsEvent */ "./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx");
/* harmony import */ var sentry_utils_localStorage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sentry/utils/localStorage */ "./app/utils/localStorage.tsx");
/* harmony import */ var sentry_utils_useOrganization__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! sentry/utils/useOrganization */ "./app/utils/useOrganization.tsx");
/* harmony import */ var sentry_utils_useTeams__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sentry/utils/useTeams */ "./app/utils/useTeams.tsx");
/* harmony import */ var _header__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../header */ "./app/views/organizationStats/header.tsx");
/* harmony import */ var _controls__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./controls */ "./app/views/organizationStats/teamInsights/controls.tsx");
/* harmony import */ var _descriptionCard__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./descriptionCard */ "./app/views/organizationStats/teamInsights/descriptionCard.tsx");
/* harmony import */ var _teamAlertsTriggered__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./teamAlertsTriggered */ "./app/views/organizationStats/teamInsights/teamAlertsTriggered.tsx");
/* harmony import */ var _teamMisery__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./teamMisery */ "./app/views/organizationStats/teamInsights/teamMisery.tsx");
/* harmony import */ var _teamReleases__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./teamReleases */ "./app/views/organizationStats/teamInsights/teamReleases.tsx");
/* harmony import */ var _teamStability__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./teamStability */ "./app/views/organizationStats/teamInsights/teamStability.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./utils */ "./app/views/organizationStats/teamInsights/utils.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");






















function TeamStatsHealth(_ref) {
  var _location$query, _query$team, _localTeamId, _teams$, _currentTeam$projects;

  let {
    location,
    router
  } = _ref;
  const organization = (0,sentry_utils_useOrganization__WEBPACK_IMPORTED_MODULE_9__["default"])();
  const {
    teams,
    initiallyLoaded
  } = (0,sentry_utils_useTeams__WEBPACK_IMPORTED_MODULE_10__["default"])({
    provideUserTeams: true
  });
  const query = (_location$query = location === null || location === void 0 ? void 0 : location.query) !== null && _location$query !== void 0 ? _location$query : {};
  const localStorageKey = `teamInsightsSelectedTeamId:${organization.slug}`;
  let localTeamId = (_query$team = query.team) !== null && _query$team !== void 0 ? _query$team : sentry_utils_localStorage__WEBPACK_IMPORTED_MODULE_8__["default"].getItem(localStorageKey);

  if (localTeamId && !teams.find(team => team.id === localTeamId)) {
    localTeamId = null;
  }

  const currentTeamId = (_localTeamId = localTeamId) !== null && _localTeamId !== void 0 ? _localTeamId : (_teams$ = teams[0]) === null || _teams$ === void 0 ? void 0 : _teams$.id;
  const currentTeam = teams.find(team => team.id === currentTeamId);
  const projects = (_currentTeam$projects = currentTeam === null || currentTeam === void 0 ? void 0 : currentTeam.projects) !== null && _currentTeam$projects !== void 0 ? _currentTeam$projects : [];
  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {
    (0,sentry_utils_analytics_trackAdvancedAnalyticsEvent__WEBPACK_IMPORTED_MODULE_7__["default"])('team_insights.viewed', {
      organization
    });
  }, [organization]);
  const {
    period,
    start,
    end,
    utc
  } = (0,_utils__WEBPACK_IMPORTED_MODULE_18__.dataDatetime)(query);

  if (teams.length === 0) {
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(sentry_components_noProjectMessage__WEBPACK_IMPORTED_MODULE_4__["default"], {
      organization: organization,
      superuserNeedsToBeProjectMember: true
    });
  }

  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, {
    children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(sentry_components_sentryDocumentTitle__WEBPACK_IMPORTED_MODULE_5__["default"], {
      title: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_6__.t)('Project Health'),
      orgSlug: organization.slug
    }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_header__WEBPACK_IMPORTED_MODULE_11__["default"], {
      organization: organization,
      activeTab: "health"
    }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(Body, {
      children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_controls__WEBPACK_IMPORTED_MODULE_12__["default"], {
        location: location,
        router: router,
        currentTeam: currentTeam
      }), !initiallyLoaded && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(sentry_components_loadingIndicator__WEBPACK_IMPORTED_MODULE_3__["default"], {}), initiallyLoaded && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(sentry_components_layouts_thirds__WEBPACK_IMPORTED_MODULE_2__.Main, {
        fullWidth: true,
        children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_descriptionCard__WEBPACK_IMPORTED_MODULE_13__["default"], {
          title: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_6__.t)('Crash Free Sessions'),
          description: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_6__.t)('The percentage of healthy, errored, and abnormal sessions that didn’t cause a crash.'),
          children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_teamStability__WEBPACK_IMPORTED_MODULE_17__["default"], {
            projects: projects,
            organization: organization,
            period: period,
            start: start,
            end: end,
            utc: utc
          })
        }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_descriptionCard__WEBPACK_IMPORTED_MODULE_13__["default"], {
          title: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_6__.t)('User Misery'),
          description: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_6__.t)('The number of unique users that experienced load times 4x the project’s configured threshold.'),
          children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_teamMisery__WEBPACK_IMPORTED_MODULE_15__["default"], {
            organization: organization,
            projects: projects,
            teamId: currentTeam.id,
            period: period,
            start: start === null || start === void 0 ? void 0 : start.toString(),
            end: end === null || end === void 0 ? void 0 : end.toString(),
            location: location
          })
        }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_descriptionCard__WEBPACK_IMPORTED_MODULE_13__["default"], {
          title: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_6__.t)('Metric Alerts Triggered'),
          description: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_6__.t)('Alerts triggered from the Alert Rules your team created.'),
          children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_teamAlertsTriggered__WEBPACK_IMPORTED_MODULE_14__["default"], {
            organization: organization,
            projects: projects,
            teamSlug: currentTeam.slug,
            period: period,
            start: start === null || start === void 0 ? void 0 : start.toString(),
            end: end === null || end === void 0 ? void 0 : end.toString(),
            location: location
          })
        }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_descriptionCard__WEBPACK_IMPORTED_MODULE_13__["default"], {
          title: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_6__.t)('Number of Releases'),
          description: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_6__.t)('The releases that were created in your team’s projects.'),
          children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_teamReleases__WEBPACK_IMPORTED_MODULE_16__["default"], {
            projects: projects,
            organization: organization,
            teamSlug: currentTeam.slug,
            period: period,
            start: start,
            end: end,
            utc: utc
          })
        })]
      })]
    })]
  });
}

TeamStatsHealth.displayName = "TeamStatsHealth";
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TeamStatsHealth);

const Body = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__["default"])(sentry_components_layouts_thirds__WEBPACK_IMPORTED_MODULE_2__.Body,  true ? {
  target: "e2twaak0"
} : 0)("@media (min-width: ", p => p.theme.breakpoints.medium, "){display:block;}" + ( true ? "" : 0));

/***/ }),

/***/ "./app/views/organizationStats/teamInsights/teamAlertsTriggered.tsx":
/*!**************************************************************************!*\
  !*** ./app/views/organizationStats/teamInsights/teamAlertsTriggered.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "../node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @emotion/styled/base */ "../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "../node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @emotion/react */ "../node_modules/@emotion/react/dist/emotion-react.browser.esm.js");
/* harmony import */ var lodash_round__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/round */ "../node_modules/lodash/round.js");
/* harmony import */ var lodash_round__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_round__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var sentry_components_asyncComponent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sentry/components/asyncComponent */ "./app/components/asyncComponent.tsx");
/* harmony import */ var sentry_components_button__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sentry/components/button */ "./app/components/button.tsx");
/* harmony import */ var sentry_components_charts_barChart__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sentry/components/charts/barChart */ "./app/components/charts/barChart.tsx");
/* harmony import */ var sentry_components_links_link__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sentry/components/links/link */ "./app/components/links/link.tsx");
/* harmony import */ var sentry_components_loadingIndicator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! sentry/components/loadingIndicator */ "./app/components/loadingIndicator.tsx");
/* harmony import */ var sentry_components_organizations_pageFilters_parse__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sentry/components/organizations/pageFilters/parse */ "./app/components/organizations/pageFilters/parse.tsx");
/* harmony import */ var sentry_components_panels_panelTable__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! sentry/components/panels/panelTable */ "./app/components/panels/panelTable.tsx");
/* harmony import */ var sentry_icons__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! sentry/icons */ "./app/icons/index.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_styles_space__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! sentry/styles/space */ "./app/styles/space.tsx");
/* harmony import */ var sentry_utils_formatters__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! sentry/utils/formatters */ "./app/utils/formatters.tsx");
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./styles */ "./app/views/organizationStats/teamInsights/styles.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./utils */ "./app/views/organizationStats/teamInsights/utils.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");




function _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }




















class TeamAlertsTriggered extends sentry_components_asyncComponent__WEBPACK_IMPORTED_MODULE_5__["default"] {
  constructor() {
    super(...arguments);

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "shouldRenderBadRequests", true);
  }

  getDefaultState() {
    return { ...super.getDefaultState(),
      alertsTriggered: null,
      alertsTriggeredRules: null
    };
  }

  getEndpoints() {
    const {
      organization,
      start,
      end,
      period,
      utc,
      teamSlug
    } = this.props;
    const datetime = {
      start,
      end,
      period,
      utc
    };
    return [['alertsTriggered', `/teams/${organization.slug}/${teamSlug}/alerts-triggered/`, {
      query: { ...(0,sentry_components_organizations_pageFilters_parse__WEBPACK_IMPORTED_MODULE_10__.normalizeDateTimeParams)(datetime)
      }
    }], ['alertsTriggeredRules', `/teams/${organization.slug}/${teamSlug}/alerts-triggered-index/`, {
      query: { ...(0,sentry_components_organizations_pageFilters_parse__WEBPACK_IMPORTED_MODULE_10__.normalizeDateTimeParams)(datetime)
      }
    }]];
  }

  componentDidUpdate(prevProps) {
    const {
      start,
      end,
      period,
      utc,
      teamSlug
    } = this.props;

    if (prevProps.start !== start || prevProps.end !== end || prevProps.period !== period || prevProps.utc !== utc || prevProps.teamSlug !== teamSlug) {
      this.remountComponent();
    }
  }

  renderTrend(rule) {
    const {
      weeklyAvg,
      totalThisWeek
    } = rule;
    const diff = totalThisWeek - weeklyAvg; // weeklyAvg can only be 0 only if totalThisWeek is also 0
    // but those should never be returned in alerts-triggered-index request

    if (weeklyAvg === 0) {
      return '\u2014';
    }

    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(SubText, {
      color: diff <= 0 ? 'green300' : 'red300',
      children: [(0,sentry_utils_formatters__WEBPACK_IMPORTED_MODULE_15__.formatPercentage)(Math.abs(diff / weeklyAvg), 0), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(PaddedIconArrow, {
        direction: diff <= 0 ? 'down' : 'up',
        size: "xs"
      })]
    });
  }

  renderLoading() {
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(ChartWrapper, {
      children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(sentry_components_loadingIndicator__WEBPACK_IMPORTED_MODULE_9__["default"], {})
    });
  }

  renderBody() {
    const {
      organization,
      period,
      projects
    } = this.props;
    const {
      alertsTriggered,
      alertsTriggeredRules
    } = this.state;
    const seriesData = (0,_utils__WEBPACK_IMPORTED_MODULE_17__.sortSeriesByDay)((0,_utils__WEBPACK_IMPORTED_MODULE_17__.convertDayValueObjectToSeries)(alertsTriggered !== null && alertsTriggered !== void 0 ? alertsTriggered : {}));
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(react__WEBPACK_IMPORTED_MODULE_3__.Fragment, {
      children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(ChartWrapper, {
        children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(sentry_components_charts_barChart__WEBPACK_IMPORTED_MODULE_7__.BarChart, {
          style: {
            height: 190
          },
          isGroupedByDate: true,
          useShortDate: true,
          period: "7d",
          legend: {
            right: 0,
            top: 0
          },
          yAxis: {
            minInterval: 1
          },
          xAxis: (0,_utils__WEBPACK_IMPORTED_MODULE_17__.barAxisLabel)(seriesData.length),
          series: [{
            seriesName: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_13__.t)('Alerts Triggered'),
            data: seriesData,
            silent: true,
            barCategoryGap: '5%'
          }]
        })
      }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(StyledPanelTable, {
        isEmpty: !alertsTriggered || !alertsTriggeredRules || alertsTriggeredRules.length === 0,
        emptyMessage: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_13__.t)('No alerts triggered for this team’s projects'),
        emptyAction: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(ButtonsContainer, {
          children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(sentry_components_button__WEBPACK_IMPORTED_MODULE_6__["default"], {
            priority: "primary",
            size: "sm",
            to: `/organizations/${organization.slug}/alerts/rules/`,
            children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_13__.t)('Create Alert')
          }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(sentry_components_button__WEBPACK_IMPORTED_MODULE_6__["default"], {
            size: "sm",
            external: true,
            to: "https://docs.sentry.io/product/alerts/create-alerts/",
            children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_13__.t)('Learn more')
          })]
        }),
        headers: [(0,sentry_locale__WEBPACK_IMPORTED_MODULE_13__.t)('Alert Rule'), (0,sentry_locale__WEBPACK_IMPORTED_MODULE_13__.t)('Project'), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(AlignRight, {
          children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_13__.tct)('Last [period] Average', {
            period
          })
        }, "last"), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(AlignRight, {
          children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_13__.t)('This Week')
        }, "curr"), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(AlignRight, {
          children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_13__.t)('Difference')
        }, "diff")],
        children: alertsTriggeredRules === null || alertsTriggeredRules === void 0 ? void 0 : alertsTriggeredRules.map(rule => {
          const project = projects.find(p => p.slug === rule.projects[0]);
          return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(react__WEBPACK_IMPORTED_MODULE_3__.Fragment, {
            children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(AlertNameContainer, {
              children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(sentry_components_links_link__WEBPACK_IMPORTED_MODULE_8__["default"], {
                to: `/organizations/${organization.slug}/alerts/rules/details/${rule.id}/`,
                children: rule.name
              })
            }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_styles__WEBPACK_IMPORTED_MODULE_16__.ProjectBadgeContainer, {
              children: project && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_styles__WEBPACK_IMPORTED_MODULE_16__.ProjectBadge, {
                avatarSize: 18,
                project: project
              })
            }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(AlignRight, {
              children: lodash_round__WEBPACK_IMPORTED_MODULE_4___default()(rule.weeklyAvg, 2)
            }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(AlignRight, {
              children: rule.totalThisWeek
            }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(AlignRight, {
              children: this.renderTrend(rule)
            })]
          }, rule.id);
        })
      })]
    });
  }

}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TeamAlertsTriggered);

const ChartWrapper = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])('div',  true ? {
  target: "e1w90l1w6"
} : 0)("padding:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_14__["default"])(2), " ", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_14__["default"])(2), " 0 ", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_14__["default"])(2), ";border-bottom:1px solid ", p => p.theme.border, ";" + ( true ? "" : 0));

const StyledPanelTable = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_components_panels_panelTable__WEBPACK_IMPORTED_MODULE_11__["default"],  true ? {
  target: "e1w90l1w5"
} : 0)("grid-template-columns:1fr 0.5fr 0.2fr 0.2fr 0.2fr;font-size:", p => p.theme.fontSizeMedium, ";white-space:nowrap;margin-bottom:0;border:0;box-shadow:unset;&>div{padding:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_14__["default"])(1), " ", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_14__["default"])(2), ";}", p => p.isEmpty && /*#__PURE__*/(0,_emotion_react__WEBPACK_IMPORTED_MODULE_19__.css)("&>div:last-child{padding:48px ", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_14__["default"])(2), ";}" + ( true ? "" : 0),  true ? "" : 0), ";" + ( true ? "" : 0));

const AlertNameContainer = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])('div',  true ? {
  target: "e1w90l1w4"
} : 0)(p => p.theme.overflowEllipsis, ";" + ( true ? "" : 0));

const AlignRight = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])('div',  true ? {
  target: "e1w90l1w3"
} : 0)( true ? {
  name: "mnwtso",
  styles: "text-align:right;font-variant-numeric:tabular-nums"
} : 0);

const PaddedIconArrow = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_icons__WEBPACK_IMPORTED_MODULE_12__.IconArrow,  true ? {
  target: "e1w90l1w2"
} : 0)("margin:0 ", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_14__["default"])(0.5), ";" + ( true ? "" : 0));

const SubText = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])('div',  true ? {
  target: "e1w90l1w1"
} : 0)("color:", p => p.theme[p.color], ";" + ( true ? "" : 0));

const ButtonsContainer = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])('div',  true ? {
  target: "e1w90l1w0"
} : 0)("&>a{margin-right:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_14__["default"])(0.5), ";margin-left:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_14__["default"])(0.5), ";}" + ( true ? "" : 0));

/***/ }),

/***/ "./app/views/organizationStats/teamInsights/teamMisery.tsx":
/*!*****************************************************************!*\
  !*** ./app/views/organizationStats/teamInsights/teamMisery.tsx ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/styled/base */ "../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @emotion/react */ "../node_modules/@emotion/react/dist/emotion-react.browser.esm.js");
/* harmony import */ var sentry_components_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! sentry/components/button */ "./app/components/button.tsx");
/* harmony import */ var sentry_components_collapsePanel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sentry/components/collapsePanel */ "./app/components/collapsePanel.tsx");
/* harmony import */ var sentry_components_links_link__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! sentry/components/links/link */ "./app/components/links/link.tsx");
/* harmony import */ var sentry_components_loadingError__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sentry/components/loadingError */ "./app/components/loadingError.tsx");
/* harmony import */ var sentry_components_panels_panelTable__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sentry/components/panels/panelTable */ "./app/components/panels/panelTable.tsx");
/* harmony import */ var sentry_icons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sentry/icons */ "./app/icons/index.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_styles_space__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! sentry/styles/space */ "./app/styles/space.tsx");
/* harmony import */ var sentry_utils_discover_discoverQuery__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sentry/utils/discover/discoverQuery */ "./app/utils/discover/discoverQuery.tsx");
/* harmony import */ var sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! sentry/utils/discover/eventView */ "./app/utils/discover/eventView.tsx");
/* harmony import */ var sentry_utils_discover_fieldRenderers__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! sentry/utils/discover/fieldRenderers */ "./app/utils/discover/fieldRenderers.tsx");
/* harmony import */ var sentry_views_performance_transactionSummary_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! sentry/views/performance/transactionSummary/utils */ "./app/views/performance/transactionSummary/utils.tsx");
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./styles */ "./app/views/organizationStats/teamInsights/styles.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./utils */ "./app/views/organizationStats/teamInsights/utils.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");


function _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }




















function TeamMisery(_ref) {
  var _periodTableData$data;

  let {
    organization,
    location,
    projects,
    periodTableData,
    weekTableData,
    isLoading,
    period,
    error
  } = _ref;
  const miseryRenderer = (periodTableData === null || periodTableData === void 0 ? void 0 : periodTableData.meta) && (0,sentry_utils_discover_fieldRenderers__WEBPACK_IMPORTED_MODULE_12__.getFieldRenderer)('user_misery()', periodTableData.meta, false); // Calculate trend, so we can sort based on it

  const sortedTableData = ((_periodTableData$data = periodTableData === null || periodTableData === void 0 ? void 0 : periodTableData.data) !== null && _periodTableData$data !== void 0 ? _periodTableData$data : []).map(dataRow => {
    const weekRow = weekTableData === null || weekTableData === void 0 ? void 0 : weekTableData.data.find(row => row.project === dataRow.project && row.transaction === dataRow.transaction);
    const trend = weekRow ? (dataRow['user_misery()'] - weekRow['user_misery()']) * 100 : null;
    return { ...dataRow,
      trend
    };
  }).filter(x => x.trend !== null).sort((a, b) => Math.abs(b.trend) - Math.abs(a.trend));
  const groupedData = (0,_utils__WEBPACK_IMPORTED_MODULE_15__.groupByTrend)(sortedTableData);

  if (error) {
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(sentry_components_loadingError__WEBPACK_IMPORTED_MODULE_5__["default"], {});
  }

  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(sentry_components_collapsePanel__WEBPACK_IMPORTED_MODULE_3__["default"], {
    items: groupedData.length,
    children: _ref2 => {
      let {
        isExpanded,
        showMoreButton
      } = _ref2;
      return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, {
        children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(StyledPanelTable, {
          isEmpty: projects.length === 0 || (periodTableData === null || periodTableData === void 0 ? void 0 : periodTableData.data.length) === 0,
          emptyMessage: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_8__.t)('No key transactions starred by this team'),
          emptyAction: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(sentry_components_button__WEBPACK_IMPORTED_MODULE_2__["default"], {
            size: "sm",
            external: true,
            href: "https://docs.sentry.io/product/performance/transaction-summary/#starring-key-transactions",
            children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_8__.t)('Learn More')
          }),
          headers: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(FlexCenter, {
            children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(StyledIconStar, {
              isSolid: true,
              color: "yellow300"
            }), " ", (0,sentry_locale__WEBPACK_IMPORTED_MODULE_8__.t)('Key transaction')]
          }, "transaction"), (0,sentry_locale__WEBPACK_IMPORTED_MODULE_8__.t)('Project'), (0,sentry_locale__WEBPACK_IMPORTED_MODULE_8__.tct)('Last [period]', {
            period
          }), (0,sentry_locale__WEBPACK_IMPORTED_MODULE_8__.t)('Last 7 Days'), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(RightAligned, {
            children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_8__.t)('Change')
          }, "change")],
          isLoading: isLoading,
          children: groupedData.map((dataRow, idx) => {
            const project = projects.find(_ref3 => {
              let {
                slug
              } = _ref3;
              return dataRow.project === slug;
            });
            const {
              trend,
              project: projectId,
              transaction
            } = dataRow;
            const weekRow = weekTableData === null || weekTableData === void 0 ? void 0 : weekTableData.data.find(row => row.project === projectId && row.transaction === transaction);

            if (!weekRow || trend === null) {
              return null;
            }

            const periodMisery = miseryRenderer === null || miseryRenderer === void 0 ? void 0 : miseryRenderer(dataRow, {
              organization,
              location
            });
            const weekMisery = weekRow && (miseryRenderer === null || miseryRenderer === void 0 ? void 0 : miseryRenderer(weekRow, {
              organization,
              location
            }));
            const trendValue = Math.round(Math.abs(trend));

            if (idx >= sentry_components_collapsePanel__WEBPACK_IMPORTED_MODULE_3__.COLLAPSE_COUNT && !isExpanded) {
              return null;
            }

            return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, {
              children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(KeyTransactionTitleWrapper, {
                children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("div", {
                  children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(StyledIconStar, {
                    isSolid: true,
                    color: "yellow300"
                  })
                }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(TransactionWrapper, {
                  children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(sentry_components_links_link__WEBPACK_IMPORTED_MODULE_4__["default"], {
                    to: (0,sentry_views_performance_transactionSummary_utils__WEBPACK_IMPORTED_MODULE_13__.transactionSummaryRouteWithQuery)({
                      orgSlug: organization.slug,
                      transaction: dataRow.transaction,
                      projectID: project === null || project === void 0 ? void 0 : project.id,
                      query: {
                        query: 'transaction.duration:<15m'
                      }
                    }),
                    children: dataRow.transaction
                  })
                })]
              }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(FlexCenter, {
                children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_styles__WEBPACK_IMPORTED_MODULE_14__.ProjectBadgeContainer, {
                  children: project && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_styles__WEBPACK_IMPORTED_MODULE_14__.ProjectBadge, {
                    avatarSize: 18,
                    project: project
                  })
                })
              }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(FlexCenter, {
                children: periodMisery
              }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(FlexCenter, {
                children: weekMisery !== null && weekMisery !== void 0 ? weekMisery : '\u2014'
              }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(ScoreWrapper, {
                children: trendValue === 0 ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(SubText, {
                  children: [`0\u0025 `, (0,sentry_locale__WEBPACK_IMPORTED_MODULE_8__.t)('change')]
                }) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(TrendText, {
                  color: trend >= 0 ? 'green300' : 'red300',
                  children: [`${trendValue}\u0025 `, trend >= 0 ? (0,sentry_locale__WEBPACK_IMPORTED_MODULE_8__.t)('better') : (0,sentry_locale__WEBPACK_IMPORTED_MODULE_8__.t)('worse')]
                })
              })]
            }, idx);
          })
        }), !isLoading && showMoreButton]
      });
    }
  });
}

TeamMisery.displayName = "TeamMisery";

function TeamMiseryWrapper(_ref4) {
  let {
    organization,
    teamId,
    projects,
    location,
    period,
    start,
    end
  } = _ref4;

  if (projects.length === 0) {
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(TeamMisery, {
      isLoading: false,
      organization: organization,
      location: location,
      projects: [],
      period: period,
      periodTableData: {
        data: []
      },
      weekTableData: {
        data: []
      }
    });
  }

  const commonEventView = {
    id: undefined,
    query: 'transaction.duration:<15m team_key_transaction:true',
    projects: [],
    version: 2,
    orderby: '-tpm',
    teams: [Number(teamId)],
    fields: ['transaction', 'project', 'tpm()', 'count_unique(user)', 'count_miserable(user)', 'user_misery()']
  };
  const periodEventView = sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_11__["default"].fromSavedQuery({ ...commonEventView,
    name: 'periodMisery',
    range: period !== null && period !== void 0 ? period : undefined,
    start,
    end
  });
  const weekEventView = sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_11__["default"].fromSavedQuery({ ...commonEventView,
    name: 'weekMisery',
    range: '7d'
  });
  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(sentry_utils_discover_discoverQuery__WEBPACK_IMPORTED_MODULE_10__["default"], {
    eventView: periodEventView,
    orgSlug: organization.slug,
    location: location,
    useEvents: true,
    children: _ref5 => {
      let {
        isLoading,
        tableData: periodTableData,
        error
      } = _ref5;
      return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(sentry_utils_discover_discoverQuery__WEBPACK_IMPORTED_MODULE_10__["default"], {
        eventView: weekEventView,
        orgSlug: organization.slug,
        location: location,
        useEvents: true,
        children: _ref6 => {
          let {
            isLoading: isWeekLoading,
            tableData: weekTableData,
            error: weekError
          } = _ref6;
          return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(TeamMisery, {
            isLoading: isLoading || isWeekLoading,
            organization: organization,
            location: location,
            projects: projects,
            period: period,
            periodTableData: periodTableData,
            weekTableData: weekTableData,
            error: error !== null && error !== void 0 ? error : weekError
          });
        }
      });
    }
  });
}

TeamMiseryWrapper.displayName = "TeamMiseryWrapper";
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TeamMiseryWrapper);

const StyledPanelTable = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__["default"])(sentry_components_panels_panelTable__WEBPACK_IMPORTED_MODULE_6__["default"],  true ? {
  target: "e1uglq28"
} : 0)("grid-template-columns:1.25fr 0.5fr 112px 112px 0.25fr;font-size:", p => p.theme.fontSizeMedium, ";white-space:nowrap;margin-bottom:0;border:0;box-shadow:unset;&>div{padding:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_9__["default"])(1), " ", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_9__["default"])(2), ";}", p => p.isEmpty && /*#__PURE__*/(0,_emotion_react__WEBPACK_IMPORTED_MODULE_17__.css)("&>div:last-child{padding:48px ", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_9__["default"])(2), ";}" + ( true ? "" : 0),  true ? "" : 0), ";" + ( true ? "" : 0));

const FlexCenter = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__["default"])('div',  true ? {
  target: "e1uglq27"
} : 0)( true ? {
  name: "s5xdrg",
  styles: "display:flex;align-items:center"
} : 0);

const KeyTransactionTitleWrapper = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__["default"])('div',  true ? {
  target: "e1uglq26"
} : 0)(p => p.theme.overflowEllipsis, ";display:flex;align-items:center;" + ( true ? "" : 0));

const StyledIconStar = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__["default"])(sentry_icons__WEBPACK_IMPORTED_MODULE_7__.IconStar,  true ? {
  target: "e1uglq25"
} : 0)("display:block;margin-right:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_9__["default"])(1), ";margin-bottom:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_9__["default"])(0.5), ";" + ( true ? "" : 0));

const TransactionWrapper = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__["default"])('div',  true ? {
  target: "e1uglq24"
} : 0)(p => p.theme.overflowEllipsis, ";" + ( true ? "" : 0));

const RightAligned = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__["default"])('span',  true ? {
  target: "e1uglq23"
} : 0)( true ? {
  name: "2qga7i",
  styles: "text-align:right"
} : 0);

const ScoreWrapper = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__["default"])('div',  true ? {
  target: "e1uglq22"
} : 0)( true ? {
  name: "4os8x4",
  styles: "display:flex;align-items:center;justify-content:flex-end;text-align:right"
} : 0);

const SubText = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__["default"])('div',  true ? {
  target: "e1uglq21"
} : 0)("color:", p => p.theme.subText, ";" + ( true ? "" : 0));

const TrendText = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__["default"])('div',  true ? {
  target: "e1uglq20"
} : 0)("color:", p => p.theme[p.color], ";" + ( true ? "" : 0));

/***/ }),

/***/ "./app/views/organizationStats/teamInsights/teamReleases.tsx":
/*!*******************************************************************!*\
  !*** ./app/views/organizationStats/teamInsights/teamReleases.tsx ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "../node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @emotion/styled/base */ "../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "../node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @emotion/react */ "../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js");
/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @emotion/react */ "../node_modules/@emotion/react/dist/emotion-react.browser.esm.js");
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/isEqual */ "../node_modules/lodash/isEqual.js");
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var lodash_round__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash/round */ "../node_modules/lodash/round.js");
/* harmony import */ var lodash_round__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_round__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "../node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var sentry_components_asyncComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sentry/components/asyncComponent */ "./app/components/asyncComponent.tsx");
/* harmony import */ var sentry_components_button__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sentry/components/button */ "./app/components/button.tsx");
/* harmony import */ var sentry_components_charts_barChart__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! sentry/components/charts/barChart */ "./app/components/charts/barChart.tsx");
/* harmony import */ var sentry_components_charts_components_markLine__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sentry/components/charts/components/markLine */ "./app/components/charts/components/markLine.tsx");
/* harmony import */ var sentry_components_links_link__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! sentry/components/links/link */ "./app/components/links/link.tsx");
/* harmony import */ var sentry_components_organizations_pageFilters_parse__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! sentry/components/organizations/pageFilters/parse */ "./app/components/organizations/pageFilters/parse.tsx");
/* harmony import */ var sentry_components_panels_panelTable__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! sentry/components/panels/panelTable */ "./app/components/panels/panelTable.tsx");
/* harmony import */ var sentry_components_placeholder__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! sentry/components/placeholder */ "./app/components/placeholder.tsx");
/* harmony import */ var sentry_icons__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! sentry/icons */ "./app/icons/index.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_styles_space__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! sentry/styles/space */ "./app/styles/space.tsx");
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./styles */ "./app/views/organizationStats/teamInsights/styles.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./utils */ "./app/views/organizationStats/teamInsights/utils.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");




function _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }






















class TeamReleases extends sentry_components_asyncComponent__WEBPACK_IMPORTED_MODULE_7__["default"] {
  constructor() {
    super(...arguments);

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "shouldRenderBadRequests", true);
  }

  getDefaultState() {
    return { ...super.getDefaultState(),
      weekReleases: null,
      periodReleases: null
    };
  }

  getEndpoints() {
    const {
      organization,
      start,
      end,
      period,
      utc,
      teamSlug
    } = this.props;
    const datetime = {
      start,
      end,
      period,
      utc
    };
    const endpoints = [['periodReleases', `/teams/${organization.slug}/${teamSlug}/release-count/`, {
      query: { ...(0,sentry_components_organizations_pageFilters_parse__WEBPACK_IMPORTED_MODULE_12__.normalizeDateTimeParams)(datetime)
      }
    }], ['weekReleases', `/teams/${organization.slug}/${teamSlug}/release-count/`, {
      query: {
        statsPeriod: '7d'
      }
    }]];
    return endpoints;
  }

  componentDidUpdate(prevProps) {
    const {
      teamSlug,
      start,
      end,
      period,
      utc
    } = this.props;

    if (prevProps.start !== start || prevProps.end !== end || prevProps.period !== period || prevProps.utc !== utc || !lodash_isEqual__WEBPACK_IMPORTED_MODULE_4___default()(prevProps.teamSlug, teamSlug)) {
      this.remountComponent();
    }
  }

  getReleaseCount(projectId, dataset) {
    const {
      periodReleases,
      weekReleases
    } = this.state;
    const releasesPeriod = dataset === 'week' ? weekReleases === null || weekReleases === void 0 ? void 0 : weekReleases.last_week_totals : periodReleases === null || periodReleases === void 0 ? void 0 : periodReleases.project_avgs;
    const count = releasesPeriod !== null && releasesPeriod !== void 0 && releasesPeriod[projectId] ? Math.ceil(releasesPeriod === null || releasesPeriod === void 0 ? void 0 : releasesPeriod[projectId]) : 0;
    return count;
  }

  getTrend(projectId) {
    const periodCount = this.getReleaseCount(projectId, 'period');
    const weekCount = this.getReleaseCount(projectId, 'week');

    if (periodCount === null || weekCount === null) {
      return null;
    }

    return weekCount - periodCount;
  }

  renderLoading() {
    return this.renderBody();
  }

  renderReleaseCount(projectId, dataset) {
    const {
      loading
    } = this.state;

    if (loading) {
      return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("div", {
        children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(sentry_components_placeholder__WEBPACK_IMPORTED_MODULE_14__["default"], {
          width: "80px",
          height: "25px"
        })
      });
    }

    const count = this.getReleaseCount(Number(projectId), dataset);

    if (count === null) {
      return '\u2014';
    }

    return count;
  }

  renderTrend(projectId) {
    const {
      loading
    } = this.state;

    if (loading) {
      return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("div", {
        children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(sentry_components_placeholder__WEBPACK_IMPORTED_MODULE_14__["default"], {
          width: "80px",
          height: "25px"
        })
      });
    }

    const trend = this.getTrend(Number(projectId));

    if (trend === null) {
      return '\u2014';
    }

    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(SubText, {
      color: trend >= 0 ? 'green300' : 'red300',
      children: [`${lodash_round__WEBPACK_IMPORTED_MODULE_5___default()(Math.abs(trend), 3)}`, (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(PaddedIconArrow, {
        direction: trend >= 0 ? 'up' : 'down',
        size: "xs"
      })]
    });
  }

  renderBody() {
    var _periodReleases$relea, _periodReleases$proje;

    const {
      projects,
      period,
      theme,
      organization
    } = this.props;
    const {
      periodReleases
    } = this.state;
    const sortedProjects = projects.map(project => {
      var _this$getTrend;

      return {
        project,
        trend: (_this$getTrend = this.getTrend(Number(project.id))) !== null && _this$getTrend !== void 0 ? _this$getTrend : 0
      };
    }).sort((a, b) => Math.abs(b.trend) - Math.abs(a.trend));
    const groupedProjects = (0,_utils__WEBPACK_IMPORTED_MODULE_19__.groupByTrend)(sortedProjects);
    const data = Object.entries((_periodReleases$relea = periodReleases === null || periodReleases === void 0 ? void 0 : periodReleases.release_counts) !== null && _periodReleases$relea !== void 0 ? _periodReleases$relea : {}).map(_ref => {
      let [bucket, count] = _ref;
      return {
        value: Math.ceil(count),
        name: new Date(bucket).getTime()
      };
    });
    const seriesData = (0,_utils__WEBPACK_IMPORTED_MODULE_19__.sortSeriesByDay)(data);
    const averageValues = Object.values((_periodReleases$proje = periodReleases === null || periodReleases === void 0 ? void 0 : periodReleases.project_avgs) !== null && _periodReleases$proje !== void 0 ? _periodReleases$proje : {});
    const projectAvgSum = averageValues.reduce((total, currentData) => total + currentData, 0);
    const totalPeriodAverage = Math.ceil(projectAvgSum / averageValues.length);
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div", {
      children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(ChartWrapper, {
        children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(sentry_components_charts_barChart__WEBPACK_IMPORTED_MODULE_9__.BarChart, {
          style: {
            height: 190
          },
          isGroupedByDate: true,
          useShortDate: true,
          period: "7d",
          legend: {
            right: 3,
            top: 0
          },
          yAxis: {
            minInterval: 1
          },
          xAxis: (0,_utils__WEBPACK_IMPORTED_MODULE_19__.barAxisLabel)(seriesData.length),
          series: [{
            seriesName: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_16__.t)('This Period'),
            silent: true,
            data: seriesData,
            markLine: (0,sentry_components_charts_components_markLine__WEBPACK_IMPORTED_MODULE_10__["default"])({
              silent: true,
              lineStyle: {
                color: theme.gray200,
                type: 'dashed',
                width: 1
              },
              data: [{
                yAxis: totalPeriodAverage
              }],
              label: {
                show: false
              }
            }),
            barCategoryGap: '5%'
          }],
          tooltip: {
            formatter: seriesParams => {
              // `seriesParams` can be an array or an object :/
              const [series] = Array.isArray(seriesParams) ? seriesParams : [seriesParams];
              const dateFormat = 'MMM D';
              const startDate = moment__WEBPACK_IMPORTED_MODULE_6___default()(series.data[0]).format(dateFormat);
              const endDate = moment__WEBPACK_IMPORTED_MODULE_6___default()(series.data[0]).add(7, 'days').format(dateFormat);
              return ['<div class="tooltip-series">', `<div><span class="tooltip-label">${series.marker} <strong>${series.seriesName}</strong></span> ${series.data[1]}</div>`, `<div><span class="tooltip-label"><strong>Last ${period} Average</strong></span> ${totalPeriodAverage}</div>`, '</div>', `<div class="tooltip-date">${startDate} - ${endDate}</div>`, '<div class="tooltip-arrow"></div>'].join('');
            }
          }
        })
      }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(StyledPanelTable, {
        isEmpty: projects.length === 0,
        emptyMessage: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_16__.t)('No releases were setup for this team’s projects'),
        emptyAction: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(sentry_components_button__WEBPACK_IMPORTED_MODULE_8__["default"], {
          size: "sm",
          external: true,
          href: "https://docs.sentry.io/product/releases/setup/",
          children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_16__.t)('Learn More')
        }),
        headers: [(0,sentry_locale__WEBPACK_IMPORTED_MODULE_16__.t)('Releases Per Project'), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(RightAligned, {
          children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_16__.tct)('Last [period] Average', {
            period
          })
        }, "last"), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(RightAligned, {
          children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_16__.t)('Last 7 Days')
        }, "curr"), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(RightAligned, {
          children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_16__.t)('Difference')
        }, "diff")],
        children: groupedProjects.map(_ref2 => {
          let {
            project
          } = _ref2;
          return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(react__WEBPACK_IMPORTED_MODULE_3__.Fragment, {
            children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_styles__WEBPACK_IMPORTED_MODULE_18__.ProjectBadgeContainer, {
              children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_styles__WEBPACK_IMPORTED_MODULE_18__.ProjectBadge, {
                avatarSize: 18,
                project: project,
                to: {
                  pathname: `/organizations/${organization.slug}/releases/`,
                  query: {
                    project: project.id
                  }
                }
              })
            }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(ScoreWrapper, {
              children: this.renderReleaseCount(project.id, 'period')
            }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(ScoreWrapper, {
              children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(sentry_components_links_link__WEBPACK_IMPORTED_MODULE_11__["default"], {
                to: {
                  pathname: `/organizations/${organization.slug}/releases/`,
                  query: {
                    project: project.id,
                    statsPeriod: '7d'
                  }
                },
                children: this.renderReleaseCount(project.id, 'week')
              })
            }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(ScoreWrapper, {
              children: this.renderTrend(project.id)
            })]
          }, project.id);
        })
      })]
    });
  }

}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_emotion_react__WEBPACK_IMPORTED_MODULE_21__.d)(TeamReleases));

const ChartWrapper = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])('div',  true ? {
  target: "e1az29pq5"
} : 0)("padding:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_17__["default"])(2), " ", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_17__["default"])(2), " 0 ", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_17__["default"])(2), ";border-bottom:1px solid ", p => p.theme.border, ";" + ( true ? "" : 0));

const StyledPanelTable = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_components_panels_panelTable__WEBPACK_IMPORTED_MODULE_13__["default"],  true ? {
  target: "e1az29pq4"
} : 0)("grid-template-columns:1fr 0.2fr 0.2fr 0.2fr;white-space:nowrap;margin-bottom:0;border:0;font-size:", p => p.theme.fontSizeMedium, ";box-shadow:unset;&>div{padding:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_17__["default"])(1), " ", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_17__["default"])(2), ";}", p => p.isEmpty && /*#__PURE__*/(0,_emotion_react__WEBPACK_IMPORTED_MODULE_22__.css)("&>div:last-child{padding:48px ", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_17__["default"])(2), ";}" + ( true ? "" : 0),  true ? "" : 0), ";" + ( true ? "" : 0));

const RightAligned = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])('span',  true ? {
  target: "e1az29pq3"
} : 0)( true ? {
  name: "2qga7i",
  styles: "text-align:right"
} : 0);

const ScoreWrapper = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])('div',  true ? {
  target: "e1az29pq2"
} : 0)( true ? {
  name: "4os8x4",
  styles: "display:flex;align-items:center;justify-content:flex-end;text-align:right"
} : 0);

const PaddedIconArrow = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_icons__WEBPACK_IMPORTED_MODULE_15__.IconArrow,  true ? {
  target: "e1az29pq1"
} : 0)("margin:0 ", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_17__["default"])(0.5), ";" + ( true ? "" : 0));

const SubText = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])('div',  true ? {
  target: "e1az29pq0"
} : 0)("color:", p => p.theme[p.color], ";" + ( true ? "" : 0));

/***/ }),

/***/ "./app/views/organizationStats/teamInsights/teamStability.tsx":
/*!********************************************************************!*\
  !*** ./app/views/organizationStats/teamInsights/teamStability.tsx ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "../node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @emotion/styled/base */ "../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "../node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @emotion/react */ "../node_modules/@emotion/react/dist/emotion-react.browser.esm.js");
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/isEqual */ "../node_modules/lodash/isEqual.js");
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var lodash_round__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash/round */ "../node_modules/lodash/round.js");
/* harmony import */ var lodash_round__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_round__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var sentry_components_asyncComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sentry/components/asyncComponent */ "./app/components/asyncComponent.tsx");
/* harmony import */ var sentry_components_button__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sentry/components/button */ "./app/components/button.tsx");
/* harmony import */ var sentry_components_charts_miniBarChart__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sentry/components/charts/miniBarChart */ "./app/components/charts/miniBarChart.tsx");
/* harmony import */ var sentry_components_charts_sessionsRequest__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! sentry/components/charts/sessionsRequest */ "./app/components/charts/sessionsRequest.tsx");
/* harmony import */ var sentry_components_organizations_pageFilters_parse__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sentry/components/organizations/pageFilters/parse */ "./app/components/organizations/pageFilters/parse.tsx");
/* harmony import */ var sentry_components_panels_panelTable__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! sentry/components/panels/panelTable */ "./app/components/panels/panelTable.tsx");
/* harmony import */ var sentry_components_placeholder__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! sentry/components/placeholder */ "./app/components/placeholder.tsx");
/* harmony import */ var sentry_icons__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! sentry/icons */ "./app/icons/index.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_styles_space__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! sentry/styles/space */ "./app/styles/space.tsx");
/* harmony import */ var sentry_types__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! sentry/types */ "./app/types/index.tsx");
/* harmony import */ var sentry_utils_formatters__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! sentry/utils/formatters */ "./app/utils/formatters.tsx");
/* harmony import */ var sentry_utils_sessions__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! sentry/utils/sessions */ "./app/utils/sessions.tsx");
/* harmony import */ var sentry_views_releases_utils__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! sentry/views/releases/utils */ "./app/views/releases/utils/index.tsx");
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./styles */ "./app/views/organizationStats/teamInsights/styles.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./utils */ "./app/views/organizationStats/teamInsights/utils.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");




function _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }
























class TeamStability extends sentry_components_asyncComponent__WEBPACK_IMPORTED_MODULE_6__["default"] {
  constructor() {
    super(...arguments);

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "shouldRenderBadRequests", true);
  }

  getDefaultState() {
    return { ...super.getDefaultState(),
      weekSessions: null,
      periodSessions: null
    };
  }

  getEndpoints() {
    const {
      organization,
      start,
      end,
      period,
      utc,
      projects
    } = this.props;
    const projectsWithSessions = projects.filter(project => project.hasSessions);

    if (projectsWithSessions.length === 0) {
      return [];
    }

    const datetime = {
      start,
      end,
      period,
      utc
    };
    const commonQuery = {
      environment: [],
      project: projectsWithSessions.map(p => p.id),
      field: 'sum(session)',
      groupBy: ['session.status', 'project'],
      interval: '1d'
    };
    const endpoints = [['periodSessions', `/organizations/${organization.slug}/sessions/`, {
      query: { ...commonQuery,
        ...(0,sentry_components_organizations_pageFilters_parse__WEBPACK_IMPORTED_MODULE_10__.normalizeDateTimeParams)(datetime)
      }
    }], ['weekSessions', `/organizations/${organization.slug}/sessions/`, {
      query: { ...commonQuery,
        statsPeriod: '7d'
      }
    }]];
    return endpoints;
  }

  componentDidUpdate(prevProps) {
    const {
      projects,
      start,
      end,
      period,
      utc
    } = this.props;

    if (prevProps.start !== start || prevProps.end !== end || prevProps.period !== period || prevProps.utc !== utc || !lodash_isEqual__WEBPACK_IMPORTED_MODULE_4___default()(prevProps.projects, projects)) {
      this.remountComponent();
    }
  }

  getScore(projectId, dataset) {
    const {
      periodSessions,
      weekSessions
    } = this.state;
    const sessions = dataset === 'week' ? weekSessions : periodSessions;
    const projectGroups = sessions === null || sessions === void 0 ? void 0 : sessions.groups.filter(group => group.by.project === projectId);
    return (0,sentry_utils_sessions__WEBPACK_IMPORTED_MODULE_18__.getCrashFreeRate)(projectGroups, sentry_types__WEBPACK_IMPORTED_MODULE_16__.SessionFieldWithOperation.SESSIONS);
  }

  getTrend(projectId) {
    const periodScore = this.getScore(projectId, 'period');
    const weekScore = this.getScore(projectId, 'week');

    if (periodScore === null || weekScore === null) {
      return null;
    }

    return weekScore - periodScore;
  }

  getMiniBarChartSeries(project, response) {
    const sumSessions = (0,sentry_utils_sessions__WEBPACK_IMPORTED_MODULE_18__.getSeriesSum)(response.groups.filter(group => group.by.project === Number(project.id)), sentry_types__WEBPACK_IMPORTED_MODULE_16__.SessionFieldWithOperation.SESSIONS, response.intervals);
    const countSeries = (0,sentry_utils_sessions__WEBPACK_IMPORTED_MODULE_18__.getCountSeries)(sentry_types__WEBPACK_IMPORTED_MODULE_16__.SessionFieldWithOperation.SESSIONS, response.groups.find(g => g.by.project === Number(project.id) && g.by['session.status'] === sentry_types__WEBPACK_IMPORTED_MODULE_16__.SessionStatus.HEALTHY), response.intervals);
    const countSeriesWeeklyTotals = Array(sumSessions.length / 7).fill(0);
    countSeries.forEach((s, idx) => countSeriesWeeklyTotals[Math.floor(idx / 7)] += s.value);
    const sumSessionsWeeklyTotals = Array(sumSessions.length / 7).fill(0);
    sumSessions.forEach((s, idx) => sumSessionsWeeklyTotals[Math.floor(idx / 7)] += s);
    const data = countSeriesWeeklyTotals.map((value, idx) => ({
      name: countSeries[idx * 7].name,
      value: sumSessionsWeeklyTotals[idx] ? (0,sentry_utils_formatters__WEBPACK_IMPORTED_MODULE_17__.formatFloat)(value / sumSessionsWeeklyTotals[idx] * 100, 2) : 0
    }));
    return [{
      seriesName: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_14__.t)('Crash Free Sessions'),
      data
    }];
  }

  renderLoading() {
    return this.renderBody();
  }

  renderScore(projectId, dataset) {
    const {
      loading
    } = this.state;

    if (loading) {
      return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)("div", {
        children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(sentry_components_placeholder__WEBPACK_IMPORTED_MODULE_12__["default"], {
          width: "80px",
          height: "25px"
        })
      });
    }

    const score = this.getScore(Number(projectId), dataset);

    if (score === null) {
      return '\u2014';
    }

    return (0,sentry_views_releases_utils__WEBPACK_IMPORTED_MODULE_19__.displayCrashFreePercent)(score);
  }

  renderTrend(projectId) {
    const {
      loading
    } = this.state;

    if (loading) {
      return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)("div", {
        children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(sentry_components_placeholder__WEBPACK_IMPORTED_MODULE_12__["default"], {
          width: "80px",
          height: "25px"
        })
      });
    }

    const trend = this.getTrend(Number(projectId));

    if (trend === null) {
      return '\u2014';
    }

    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(SubText, {
      color: trend >= 0 ? 'green300' : 'red300',
      children: [`${lodash_round__WEBPACK_IMPORTED_MODULE_5___default()(Math.abs(trend), 3)}\u0025`, (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(PaddedIconArrow, {
        direction: trend >= 0 ? 'up' : 'down',
        size: "xs"
      })]
    });
  }

  renderBody() {
    const {
      organization,
      projects,
      period
    } = this.props;
    const sortedProjects = projects.map(project => {
      var _this$getTrend;

      return {
        project,
        trend: (_this$getTrend = this.getTrend(Number(project.id))) !== null && _this$getTrend !== void 0 ? _this$getTrend : 0
      };
    }).sort((a, b) => Math.abs(b.trend) - Math.abs(a.trend));
    const groupedProjects = (0,_utils__WEBPACK_IMPORTED_MODULE_21__.groupByTrend)(sortedProjects);
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(sentry_components_charts_sessionsRequest__WEBPACK_IMPORTED_MODULE_9__["default"], {
      api: this.api,
      project: projects.map(_ref => {
        let {
          id
        } = _ref;
        return Number(id);
      }),
      organization: organization,
      interval: "1d",
      groupBy: ['session.status', 'project'],
      field: [sentry_types__WEBPACK_IMPORTED_MODULE_16__.SessionFieldWithOperation.SESSIONS],
      statsPeriod: period,
      children: _ref2 => {
        let {
          response,
          loading
        } = _ref2;
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(StyledPanelTable, {
          isEmpty: projects.length === 0,
          emptyMessage: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_14__.t)('No projects with release health enabled'),
          emptyAction: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(sentry_components_button__WEBPACK_IMPORTED_MODULE_7__["default"], {
            size: "sm",
            external: true,
            href: "https://docs.sentry.io/platforms/dotnet/guides/nlog/configuration/releases/#release-health",
            children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_14__.t)('Learn More')
          }),
          headers: [(0,sentry_locale__WEBPACK_IMPORTED_MODULE_14__.t)('Project'), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(RightAligned, {
            children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_14__.tct)('Last [period]', {
              period
            })
          }, "last"), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(RightAligned, {
            children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_14__.tct)('[period] Avg', {
              period
            })
          }, "avg"), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(RightAligned, {
            children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_14__.t)('Last 7 Days')
          }, "curr"), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(RightAligned, {
            children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_14__.t)('Difference')
          }, "diff")],
          children: groupedProjects.map(_ref3 => {
            let {
              project
            } = _ref3;
            return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(react__WEBPACK_IMPORTED_MODULE_3__.Fragment, {
              children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(_styles__WEBPACK_IMPORTED_MODULE_20__.ProjectBadgeContainer, {
                children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(_styles__WEBPACK_IMPORTED_MODULE_20__.ProjectBadge, {
                  avatarSize: 18,
                  project: project
                })
              }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)("div", {
                children: response && !loading && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(sentry_components_charts_miniBarChart__WEBPACK_IMPORTED_MODULE_8__["default"], {
                  isGroupedByDate: true,
                  showTimeInTooltip: true,
                  series: this.getMiniBarChartSeries(project, response),
                  height: 25,
                  tooltipFormatter: value => `${value.toLocaleString()}%`
                })
              }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(ScoreWrapper, {
                children: this.renderScore(project.id, 'period')
              }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(ScoreWrapper, {
                children: this.renderScore(project.id, 'week')
              }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(ScoreWrapper, {
                children: this.renderTrend(project.id)
              })]
            }, project.id);
          })
        });
      }
    });
  }

}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TeamStability);

const StyledPanelTable = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_components_panels_panelTable__WEBPACK_IMPORTED_MODULE_11__["default"],  true ? {
  target: "e182a5844"
} : 0)("grid-template-columns:1fr 0.2fr 0.2fr 0.2fr 0.2fr;font-size:", p => p.theme.fontSizeMedium, ";white-space:nowrap;margin-bottom:0;border:0;box-shadow:unset;overflow:visible;&>div{padding:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_15__["default"])(1), " ", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_15__["default"])(2), ";}", p => p.isEmpty && /*#__PURE__*/(0,_emotion_react__WEBPACK_IMPORTED_MODULE_23__.css)("&>div:last-child{padding:48px ", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_15__["default"])(2), ";}" + ( true ? "" : 0),  true ? "" : 0), ";" + ( true ? "" : 0));

const RightAligned = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])('span',  true ? {
  target: "e182a5843"
} : 0)( true ? {
  name: "2qga7i",
  styles: "text-align:right"
} : 0);

const ScoreWrapper = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])('div',  true ? {
  target: "e182a5842"
} : 0)( true ? {
  name: "4os8x4",
  styles: "display:flex;align-items:center;justify-content:flex-end;text-align:right"
} : 0);

const PaddedIconArrow = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_icons__WEBPACK_IMPORTED_MODULE_13__.IconArrow,  true ? {
  target: "e182a5841"
} : 0)("margin:0 ", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_15__["default"])(0.5), ";" + ( true ? "" : 0));

const SubText = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])('div',  true ? {
  target: "e182a5840"
} : 0)("color:", p => p.theme[p.color], ";" + ( true ? "" : 0));

/***/ }),

/***/ "./app/views/performance/transactionSummary/utils.tsx":
/*!************************************************************!*\
  !*** ./app/views/performance/transactionSummary/utils.tsx ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SidebarSpacer": () => (/* binding */ SidebarSpacer),
/* harmony export */   "TransactionFilterOptions": () => (/* binding */ TransactionFilterOptions),
/* harmony export */   "generateTraceLink": () => (/* binding */ generateTraceLink),
/* harmony export */   "generateTransactionLink": () => (/* binding */ generateTransactionLink),
/* harmony export */   "generateTransactionSummaryRoute": () => (/* binding */ generateTransactionSummaryRoute),
/* harmony export */   "normalizeSearchConditions": () => (/* binding */ normalizeSearchConditions),
/* harmony export */   "normalizeSearchConditionsWithTransactionName": () => (/* binding */ normalizeSearchConditionsWithTransactionName),
/* harmony export */   "transactionSummaryRouteWithQuery": () => (/* binding */ transactionSummaryRouteWithQuery)
/* harmony export */ });
/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/styled/base */ "../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");
/* harmony import */ var sentry_styles_space__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sentry/styles/space */ "./app/styles/space.tsx");
/* harmony import */ var sentry_utils_discover_urls__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! sentry/utils/discover/urls */ "./app/utils/discover/urls.tsx");
/* harmony import */ var sentry_utils_performance_urls__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sentry/utils/performance/urls */ "./app/utils/performance/urls.ts");
/* harmony import */ var sentry_utils_tokenizeSearch__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! sentry/utils/tokenizeSearch */ "./app/utils/tokenizeSearch.tsx");
/* harmony import */ var sentry_views_performance_traceDetails_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sentry/views/performance/traceDetails/utils */ "./app/views/performance/traceDetails/utils.tsx");






let TransactionFilterOptions;

(function (TransactionFilterOptions) {
  TransactionFilterOptions["FASTEST"] = "fastest";
  TransactionFilterOptions["SLOW"] = "slow";
  TransactionFilterOptions["OUTLIER"] = "outlier";
  TransactionFilterOptions["RECENT"] = "recent";
})(TransactionFilterOptions || (TransactionFilterOptions = {}));

function generateTransactionSummaryRoute(_ref) {
  let {
    orgSlug
  } = _ref;
  return `/organizations/${orgSlug}/performance/summary/`;
} // normalizes search conditions by removing any redundant search conditions before presenting them in:
// - query strings
// - search UI

function normalizeSearchConditions(query) {
  const filterParams = normalizeSearchConditionsWithTransactionName(query); // no need to include transaction as its already in the query params

  filterParams.removeFilter('transaction');
  return filterParams;
} // normalizes search conditions by removing any redundant search conditions, but retains any transaction name

function normalizeSearchConditionsWithTransactionName(query) {
  const filterParams = new sentry_utils_tokenizeSearch__WEBPACK_IMPORTED_MODULE_4__.MutableSearch(query); // remove any event.type queries since it is implied to apply to only transactions

  filterParams.removeFilter('event.type');
  return filterParams;
}
function transactionSummaryRouteWithQuery(_ref2) {
  let {
    orgSlug,
    transaction,
    projectID,
    query,
    unselectedSeries = 'p100()',
    display,
    trendFunction,
    trendColumn,
    showTransactions,
    additionalQuery
  } = _ref2;
  const pathname = generateTransactionSummaryRoute({
    orgSlug
  });
  let searchFilter;

  if (typeof query.query === 'string') {
    searchFilter = normalizeSearchConditions(query.query).formatString();
  } else {
    searchFilter = query.query;
  }

  return {
    pathname,
    query: {
      transaction,
      project: projectID,
      environment: query.environment,
      statsPeriod: query.statsPeriod,
      start: query.start,
      end: query.end,
      query: searchFilter,
      unselectedSeries,
      showTransactions,
      display,
      trendFunction,
      trendColumn,
      ...additionalQuery
    }
  };
}
function generateTraceLink(dateSelection) {
  return (organization, tableRow, _query) => {
    const traceId = `${tableRow.trace}`;

    if (!traceId) {
      return {};
    }

    return (0,sentry_views_performance_traceDetails_utils__WEBPACK_IMPORTED_MODULE_5__.getTraceDetailsUrl)(organization, traceId, dateSelection, {});
  };
}
function generateTransactionLink(transactionName) {
  return (organization, tableRow, query, spanId) => {
    const eventSlug = (0,sentry_utils_discover_urls__WEBPACK_IMPORTED_MODULE_2__.generateEventSlug)(tableRow);
    return (0,sentry_utils_performance_urls__WEBPACK_IMPORTED_MODULE_3__.getTransactionDetailsUrl)(organization.slug, eventSlug, transactionName, query, spanId);
  };
}
const SidebarSpacer = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__["default"])('div',  true ? {
  target: "e1radvp0"
} : 0)("margin-top:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_1__["default"])(3), ";" + ( true ? "" : 0));

/***/ }),

/***/ "../node_modules/lodash/_baseExtremum.js":
/*!***********************************************!*\
  !*** ../node_modules/lodash/_baseExtremum.js ***!
  \***********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var isSymbol = __webpack_require__(/*! ./isSymbol */ "../node_modules/lodash/isSymbol.js");

/**
 * The base implementation of methods like `_.max` and `_.min` which accepts a
 * `comparator` to determine the extremum value.
 *
 * @private
 * @param {Array} array The array to iterate over.
 * @param {Function} iteratee The iteratee invoked per iteration.
 * @param {Function} comparator The comparator used to compare values.
 * @returns {*} Returns the extremum value.
 */
function baseExtremum(array, iteratee, comparator) {
  var index = -1,
      length = array.length;

  while (++index < length) {
    var value = array[index],
        current = iteratee(value);

    if (current != null && (computed === undefined
          ? (current === current && !isSymbol(current))
          : comparator(current, computed)
        )) {
      var computed = current,
          result = value;
    }
  }
  return result;
}

module.exports = baseExtremum;


/***/ }),

/***/ "../node_modules/lodash/_baseGt.js":
/*!*****************************************!*\
  !*** ../node_modules/lodash/_baseGt.js ***!
  \*****************************************/
/***/ ((module) => {

/**
 * The base implementation of `_.gt` which doesn't coerce arguments.
 *
 * @private
 * @param {*} value The value to compare.
 * @param {*} other The other value to compare.
 * @returns {boolean} Returns `true` if `value` is greater than `other`,
 *  else `false`.
 */
function baseGt(value, other) {
  return value > other;
}

module.exports = baseGt;


/***/ }),

/***/ "../node_modules/lodash/_baseMean.js":
/*!*******************************************!*\
  !*** ../node_modules/lodash/_baseMean.js ***!
  \*******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var baseSum = __webpack_require__(/*! ./_baseSum */ "../node_modules/lodash/_baseSum.js");

/** Used as references for various `Number` constants. */
var NAN = 0 / 0;

/**
 * The base implementation of `_.mean` and `_.meanBy` without support for
 * iteratee shorthands.
 *
 * @private
 * @param {Array} array The array to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {number} Returns the mean.
 */
function baseMean(array, iteratee) {
  var length = array == null ? 0 : array.length;
  return length ? (baseSum(array, iteratee) / length) : NAN;
}

module.exports = baseMean;


/***/ }),

/***/ "../node_modules/lodash/_baseSum.js":
/*!******************************************!*\
  !*** ../node_modules/lodash/_baseSum.js ***!
  \******************************************/
/***/ ((module) => {

/**
 * The base implementation of `_.sum` and `_.sumBy` without support for
 * iteratee shorthands.
 *
 * @private
 * @param {Array} array The array to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {number} Returns the sum.
 */
function baseSum(array, iteratee) {
  var result,
      index = -1,
      length = array.length;

  while (++index < length) {
    var current = iteratee(array[index]);
    if (current !== undefined) {
      result = result === undefined ? current : (result + current);
    }
  }
  return result;
}

module.exports = baseSum;


/***/ }),

/***/ "../node_modules/lodash/maxBy.js":
/*!***************************************!*\
  !*** ../node_modules/lodash/maxBy.js ***!
  \***************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var baseExtremum = __webpack_require__(/*! ./_baseExtremum */ "../node_modules/lodash/_baseExtremum.js"),
    baseGt = __webpack_require__(/*! ./_baseGt */ "../node_modules/lodash/_baseGt.js"),
    baseIteratee = __webpack_require__(/*! ./_baseIteratee */ "../node_modules/lodash/_baseIteratee.js");

/**
 * This method is like `_.max` except that it accepts `iteratee` which is
 * invoked for each element in `array` to generate the criterion by which
 * the value is ranked. The iteratee is invoked with one argument: (value).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Math
 * @param {Array} array The array to iterate over.
 * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
 * @returns {*} Returns the maximum value.
 * @example
 *
 * var objects = [{ 'n': 1 }, { 'n': 2 }];
 *
 * _.maxBy(objects, function(o) { return o.n; });
 * // => { 'n': 2 }
 *
 * // The `_.property` iteratee shorthand.
 * _.maxBy(objects, 'n');
 * // => { 'n': 2 }
 */
function maxBy(array, iteratee) {
  return (array && array.length)
    ? baseExtremum(array, baseIteratee(iteratee, 2), baseGt)
    : undefined;
}

module.exports = maxBy;


/***/ }),

/***/ "../node_modules/lodash/mean.js":
/*!**************************************!*\
  !*** ../node_modules/lodash/mean.js ***!
  \**************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var baseMean = __webpack_require__(/*! ./_baseMean */ "../node_modules/lodash/_baseMean.js"),
    identity = __webpack_require__(/*! ./identity */ "../node_modules/lodash/identity.js");

/**
 * Computes the mean of the values in `array`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Math
 * @param {Array} array The array to iterate over.
 * @returns {number} Returns the mean.
 * @example
 *
 * _.mean([4, 2, 8, 6]);
 * // => 5
 */
function mean(array) {
  return baseMean(array, identity);
}

module.exports = mean;


/***/ }),

/***/ "../node_modules/lodash/negate.js":
/*!****************************************!*\
  !*** ../node_modules/lodash/negate.js ***!
  \****************************************/
/***/ ((module) => {

/** Error message constants. */
var FUNC_ERROR_TEXT = 'Expected a function';

/**
 * Creates a function that negates the result of the predicate `func`. The
 * `func` predicate is invoked with the `this` binding and arguments of the
 * created function.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Function
 * @param {Function} predicate The predicate to negate.
 * @returns {Function} Returns the new negated function.
 * @example
 *
 * function isEven(n) {
 *   return n % 2 == 0;
 * }
 *
 * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));
 * // => [1, 3, 5]
 */
function negate(predicate) {
  if (typeof predicate != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  return function() {
    var args = arguments;
    switch (args.length) {
      case 0: return !predicate.call(this);
      case 1: return !predicate.call(this, args[0]);
      case 2: return !predicate.call(this, args[0], args[1]);
      case 3: return !predicate.call(this, args[0], args[1], args[2]);
    }
    return !predicate.apply(this, args);
  };
}

module.exports = negate;


/***/ }),

/***/ "../node_modules/lodash/omitBy.js":
/*!****************************************!*\
  !*** ../node_modules/lodash/omitBy.js ***!
  \****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var baseIteratee = __webpack_require__(/*! ./_baseIteratee */ "../node_modules/lodash/_baseIteratee.js"),
    negate = __webpack_require__(/*! ./negate */ "../node_modules/lodash/negate.js"),
    pickBy = __webpack_require__(/*! ./pickBy */ "../node_modules/lodash/pickBy.js");

/**
 * The opposite of `_.pickBy`; this method creates an object composed of
 * the own and inherited enumerable string keyed properties of `object` that
 * `predicate` doesn't return truthy for. The predicate is invoked with two
 * arguments: (value, key).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Object
 * @param {Object} object The source object.
 * @param {Function} [predicate=_.identity] The function invoked per property.
 * @returns {Object} Returns the new object.
 * @example
 *
 * var object = { 'a': 1, 'b': '2', 'c': 3 };
 *
 * _.omitBy(object, _.isNumber);
 * // => { 'b': '2' }
 */
function omitBy(object, predicate) {
  return pickBy(object, negate(baseIteratee(predicate)));
}

module.exports = omitBy;


/***/ })

}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationStats_teamInsights_health_tsx-node_modules_lodash_maxBy_js-node_modules-ed2a57.7ff6ab784f7ad3f4e9e42d2b58cbb85a.js.map