(globalThis["webpackChunk"] = globalThis["webpackChunk"] || []).push([["app_views_eventsV2_results_tsx-node_modules_core-js_modules_es_string_match-all_js-node_modul-9f2406"],{

/***/ "./app/components/createAlertButton.tsx":
/*!**********************************************!*\
  !*** ./app/components/createAlertButton.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CreateAlertFromViewButton": () => (/* binding */ CreateAlertFromViewButton),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "../node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "../node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-router */ "../node_modules/react-router/es/index.js");
/* harmony import */ var sentry_actionCreators_indicator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sentry/actionCreators/indicator */ "./app/actionCreators/indicator.tsx");
/* harmony import */ var sentry_actionCreators_navigation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! sentry/actionCreators/navigation */ "./app/actionCreators/navigation.tsx");
/* harmony import */ var sentry_components_acl_access__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sentry/components/acl/access */ "./app/components/acl/access.tsx");
/* harmony import */ var sentry_components_assistant_guideAnchor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sentry/components/assistant/guideAnchor */ "./app/components/assistant/guideAnchor.tsx");
/* harmony import */ var sentry_components_button__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sentry/components/button */ "./app/components/button.tsx");
/* harmony import */ var sentry_components_links_link__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sentry/components/links/link */ "./app/components/links/link.tsx");
/* harmony import */ var sentry_icons__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! sentry/icons */ "./app/icons/index.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_utils_useApi__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! sentry/utils/useApi */ "./app/utils/useApi.tsx");
/* harmony import */ var sentry_views_alerts_wizard_options__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! sentry/views/alerts/wizard/options */ "./app/views/alerts/wizard/options.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");


// eslint-disable-next-line no-restricted-imports













/**
 * Provide a button that can create an alert from an event view.
 * Emits incompatible query issues on click
 */
function CreateAlertFromViewButton(_ref) {
  var _queryParams$query, _queryParams$yAxis;

  let {
    projects,
    eventView,
    organization,
    referrer,
    onClick,
    alertType,
    disableMetricDataset,
    ...buttonProps
  } = _ref;
  const project = projects.find(p => p.id === `${eventView.project[0]}`);
  const queryParams = eventView.generateQueryStringObject();

  if ((_queryParams$query = queryParams.query) !== null && _queryParams$query !== void 0 && _queryParams$query.includes(`project:${project === null || project === void 0 ? void 0 : project.slug}`)) {
    queryParams.query = queryParams.query.replace(`project:${project === null || project === void 0 ? void 0 : project.slug}`, '');
  }

  const alertTemplate = alertType ? sentry_views_alerts_wizard_options__WEBPACK_IMPORTED_MODULE_12__.AlertWizardRuleTemplates[alertType] : sentry_views_alerts_wizard_options__WEBPACK_IMPORTED_MODULE_12__.DEFAULT_WIZARD_TEMPLATE;
  const to = {
    pathname: `/organizations/${organization.slug}/alerts/new/metric/`,
    query: { ...queryParams,
      createFromDiscover: true,
      disableMetricDataset,
      referrer,
      ...alertTemplate,
      project: project === null || project === void 0 ? void 0 : project.slug,
      aggregate: (_queryParams$yAxis = queryParams.yAxis) !== null && _queryParams$yAxis !== void 0 ? _queryParams$yAxis : alertTemplate.aggregate
    }
  };

  const handleClick = () => {
    onClick === null || onClick === void 0 ? void 0 : onClick();
  };

  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(CreateAlertButton, {
    organization: organization,
    onClick: handleClick,
    to: to,
    "aria-label": (0,sentry_locale__WEBPACK_IMPORTED_MODULE_10__.t)('Create Alert'),
    ...buttonProps
  });
}

CreateAlertFromViewButton.displayName = "CreateAlertFromViewButton";
const CreateAlertButton = (0,react_router__WEBPACK_IMPORTED_MODULE_2__.withRouter)(_ref2 => {
  let {
    organization,
    projectSlug,
    iconProps,
    referrer,
    router,
    hideIcon,
    showPermissionGuide,
    alertOption,
    onEnter,
    ...buttonProps
  } = _ref2;
  const api = (0,sentry_utils_useApi__WEBPACK_IMPORTED_MODULE_11__["default"])();

  const createAlertUrl = providedProj => {
    const alertsBaseUrl = `/organizations/${organization.slug}/alerts`;
    const alertsArgs = [`${referrer ? `referrer=${referrer}` : ''}`, `${providedProj && providedProj !== ':projectId' ? `project=${providedProj}` : ''}`, alertOption ? `alert_option=${alertOption}` : ''].filter(item => item !== '');
    return `${alertsBaseUrl}/wizard/${alertsArgs.length ? '?' : ''}${alertsArgs.join('&')}`;
  };

  function handleClickWithoutProject(event) {
    event.preventDefault();
    onEnter === null || onEnter === void 0 ? void 0 : onEnter();
    (0,sentry_actionCreators_navigation__WEBPACK_IMPORTED_MODULE_4__.navigateTo)(createAlertUrl(':projectId'), router);
  }

  async function enableAlertsMemberWrite() {
    const settingsEndpoint = `/organizations/${organization.slug}/`;
    (0,sentry_actionCreators_indicator__WEBPACK_IMPORTED_MODULE_3__.addLoadingMessage)();

    try {
      await api.requestPromise(settingsEndpoint, {
        method: 'PUT',
        data: {
          alertsMemberWrite: true
        }
      });
      (0,sentry_actionCreators_indicator__WEBPACK_IMPORTED_MODULE_3__.addSuccessMessage)((0,sentry_locale__WEBPACK_IMPORTED_MODULE_10__.t)('Successfully updated organization settings'));
    } catch (err) {
      (0,sentry_actionCreators_indicator__WEBPACK_IMPORTED_MODULE_3__.addErrorMessage)((0,sentry_locale__WEBPACK_IMPORTED_MODULE_10__.t)('Unable to update organization settings'));
    }
  }

  const permissionTooltipText = (0,sentry_locale__WEBPACK_IMPORTED_MODULE_10__.tct)('Ask your organization owner or manager to [settingsLink:enable alerts access] for you.', {
    settingsLink: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(sentry_components_links_link__WEBPACK_IMPORTED_MODULE_8__["default"], {
      to: `/settings/${organization.slug}`
    })
  });

  const renderButton = hasAccess => {
    var _buttonProps$children;

    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(sentry_components_button__WEBPACK_IMPORTED_MODULE_7__["default"], {
      disabled: !hasAccess,
      title: !hasAccess ? permissionTooltipText : undefined,
      icon: !hideIcon && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(sentry_icons__WEBPACK_IMPORTED_MODULE_9__.IconSiren, { ...iconProps
      }),
      to: projectSlug ? createAlertUrl(projectSlug) : undefined,
      tooltipProps: {
        isHoverable: true,
        position: 'top',
        overlayStyle: {
          maxWidth: '270px'
        }
      },
      onClick: projectSlug ? onEnter : handleClickWithoutProject,
      ...buttonProps,
      children: (_buttonProps$children = buttonProps.children) !== null && _buttonProps$children !== void 0 ? _buttonProps$children : (0,sentry_locale__WEBPACK_IMPORTED_MODULE_10__.t)('Create Alert')
    });
  };

  const showGuide = !organization.alertsMemberWrite && !!showPermissionGuide;
  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(sentry_components_acl_access__WEBPACK_IMPORTED_MODULE_5__["default"], {
    organization: organization,
    access: ['alerts:write'],
    children: _ref3 => {
      let {
        hasAccess
      } = _ref3;
      return showGuide ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(sentry_components_acl_access__WEBPACK_IMPORTED_MODULE_5__["default"], {
        organization: organization,
        access: ['org:write'],
        children: _ref4 => {
          let {
            hasAccess: isOrgAdmin
          } = _ref4;
          return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(sentry_components_assistant_guideAnchor__WEBPACK_IMPORTED_MODULE_6__["default"], {
            target: isOrgAdmin ? 'alerts_write_owner' : 'alerts_write_member',
            onFinish: isOrgAdmin ? enableAlertsMemberWrite : undefined,
            children: renderButton(hasAccess)
          });
        }
      }) : renderButton(hasAccess);
    }
  });
});

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CreateAlertButton);

/***/ }),

/***/ "./app/components/dataExport.tsx":
/*!***************************************!*\
  !*** ./app/components/dataExport.tsx ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DataExport": () => (/* binding */ DataExport),
/* harmony export */   "ExportQueryType": () => (/* binding */ ExportQueryType),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "../node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/debounce */ "../node_modules/lodash/debounce.js");
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var sentry_actionCreators_indicator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sentry/actionCreators/indicator */ "./app/actionCreators/indicator.tsx");
/* harmony import */ var sentry_components_acl_feature__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! sentry/components/acl/feature */ "./app/components/acl/feature.tsx");
/* harmony import */ var sentry_components_button__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sentry/components/button */ "./app/components/button.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_utils_withApi__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sentry/utils/withApi */ "./app/utils/withApi.tsx");
/* harmony import */ var sentry_utils_withOrganization__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sentry/utils/withOrganization */ "./app/utils/withOrganization.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");








 // NOTE: Coordinate with other ExportQueryType (src/sentry/data_export/base.py)


let ExportQueryType;

(function (ExportQueryType) {
  ExportQueryType["IssuesByTag"] = "Issues-by-Tag";
  ExportQueryType["Discover"] = "Discover";
})(ExportQueryType || (ExportQueryType = {}));

function DataExport(_ref) {
  let {
    api,
    children,
    disabled,
    organization,
    payload,
    icon
  } = _ref;
  const unmountedRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);
  const [inProgress, setInProgress] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false); // We clear the indicator if export props change so that the user
  // can fire another export without having to wait for the previous one to finish.

  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {
    if (inProgress) {
      setInProgress(false);
    } // We are skipping the inProgress dependency because it would have fired on each handleDataExport
    // call and would have immediately turned off the value giving users no feedback on their click action.
    // An alternative way to handle this would have probably been to key the component by payload/queryType,
    // but that seems like it can be a complex object so tracking changes could result in very brittle behavior.
    // eslint-disable-next-line react-hooks/exhaustive-deps

  }, [payload.queryType, payload.queryInfo]); // Tracking unmounting of the component to prevent setState call on unmounted component

  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {
    return () => {
      unmountedRef.current = true;
    };
  }, []);
  const handleDataExport = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {
    setInProgress(true); // This is a fire and forget request.

    api.requestPromise(`/organizations/${organization.slug}/data-export/`, {
      includeAllArgs: true,
      method: 'POST',
      data: {
        query_type: payload.queryType,
        query_info: payload.queryInfo
      }
    }).then(_ref2 => {
      let [_data, _, response] = _ref2;

      // If component has unmounted, don't do anything
      if (unmountedRef.current) {
        return;
      }

      (0,sentry_actionCreators_indicator__WEBPACK_IMPORTED_MODULE_3__.addSuccessMessage)((response === null || response === void 0 ? void 0 : response.status) === 201 ? (0,sentry_locale__WEBPACK_IMPORTED_MODULE_6__.t)("Sit tight. We'll shoot you an email when your data is ready for download.") : (0,sentry_locale__WEBPACK_IMPORTED_MODULE_6__.t)("It looks like we're already working on it. Sit tight, we'll email you."));
    }).catch(err => {
      var _err$responseJSON$det, _err$responseJSON;

      // If component has unmounted, don't do anything
      if (unmountedRef.current) {
        return;
      }

      const message = (_err$responseJSON$det = err === null || err === void 0 ? void 0 : (_err$responseJSON = err.responseJSON) === null || _err$responseJSON === void 0 ? void 0 : _err$responseJSON.detail) !== null && _err$responseJSON$det !== void 0 ? _err$responseJSON$det : "We tried our hardest, but we couldn't export your data. Give it another go.";
      (0,sentry_actionCreators_indicator__WEBPACK_IMPORTED_MODULE_3__.addErrorMessage)((0,sentry_locale__WEBPACK_IMPORTED_MODULE_6__.t)(message));
      setInProgress(false);
    });
  }, [payload.queryInfo, payload.queryType, organization.slug, api]);
  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(sentry_components_acl_feature__WEBPACK_IMPORTED_MODULE_4__["default"], {
    features: ['organizations:discover-query'],
    children: inProgress ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(sentry_components_button__WEBPACK_IMPORTED_MODULE_5__["default"], {
      size: "sm",
      priority: "default",
      title: "You can get on with your life. We'll email you when your data's ready.",
      disabled: true,
      icon: icon,
      children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_6__.t)("We're working on it...")
    }) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(sentry_components_button__WEBPACK_IMPORTED_MODULE_5__["default"], {
      onClick: lodash_debounce__WEBPACK_IMPORTED_MODULE_2___default()(handleDataExport, 500),
      disabled: disabled || false,
      size: "sm",
      priority: "default",
      title: "Put your data to work. Start your export and we'll email you when it's finished.",
      icon: icon,
      children: children ? children : (0,sentry_locale__WEBPACK_IMPORTED_MODULE_6__.t)('Export All to CSV')
    })
  });
}

DataExport.displayName = "DataExport";

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,sentry_utils_withApi__WEBPACK_IMPORTED_MODULE_7__["default"])((0,sentry_utils_withOrganization__WEBPACK_IMPORTED_MODULE_8__["default"])(DataExport)));

/***/ }),

/***/ "./app/utils/performance/urls.ts":
/*!***************************************!*\
  !*** ./app/utils/performance/urls.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getTransactionDetailsUrl": () => (/* binding */ getTransactionDetailsUrl)
/* harmony export */ });
/* harmony import */ var sentry_components_events_interfaces_spans_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sentry/components/events/interfaces/spans/utils */ "./app/components/events/interfaces/spans/utils.tsx");
/* harmony import */ var sentry_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sentry/utils */ "./app/utils.tsx");


function getTransactionDetailsUrl(orgSlug, eventSlug, transaction, query, spanId) {
  const locationQuery = { ...(query || {}),
    transaction
  };

  if (!(0,sentry_utils__WEBPACK_IMPORTED_MODULE_1__.defined)(locationQuery.transaction)) {
    delete locationQuery.transaction;
  }

  const target = {
    pathname: `/organizations/${orgSlug}/performance/${eventSlug}/`,
    query: locationQuery,
    hash: (0,sentry_utils__WEBPACK_IMPORTED_MODULE_1__.defined)(spanId) ? (0,sentry_components_events_interfaces_spans_utils__WEBPACK_IMPORTED_MODULE_0__.spanTargetHash)(spanId) : undefined
  };

  if (!(0,sentry_utils__WEBPACK_IMPORTED_MODULE_1__.defined)(target.hash)) {
    delete target.hash;
  }

  return target;
}

/***/ }),

/***/ "./app/utils/useOverlay.tsx":
/*!**********************************!*\
  !*** ./app/utils/useOverlay.tsx ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "../node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react_popper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-popper */ "../node_modules/react-popper/lib/esm/usePopper.js");
/* harmony import */ var _react_aria_button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @react-aria/button */ "../node_modules/@react-aria/button/dist/module.js");
/* harmony import */ var _react_aria_overlays__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @react-aria/overlays */ "../node_modules/@react-aria/overlays/dist/module.js");
/* harmony import */ var _react_aria_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @react-aria/utils */ "../node_modules/@react-aria/utils/dist/module.js");
/* harmony import */ var _react_stately_overlays__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-stately/overlays */ "../node_modules/@react-stately/overlays/dist/module.js");








function useOverlay() {
  let {
    isOpen,
    defaultOpen,
    onOpenChange,
    type = 'dialog',
    offset = 8,
    position = 'top',
    isDismissable = true,
    shouldCloseOnBlur = false,
    isKeyboardDismissDisabled,
    shouldCloseOnInteractOutside
  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  // Callback refs for react-popper
  const [triggerElement, setTriggerElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);
  const [overlayElement, setOverlayElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);
  const [arrowElement, setArrowElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null); // Ref objects for react-aria (useOverlayTrigger & useOverlay)

  const triggerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => ({
    current: triggerElement
  }), [triggerElement]);
  const overlayRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => ({
    current: overlayElement
  }), [overlayElement]); // Get props for trigger button

  const openState = (0,_react_stately_overlays__WEBPACK_IMPORTED_MODULE_2__.useOverlayTriggerState)({
    isOpen,
    defaultOpen,
    onOpenChange
  });
  const {
    buttonProps
  } = (0,_react_aria_button__WEBPACK_IMPORTED_MODULE_3__.useButton)({
    onPress: openState.open
  }, triggerRef);
  const {
    triggerProps,
    overlayProps: overlayTriggerProps
  } = (0,_react_aria_overlays__WEBPACK_IMPORTED_MODULE_4__.useOverlayTrigger)({
    type
  }, openState, triggerRef); // Get props for overlay element

  const {
    overlayProps
  } = (0,_react_aria_overlays__WEBPACK_IMPORTED_MODULE_4__.useOverlay)({
    onClose: openState.close,
    isOpen: openState.isOpen,
    isDismissable,
    shouldCloseOnBlur,
    isKeyboardDismissDisabled,
    shouldCloseOnInteractOutside
  }, overlayRef);
  const modifiers = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => [{
    name: 'hide',
    enabled: false
  }, {
    name: 'computeStyles',
    options: {
      // Using the `transform` attribute causes our borders to get blurry
      // in chrome. See [0]. This just causes it to use `top` / `left`
      // positions, which should be fine.
      //
      // [0]: https://stackoverflow.com/questions/29543142/css3-transformation-blurry-borders
      gpuAcceleration: false
    }
  }, {
    name: 'arrow',
    options: {
      element: arrowElement,
      // Set padding to avoid the arrow reaching the side of the tooltip
      // and overflowing out of the rounded border
      padding: 4
    }
  }, {
    name: 'offset',
    options: {
      offset: [0, offset]
    }
  }, {
    name: 'preventOverflow',
    enabled: true,
    options: {
      padding: 12,
      altAxis: true
    }
  }], [arrowElement, offset]);
  const {
    styles: popperStyles,
    state: popperState
  } = (0,react_popper__WEBPACK_IMPORTED_MODULE_5__.usePopper)(triggerElement, overlayElement, {
    modifiers,
    placement: position
  });
  return {
    isOpen: openState.isOpen,
    triggerProps: {
      ref: setTriggerElement,
      ...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_6__.mergeProps)(buttonProps, triggerProps)
    },
    overlayProps: {
      ref: setOverlayElement,
      style: popperStyles.popper,
      ...(0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_6__.mergeProps)(overlayTriggerProps, overlayProps)
    },
    arrowProps: {
      ref: setArrowElement,
      style: popperStyles.arrow,
      placement: popperState === null || popperState === void 0 ? void 0 : popperState.placement
    }
  };
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useOverlay);

/***/ }),

/***/ "./app/utils/useTags.tsx":
/*!*******************************!*\
  !*** ./app/utils/useTags.tsx ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var sentry_stores_tagStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sentry/stores/tagStore */ "./app/stores/tagStore.tsx");
/* harmony import */ var sentry_stores_useLegacyStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sentry/stores/useLegacyStore */ "./app/stores/useLegacyStore.tsx");



function useTags() {
  const tags = (0,sentry_stores_useLegacyStore__WEBPACK_IMPORTED_MODULE_1__.useLegacyStore)(sentry_stores_tagStore__WEBPACK_IMPORTED_MODULE_0__["default"]);
  return {
    tags
  };
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useTags);

/***/ }),

/***/ "./app/views/alerts/rules/metric/types.tsx":
/*!*************************************************!*\
  !*** ./app/views/alerts/rules/metric/types.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ActionLabel": () => (/* binding */ ActionLabel),
/* harmony export */   "ActionType": () => (/* binding */ ActionType),
/* harmony export */   "AlertRuleComparisonType": () => (/* binding */ AlertRuleComparisonType),
/* harmony export */   "AlertRuleThresholdType": () => (/* binding */ AlertRuleThresholdType),
/* harmony export */   "AlertRuleTriggerType": () => (/* binding */ AlertRuleTriggerType),
/* harmony export */   "Dataset": () => (/* binding */ Dataset),
/* harmony export */   "Datasource": () => (/* binding */ Datasource),
/* harmony export */   "EventTypes": () => (/* binding */ EventTypes),
/* harmony export */   "SessionsAggregate": () => (/* binding */ SessionsAggregate),
/* harmony export */   "TargetLabel": () => (/* binding */ TargetLabel),
/* harmony export */   "TargetType": () => (/* binding */ TargetType),
/* harmony export */   "TimePeriod": () => (/* binding */ TimePeriod),
/* harmony export */   "TimeWindow": () => (/* binding */ TimeWindow)
/* harmony export */ });
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");

let AlertRuleThresholdType;

(function (AlertRuleThresholdType) {
  AlertRuleThresholdType[AlertRuleThresholdType["ABOVE"] = 0] = "ABOVE";
  AlertRuleThresholdType[AlertRuleThresholdType["BELOW"] = 1] = "BELOW";
})(AlertRuleThresholdType || (AlertRuleThresholdType = {}));

let AlertRuleTriggerType;

(function (AlertRuleTriggerType) {
  AlertRuleTriggerType["CRITICAL"] = "critical";
  AlertRuleTriggerType["WARNING"] = "warning";
  AlertRuleTriggerType["RESOLVE"] = "resolve";
})(AlertRuleTriggerType || (AlertRuleTriggerType = {}));

let AlertRuleComparisonType;

(function (AlertRuleComparisonType) {
  AlertRuleComparisonType["COUNT"] = "count";
  AlertRuleComparisonType["CHANGE"] = "change";
  AlertRuleComparisonType["PERCENT"] = "percent";
})(AlertRuleComparisonType || (AlertRuleComparisonType = {}));

let Dataset;

(function (Dataset) {
  Dataset["ERRORS"] = "events";
  Dataset["TRANSACTIONS"] = "transactions";
  Dataset["GENERIC_METRICS"] = "generic_metrics";
  Dataset["SESSIONS"] = "sessions";
  Dataset["METRICS"] = "metrics";
})(Dataset || (Dataset = {}));

let EventTypes;

(function (EventTypes) {
  EventTypes["DEFAULT"] = "default";
  EventTypes["ERROR"] = "error";
  EventTypes["TRANSACTION"] = "transaction";
  EventTypes["USER"] = "user";
  EventTypes["SESSION"] = "session";
})(EventTypes || (EventTypes = {}));

let Datasource;
/**
 * This is not a real aggregate as crash-free sessions/users can be only calculated on frontend by comparing the count of sessions broken down by status
 * It is here nevertheless to shoehorn sessions dataset into existing alerts codebase
 * This will most likely be revised as we introduce the metrics dataset
 */

(function (Datasource) {
  Datasource["ERROR_DEFAULT"] = "error_default";
  Datasource["DEFAULT"] = "default";
  Datasource["ERROR"] = "error";
  Datasource["TRANSACTION"] = "transaction";
})(Datasource || (Datasource = {}));

let SessionsAggregate;

(function (SessionsAggregate) {
  SessionsAggregate["CRASH_FREE_SESSIONS"] = "percentage(sessions_crashed, sessions) AS _crash_rate_alert_aggregate";
  SessionsAggregate["CRASH_FREE_USERS"] = "percentage(users_crashed, users) AS _crash_rate_alert_aggregate";
})(SessionsAggregate || (SessionsAggregate = {}));

let TimePeriod;

(function (TimePeriod) {
  TimePeriod["SIX_HOURS"] = "6h";
  TimePeriod["ONE_DAY"] = "1d";
  TimePeriod["THREE_DAYS"] = "3d";
  TimePeriod["SEVEN_DAYS"] = "10000m";
  TimePeriod["FOURTEEN_DAYS"] = "14d";
  TimePeriod["THIRTY_DAYS"] = "30d";
})(TimePeriod || (TimePeriod = {}));

let TimeWindow;

(function (TimeWindow) {
  TimeWindow[TimeWindow["ONE_MINUTE"] = 1] = "ONE_MINUTE";
  TimeWindow[TimeWindow["FIVE_MINUTES"] = 5] = "FIVE_MINUTES";
  TimeWindow[TimeWindow["TEN_MINUTES"] = 10] = "TEN_MINUTES";
  TimeWindow[TimeWindow["FIFTEEN_MINUTES"] = 15] = "FIFTEEN_MINUTES";
  TimeWindow[TimeWindow["THIRTY_MINUTES"] = 30] = "THIRTY_MINUTES";
  TimeWindow[TimeWindow["ONE_HOUR"] = 60] = "ONE_HOUR";
  TimeWindow[TimeWindow["TWO_HOURS"] = 120] = "TWO_HOURS";
  TimeWindow[TimeWindow["FOUR_HOURS"] = 240] = "FOUR_HOURS";
  TimeWindow[TimeWindow["ONE_DAY"] = 1440] = "ONE_DAY";
})(TimeWindow || (TimeWindow = {}));

let ActionType;

(function (ActionType) {
  ActionType["EMAIL"] = "email";
  ActionType["SLACK"] = "slack";
  ActionType["PAGERDUTY"] = "pagerduty";
  ActionType["MSTEAMS"] = "msteams";
  ActionType["SENTRY_APP"] = "sentry_app";
})(ActionType || (ActionType = {}));

const ActionLabel = {
  // \u200B is needed because Safari disregards autocomplete="off". It's seeing "Email" and
  // opening up the browser autocomplete for email. https://github.com/JedWatson/react-select/issues/3500
  [ActionType.EMAIL]: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_0__.t)('Emai\u200Bl'),
  [ActionType.SLACK]: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_0__.t)('Slack'),
  [ActionType.PAGERDUTY]: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_0__.t)('Pagerduty'),
  [ActionType.MSTEAMS]: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_0__.t)('MS Teams'),
  [ActionType.SENTRY_APP]: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_0__.t)('Notification')
};
let TargetType;

(function (TargetType) {
  TargetType["SPECIFIC"] = "specific";
  TargetType["USER"] = "user";
  TargetType["TEAM"] = "team";
  TargetType["SENTRY_APP"] = "sentry_app";
})(TargetType || (TargetType = {}));

const TargetLabel = {
  [TargetType.USER]: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_0__.t)('Member'),
  [TargetType.TEAM]: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_0__.t)('Team')
};
/**
 * This is an available action template that is associated to a Trigger in a
 * Metric Alert Rule. They are defined by the available-actions API.
 */

/***/ }),

/***/ "./app/views/alerts/wizard/options.tsx":
/*!*********************************************!*\
  !*** ./app/views/alerts/wizard/options.tsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AlertWizardAlertNames": () => (/* binding */ AlertWizardAlertNames),
/* harmony export */   "AlertWizardRuleTemplates": () => (/* binding */ AlertWizardRuleTemplates),
/* harmony export */   "DEFAULT_WIZARD_TEMPLATE": () => (/* binding */ DEFAULT_WIZARD_TEMPLATE),
/* harmony export */   "DatasetMEPAlertQueryTypes": () => (/* binding */ DatasetMEPAlertQueryTypes),
/* harmony export */   "MEPAlertsDataset": () => (/* binding */ MEPAlertsDataset),
/* harmony export */   "MEPAlertsQueryType": () => (/* binding */ MEPAlertsQueryType),
/* harmony export */   "getAlertWizardCategories": () => (/* binding */ getAlertWizardCategories),
/* harmony export */   "getMEPAlertsDataset": () => (/* binding */ getMEPAlertsDataset),
/* harmony export */   "hideParameterSelectorSet": () => (/* binding */ hideParameterSelectorSet),
/* harmony export */   "hidePrimarySelectorSet": () => (/* binding */ hidePrimarySelectorSet)
/* harmony export */ });
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "../node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "../node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sentry/views/alerts/rules/metric/types */ "./app/views/alerts/rules/metric/types.tsx");




let MEPAlertsQueryType;

(function (MEPAlertsQueryType) {
  MEPAlertsQueryType[MEPAlertsQueryType["ERROR"] = 0] = "ERROR";
  MEPAlertsQueryType[MEPAlertsQueryType["PERFORMANCE"] = 1] = "PERFORMANCE";
  MEPAlertsQueryType[MEPAlertsQueryType["CRASH_RATE"] = 2] = "CRASH_RATE";
})(MEPAlertsQueryType || (MEPAlertsQueryType = {}));

let MEPAlertsDataset;

(function (MEPAlertsDataset) {
  MEPAlertsDataset["DISCOVER"] = "discover";
  MEPAlertsDataset["METRICS"] = "metrics";
  MEPAlertsDataset["METRICS_ENHANCED"] = "metricsEnhanced";
})(MEPAlertsDataset || (MEPAlertsDataset = {}));

const DatasetMEPAlertQueryTypes = {
  [sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.ERRORS]: MEPAlertsQueryType.ERROR,
  [sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.TRANSACTIONS]: MEPAlertsQueryType.PERFORMANCE,
  [sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.GENERIC_METRICS]: MEPAlertsQueryType.PERFORMANCE,
  [sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.METRICS]: MEPAlertsQueryType.CRASH_RATE,
  [sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.SESSIONS]: MEPAlertsQueryType.CRASH_RATE
};
const AlertWizardAlertNames = {
  issues: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('Issues'),
  num_errors: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('Number of Errors'),
  users_experiencing_errors: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('Users Experiencing Errors'),
  throughput: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('Throughput'),
  trans_duration: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('Transaction Duration'),
  apdex: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('Apdex'),
  failure_rate: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('Failure Rate'),
  lcp: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('Largest Contentful Paint'),
  fid: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('First Input Delay'),
  cls: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('Cumulative Layout Shift'),
  custom: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('Custom Metric'),
  crash_free_sessions: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('Crash Free Session Rate'),
  crash_free_users: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('Crash Free User Rate')
};
const getAlertWizardCategories = org => [{
  categoryHeading: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('Errors'),
  options: ['issues', 'num_errors', 'users_experiencing_errors']
}, ...(org.features.includes('crash-rate-alerts') ? [{
  categoryHeading: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('Sessions'),
  options: ['crash_free_sessions', 'crash_free_users']
}] : []), {
  categoryHeading: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('Performance'),
  options: ['throughput', 'trans_duration', 'apdex', 'failure_rate', 'lcp', 'fid', 'cls']
}, {
  categoryHeading: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('Other'),
  options: ['custom']
}];
const AlertWizardRuleTemplates = {
  num_errors: {
    aggregate: 'count()',
    dataset: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.ERRORS,
    eventTypes: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.EventTypes.ERROR
  },
  users_experiencing_errors: {
    aggregate: 'count_unique(user)',
    dataset: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.ERRORS,
    eventTypes: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.EventTypes.ERROR
  },
  throughput: {
    aggregate: 'count()',
    dataset: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.TRANSACTIONS,
    eventTypes: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.EventTypes.TRANSACTION
  },
  trans_duration: {
    aggregate: 'p95(transaction.duration)',
    dataset: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.TRANSACTIONS,
    eventTypes: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.EventTypes.TRANSACTION
  },
  apdex: {
    aggregate: 'apdex(300)',
    dataset: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.TRANSACTIONS,
    eventTypes: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.EventTypes.TRANSACTION
  },
  failure_rate: {
    aggregate: 'failure_rate()',
    dataset: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.TRANSACTIONS,
    eventTypes: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.EventTypes.TRANSACTION
  },
  lcp: {
    aggregate: 'p95(measurements.lcp)',
    dataset: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.TRANSACTIONS,
    eventTypes: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.EventTypes.TRANSACTION
  },
  fid: {
    aggregate: 'p95(measurements.fid)',
    dataset: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.TRANSACTIONS,
    eventTypes: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.EventTypes.TRANSACTION
  },
  cls: {
    aggregate: 'p95(measurements.cls)',
    dataset: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.TRANSACTIONS,
    eventTypes: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.EventTypes.TRANSACTION
  },
  custom: {
    aggregate: 'p95(measurements.fp)',
    dataset: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.TRANSACTIONS,
    eventTypes: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.EventTypes.TRANSACTION
  },
  crash_free_sessions: {
    aggregate: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.SessionsAggregate.CRASH_FREE_SESSIONS,
    // TODO(scttcper): Use Dataset.Metric on GA of alert-crash-free-metrics
    dataset: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.SESSIONS,
    eventTypes: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.EventTypes.SESSION
  },
  crash_free_users: {
    aggregate: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.SessionsAggregate.CRASH_FREE_USERS,
    // TODO(scttcper): Use Dataset.Metric on GA of alert-crash-free-metrics
    dataset: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.SESSIONS,
    eventTypes: sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.EventTypes.USER
  }
};
const DEFAULT_WIZARD_TEMPLATE = AlertWizardRuleTemplates.num_errors;
const hidePrimarySelectorSet = new Set(['num_errors', 'users_experiencing_errors', 'throughput', 'apdex', 'failure_rate', 'crash_free_sessions', 'crash_free_users']);
const hideParameterSelectorSet = new Set(['trans_duration', 'lcp', 'fid', 'cls']);
function getMEPAlertsDataset(dataset, newAlert) {
  // Dataset.ERRORS overrides all cases
  if (dataset === sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.ERRORS) {
    return MEPAlertsDataset.DISCOVER;
  }

  if (newAlert) {
    return MEPAlertsDataset.METRICS_ENHANCED;
  }

  if (dataset === sentry_views_alerts_rules_metric_types__WEBPACK_IMPORTED_MODULE_3__.Dataset.GENERIC_METRICS) {
    return MEPAlertsDataset.METRICS;
  }

  return MEPAlertsDataset.DISCOVER;
}

/***/ }),

/***/ "./app/views/eventsV2/breadcrumb.tsx":
/*!*******************************************!*\
  !*** ./app/views/eventsV2/breadcrumb.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "../node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var sentry_components_breadcrumbs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sentry/components/breadcrumbs */ "./app/components/breadcrumbs.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_utils_discover_urls__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sentry/utils/discover/urls */ "./app/utils/discover/urls.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");






function DiscoverBreadcrumb(_ref) {
  let {
    eventView,
    event,
    organization,
    location
  } = _ref;
  const crumbs = [];
  const discoverTarget = organization.features.includes('discover-query') ? {
    pathname: (0,sentry_utils_discover_urls__WEBPACK_IMPORTED_MODULE_3__.getDiscoverLandingUrl)(organization),
    query: { ...location.query,
      ...eventView.generateBlankQueryStringObject(),
      ...eventView.getPageFiltersQuery()
    }
  } : null;
  crumbs.push({
    to: discoverTarget,
    label: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('Discover')
  });

  if (eventView && eventView.isValid()) {
    crumbs.push({
      to: eventView.getResultsViewUrlTarget(organization.slug),
      label: eventView.name || ''
    });
  }

  if (event) {
    crumbs.push({
      label: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_2__.t)('Event Detail')
    });
  }

  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(sentry_components_breadcrumbs__WEBPACK_IMPORTED_MODULE_1__["default"], {
    crumbs: crumbs
  });
}

DiscoverBreadcrumb.displayName = "DiscoverBreadcrumb";
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DiscoverBreadcrumb);

/***/ }),

/***/ "./app/views/eventsV2/chartFooter.tsx":
/*!********************************************!*\
  !*** ./app/views/eventsV2/chartFooter.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ChartFooter)
/* harmony export */ });
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "../node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var sentry_components_charts_optionSelector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sentry/components/charts/optionSelector */ "./app/components/charts/optionSelector.tsx");
/* harmony import */ var sentry_components_charts_styles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! sentry/components/charts/styles */ "./app/components/charts/styles.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! sentry/utils/discover/types */ "./app/utils/discover/types.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");







function ChartFooter(_ref) {
  let {
    total,
    yAxisValue,
    yAxisOptions,
    onAxisChange,
    displayMode,
    displayOptions,
    onDisplayChange,
    onTopEventsChange,
    topEvents
  } = _ref;
  const elements = [];
  elements.push((0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(sentry_components_charts_styles__WEBPACK_IMPORTED_MODULE_2__.SectionHeading, {
    children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_3__.t)('Total Events')
  }, "total-label"));
  elements.push(total === null ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(sentry_components_charts_styles__WEBPACK_IMPORTED_MODULE_2__.SectionValue, {
    "data-test-id": "loading-placeholder",
    children: "\u2014"
  }, "total-value") : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(sentry_components_charts_styles__WEBPACK_IMPORTED_MODULE_2__.SectionValue, {
    children: total.toLocaleString()
  }, "total-value"));
  const topEventOptions = [];

  for (let i = 1; i <= 10; i++) {
    topEventOptions.push({
      value: i.toString(),
      label: i.toString()
    });
  }

  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(sentry_components_charts_styles__WEBPACK_IMPORTED_MODULE_2__.ChartControls, {
    children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(sentry_components_charts_styles__WEBPACK_IMPORTED_MODULE_2__.InlineContainer, {
      children: elements
    }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(sentry_components_charts_styles__WEBPACK_IMPORTED_MODULE_2__.InlineContainer, {
      children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(sentry_components_charts_optionSelector__WEBPACK_IMPORTED_MODULE_1__["default"], {
        title: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_3__.t)('Display'),
        selected: displayMode,
        options: displayOptions,
        onChange: onDisplayChange
      }), sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_4__.TOP_EVENT_MODES.includes(displayMode) && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(sentry_components_charts_optionSelector__WEBPACK_IMPORTED_MODULE_1__["default"], {
        title: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_3__.t)('Limit'),
        selected: topEvents,
        options: topEventOptions,
        onChange: onTopEventsChange
      }), sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_4__.TOP_EVENT_MODES.includes(displayMode) ? (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(sentry_components_charts_optionSelector__WEBPACK_IMPORTED_MODULE_1__["default"], {
        title: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_3__.t)('Y-Axis'),
        selected: yAxisValue[0],
        options: yAxisOptions,
        onChange: yAxis => onAxisChange([yAxis])
      }) : (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(sentry_components_charts_optionSelector__WEBPACK_IMPORTED_MODULE_1__["default"], {
        multiple: true,
        isClearable: true,
        menuTitle: yAxisOptions.length > 3 ? (0,sentry_locale__WEBPACK_IMPORTED_MODULE_3__.t)('Select up to 3 options') : (0,sentry_locale__WEBPACK_IMPORTED_MODULE_3__.t)('Y-axis'),
        title: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_3__.t)('Y-Axis'),
        selected: yAxisValue,
        options: yAxisOptions,
        onChange: onAxisChange
      })]
    })]
  });
}
ChartFooter.displayName = "ChartFooter";

/***/ }),

/***/ "./app/views/eventsV2/eventInputName.tsx":
/*!***********************************************!*\
  !*** ./app/views/eventsV2/eventInputName.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/styled/base */ "../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-router */ "../node_modules/react-router/es/index.js");
/* harmony import */ var sentry_components_editableText__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! sentry/components/editableText */ "./app/components/editableText.tsx");
/* harmony import */ var sentry_components_layouts_thirds__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sentry/components/layouts/thirds */ "./app/components/layouts/thirds.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sentry/utils/discover/eventView */ "./app/utils/discover/eventView.tsx");
/* harmony import */ var sentry_utils_useApi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sentry/utils/useApi */ "./app/utils/useApi.tsx");
/* harmony import */ var _savedQuery_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./savedQuery/utils */ "./app/views/eventsV2/savedQuery/utils.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");


function _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }









const NAME_DEFAULT = (0,sentry_locale__WEBPACK_IMPORTED_MODULE_4__.t)('Untitled query');
/**
 * Allows user to edit the name of the query.
 * By pressing Enter or clicking outside the component, the changes will be saved, if valid.
 */

function EventInputName(_ref) {
  let {
    organization,
    eventView,
    savedQuery
  } = _ref;
  const api = (0,sentry_utils_useApi__WEBPACK_IMPORTED_MODULE_6__["default"])();

  function handleChange(nextQueryName) {
    // Do not update automatically if
    // 1) It is a new query
    // 2) The new name is same as the old name
    if (!savedQuery || savedQuery.name === nextQueryName) {
      return;
    } // This ensures that we are updating SavedQuery.name only.
    // Changes on QueryBuilder table will not be saved.


    const nextEventView = sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_5__["default"].fromSavedQuery({ ...savedQuery,
      name: nextQueryName
    });
    (0,_savedQuery_utils__WEBPACK_IMPORTED_MODULE_7__.handleUpdateQueryName)(api, organization, nextEventView).then(_updatedQuery => {
      // The current eventview may have changes that are not explicitly saved.
      // So, we just preserve them and change its name
      const renamedEventView = eventView.clone();
      renamedEventView.name = nextQueryName;
      react_router__WEBPACK_IMPORTED_MODULE_1__.browserHistory.push(renamedEventView.getResultsViewUrlTarget(organization.slug));
    });
  }

  const value = eventView.name || NAME_DEFAULT;
  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(StyledTitle, {
    "data-test-id": `discover2-query-name-${value}`,
    children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(sentry_components_editableText__WEBPACK_IMPORTED_MODULE_2__["default"], {
      value: value,
      onChange: handleChange,
      isDisabled: !eventView.id,
      errorMessage: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_4__.t)('Please set a name for this query')
    })
  });
}

EventInputName.displayName = "EventInputName";

const StyledTitle = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__["default"])(sentry_components_layouts_thirds__WEBPACK_IMPORTED_MODULE_3__.Title,  true ? {
  target: "emb7zth0"
} : 0)( true ? {
  name: "12brwd0",
  styles: "overflow:unset"
} : 0);

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EventInputName);

/***/ }),

/***/ "./app/views/eventsV2/results.tsx":
/*!****************************************!*\
  !*** ./app/views/eventsV2/results.tsx ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "../node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @emotion/styled/base */ "../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "../node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "../node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ "../node_modules/core-js/modules/es.string.replace.js");
/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-router */ "../node_modules/react-router/es/index.js");
/* harmony import */ var _sentry_react__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! @sentry/react */ "../node_modules/@sentry/hub/esm/exports.js");
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! lodash/isEqual */ "../node_modules/lodash/isEqual.js");
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! lodash/omit */ "../node_modules/lodash/omit.js");
/* harmony import */ var lodash_omit__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(lodash_omit__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var sentry_actionCreators_discoverSavedQueries__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! sentry/actionCreators/discoverSavedQueries */ "./app/actionCreators/discoverSavedQueries.tsx");
/* harmony import */ var sentry_actionCreators_events__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sentry/actionCreators/events */ "./app/actionCreators/events.tsx");
/* harmony import */ var sentry_actionCreators_projects__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! sentry/actionCreators/projects */ "./app/actionCreators/projects.tsx");
/* harmony import */ var sentry_actionCreators_tags__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! sentry/actionCreators/tags */ "./app/actionCreators/tags.tsx");
/* harmony import */ var sentry_api__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! sentry/api */ "./app/api.tsx");
/* harmony import */ var sentry_components_alert__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! sentry/components/alert */ "./app/components/alert.tsx");
/* harmony import */ var sentry_components_asyncComponent__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! sentry/components/asyncComponent */ "./app/components/asyncComponent.tsx");
/* harmony import */ var sentry_components_confirm__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! sentry/components/confirm */ "./app/components/confirm.tsx");
/* harmony import */ var sentry_components_datePageFilter__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! sentry/components/datePageFilter */ "./app/components/datePageFilter.tsx");
/* harmony import */ var sentry_components_environmentPageFilter__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! sentry/components/environmentPageFilter */ "./app/components/environmentPageFilter.tsx");
/* harmony import */ var sentry_components_events_searchBar__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! sentry/components/events/searchBar */ "./app/components/events/searchBar.tsx");
/* harmony import */ var sentry_components_layouts_thirds__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! sentry/components/layouts/thirds */ "./app/components/layouts/thirds.tsx");
/* harmony import */ var sentry_components_links_externalLink__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! sentry/components/links/externalLink */ "./app/components/links/externalLink.tsx");
/* harmony import */ var sentry_components_noProjectMessage__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! sentry/components/noProjectMessage */ "./app/components/noProjectMessage.tsx");
/* harmony import */ var sentry_components_organizations_pageFilterBar__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! sentry/components/organizations/pageFilterBar */ "./app/components/organizations/pageFilterBar.tsx");
/* harmony import */ var sentry_components_organizations_pageFilters_container__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! sentry/components/organizations/pageFilters/container */ "./app/components/organizations/pageFilters/container.tsx");
/* harmony import */ var sentry_components_organizations_pageFilters_parse__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! sentry/components/organizations/pageFilters/parse */ "./app/components/organizations/pageFilters/parse.tsx");
/* harmony import */ var sentry_components_projectPageFilter__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! sentry/components/projectPageFilter */ "./app/components/projectPageFilter.tsx");
/* harmony import */ var sentry_components_sentryDocumentTitle__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! sentry/components/sentryDocumentTitle */ "./app/components/sentryDocumentTitle.tsx");
/* harmony import */ var sentry_constants__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! sentry/constants */ "./app/constants/index.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_styles_organization__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! sentry/styles/organization */ "./app/styles/organization.tsx");
/* harmony import */ var sentry_styles_space__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! sentry/styles/space */ "./app/styles/space.tsx");
/* harmony import */ var sentry_utils__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! sentry/utils */ "./app/utils.tsx");
/* harmony import */ var sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! sentry/utils/analytics */ "./app/utils/analytics.tsx");
/* harmony import */ var sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! sentry/utils/discover/eventView */ "./app/utils/discover/eventView.tsx");
/* harmony import */ var sentry_utils_discover_fields__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! sentry/utils/discover/fields */ "./app/utils/discover/fields.tsx");
/* harmony import */ var sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! sentry/utils/discover/types */ "./app/utils/discover/types.tsx");
/* harmony import */ var sentry_utils_localStorage__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! sentry/utils/localStorage */ "./app/utils/localStorage.tsx");
/* harmony import */ var sentry_utils_queryString__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! sentry/utils/queryString */ "./app/utils/queryString.tsx");
/* harmony import */ var sentry_utils_withApi__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! sentry/utils/withApi */ "./app/utils/withApi.tsx");
/* harmony import */ var sentry_utils_withOrganization__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! sentry/utils/withOrganization */ "./app/utils/withOrganization.tsx");
/* harmony import */ var sentry_utils_withPageFilters__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! sentry/utils/withPageFilters */ "./app/utils/withPageFilters.tsx");
/* harmony import */ var _performance_utils__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ../performance/utils */ "./app/views/performance/utils.tsx");
/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./data */ "./app/views/eventsV2/data.tsx");
/* harmony import */ var _resultsChart__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./resultsChart */ "./app/views/eventsV2/resultsChart.tsx");
/* harmony import */ var _resultsHeader__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./resultsHeader */ "./app/views/eventsV2/resultsHeader.tsx");
/* harmony import */ var _table__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./table */ "./app/views/eventsV2/table/index.tsx");
/* harmony import */ var _tags__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./tags */ "./app/views/eventsV2/tags.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./utils */ "./app/views/eventsV2/utils.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");






function _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }
















































const SHOW_TAGS_STORAGE_KEY = 'discover2:show-tags';
const SHOW_UNPARAM_BANNER = 'showUnparameterizedBanner';

function readShowTagsState() {
  const value = sentry_utils_localStorage__WEBPACK_IMPORTED_MODULE_37__["default"].getItem(SHOW_TAGS_STORAGE_KEY);
  return value === '1';
}

function getYAxis(location, eventView, savedQuery) {
  if (location.query.yAxis) {
    return (0,sentry_utils_queryString__WEBPACK_IMPORTED_MODULE_38__.decodeList)(location.query.yAxis);
  }

  if (location.query.yAxis === null) {
    return [];
  }

  return savedQuery !== null && savedQuery !== void 0 && savedQuery.yAxis && (savedQuery === null || savedQuery === void 0 ? void 0 : savedQuery.yAxis.length) > 0 ? (0,sentry_utils_queryString__WEBPACK_IMPORTED_MODULE_38__.decodeList)(savedQuery === null || savedQuery === void 0 ? void 0 : savedQuery.yAxis) : [eventView.getYAxis()];
}

class Results extends react__WEBPACK_IMPORTED_MODULE_5__.Component {
  constructor() {
    super(...arguments);

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "state", {
      eventView: sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_34__["default"].fromSavedQueryOrLocation(this.props.savedQuery, this.props.location),
      error: '',
      errorCode: 200,
      totalValues: null,
      showTags: readShowTagsState(),
      needConfirmation: false,
      confirmedQuery: false
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "tagsApi", new sentry_api__WEBPACK_IMPORTED_MODULE_13__.Client());

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "canLoadEvents", async () => {
      const {
        api,
        location,
        organization
      } = this.props;
      const {
        eventView
      } = this.state;
      let needConfirmation = false;
      let confirmedQuery = true;
      const currentQuery = eventView.getEventsAPIPayload(location);
      const duration = eventView.getDays();

      if (duration > 30 && currentQuery.project) {
        let projectLength = currentQuery.project.length;

        if (projectLength === 0 || projectLength === 1 && currentQuery.project[0] === '-1') {
          try {
            const results = await (0,sentry_actionCreators_projects__WEBPACK_IMPORTED_MODULE_11__.fetchProjectsCount)(api, organization.slug);

            if (projectLength === 0) {
              projectLength = results.myProjects;
            } else {
              projectLength = results.allProjects;
            }
          } catch (err) {// do nothing, so the length is 0 or 1 and the query is assumed safe
          }
        }

        if (projectLength > 10) {
          needConfirmation = true;
          confirmedQuery = false;
        }
      } // Once confirmed, a change of project or datetime will happen before this can set it to false,
      // this means a query will still happen even if the new conditions need confirmation
      // using a state callback to return this to false


      this.setState({
        needConfirmation,
        confirmedQuery
      }, () => {
        this.setState({
          confirmedQuery: false
        });
      });

      if (needConfirmation) {
        this.openConfirm();
      }
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "openConfirm", () => {});

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "setOpenFunction", _ref => {
      let {
        open
      } = _ref;
      this.openConfirm = open;
      return null;
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "handleConfirmed", () => {
      this.setState({
        needConfirmation: false,
        confirmedQuery: true
      }, () => {
        this.setState({
          confirmedQuery: false
        });
      });
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "handleCancelled", () => {
      this.setState({
        needConfirmation: false,
        confirmedQuery: false
      });
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "handleChangeShowTags", () => {
      const {
        organization
      } = this.props;
      (0,sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_33__.trackAnalyticsEvent)({
        eventKey: 'discover_v2.results.toggle_tag_facets',
        eventName: 'Discoverv2: Toggle Tag Facets',
        organization_id: parseInt(organization.id, 10)
      });
      this.setState(state => {
        const newValue = !state.showTags;
        sentry_utils_localStorage__WEBPACK_IMPORTED_MODULE_37__["default"].setItem(SHOW_TAGS_STORAGE_KEY, newValue ? '1' : '0');
        return { ...state,
          showTags: newValue
        };
      });
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "handleSearch", query => {
      const {
        router,
        location
      } = this.props;
      const queryParams = (0,sentry_components_organizations_pageFilters_parse__WEBPACK_IMPORTED_MODULE_25__.normalizeDateTimeParams)({ ...(location.query || {}),
        query
      }); // do not propagate pagination when making a new search

      const searchQueryParams = lodash_omit__WEBPACK_IMPORTED_MODULE_8___default()(queryParams, 'cursor');
      router.push({
        pathname: location.pathname,
        query: searchQueryParams
      });
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "handleYAxisChange", value => {
      const {
        router,
        location
      } = this.props;
      const isDisplayMultiYAxisSupported = sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_36__.MULTI_Y_AXIS_SUPPORTED_DISPLAY_MODES.includes(location.query.display);
      const newQuery = { ...location.query,
        yAxis: value.length > 0 ? value : [null],
        // If using Multi Y-axis and not in a supported display, change to the default display mode
        display: value.length > 1 && !isDisplayMultiYAxisSupported ? location.query.display === sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_36__.DisplayModes.DAILYTOP5 ? sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_36__.DisplayModes.DAILY : sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_36__.DisplayModes.DEFAULT : location.query.display
      };
      router.push({
        pathname: location.pathname,
        query: newQuery
      }); // Treat axis changing like the user already confirmed the query

      if (!this.state.needConfirmation) {
        this.handleConfirmed();
      }

      (0,sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_33__.trackAnalyticsEvent)({
        eventKey: 'discover_v2.y_axis_change',
        eventName: "Discoverv2: Change chart's y axis",
        organization_id: parseInt(this.props.organization.id, 10),
        y_axis_value: value
      });
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "handleDisplayChange", value => {
      const {
        router,
        location
      } = this.props;
      const newQuery = { ...location.query,
        display: value
      };
      router.push({
        pathname: location.pathname,
        query: newQuery
      }); // Treat display changing like the user already confirmed the query

      if (!this.state.needConfirmation) {
        this.handleConfirmed();
      }
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "handleTopEventsChange", value => {
      const {
        router,
        location
      } = this.props;
      const newQuery = { ...location.query,
        topEvents: value
      };
      router.push({
        pathname: location.pathname,
        query: newQuery
      }); // Treat display changing like the user already confirmed the query

      if (!this.state.needConfirmation) {
        this.handleConfirmed();
      }
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "generateTagUrl", (key, value) => {
      const {
        organization
      } = this.props;
      const {
        eventView
      } = this.state;
      const url = eventView.getResultsViewUrlTarget(organization.slug);
      url.query = (0,sentry_utils__WEBPACK_IMPORTED_MODULE_32__.generateQueryWithTag)(url.query, {
        key: (0,sentry_utils_discover_fields__WEBPACK_IMPORTED_MODULE_35__.formatTagKey)(key),
        value
      });
      return url;
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "setError", (error, errorCode) => {
      this.setState({
        error,
        errorCode
      });
    });
  }

  static getDerivedStateFromProps(nextProps, prevState) {
    if (nextProps.savedQuery || !nextProps.loading) {
      const eventView = sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_34__["default"].fromSavedQueryOrLocation(nextProps.savedQuery, nextProps.location);
      return { ...prevState,
        eventView,
        savedQuery: nextProps.savedQuery
      };
    }

    return prevState;
  }

  componentDidMount() {
    const {
      organization,
      selection,
      location
    } = this.props;

    if (location.query.fromMetric) {
      this.setState({
        showMetricsAlert: true
      });
      react_router__WEBPACK_IMPORTED_MODULE_6__.browserHistory.replace({ ...location,
        query: { ...location.query,
          fromMetric: undefined
        }
      });
    }

    if (location.query[SHOW_UNPARAM_BANNER]) {
      this.setState({
        showUnparameterizedBanner: true
      });
      react_router__WEBPACK_IMPORTED_MODULE_6__.browserHistory.replace({ ...location,
        query: { ...location.query,
          [SHOW_UNPARAM_BANNER]: undefined
        }
      });
    }

    (0,sentry_actionCreators_tags__WEBPACK_IMPORTED_MODULE_12__.loadOrganizationTags)(this.tagsApi, organization.slug, selection);
    (0,_performance_utils__WEBPACK_IMPORTED_MODULE_42__.addRoutePerformanceContext)(selection);
    this.checkEventView();
    this.canLoadEvents();

    if ((0,sentry_utils__WEBPACK_IMPORTED_MODULE_32__.defined)(location.query.id)) {
      (0,sentry_actionCreators_discoverSavedQueries__WEBPACK_IMPORTED_MODULE_9__.updateSavedQueryVisit)(organization.slug, location.query.id);
    }
  }

  componentDidUpdate(prevProps, prevState) {
    const {
      api,
      location,
      organization,
      selection
    } = this.props;
    const {
      eventView,
      confirmedQuery,
      savedQuery
    } = this.state;
    this.checkEventView();
    const currentQuery = eventView.getEventsAPIPayload(location);
    const prevQuery = prevState.eventView.getEventsAPIPayload(prevProps.location);
    const yAxisArray = getYAxis(location, eventView, savedQuery);
    const prevYAxisArray = getYAxis(prevProps.location, eventView, prevState.savedQuery);

    if (!(0,sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_34__.isAPIPayloadSimilar)(currentQuery, prevQuery) || this.hasChartParametersChanged(prevState.eventView, eventView, prevYAxisArray, yAxisArray)) {
      api.clear();
      this.canLoadEvents();
    }

    if (!lodash_isEqual__WEBPACK_IMPORTED_MODULE_7___default()(prevProps.selection.datetime, selection.datetime) || !lodash_isEqual__WEBPACK_IMPORTED_MODULE_7___default()(prevProps.selection.projects, selection.projects)) {
      (0,sentry_actionCreators_tags__WEBPACK_IMPORTED_MODULE_12__.loadOrganizationTags)(this.tagsApi, organization.slug, selection);
      (0,_performance_utils__WEBPACK_IMPORTED_MODULE_42__.addRoutePerformanceContext)(selection);
    }

    if (prevState.confirmedQuery !== confirmedQuery) {
      this.fetchTotalCount();
    }
  }

  hasChartParametersChanged(prevEventView, eventView, prevYAxisArray, yAxisArray) {
    if (!lodash_isEqual__WEBPACK_IMPORTED_MODULE_7___default()(prevYAxisArray, yAxisArray)) {
      return true;
    }

    const prevDisplay = prevEventView.getDisplayMode();
    const display = eventView.getDisplayMode();
    return prevDisplay !== display;
  }

  async fetchTotalCount() {
    const {
      api,
      organization,
      location
    } = this.props;
    const {
      eventView,
      confirmedQuery
    } = this.state;

    if (confirmedQuery === false || !eventView.isValid()) {
      return;
    }

    try {
      const totals = await (0,sentry_actionCreators_events__WEBPACK_IMPORTED_MODULE_10__.fetchTotalCount)(api, organization.slug, eventView.getEventsAPIPayload(location));
      this.setState({
        totalValues: totals
      });
    } catch (err) {
      _sentry_react__WEBPACK_IMPORTED_MODULE_49__.captureException(err);
    }
  }

  checkEventView() {
    var _location$query;

    const {
      eventView
    } = this.state;
    const {
      loading
    } = this.props;

    if (eventView.isValid() || loading) {
      return;
    } // If the view is not valid, redirect to a known valid state.


    const {
      location,
      organization,
      selection
    } = this.props;
    const nextEventView = sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_34__["default"].fromNewQueryWithLocation(_data__WEBPACK_IMPORTED_MODULE_43__.DEFAULT_EVENT_VIEW, location);

    if (nextEventView.project.length === 0 && selection.projects) {
      nextEventView.project = selection.projects;
    }

    if ((_location$query = location.query) !== null && _location$query !== void 0 && _location$query.query) {
      nextEventView.query = (0,sentry_utils_queryString__WEBPACK_IMPORTED_MODULE_38__.decodeScalar)(location.query.query, '');
    }

    react_router__WEBPACK_IMPORTED_MODULE_6__.browserHistory.replace(nextEventView.getResultsViewUrlTarget(organization.slug));
  }

  getDocumentTitle() {
    const {
      organization
    } = this.props;
    const {
      eventView
    } = this.state;

    if (!eventView) {
      return '';
    }

    return (0,_utils__WEBPACK_IMPORTED_MODULE_48__.generateTitle)({
      eventView,
      organization
    });
  }

  renderTagsTable() {
    const {
      organization,
      location
    } = this.props;
    const {
      eventView,
      totalValues,
      confirmedQuery
    } = this.state;
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(sentry_components_layouts_thirds__WEBPACK_IMPORTED_MODULE_20__.Side, {
      children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(_tags__WEBPACK_IMPORTED_MODULE_47__["default"], {
        generateUrl: this.generateTagUrl,
        totalValues: totalValues,
        eventView: eventView,
        organization: organization,
        location: location,
        confirmedQuery: confirmedQuery
      })
    });
  }

  renderError(error) {
    if (!error) {
      return null;
    }

    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(sentry_components_alert__WEBPACK_IMPORTED_MODULE_14__["default"], {
      type: "error",
      showIcon: true,
      children: error
    });
  }

  renderMetricsFallbackBanner() {
    if (this.state.showMetricsAlert) {
      return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(sentry_components_alert__WEBPACK_IMPORTED_MODULE_14__["default"], {
        type: "info",
        showIcon: true,
        children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_29__.t)("You've navigated to this page from a performance metric widget generated from processed events. The results here only show indexed events.")
      });
    }

    if (this.state.showUnparameterizedBanner) {
      return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(sentry_components_alert__WEBPACK_IMPORTED_MODULE_14__["default"], {
        type: "info",
        showIcon: true,
        children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_29__.tct)('These are unparameterized transactions. To better organize your transactions, [link:set transaction names manually].', {
          link: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(sentry_components_links_externalLink__WEBPACK_IMPORTED_MODULE_21__["default"], {
            href: "https://docs.sentry.io/platforms/javascript/guides/react/configuration/integrations/react-router/#parameterized-transaction-names"
          })
        })
      });
    }

    return null;
  }

  render() {
    const {
      organization,
      location,
      router
    } = this.props;
    const {
      eventView,
      error,
      errorCode,
      totalValues,
      showTags,
      confirmedQuery,
      savedQuery
    } = this.state;
    const fields = eventView.hasAggregateField() ? (0,sentry_utils_discover_fields__WEBPACK_IMPORTED_MODULE_35__.generateAggregateFields)(organization, eventView.fields) : eventView.fields;
    const query = eventView.query;
    const title = this.getDocumentTitle();
    const yAxisArray = getYAxis(location, eventView, savedQuery);
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(sentry_components_sentryDocumentTitle__WEBPACK_IMPORTED_MODULE_27__["default"], {
      title: title,
      orgSlug: organization.slug,
      children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(StyledPageContent, {
        children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsxs)(sentry_components_noProjectMessage__WEBPACK_IMPORTED_MODULE_22__["default"], {
          organization: organization,
          children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(_resultsHeader__WEBPACK_IMPORTED_MODULE_45__["default"], {
            errorCode: errorCode,
            organization: organization,
            location: location,
            eventView: eventView,
            yAxis: yAxisArray,
            router: router
          }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsxs)(sentry_components_layouts_thirds__WEBPACK_IMPORTED_MODULE_20__.Body, {
            children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsxs)(Top, {
              fullWidth: true,
              children: [this.renderMetricsFallbackBanner(), this.renderError(error), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsxs)(StyledPageFilterBar, {
                condensed: true,
                children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(sentry_components_projectPageFilter__WEBPACK_IMPORTED_MODULE_26__["default"], {}), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(sentry_components_environmentPageFilter__WEBPACK_IMPORTED_MODULE_18__["default"], {}), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(sentry_components_datePageFilter__WEBPACK_IMPORTED_MODULE_17__["default"], {
                  alignDropdown: "left"
                })]
              }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(StyledSearchBar, {
                searchSource: "eventsv2",
                organization: organization,
                projectIds: eventView.project,
                query: query,
                fields: fields,
                onSearch: this.handleSearch,
                maxQueryLength: sentry_constants__WEBPACK_IMPORTED_MODULE_28__.MAX_QUERY_LENGTH
              }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(_resultsChart__WEBPACK_IMPORTED_MODULE_44__["default"], {
                router: router,
                organization: organization,
                eventView: eventView,
                location: location,
                onAxisChange: this.handleYAxisChange,
                onDisplayChange: this.handleDisplayChange,
                onTopEventsChange: this.handleTopEventsChange,
                total: totalValues,
                confirmedQuery: confirmedQuery,
                yAxis: yAxisArray
              })]
            }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(sentry_components_layouts_thirds__WEBPACK_IMPORTED_MODULE_20__.Main, {
              fullWidth: !showTags,
              children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(_table__WEBPACK_IMPORTED_MODULE_46__["default"], {
                organization: organization,
                eventView: eventView,
                location: location,
                title: title,
                setError: this.setError,
                onChangeShowTags: this.handleChangeShowTags,
                showTags: showTags,
                confirmedQuery: confirmedQuery
              })
            }), showTags ? this.renderTagsTable() : null, (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(sentry_components_confirm__WEBPACK_IMPORTED_MODULE_16__["default"], {
              priority: "primary",
              header: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)("strong", {
                children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_29__.t)('May lead to thumb twiddling')
              }),
              confirmText: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_29__.t)('Do it'),
              cancelText: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_29__.t)('Nevermind'),
              onConfirm: this.handleConfirmed,
              onCancel: this.handleCancelled,
              message: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)("p", {
                children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_29__.tct)(`You've created a query that will search for events made
                      [dayLimit:over more than 30 days] for [projectLimit:more than 10 projects].
                      A lot has happened during that time, so this might take awhile.
                      Are you sure you want to do this?`, {
                  dayLimit: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)("strong", {}),
                  projectLimit: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)("strong", {})
                })
              }),
              children: this.setOpenFunction
            })]
          })]
        })
      })
    });
  }

}

Results.displayName = "Results";

const StyledPageContent = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_styles_organization__WEBPACK_IMPORTED_MODULE_30__.PageContent,  true ? {
  target: "e1phmre33"
} : 0)( true ? {
  name: "1hcx8jb",
  styles: "padding:0"
} : 0);

const StyledPageFilterBar = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_components_organizations_pageFilterBar__WEBPACK_IMPORTED_MODULE_23__["default"],  true ? {
  target: "e1phmre32"
} : 0)("margin-bottom:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_31__["default"])(1), ";" + ( true ? "" : 0));

const StyledSearchBar = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_components_events_searchBar__WEBPACK_IMPORTED_MODULE_19__["default"],  true ? {
  target: "e1phmre31"
} : 0)("margin-bottom:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_31__["default"])(2), ";" + ( true ? "" : 0));

const Top = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_components_layouts_thirds__WEBPACK_IMPORTED_MODULE_20__.Main,  true ? {
  target: "e1phmre30"
} : 0)( true ? {
  name: "y6n6nb",
  styles: "flex-grow:0"
} : 0);

class SavedQueryAPI extends sentry_components_asyncComponent__WEBPACK_IMPORTED_MODULE_15__["default"] {
  getEndpoints() {
    const {
      organization,
      location
    } = this.props;

    if (location.query.id) {
      return [['savedQuery', `/organizations/${organization.slug}/discover/saved/${location.query.id}/`]];
    }

    return [];
  }

  renderLoading() {
    return this.renderBody();
  }

  renderBody() {
    const {
      savedQuery,
      loading
    } = this.state;
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(Results, { ...this.props,
      savedQuery: savedQuery !== null && savedQuery !== void 0 ? savedQuery : undefined,
      loading: loading
    });
  }

}

function ResultsContainer(props) {
  /**
   * Block `<Results>` from mounting until GSH is ready since there are API
   * requests being performed on mount.
   *
   * Also, we skip loading last used projects if you have multiple projects feature as
   * you no longer need to enforce a project if it is empty. We assume an empty project is
   * the desired behavior because saved queries can contain a project filter. The only
   * exception is if we are showing a prebuilt saved query in which case we want to
   * respect pinned filters.
   */
  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(sentry_components_organizations_pageFilters_container__WEBPACK_IMPORTED_MODULE_24__["default"], {
    skipLoadLastUsed: props.organization.features.includes('global-views') && !!props.savedQuery,
    children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_50__.jsx)(SavedQueryAPI, { ...props
    })
  });
}

ResultsContainer.displayName = "ResultsContainer";
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,sentry_utils_withApi__WEBPACK_IMPORTED_MODULE_39__["default"])((0,sentry_utils_withOrganization__WEBPACK_IMPORTED_MODULE_40__["default"])((0,sentry_utils_withPageFilters__WEBPACK_IMPORTED_MODULE_41__["default"])(ResultsContainer))));

/***/ }),

/***/ "./app/views/eventsV2/resultsChart.tsx":
/*!*********************************************!*\
  !*** ./app/views/eventsV2/resultsChart.tsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "../node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @emotion/styled/base */ "../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "../node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "../node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash/isEqual */ "../node_modules/lodash/isEqual.js");
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var sentry_components_charts_barChart__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sentry/components/charts/barChart */ "./app/components/charts/barChart.tsx");
/* harmony import */ var sentry_components_charts_eventsChart__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sentry/components/charts/eventsChart */ "./app/components/charts/eventsChart.tsx");
/* harmony import */ var sentry_components_charts_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sentry/components/charts/utils */ "./app/components/charts/utils.tsx");
/* harmony import */ var sentry_components_charts_worldMapChart__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! sentry/components/charts/worldMapChart */ "./app/components/charts/worldMapChart.tsx");
/* harmony import */ var sentry_components_organizations_pageFilters_parse__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sentry/components/organizations/pageFilters/parse */ "./app/components/organizations/pageFilters/parse.tsx");
/* harmony import */ var sentry_components_panels__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! sentry/components/panels */ "./app/components/panels/index.tsx");
/* harmony import */ var sentry_components_placeholder__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! sentry/components/placeholder */ "./app/components/placeholder.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! sentry/utils */ "./app/utils.tsx");
/* harmony import */ var sentry_utils_dates__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! sentry/utils/dates */ "./app/utils/dates.tsx");
/* harmony import */ var sentry_utils_discover_fields__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! sentry/utils/discover/fields */ "./app/utils/discover/fields.tsx");
/* harmony import */ var sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! sentry/utils/discover/types */ "./app/utils/discover/types.tsx");
/* harmony import */ var sentry_utils_getDynamicText__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! sentry/utils/getDynamicText */ "./app/utils/getDynamicText.tsx");
/* harmony import */ var sentry_utils_queryString__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! sentry/utils/queryString */ "./app/utils/queryString.tsx");
/* harmony import */ var sentry_utils_withApi__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! sentry/utils/withApi */ "./app/utils/withApi.tsx");
/* harmony import */ var _chartFooter__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./chartFooter */ "./app/views/eventsV2/chartFooter.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");

























class ResultsChart extends react__WEBPACK_IMPORTED_MODULE_4__.Component {
  shouldComponentUpdate(nextProps) {
    const {
      eventView,
      ...restProps
    } = this.props;
    const {
      eventView: nextEventView,
      ...restNextProps
    } = nextProps;

    if (!eventView.isEqualTo(nextEventView)) {
      return true;
    }

    return !lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(restProps, restNextProps);
  }

  render() {
    const {
      api,
      eventView,
      location,
      organization,
      router,
      confirmedQuery,
      yAxisValue
    } = this.props;
    const hasPerformanceChartInterpolation = organization.features.includes('performance-chart-interpolation');
    const globalSelection = eventView.getPageFilters();
    const start = globalSelection.datetime.start ? (0,sentry_utils_dates__WEBPACK_IMPORTED_MODULE_15__.getUtcToLocalDateObject)(globalSelection.datetime.start) : null;
    const end = globalSelection.datetime.end ? (0,sentry_utils_dates__WEBPACK_IMPORTED_MODULE_15__.getUtcToLocalDateObject)(globalSelection.datetime.end) : null;
    const {
      utc
    } = (0,sentry_components_organizations_pageFilters_parse__WEBPACK_IMPORTED_MODULE_10__.normalizeDateTimeParams)(location.query);
    const apiPayload = eventView.getEventsAPIPayload(location);
    const display = eventView.getDisplayMode();
    const isTopEvents = display === sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_17__.DisplayModes.TOP5 || display === sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_17__.DisplayModes.DAILYTOP5;
    const isPeriod = display === sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_17__.DisplayModes.DEFAULT || display === sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_17__.DisplayModes.TOP5;
    const isDaily = display === sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_17__.DisplayModes.DAILYTOP5 || display === sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_17__.DisplayModes.DAILY;
    const isPrevious = display === sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_17__.DisplayModes.PREVIOUS;
    const referrer = `api.discover.${display}-chart`;
    const topEvents = eventView.topEvents ? parseInt(eventView.topEvents, 10) : sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_17__.TOP_N;
    const chartComponent = display === sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_17__.DisplayModes.WORLDMAP ? sentry_components_charts_worldMapChart__WEBPACK_IMPORTED_MODULE_9__.WorldMapChart : display === sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_17__.DisplayModes.BAR ? sentry_components_charts_barChart__WEBPACK_IMPORTED_MODULE_6__.BarChart : undefined;
    const interval = display === sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_17__.DisplayModes.BAR ? (0,sentry_components_charts_utils__WEBPACK_IMPORTED_MODULE_8__.getInterval)({
      start,
      end,
      period: globalSelection.datetime.period,
      utc: utc === 'true'
    }, 'low') : eventView.interval;
    const seriesLabels = yAxisValue.map(sentry_utils_discover_fields__WEBPACK_IMPORTED_MODULE_16__.stripEquationPrefix);
    const disableableSeries = [...seriesLabels, ...seriesLabels.map(sentry_components_charts_utils__WEBPACK_IMPORTED_MODULE_8__.getPreviousSeriesName)];
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(react__WEBPACK_IMPORTED_MODULE_4__.Fragment, {
      children: (0,sentry_utils_getDynamicText__WEBPACK_IMPORTED_MODULE_18__["default"])({
        value: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(sentry_components_charts_eventsChart__WEBPACK_IMPORTED_MODULE_7__["default"], {
          api: api,
          router: router,
          query: apiPayload.query,
          organization: organization,
          showLegend: true,
          yAxis: yAxisValue,
          projects: globalSelection.projects,
          environments: globalSelection.environments,
          start: start,
          end: end,
          period: globalSelection.datetime.period,
          disablePrevious: !isPrevious,
          disableReleases: !isPeriod,
          field: isTopEvents ? apiPayload.field : undefined,
          interval: interval,
          showDaily: isDaily,
          topEvents: isTopEvents ? topEvents : undefined,
          orderby: isTopEvents ? (0,sentry_utils_queryString__WEBPACK_IMPORTED_MODULE_19__.decodeScalar)(apiPayload.sort) : undefined,
          utc: utc === 'true',
          confirmedQuery: confirmedQuery,
          withoutZerofill: hasPerformanceChartInterpolation,
          chartComponent: chartComponent,
          referrer: referrer,
          fromDiscover: true,
          disableableSeries: disableableSeries
        }),
        fixed: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(sentry_components_placeholder__WEBPACK_IMPORTED_MODULE_12__["default"], {
          height: "200px",
          testId: "skeleton-ui"
        })
      })
    });
  }

}

ResultsChart.displayName = "ResultsChart";

class ResultsChartContainer extends react__WEBPACK_IMPORTED_MODULE_4__.Component {
  constructor() {
    super(...arguments);

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "state", {
      yAxisOptions: this.getYAxisOptions(this.props.eventView)
    });
  }

  componentWillReceiveProps(nextProps) {
    const yAxisOptions = this.getYAxisOptions(this.props.eventView);
    const nextYAxisOptions = this.getYAxisOptions(nextProps.eventView);

    if (!(0,sentry_utils__WEBPACK_IMPORTED_MODULE_14__.valueIsEqual)(yAxisOptions, nextYAxisOptions, true)) {
      this.setState({
        yAxisOptions: nextYAxisOptions
      });
    }
  }

  shouldComponentUpdate(nextProps) {
    const {
      eventView,
      ...restProps
    } = this.props;
    const {
      eventView: nextEventView,
      ...restNextProps
    } = nextProps;

    if (!eventView.isEqualTo(nextEventView) || this.props.confirmedQuery !== nextProps.confirmedQuery) {
      return true;
    }

    return !lodash_isEqual__WEBPACK_IMPORTED_MODULE_5___default()(restProps, restNextProps);
  }

  getYAxisOptions(eventView) {
    const yAxisOptions = eventView.getYAxisOptions(); // Equations on World Map isn't supported on the events-geo endpoint
    // Disabling equations as an option to prevent erroring out

    if (eventView.getDisplayMode() === sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_17__.DisplayModes.WORLDMAP) {
      return yAxisOptions.filter(_ref => {
        let {
          value
        } = _ref;
        return !(0,sentry_utils_discover_fields__WEBPACK_IMPORTED_MODULE_16__.isEquation)(value);
      });
    }

    return yAxisOptions;
  }

  render() {
    var _eventView$topEvents;

    const {
      api,
      eventView,
      location,
      router,
      total,
      onAxisChange,
      onDisplayChange,
      onTopEventsChange,
      organization,
      confirmedQuery,
      yAxis
    } = this.props;
    const {
      yAxisOptions
    } = this.state;
    const hasQueryFeature = organization.features.includes('discover-query');
    const displayOptions = eventView.getDisplayOptions().filter(opt => {
      // top5 modes are only available with larger packages in saas.
      // We remove instead of disable here as showing tooltips in dropdown
      // menus is clunky.
      if (sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_17__.TOP_EVENT_MODES.includes(opt.value) && !hasQueryFeature) {
        return false;
      }

      return true;
    }).map(opt => {
      // Can only use default display or total daily with multi y axis
      if (sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_17__.TOP_EVENT_MODES.includes(opt.value)) {
        opt.label = sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_17__.DisplayModes.TOP5 === opt.value ? 'Top Period' : 'Top Daily';
      }

      if (yAxis.length > 1 && !sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_17__.MULTI_Y_AXIS_SUPPORTED_DISPLAY_MODES.includes(opt.value)) {
        return { ...opt,
          disabled: true,
          tooltip: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_13__.t)('Change the Y-Axis dropdown to display only 1 function to use this view.')
        };
      }

      return opt;
    });
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsxs)(StyledPanel, {
      children: [yAxis.length > 0 && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(ResultsChart, {
        api: api,
        eventView: eventView,
        location: location,
        organization: organization,
        router: router,
        confirmedQuery: confirmedQuery,
        yAxisValue: yAxis
      }) || (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(NoChartContainer, {
        children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_13__.t)('No Y-Axis selected.')
      }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_22__.jsx)(_chartFooter__WEBPACK_IMPORTED_MODULE_21__["default"], {
        organization: organization,
        total: total,
        yAxisValue: yAxis,
        yAxisOptions: yAxisOptions,
        onAxisChange: onAxisChange,
        displayOptions: displayOptions,
        displayMode: eventView.getDisplayMode(),
        onDisplayChange: onDisplayChange,
        onTopEventsChange: onTopEventsChange,
        topEvents: (_eventView$topEvents = eventView.topEvents) !== null && _eventView$topEvents !== void 0 ? _eventView$topEvents : sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_17__.TOP_N.toString()
      })]
    });
  }

}

ResultsChartContainer.displayName = "ResultsChartContainer";
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,sentry_utils_withApi__WEBPACK_IMPORTED_MODULE_20__["default"])(ResultsChartContainer));

const StyledPanel = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_components_panels__WEBPACK_IMPORTED_MODULE_11__.Panel,  true ? {
  target: "eihhj0r1"
} : 0)("@media (min-width: ", p => p.theme.breakpoints.large, "){margin:0;}" + ( true ? "" : 0));

const NoChartContainer = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])('div',  true ? {
  target: "eihhj0r0"
} : 0)("display:flex;flex-direction:column;justify-content:center;align-items:center;flex:1;flex-shrink:0;overflow:hidden;height:", p => p.height || '200px', ";position:relative;border-color:transparent;margin-bottom:0;color:", p => p.theme.gray300, ";font-size:", p => p.theme.fontSizeExtraLarge, ";" + ( true ? "" : 0));

/***/ }),

/***/ "./app/views/eventsV2/resultsHeader.tsx":
/*!**********************************************!*\
  !*** ./app/views/eventsV2/resultsHeader.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "../node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @emotion/styled/base */ "../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "../node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var sentry_actionCreators_discoverSavedQueries__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! sentry/actionCreators/discoverSavedQueries */ "./app/actionCreators/discoverSavedQueries.tsx");
/* harmony import */ var sentry_components_layouts_thirds__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sentry/components/layouts/thirds */ "./app/components/layouts/thirds.tsx");
/* harmony import */ var sentry_components_timeSince__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sentry/components/timeSince */ "./app/components/timeSince.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_styles_space__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sentry/styles/space */ "./app/styles/space.tsx");
/* harmony import */ var sentry_utils_withApi__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! sentry/utils/withApi */ "./app/utils/withApi.tsx");
/* harmony import */ var _breadcrumb__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./breadcrumb */ "./app/views/eventsV2/breadcrumb.tsx");
/* harmony import */ var _eventInputName__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./eventInputName */ "./app/views/eventsV2/eventInputName.tsx");
/* harmony import */ var _savedQuery__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./savedQuery */ "./app/views/eventsV2/savedQuery/index.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");




function _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }














class ResultsHeader extends react__WEBPACK_IMPORTED_MODULE_3__.Component {
  constructor() {
    super(...arguments);

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "state", {
      savedQuery: undefined,
      loading: true
    });
  }

  componentDidMount() {
    if (this.props.eventView.id) {
      this.fetchData();
    }
  }

  componentDidUpdate(prevProps) {
    if (prevProps.eventView && this.props.eventView && prevProps.eventView.id !== this.props.eventView.id) {
      this.fetchData();
    }
  }

  fetchData() {
    const {
      api,
      eventView,
      organization
    } = this.props;

    if (typeof eventView.id === 'string') {
      this.setState({
        loading: true
      });
      (0,sentry_actionCreators_discoverSavedQueries__WEBPACK_IMPORTED_MODULE_4__.fetchSavedQuery)(api, organization.slug, eventView.id).then(savedQuery => {
        this.setState({
          savedQuery,
          loading: false
        });
      });
    }
  }

  renderAuthor() {
    const {
      eventView
    } = this.props;
    const {
      savedQuery
    } = this.state; // No saved query in use.

    if (!eventView.id) {
      return null;
    }

    let createdBy = ' \u2014 ';
    let lastEdit = ' \u2014 ';

    if (savedQuery !== undefined) {
      var _savedQuery$createdBy;

      createdBy = ((_savedQuery$createdBy = savedQuery.createdBy) === null || _savedQuery$createdBy === void 0 ? void 0 : _savedQuery$createdBy.email) || '\u2014';
      lastEdit = (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(sentry_components_timeSince__WEBPACK_IMPORTED_MODULE_6__["default"], {
        date: savedQuery.dateUpdated
      });
    }

    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(Subtitle, {
      children: [(0,sentry_locale__WEBPACK_IMPORTED_MODULE_7__.t)('Created by:'), " ", createdBy, " | ", (0,sentry_locale__WEBPACK_IMPORTED_MODULE_7__.t)('Last edited:'), " ", lastEdit]
    });
  }

  render() {
    const {
      organization,
      location,
      errorCode,
      eventView,
      yAxis,
      router
    } = this.props;
    const {
      savedQuery,
      loading
    } = this.state;
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(sentry_components_layouts_thirds__WEBPACK_IMPORTED_MODULE_5__.Header, {
      children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(StyledHeaderContent, {
        children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_breadcrumb__WEBPACK_IMPORTED_MODULE_10__["default"], {
          eventView: eventView,
          organization: organization,
          location: location
        }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_eventInputName__WEBPACK_IMPORTED_MODULE_11__["default"], {
          savedQuery: savedQuery,
          organization: organization,
          eventView: eventView
        }), this.renderAuthor()]
      }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(sentry_components_layouts_thirds__WEBPACK_IMPORTED_MODULE_5__.HeaderActions, {
        children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_savedQuery__WEBPACK_IMPORTED_MODULE_12__["default"], {
          location: location,
          organization: organization,
          eventView: eventView,
          savedQuery: savedQuery,
          savedQueryLoading: loading,
          disabled: errorCode >= 400 && errorCode < 500,
          updateCallback: () => this.fetchData(),
          yAxis: yAxis,
          router: router
        })
      })]
    });
  }

}

ResultsHeader.displayName = "ResultsHeader";

const Subtitle = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])('h4',  true ? {
  target: "e1idqj2c1"
} : 0)("font-size:", p => p.theme.fontSizeLarge, ";font-weight:normal;color:", p => p.theme.gray300, ";margin:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_8__["default"])(0.5), " 0 0 0;" + ( true ? "" : 0));

const StyledHeaderContent = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_components_layouts_thirds__WEBPACK_IMPORTED_MODULE_5__.HeaderContent,  true ? {
  target: "e1idqj2c0"
} : 0)( true ? {
  name: "12brwd0",
  styles: "overflow:unset"
} : 0);

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,sentry_utils_withApi__WEBPACK_IMPORTED_MODULE_9__["default"])(ResultsHeader));

/***/ }),

/***/ "./app/views/eventsV2/savedQuery/index.tsx":
/*!*************************************************!*\
  !*** ./app/views/eventsV2/savedQuery/index.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "../node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @emotion/styled/base */ "../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "../node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "../node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-router */ "../node_modules/react-router/es/index.js");
/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @emotion/react */ "../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js");
/* harmony import */ var _react_aria_focus__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @react-aria/focus */ "../node_modules/@react-aria/focus/dist/module.js");
/* harmony import */ var framer_motion__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! framer-motion */ "../node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs");
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash/isEqual */ "../node_modules/lodash/isEqual.js");
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var sentry_components_acl_feature__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sentry/components/acl/feature */ "./app/components/acl/feature.tsx");
/* harmony import */ var sentry_components_acl_featureDisabled__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sentry/components/acl/featureDisabled */ "./app/components/acl/featureDisabled.tsx");
/* harmony import */ var sentry_components_assistant_guideAnchor__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! sentry/components/assistant/guideAnchor */ "./app/components/assistant/guideAnchor.tsx");
/* harmony import */ var sentry_components_banner__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sentry/components/banner */ "./app/components/banner.tsx");
/* harmony import */ var sentry_components_button__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! sentry/components/button */ "./app/components/button.tsx");
/* harmony import */ var sentry_components_buttonBar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! sentry/components/buttonBar */ "./app/components/buttonBar.tsx");
/* harmony import */ var sentry_components_createAlertButton__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! sentry/components/createAlertButton */ "./app/components/createAlertButton.tsx");
/* harmony import */ var sentry_components_hovercard__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! sentry/components/hovercard */ "./app/components/hovercard.tsx");
/* harmony import */ var sentry_components_input__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! sentry/components/input */ "./app/components/input.tsx");
/* harmony import */ var sentry_components_overlay__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! sentry/components/overlay */ "./app/components/overlay.tsx");
/* harmony import */ var sentry_icons__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! sentry/icons */ "./app/icons/index.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_styles_space__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! sentry/styles/space */ "./app/styles/space.tsx");
/* harmony import */ var sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! sentry/utils/analytics */ "./app/utils/analytics.tsx");
/* harmony import */ var sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! sentry/utils/discover/eventView */ "./app/utils/discover/eventView.tsx");
/* harmony import */ var sentry_utils_discover_urls__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! sentry/utils/discover/urls */ "./app/utils/discover/urls.tsx");
/* harmony import */ var sentry_utils_useOverlay__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! sentry/utils/useOverlay */ "./app/utils/useOverlay.tsx");
/* harmony import */ var sentry_utils_withApi__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! sentry/utils/withApi */ "./app/utils/withApi.tsx");
/* harmony import */ var sentry_utils_withProjects__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! sentry/utils/withProjects */ "./app/utils/withProjects.tsx");
/* harmony import */ var sentry_views_eventsV2_utils__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! sentry/views/eventsV2/utils */ "./app/views/eventsV2/utils.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./utils */ "./app/views/eventsV2/savedQuery/utils.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");





function _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }































function SaveAsDropdown(_ref) {
  let {
    queryName,
    disabled,
    onChangeInput,
    modifiedHandleCreateQuery
  } = _ref;
  const {
    isOpen,
    triggerProps,
    overlayProps,
    arrowProps
  } = (0,sentry_utils_useOverlay__WEBPACK_IMPORTED_MODULE_23__["default"])();
  const theme = (0,_emotion_react__WEBPACK_IMPORTED_MODULE_28__.a)();
  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)("div", {
    children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(sentry_components_button__WEBPACK_IMPORTED_MODULE_11__["default"], { ...triggerProps,
      icon: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(sentry_icons__WEBPACK_IMPORTED_MODULE_17__.IconStar, {}),
      "aria-label": (0,sentry_locale__WEBPACK_IMPORTED_MODULE_18__.t)('Save as'),
      disabled: disabled,
      children: `${(0,sentry_locale__WEBPACK_IMPORTED_MODULE_18__.t)('Save as')}\u2026`
    }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_30__.AnimatePresence, {
      children: isOpen && (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(_react_aria_focus__WEBPACK_IMPORTED_MODULE_31__.FocusScope, {
        contain: true,
        restoreFocus: true,
        autoFocus: true,
        children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(sentry_components_overlay__WEBPACK_IMPORTED_MODULE_16__.PositionWrapper, {
          zIndex: theme.zIndex.dropdown,
          ...overlayProps,
          children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(StyledOverlay, {
            arrowProps: arrowProps,
            animated: true,
            children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(SaveAsInput, {
              type: "text",
              name: "query_name",
              placeholder: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_18__.t)('Display name'),
              value: queryName || '',
              onChange: onChangeInput,
              disabled: disabled
            }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(SaveAsButton, {
              onClick: modifiedHandleCreateQuery,
              priority: "primary",
              disabled: disabled || !queryName,
              children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_18__.t)('Save for Org')
            })]
          })
        })
      })
    })]
  });
}

SaveAsDropdown.displayName = "SaveAsDropdown";

class SavedQueryButtonGroup extends react__WEBPACK_IMPORTED_MODULE_4__.PureComponent {
  constructor() {
    super(...arguments);

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "state", {
      isNewQuery: true,
      isEditingQuery: false,
      queryName: ''
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "onChangeInput", event => {
      const target = event.target;
      this.setState({
        queryName: target.value
      });
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "handleCreateQuery", event => {
      event.preventDefault();
      event.stopPropagation();
      const {
        api,
        organization,
        eventView,
        yAxis
      } = this.props;

      if (!this.state.queryName) {
        return;
      }

      const nextEventView = eventView.clone();
      nextEventView.name = this.state.queryName; // Checks if "Save as" button is clicked from a clean state, or it is
      // clicked while modifying an existing query

      const isNewQuery = !eventView.id;
      (0,_utils__WEBPACK_IMPORTED_MODULE_27__.handleCreateQuery)(api, organization, nextEventView, yAxis, isNewQuery).then(savedQuery => {
        const view = sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_21__["default"].fromSavedQuery(savedQuery);
        sentry_components_banner__WEBPACK_IMPORTED_MODULE_10__["default"].dismiss('discover');
        this.setState({
          queryName: ''
        });
        react_router__WEBPACK_IMPORTED_MODULE_5__.browserHistory.push(view.getResultsViewUrlTarget(organization.slug));
      });
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "handleUpdateQuery", event => {
      event.preventDefault();
      event.stopPropagation();
      const {
        api,
        organization,
        eventView,
        updateCallback,
        yAxis
      } = this.props;
      (0,_utils__WEBPACK_IMPORTED_MODULE_27__.handleUpdateQuery)(api, organization, eventView, yAxis).then(savedQuery => {
        const view = sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_21__["default"].fromSavedQuery(savedQuery);
        this.setState({
          queryName: ''
        });
        react_router__WEBPACK_IMPORTED_MODULE_5__.browserHistory.push(view.getResultsViewShortUrlTarget(organization.slug));
        updateCallback();
      });
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "handleDeleteQuery", event => {
      event.preventDefault();
      event.stopPropagation();
      const {
        api,
        organization,
        eventView
      } = this.props;
      (0,_utils__WEBPACK_IMPORTED_MODULE_27__.handleDeleteQuery)(api, organization, eventView).then(() => {
        react_router__WEBPACK_IMPORTED_MODULE_5__.browserHistory.push({
          pathname: (0,sentry_utils_discover_urls__WEBPACK_IMPORTED_MODULE_22__.getDiscoverLandingUrl)(organization),
          query: {}
        });
      });
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "handleCreateAlertSuccess", () => {
      const {
        organization
      } = this.props;
      (0,sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_20__.trackAnalyticsEvent)({
        eventKey: 'discover_v2.create_alert_clicked',
        eventName: 'Discoverv2: Create alert clicked',
        status: 'success',
        organization_id: organization.id,
        url: window.location.href
      });
    });
  }

  static getDerivedStateFromProps(nextProps, prevState) {
    const {
      eventView: nextEventView,
      savedQuery,
      savedQueryLoading,
      yAxis
    } = nextProps; // For a new unsaved query

    if (!savedQuery) {
      return {
        isNewQuery: true,
        isEditingQuery: false,
        queryName: prevState.queryName || ''
      };
    }

    if (savedQueryLoading) {
      return prevState;
    }

    const savedEventView = sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_21__["default"].fromSavedQuery(savedQuery); // Switching from a SavedQuery to another SavedQuery

    if (savedEventView.id !== nextEventView.id) {
      return {
        isNewQuery: false,
        isEditingQuery: false,
        queryName: ''
      };
    } // For modifying a SavedQuery


    const isEqualQuery = nextEventView.isEqualTo(savedEventView); // undefined saved yAxis defaults to count() and string values are converted to array

    const isEqualYAxis = lodash_isEqual__WEBPACK_IMPORTED_MODULE_6___default()(yAxis, !savedQuery.yAxis ? ['count()'] : typeof savedQuery.yAxis === 'string' ? [savedQuery.yAxis] : savedQuery.yAxis);
    return {
      isNewQuery: false,
      isEditingQuery: !isEqualQuery || !isEqualYAxis,
      // HACK(leedongwei): See comment at SavedQueryButtonGroup.onFocusInput
      queryName: prevState.queryName || ''
    };
  }
  /**
   * Stop propagation for the input and container so people can interact with
   * the inputs in the dropdown.
   */


  renderButtonSaveAs(disabled) {
    const {
      queryName
    } = this.state;
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(SaveAsDropdown, {
      queryName: queryName,
      onChangeInput: this.onChangeInput,
      modifiedHandleCreateQuery: this.handleCreateQuery,
      disabled: disabled
    });
  }

  renderButtonSave(disabled) {
    const {
      isNewQuery,
      isEditingQuery
    } = this.state; // Existing query that hasn't been modified.

    if (!isNewQuery && !isEditingQuery) {
      return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(sentry_components_button__WEBPACK_IMPORTED_MODULE_11__["default"], {
        icon: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(sentry_icons__WEBPACK_IMPORTED_MODULE_17__.IconStar, {
          color: "yellow100",
          isSolid: true,
          size: "sm"
        }),
        disabled: true,
        "data-test-id": "discover2-savedquery-button-saved",
        children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_18__.t)('Saved for Org')
      });
    } // Existing query with edits, show save and save as.


    if (!isNewQuery && isEditingQuery) {
      return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(react__WEBPACK_IMPORTED_MODULE_4__.Fragment, {
        children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(sentry_components_button__WEBPACK_IMPORTED_MODULE_11__["default"], {
          onClick: this.handleUpdateQuery,
          "data-test-id": "discover2-savedquery-button-update",
          disabled: disabled,
          children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(IconUpdate, {}), (0,sentry_locale__WEBPACK_IMPORTED_MODULE_18__.t)('Save Changes')]
        }), this.renderButtonSaveAs(disabled)]
      });
    } // Is a new query enable saveas


    return this.renderButtonSaveAs(disabled);
  }

  renderButtonDelete(disabled) {
    const {
      isNewQuery
    } = this.state;

    if (isNewQuery) {
      return null;
    }

    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(sentry_components_button__WEBPACK_IMPORTED_MODULE_11__["default"], {
      "data-test-id": "discover2-savedquery-button-delete",
      onClick: this.handleDeleteQuery,
      disabled: disabled,
      icon: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(sentry_icons__WEBPACK_IMPORTED_MODULE_17__.IconDelete, {}),
      "aria-label": (0,sentry_locale__WEBPACK_IMPORTED_MODULE_18__.t)('Delete')
    });
  }

  renderButtonCreateAlert() {
    const {
      eventView,
      organization,
      projects
    } = this.props;
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(sentry_components_assistant_guideAnchor__WEBPACK_IMPORTED_MODULE_9__["default"], {
      target: "create_alert_from_discover",
      children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(sentry_components_createAlertButton__WEBPACK_IMPORTED_MODULE_13__.CreateAlertFromViewButton, {
        eventView: eventView,
        organization: organization,
        projects: projects,
        onClick: this.handleCreateAlertSuccess,
        referrer: "discover",
        "aria-label": (0,sentry_locale__WEBPACK_IMPORTED_MODULE_18__.t)('Create Alert'),
        "data-test-id": "discover2-create-from-discover"
      })
    });
  }

  renderButtonAddToDashboard() {
    const {
      organization,
      eventView,
      savedQuery,
      yAxis,
      router,
      location
    } = this.props;
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(sentry_components_button__WEBPACK_IMPORTED_MODULE_11__["default"], {
      "data-test-id": "add-dashboard-widget-from-discover",
      onClick: () => (0,sentry_views_eventsV2_utils__WEBPACK_IMPORTED_MODULE_26__.handleAddQueryToDashboard)({
        organization,
        location,
        eventView,
        query: savedQuery,
        yAxis,
        router
      }),
      children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_18__.t)('Add to Dashboard')
    }, "add-dashboard-widget-from-discover");
  }

  render() {
    const {
      organization
    } = this.props;

    const renderDisabled = p => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(sentry_components_hovercard__WEBPACK_IMPORTED_MODULE_14__.Hovercard, {
      body: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(sentry_components_acl_featureDisabled__WEBPACK_IMPORTED_MODULE_8__["default"], {
        features: p.features,
        hideHelpToggle: true,
        message: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_18__.t)('Discover queries are disabled'),
        featureName: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_18__.t)('Discover queries')
      }),
      children: p.children(p)
    });

    const renderQueryButton = renderFunc => {
      return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(sentry_components_acl_feature__WEBPACK_IMPORTED_MODULE_7__["default"], {
        organization: organization,
        features: ['discover-query'],
        hookName: "feature-disabled:discover-saved-query-create",
        renderDisabled: renderDisabled,
        children: _ref2 => {
          let {
            hasFeature
          } = _ref2;
          return renderFunc(!hasFeature || this.props.disabled);
        }
      });
    };

    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsxs)(ResponsiveButtonBar, {
      gap: 1,
      children: [renderQueryButton(disabled => this.renderButtonSave(disabled)), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(sentry_components_acl_feature__WEBPACK_IMPORTED_MODULE_7__["default"], {
        organization: organization,
        features: ['incidents'],
        children: _ref3 => {
          let {
            hasFeature
          } = _ref3;
          return hasFeature && this.renderButtonCreateAlert();
        }
      }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_29__.jsx)(sentry_components_acl_feature__WEBPACK_IMPORTED_MODULE_7__["default"], {
        organization: organization,
        features: ['dashboards-edit'],
        children: _ref4 => {
          let {
            hasFeature
          } = _ref4;
          return hasFeature && this.renderButtonAddToDashboard();
        }
      }), renderQueryButton(disabled => this.renderButtonDelete(disabled))]
    });
  }

}

SavedQueryButtonGroup.displayName = "SavedQueryButtonGroup";

(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(SavedQueryButtonGroup, "stopEventPropagation", event => {
  const capturedElements = ['LI', 'INPUT'];

  if (event.target instanceof Element && capturedElements.includes(event.target.nodeName)) {
    event.preventDefault();
    event.stopPropagation();
  }
});

(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(SavedQueryButtonGroup, "defaultProps", {
  disabled: false
});

const ResponsiveButtonBar = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_components_buttonBar__WEBPACK_IMPORTED_MODULE_12__["default"],  true ? {
  target: "e1nw12tj4"
} : 0)("@media (min-width: ", p => p.theme.breakpoints.medium, "){margin-top:0;}" + ( true ? "" : 0));

const StyledOverlay = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_components_overlay__WEBPACK_IMPORTED_MODULE_16__.Overlay,  true ? {
  target: "e1nw12tj3"
} : 0)("padding:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_19__["default"])(1), ";" + ( true ? "" : 0));

const SaveAsButton = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_components_button__WEBPACK_IMPORTED_MODULE_11__["default"],  true ? {
  target: "e1nw12tj2"
} : 0)( true ? {
  name: "1d3w5wq",
  styles: "width:100%"
} : 0);

const SaveAsInput = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_components_input__WEBPACK_IMPORTED_MODULE_15__["default"],  true ? {
  target: "e1nw12tj1"
} : 0)("height:40px;margin-bottom:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_19__["default"])(1), ";" + ( true ? "" : 0));

const IconUpdate = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])('div',  true ? {
  target: "e1nw12tj0"
} : 0)("display:inline-block;width:10px;height:10px;margin-right:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_19__["default"])(0.75), ";border-radius:5px;background-color:", p => p.theme.yellow300, ";" + ( true ? "" : 0));

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,sentry_utils_withProjects__WEBPACK_IMPORTED_MODULE_25__["default"])((0,sentry_utils_withApi__WEBPACK_IMPORTED_MODULE_24__["default"])(SavedQueryButtonGroup)));

/***/ }),

/***/ "./app/views/eventsV2/table/columnEditModal.tsx":
/*!******************************************************!*\
  !*** ./app/views/eventsV2/table/columnEditModal.tsx ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "modalCss": () => (/* binding */ modalCss)
/* harmony export */ });
/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/styled/base */ "../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "../node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @emotion/react */ "../node_modules/@emotion/react/dist/emotion-react.browser.esm.js");
/* harmony import */ var sentry_components_button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sentry/components/button */ "./app/components/button.tsx");
/* harmony import */ var sentry_components_buttonBar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! sentry/components/buttonBar */ "./app/components/buttonBar.tsx");
/* harmony import */ var sentry_components_links_externalLink__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sentry/components/links/externalLink */ "./app/components/links/externalLink.tsx");
/* harmony import */ var sentry_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sentry/constants */ "./app/constants/index.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_styles_space__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sentry/styles/space */ "./app/styles/space.tsx");
/* harmony import */ var sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! sentry/utils/analytics */ "./app/utils/analytics.tsx");
/* harmony import */ var sentry_utils_theme__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sentry/utils/theme */ "./app/utils/theme.tsx");
/* harmony import */ var sentry_utils_useTags__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! sentry/utils/useTags */ "./app/utils/useTags.tsx");
/* harmony import */ var sentry_views_eventsV2_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! sentry/views/eventsV2/utils */ "./app/views/eventsV2/utils.tsx");
/* harmony import */ var _columnEditCollection__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./columnEditCollection */ "./app/views/eventsV2/table/columnEditCollection.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");


















function ColumnEditModal(props) {
  const {
    Header,
    Body,
    Footer,
    measurementKeys,
    spanOperationBreakdownKeys,
    organization,
    onApply,
    closeModal
  } = props; // Only run once for each organization.id.

  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {
    (0,sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_9__.trackAnalyticsEvent)({
      eventKey: 'discover_v2.column_editor.open',
      eventName: 'Discoverv2: Open column editor',
      organization_id: parseInt(organization.id, 10)
    });
  }, [organization.id]);
  const {
    tags
  } = (0,sentry_utils_useTags__WEBPACK_IMPORTED_MODULE_11__["default"])();
  const tagKeys = Object.values(tags).map(_ref => {
    let {
      key
    } = _ref;
    return key;
  });
  const [columns, setColumns] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(props.columns);

  function handleApply() {
    onApply(columns);
    closeModal();
  }

  const fieldOptions = (0,sentry_views_eventsV2_utils__WEBPACK_IMPORTED_MODULE_12__.generateFieldOptions)({
    organization,
    tagKeys,
    measurementKeys,
    spanOperationBreakdownKeys
  });
  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, {
    children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(Header, {
      closeButton: true,
      children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("h4", {
        children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_7__.t)('Edit Columns')
      })
    }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(Body, {
      children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(Instruction, {
        children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_7__.tct)('To group events, add [functionLink: functions] f(x) that may take in additional parameters. [fieldTagLink: Tag and field] columns will help you view more details about the events (i.e. title).', {
          functionLink: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(sentry_components_links_externalLink__WEBPACK_IMPORTED_MODULE_5__["default"], {
            href: "https://docs.sentry.io/product/discover-queries/query-builder/#filter-by-table-columns"
          }),
          fieldTagLink: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(sentry_components_links_externalLink__WEBPACK_IMPORTED_MODULE_5__["default"], {
            href: "https://docs.sentry.io/product/sentry-basics/search/searchable-properties/#event-properties"
          })
        })
      }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_columnEditCollection__WEBPACK_IMPORTED_MODULE_13__["default"], {
        columns: columns,
        fieldOptions: fieldOptions,
        onChange: setColumns,
        organization: organization
      })]
    }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(Footer, {
      children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(sentry_components_buttonBar__WEBPACK_IMPORTED_MODULE_4__["default"], {
        gap: 1,
        children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(sentry_components_button__WEBPACK_IMPORTED_MODULE_3__["default"], {
          priority: "default",
          href: sentry_constants__WEBPACK_IMPORTED_MODULE_6__.DISCOVER2_DOCS_URL,
          external: true,
          children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_7__.t)('Read the Docs')
        }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(sentry_components_button__WEBPACK_IMPORTED_MODULE_3__["default"], {
          "aria-label": (0,sentry_locale__WEBPACK_IMPORTED_MODULE_7__.t)('Apply'),
          priority: "primary",
          onClick: handleApply,
          children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_7__.t)('Apply')
        })]
      })
    })]
  });
}

ColumnEditModal.displayName = "ColumnEditModal";

const Instruction = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__["default"])('div',  true ? {
  target: "e2ihjqm0"
} : 0)("margin-bottom:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_8__["default"])(4), ";" + ( true ? "" : 0));

const modalCss = /*#__PURE__*/(0,_emotion_react__WEBPACK_IMPORTED_MODULE_15__.css)("@media (min-width: ", sentry_utils_theme__WEBPACK_IMPORTED_MODULE_10__["default"].breakpoints.medium, "){width:auto;max-width:900px;}" + ( true ? "" : 0),  true ? "" : 0);
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ColumnEditModal);


/***/ }),

/***/ "./app/views/eventsV2/table/index.tsx":
/*!********************************************!*\
  !*** ./app/views/eventsV2/table/index.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "../node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @emotion/styled/base */ "../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "../node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "../node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var sentry_components_pagination__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sentry/components/pagination */ "./app/components/pagination.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sentry/utils/analytics */ "./app/utils/analytics.tsx");
/* harmony import */ var sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sentry/utils/discover/eventView */ "./app/utils/discover/eventView.tsx");
/* harmony import */ var sentry_utils_discover_fields__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! sentry/utils/discover/fields */ "./app/utils/discover/fields.tsx");
/* harmony import */ var sentry_utils_measurements_measurements__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sentry/utils/measurements/measurements */ "./app/utils/measurements/measurements.tsx");
/* harmony import */ var sentry_utils_parseLinkHeader__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! sentry/utils/parseLinkHeader */ "./app/utils/parseLinkHeader.tsx");
/* harmony import */ var sentry_utils_withApi__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! sentry/utils/withApi */ "./app/utils/withApi.tsx");
/* harmony import */ var _tableView__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./tableView */ "./app/views/eventsV2/table/tableView.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");





function _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }














/**
 * `Table` is a container element that handles 2 things
 * 1. Fetch data from source
 * 2. Handle pagination of data
 *
 * It will pass the data it fetched to `TableView`, where the state of the
 * Table is maintained and controlled
 */
class Table extends react__WEBPACK_IMPORTED_MODULE_4__.PureComponent {
  constructor() {
    super(...arguments);

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "state", {
      isLoading: true,
      tableFetchID: undefined,
      error: null,
      pageLinks: null,
      tableData: null
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "shouldRefetchData", prevProps => {
      const thisAPIPayload = this.props.eventView.getEventsAPIPayload(this.props.location);
      const otherAPIPayload = prevProps.eventView.getEventsAPIPayload(prevProps.location);
      return !(0,sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_8__.isAPIPayloadSimilar)(thisAPIPayload, otherAPIPayload);
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "fetchData", () => {
      const {
        eventView,
        organization,
        location,
        setError,
        confirmedQuery
      } = this.props;

      if (!eventView.isValid() || !confirmedQuery) {
        return;
      } // note: If the eventView has no aggregates, the endpoint will automatically add the event id in
      // the API payload response


      const shouldUseEvents = organization.features.includes('discover-frontend-use-events-endpoint');
      const url = shouldUseEvents ? `/organizations/${organization.slug}/events/` : `/organizations/${organization.slug}/eventsv2/`;
      const tableFetchID = Symbol('tableFetchID');
      const apiPayload = eventView.getEventsAPIPayload(location);
      apiPayload.referrer = 'api.discover.query-table';
      setError('', 200);
      this.setState({
        isLoading: true,
        tableFetchID
      });
      sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_7__.metric.mark({
        name: `discover-events-start-${apiPayload.query}`
      });
      this.props.api.clear();
      this.props.api.requestPromise(url, {
        method: 'GET',
        includeAllArgs: true,
        query: apiPayload
      }).then(_ref => {
        var _data$meta;

        let [data, _, resp] = _ref;
        // We want to measure this metric regardless of whether we use the result
        sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_7__.metric.measure({
          name: 'app.api.discover-query',
          start: `discover-events-start-${apiPayload.query}`,
          data: {
            status: resp && resp.status
          }
        });

        if (this.state.tableFetchID !== tableFetchID) {
          // invariant: a different request was initiated after this request
          return;
        }

        const {
          fields,
          ...nonFieldsMeta
        } = (_data$meta = data.meta) !== null && _data$meta !== void 0 ? _data$meta : {}; // events api uses a different response format so we need to construct tableData differently

        const tableData = shouldUseEvents ? { ...data,
          meta: { ...fields,
            nonFieldsMeta
          }
        } : data;
        this.setState(prevState => ({
          isLoading: false,
          tableFetchID: undefined,
          error: null,
          pageLinks: resp ? resp.getResponseHeader('Link') : prevState.pageLinks,
          tableData
        }));
      }).catch(err => {
        var _err$responseJSON;

        sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_7__.metric.measure({
          name: 'app.api.discover-query',
          start: `discover-events-start-${apiPayload.query}`,
          data: {
            status: err.status
          }
        });
        const message = (err === null || err === void 0 ? void 0 : (_err$responseJSON = err.responseJSON) === null || _err$responseJSON === void 0 ? void 0 : _err$responseJSON.detail) || (0,sentry_locale__WEBPACK_IMPORTED_MODULE_6__.t)('An unknown error occurred.');
        this.setState({
          isLoading: false,
          tableFetchID: undefined,
          error: message,
          pageLinks: null,
          tableData: null
        });
        (0,sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_7__.trackAnalyticsEvent)({
          eventKey: 'discover_search.failed',
          eventName: 'Discover Search: Failed',
          organization_id: this.props.organization.id,
          search_type: 'events',
          search_source: 'discover_search',
          error: message
        });
        setError(message, err.status);
      });
    });
  }

  componentDidMount() {
    this.fetchData();
  }

  componentDidUpdate(prevProps) {
    // Reload data if we aren't already loading, or if we've moved
    // from an invalid view state to a valid one.
    if (!this.state.isLoading && this.shouldRefetchData(prevProps) || prevProps.eventView.isValid() === false && this.props.eventView.isValid() || prevProps.confirmedQuery !== this.props.confirmedQuery) {
      this.fetchData();
    }
  }

  render() {
    const {
      eventView
    } = this.props;
    const {
      pageLinks,
      tableData,
      isLoading,
      error
    } = this.state;
    const isFirstPage = pageLinks ? (0,sentry_utils_parseLinkHeader__WEBPACK_IMPORTED_MODULE_11__["default"])(pageLinks).previous.results === false : false;
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(Container, {
      children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(sentry_utils_measurements_measurements__WEBPACK_IMPORTED_MODULE_10__["default"], {
        children: _ref2 => {
          let {
            measurements
          } = _ref2;
          const measurementKeys = Object.values(measurements).map(_ref3 => {
            let {
              key
            } = _ref3;
            return key;
          });
          return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_tableView__WEBPACK_IMPORTED_MODULE_13__["default"], { ...this.props,
            isLoading: isLoading,
            isFirstPage: isFirstPage,
            error: error,
            eventView: eventView,
            tableData: tableData,
            measurementKeys: measurementKeys,
            spanOperationBreakdownKeys: sentry_utils_discover_fields__WEBPACK_IMPORTED_MODULE_9__.SPAN_OP_BREAKDOWN_FIELDS
          });
        }
      }), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(sentry_components_pagination__WEBPACK_IMPORTED_MODULE_5__["default"], {
        pageLinks: pageLinks
      })]
    });
  }

}

Table.displayName = "Table";
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,sentry_utils_withApi__WEBPACK_IMPORTED_MODULE_12__["default"])(Table));

const Container = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])('div',  true ? {
  target: "e1rpfy900"
} : 0)( true ? {
  name: "ovk77c",
  styles: "min-width:0"
} : 0);

/***/ }),

/***/ "./app/views/eventsV2/table/tableActions.tsx":
/*!***************************************************!*\
  !*** ./app/views/eventsV2/table/tableActions.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var sentry_components_acl_feature__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sentry/components/acl/feature */ "./app/components/acl/feature.tsx");
/* harmony import */ var sentry_components_acl_featureDisabled__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! sentry/components/acl/featureDisabled */ "./app/components/acl/featureDisabled.tsx");
/* harmony import */ var sentry_components_assistant_guideAnchor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sentry/components/assistant/guideAnchor */ "./app/components/assistant/guideAnchor.tsx");
/* harmony import */ var sentry_components_button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! sentry/components/button */ "./app/components/button.tsx");
/* harmony import */ var sentry_components_dataExport__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sentry/components/dataExport */ "./app/components/dataExport.tsx");
/* harmony import */ var sentry_components_hovercard__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sentry/components/hovercard */ "./app/components/hovercard.tsx");
/* harmony import */ var sentry_icons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sentry/icons */ "./app/icons/index.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! sentry/utils/analytics */ "./app/utils/analytics.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils */ "./app/views/eventsV2/utils.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");
/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @emotion/react */ "../node_modules/@emotion/react/dist/emotion-react.browser.esm.js");















function handleDownloadAsCsv(title, _ref) {
  let {
    organization,
    eventView,
    tableData
  } = _ref;
  (0,sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_9__.trackAnalyticsEvent)({
    eventKey: 'discover_v2.results.download_csv',
    eventName: 'Discoverv2: Download CSV',
    organization_id: parseInt(organization.id, 10)
  });
  (0,_utils__WEBPACK_IMPORTED_MODULE_10__.downloadAsCsv)(tableData, eventView.getColumns(true), title);
}

function renderDownloadButton(canEdit, props) {
  const {
    tableData
  } = props;
  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(sentry_components_acl_feature__WEBPACK_IMPORTED_MODULE_1__["default"], {
    features: ['organizations:discover-query'],
    renderDisabled: () => renderBrowserExportButton(canEdit, props),
    children: tableData !== null && tableData !== void 0 && tableData.data && tableData.data.length < 50 ? renderBrowserExportButton(canEdit, props) : renderAsyncExportButton(canEdit, props)
  });
}

renderDownloadButton.displayName = "renderDownloadButton";

function renderBrowserExportButton(canEdit, props) {
  const {
    isLoading,
    error
  } = props;
  const disabled = isLoading || error !== null || canEdit === false;
  const onClick = disabled ? undefined : () => handleDownloadAsCsv(props.title, props);
  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(sentry_components_button__WEBPACK_IMPORTED_MODULE_4__["default"], {
    size: "sm",
    disabled: disabled,
    onClick: onClick,
    "data-test-id": "grid-download-csv",
    icon: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(sentry_icons__WEBPACK_IMPORTED_MODULE_7__.IconDownload, {
      size: "xs"
    }),
    title: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_8__.t)("There aren't that many results, start your export and it'll download immediately."),
    children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_8__.t)('Export All')
  });
}

renderBrowserExportButton.displayName = "renderBrowserExportButton";

function renderAsyncExportButton(canEdit, props) {
  const {
    isLoading,
    error,
    location,
    eventView
  } = props;
  const disabled = isLoading || error !== null || canEdit === false;
  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(sentry_components_dataExport__WEBPACK_IMPORTED_MODULE_5__["default"], {
    payload: {
      queryType: sentry_components_dataExport__WEBPACK_IMPORTED_MODULE_5__.ExportQueryType.Discover,
      queryInfo: eventView.getEventsAPIPayload(location)
    },
    disabled: disabled,
    icon: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(sentry_icons__WEBPACK_IMPORTED_MODULE_7__.IconDownload, {
      size: "xs"
    }),
    children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_8__.t)('Export All')
  });
}

renderAsyncExportButton.displayName = "renderAsyncExportButton";

// Placate eslint proptype checking
function renderEditButton(canEdit, props) {
  const onClick = canEdit ? props.onEdit : undefined;
  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(sentry_components_assistant_guideAnchor__WEBPACK_IMPORTED_MODULE_3__["default"], {
    target: "columns_header_button",
    children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(sentry_components_button__WEBPACK_IMPORTED_MODULE_4__["default"], {
      size: "sm",
      disabled: !canEdit,
      onClick: onClick,
      "data-test-id": "grid-edit-enable",
      icon: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(sentry_icons__WEBPACK_IMPORTED_MODULE_7__.IconStack, {
        size: "xs"
      }),
      children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_8__.t)('Columns')
    })
  });
}

renderEditButton.displayName = "renderEditButton";

// Placate eslint proptype checking
function renderSummaryButton(_ref2) {
  let {
    onChangeShowTags,
    showTags
  } = _ref2;
  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(sentry_components_button__WEBPACK_IMPORTED_MODULE_4__["default"], {
    "data-test-id": "toggle-show-tags",
    size: "sm",
    onClick: onChangeShowTags,
    icon: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(sentry_icons__WEBPACK_IMPORTED_MODULE_7__.IconTag, {
      size: "xs"
    }),
    children: showTags ? (0,sentry_locale__WEBPACK_IMPORTED_MODULE_8__.t)('Hide Tags') : (0,sentry_locale__WEBPACK_IMPORTED_MODULE_8__.t)('Show Tags')
  });
}

renderSummaryButton.displayName = "renderSummaryButton";

function FeatureWrapper(props) {
  const noEditMessage = (0,sentry_locale__WEBPACK_IMPORTED_MODULE_8__.t)('Requires discover query feature.');
  const editFeatures = ['organizations:discover-query'];

  const renderDisabled = p => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(sentry_components_hovercard__WEBPACK_IMPORTED_MODULE_6__.Hovercard, {
    body: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(sentry_components_acl_featureDisabled__WEBPACK_IMPORTED_MODULE_2__["default"], {
      features: p.features,
      hideHelpToggle: true,
      message: noEditMessage,
      featureName: noEditMessage
    }),
    children: p.children(p)
  });

  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(sentry_components_acl_feature__WEBPACK_IMPORTED_MODULE_1__["default"], {
    hookName: "feature-disabled:grid-editable-actions",
    renderDisabled: renderDisabled,
    features: editFeatures,
    children: _ref3 => {
      let {
        hasFeature
      } = _ref3;
      return props.children(hasFeature, props);
    }
  });
}

FeatureWrapper.displayName = "FeatureWrapper";

function HeaderActions(props) {
  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
    children: [(0,_emotion_react__WEBPACK_IMPORTED_MODULE_12__.createElement)(FeatureWrapper, { ...props,
      key: "edit"
    }, renderEditButton), (0,_emotion_react__WEBPACK_IMPORTED_MODULE_12__.createElement)(FeatureWrapper, { ...props,
      key: "download"
    }, renderDownloadButton), renderSummaryButton(props)]
  });
}

HeaderActions.displayName = "HeaderActions";
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HeaderActions);

/***/ }),

/***/ "./app/views/eventsV2/table/tableView.tsx":
/*!************************************************!*\
  !*** ./app/views/eventsV2/table/tableView.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "../node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @emotion/styled/base */ "../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "../node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.error.cause.js */ "../node_modules/core-js/modules/es.error.cause.js");
/* harmony import */ var core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "../node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-router */ "../node_modules/react-router/es/index.js");
/* harmony import */ var _sentry_react__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @sentry/react */ "../node_modules/@sentry/hub/esm/exports.js");
/* harmony import */ var sentry_actionCreators_modal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sentry/actionCreators/modal */ "./app/actionCreators/modal.tsx");
/* harmony import */ var sentry_components_gridEditable__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sentry/components/gridEditable */ "./app/components/gridEditable/index.tsx");
/* harmony import */ var sentry_components_gridEditable_sortLink__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! sentry/components/gridEditable/sortLink */ "./app/components/gridEditable/sortLink.tsx");
/* harmony import */ var sentry_components_links_link__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sentry/components/links/link */ "./app/components/links/link.tsx");
/* harmony import */ var sentry_components_tooltip__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! sentry/components/tooltip */ "./app/components/tooltip.tsx");
/* harmony import */ var sentry_components_truncate__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! sentry/components/truncate */ "./app/components/truncate.tsx");
/* harmony import */ var sentry_icons__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! sentry/icons */ "./app/icons/index.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! sentry/utils */ "./app/utils.tsx");
/* harmony import */ var sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! sentry/utils/analytics */ "./app/utils/analytics.tsx");
/* harmony import */ var sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! sentry/utils/discover/eventView */ "./app/utils/discover/eventView.tsx");
/* harmony import */ var sentry_utils_discover_fieldRenderers__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! sentry/utils/discover/fieldRenderers */ "./app/utils/discover/fieldRenderers.tsx");
/* harmony import */ var sentry_utils_discover_fields__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! sentry/utils/discover/fields */ "./app/utils/discover/fields.tsx");
/* harmony import */ var sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! sentry/utils/discover/types */ "./app/utils/discover/types.tsx");
/* harmony import */ var sentry_utils_discover_urls__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! sentry/utils/discover/urls */ "./app/utils/discover/urls.tsx");
/* harmony import */ var sentry_utils_queryString__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! sentry/utils/queryString */ "./app/utils/queryString.tsx");
/* harmony import */ var sentry_utils_tokenizeSearch__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! sentry/utils/tokenizeSearch */ "./app/utils/tokenizeSearch.tsx");
/* harmony import */ var sentry_utils_withProjects__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! sentry/utils/withProjects */ "./app/utils/withProjects.tsx");
/* harmony import */ var sentry_views_performance_traceDetails_utils__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! sentry/views/performance/traceDetails/utils */ "./app/views/performance/traceDetails/utils.tsx");
/* harmony import */ var sentry_views_performance_transactionSummary_utils__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! sentry/views/performance/transactionSummary/utils */ "./app/views/performance/transactionSummary/utils.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../utils */ "./app/views/eventsV2/utils.tsx");
/* harmony import */ var _cellAction__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./cellAction */ "./app/views/eventsV2/table/cellAction.tsx");
/* harmony import */ var _columnEditModal__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./columnEditModal */ "./app/views/eventsV2/table/columnEditModal.tsx");
/* harmony import */ var _tableActions__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./tableActions */ "./app/views/eventsV2/table/tableActions.tsx");
/* harmony import */ var _topResultsIndicator__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./topResultsIndicator */ "./app/views/eventsV2/table/topResultsIndicator.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");






function _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }
































/**
 * The `TableView` is marked with leading _ in its method names. It consumes
 * the EventView object given in its props to generate new EventView objects
 * for actions like resizing column.

 * The entire state of the table view (or event view) is co-located within
 * the EventView object. This object is fed from the props.
 *
 * Attempting to modify the state, and therefore, modifying the given EventView
 * object given from its props, will generate new instances of EventView objects.
 *
 * In most cases, the new EventView object differs from the previous EventView
 * object. The new EventView object is pushed to the location object.
 */
class TableView extends react__WEBPACK_IMPORTED_MODULE_5__.Component {
  constructor() {
    super(...arguments);

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "_resizeColumn", (columnIndex, nextColumn) => {
      const {
        location,
        eventView
      } = this.props;
      const newWidth = nextColumn.width ? Number(nextColumn.width) : sentry_components_gridEditable__WEBPACK_IMPORTED_MODULE_8__.COL_WIDTH_UNDEFINED;
      const nextEventView = eventView.withResizedColumn(columnIndex, newWidth);
      (0,_utils__WEBPACK_IMPORTED_MODULE_27__.pushEventViewToLocation)({
        location,
        nextEventView,
        extraQuery: (0,sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_17__.pickRelevantLocationQueryStrings)(location)
      });
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "_renderPrependColumns", (isHeader, dataRow, rowIndex) => {
      const {
        organization,
        eventView,
        tableData,
        location
      } = this.props;
      const hasAggregates = eventView.hasAggregateField();
      const hasIdField = eventView.hasIdField();

      if (isHeader) {
        if (hasAggregates) {
          return [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(PrependHeader, {
            children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(sentry_icons__WEBPACK_IMPORTED_MODULE_13__.IconStack, {
              size: "sm"
            })
          }, "header-icon")];
        }

        if (!hasIdField) {
          return [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(PrependHeader, {
            children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(sentry_components_gridEditable_sortLink__WEBPACK_IMPORTED_MODULE_9__["default"], {
              align: "left",
              title: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_14__.t)('event id'),
              direction: undefined,
              canSort: false,
              generateSortLink: () => undefined
            })
          }, "header-event-id")];
        }

        return [];
      }

      if (hasAggregates) {
        const nextView = (0,_utils__WEBPACK_IMPORTED_MODULE_27__.getExpandedResults)(eventView, {}, dataRow);
        const target = {
          pathname: location.pathname,
          query: nextView.generateQueryStringObject()
        };
        return [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(sentry_components_tooltip__WEBPACK_IMPORTED_MODULE_11__["default"], {
          title: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_14__.t)('Open Group'),
          children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(sentry_components_links_link__WEBPACK_IMPORTED_MODULE_10__["default"], {
            to: target,
            "data-test-id": "open-group",
            onClick: () => {
              if (nextView.isEqualTo(eventView)) {
                _sentry_react__WEBPACK_IMPORTED_MODULE_33__.captureException(new Error('Failed to drilldown'));
              }
            },
            children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(StyledIcon, {
              size: "sm"
            })
          })
        }, `eventlink${rowIndex}`)];
      }

      if (!hasIdField) {
        let value = dataRow.id;

        if (tableData && tableData.meta) {
          const fieldRenderer = (0,sentry_utils_discover_fieldRenderers__WEBPACK_IMPORTED_MODULE_18__.getFieldRenderer)('id', tableData.meta);
          value = fieldRenderer(dataRow, {
            organization,
            location
          });
        }

        const eventSlug = (0,sentry_utils_discover_urls__WEBPACK_IMPORTED_MODULE_21__.generateEventSlug)(dataRow);
        const target = (0,sentry_utils_discover_urls__WEBPACK_IMPORTED_MODULE_21__.eventDetailsRouteWithEventView)({
          orgSlug: organization.slug,
          eventSlug,
          eventView
        });
        return [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(sentry_components_tooltip__WEBPACK_IMPORTED_MODULE_11__["default"], {
          title: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_14__.t)('View Event'),
          children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(StyledLink, {
            "data-test-id": "view-event",
            to: target,
            children: value
          })
        }, `eventlink${rowIndex}`)];
      }

      return [];
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "_renderGridHeaderCell", column => {
      const {
        eventView,
        location,
        tableData
      } = this.props;
      const tableMeta = tableData === null || tableData === void 0 ? void 0 : tableData.meta;
      const align = (0,sentry_utils_discover_fields__WEBPACK_IMPORTED_MODULE_19__.fieldAlignment)(column.name, column.type, tableMeta);
      const field = {
        field: column.key,
        width: column.width
      };

      function generateSortLink() {
        if (!tableMeta) {
          return undefined;
        }

        const nextEventView = eventView.sortOnField(field, tableMeta);
        const queryStringObject = nextEventView.generateQueryStringObject(); // Need to pull yAxis from location since eventView only stores 1 yAxis field at time

        queryStringObject.yAxis = (0,sentry_utils_queryString__WEBPACK_IMPORTED_MODULE_22__.decodeList)(location.query.yAxis);
        return { ...location,
          query: queryStringObject
        };
      }

      const currentSort = eventView.sortForField(field, tableMeta);
      const canSort = (0,sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_17__.isFieldSortable)(field, tableMeta);
      const titleText = (0,sentry_utils_discover_fields__WEBPACK_IMPORTED_MODULE_19__.isEquationAlias)(column.name) ? eventView.getEquations()[(0,sentry_utils_discover_fields__WEBPACK_IMPORTED_MODULE_19__.getEquationAliasIndex)(column.name)] : column.name;

      const title = (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(StyledTooltip, {
        title: titleText,
        children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(sentry_components_truncate__WEBPACK_IMPORTED_MODULE_12__["default"], {
          value: titleText,
          maxLength: 60,
          expandable: false
        })
      });

      return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(sentry_components_gridEditable_sortLink__WEBPACK_IMPORTED_MODULE_9__["default"], {
        align: align,
        title: title,
        direction: currentSort ? currentSort.kind : undefined,
        canSort: canSort,
        generateSortLink: generateSortLink
      });
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "_renderGridBodyCell", (column, dataRow, rowIndex, columnIndex) => {
      var _tableData$data$lengt, _tableData$data;

      const {
        isFirstPage,
        eventView,
        location,
        organization,
        tableData
      } = this.props;

      if (!tableData || !tableData.meta) {
        return dataRow[column.key];
      }

      const columnKey = String(column.key);
      const fieldRenderer = (0,sentry_utils_discover_fieldRenderers__WEBPACK_IMPORTED_MODULE_18__.getFieldRenderer)(columnKey, tableData.meta, !organization.features.includes('discover-frontend-use-events-endpoint'));
      const display = eventView.getDisplayMode();
      const isTopEvents = display === sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_20__.DisplayModes.TOP5 || display === sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_20__.DisplayModes.DAILYTOP5;
      const topEvents = eventView.topEvents ? parseInt(eventView.topEvents, 10) : sentry_utils_discover_types__WEBPACK_IMPORTED_MODULE_20__.TOP_N;
      const count = Math.min((_tableData$data$lengt = tableData === null || tableData === void 0 ? void 0 : (_tableData$data = tableData.data) === null || _tableData$data === void 0 ? void 0 : _tableData$data.length) !== null && _tableData$data$lengt !== void 0 ? _tableData$data$lengt : topEvents, topEvents);
      let cell = fieldRenderer(dataRow, {
        organization,
        location
      });

      if (columnKey === 'id') {
        const eventSlug = (0,sentry_utils_discover_urls__WEBPACK_IMPORTED_MODULE_21__.generateEventSlug)(dataRow);
        const target = (0,sentry_utils_discover_urls__WEBPACK_IMPORTED_MODULE_21__.eventDetailsRouteWithEventView)({
          orgSlug: organization.slug,
          eventSlug,
          eventView
        });
        cell = (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(sentry_components_tooltip__WEBPACK_IMPORTED_MODULE_11__["default"], {
          title: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_14__.t)('View Event'),
          children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(StyledLink, {
            "data-test-id": "view-event",
            to: target,
            children: cell
          })
        });
      } else if (columnKey === 'trace') {
        const dateSelection = eventView.normalizeDateSelection(location);

        if (dataRow.trace) {
          const target = (0,sentry_views_performance_traceDetails_utils__WEBPACK_IMPORTED_MODULE_25__.getTraceDetailsUrl)(organization, String(dataRow.trace), dateSelection, {});
          cell = (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(sentry_components_tooltip__WEBPACK_IMPORTED_MODULE_11__["default"], {
            title: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_14__.t)('View Trace'),
            children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(StyledLink, {
              "data-test-id": "view-trace",
              to: target,
              children: cell
            })
          });
        }
      }

      const fieldName = columnKey;
      const value = dataRow[fieldName];

      if (tableData.meta[fieldName] === 'integer' && (0,sentry_utils__WEBPACK_IMPORTED_MODULE_15__.defined)(value) && value > 999) {
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(sentry_components_tooltip__WEBPACK_IMPORTED_MODULE_11__["default"], {
          title: value.toLocaleString(),
          containerDisplayMode: "block",
          position: "right",
          children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(_cellAction__WEBPACK_IMPORTED_MODULE_28__["default"], {
            column: column,
            dataRow: dataRow,
            handleCellAction: this.handleCellAction(dataRow, column),
            children: cell
          })
        });
      }

      return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsxs)(react__WEBPACK_IMPORTED_MODULE_5__.Fragment, {
        children: [isFirstPage && isTopEvents && rowIndex < topEvents && columnIndex === 0 ? // Add one if we need to include Other in the series
        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(_topResultsIndicator__WEBPACK_IMPORTED_MODULE_31__["default"], {
          count: count,
          index: rowIndex
        }) : null, (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(_cellAction__WEBPACK_IMPORTED_MODULE_28__["default"], {
          column: column,
          dataRow: dataRow,
          handleCellAction: this.handleCellAction(dataRow, column),
          children: cell
        })]
      });
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "handleEditColumns", () => {
      const {
        organization,
        eventView,
        measurementKeys,
        spanOperationBreakdownKeys
      } = this.props;
      const hasBreakdownFeature = organization.features.includes('performance-ops-breakdown');
      (0,sentry_actionCreators_modal__WEBPACK_IMPORTED_MODULE_7__.openModal)(modalProps => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(_columnEditModal__WEBPACK_IMPORTED_MODULE_29__["default"], { ...modalProps,
        organization: organization,
        measurementKeys: measurementKeys,
        spanOperationBreakdownKeys: hasBreakdownFeature ? spanOperationBreakdownKeys : undefined,
        columns: eventView.getColumns().map(col => col.column),
        onApply: this.handleUpdateColumns
      }), {
        modalCss: _columnEditModal__WEBPACK_IMPORTED_MODULE_29__.modalCss,
        backdrop: 'static'
      });
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "handleCellAction", (dataRow, column) => {
      return (action, value) => {
        const {
          eventView,
          organization,
          projects,
          location
        } = this.props;
        const query = new sentry_utils_tokenizeSearch__WEBPACK_IMPORTED_MODULE_23__.MutableSearch(eventView.query);
        let nextView = eventView.clone();
        (0,sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_16__.trackAnalyticsEvent)({
          eventKey: 'discover_v2.results.cellaction',
          eventName: 'Discoverv2: Cell Action Clicked',
          organization_id: parseInt(organization.id, 10),
          action
        });

        switch (action) {
          case _cellAction__WEBPACK_IMPORTED_MODULE_28__.Actions.TRANSACTION:
            {
              const maybeProject = projects.find(project => project.slug && [dataRow['project.name'], dataRow.project].includes(project.slug));
              const projectID = maybeProject ? [maybeProject.id] : undefined;
              const next = (0,sentry_views_performance_transactionSummary_utils__WEBPACK_IMPORTED_MODULE_26__.transactionSummaryRouteWithQuery)({
                orgSlug: organization.slug,
                transaction: String(value),
                projectID,
                query: nextView.getPageFiltersQuery()
              });
              react_router__WEBPACK_IMPORTED_MODULE_6__.browserHistory.push(next);
              return;
            }

          case _cellAction__WEBPACK_IMPORTED_MODULE_28__.Actions.RELEASE:
            {
              const maybeProject = projects.find(project => {
                return project.slug === dataRow.project;
              });
              react_router__WEBPACK_IMPORTED_MODULE_6__.browserHistory.push({
                pathname: `/organizations/${organization.slug}/releases/${encodeURIComponent(value)}/`,
                query: { ...nextView.getPageFiltersQuery(),
                  project: maybeProject ? maybeProject.id : undefined
                }
              });
              return;
            }

          case _cellAction__WEBPACK_IMPORTED_MODULE_28__.Actions.DRILLDOWN:
            {
              // count_unique(column) drilldown
              (0,sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_16__.trackAnalyticsEvent)({
                eventKey: 'discover_v2.results.drilldown',
                eventName: 'Discoverv2: Click aggregate drilldown',
                organization_id: parseInt(organization.id, 10)
              }); // Drilldown into each distinct value and get a count() for each value.

              nextView = (0,_utils__WEBPACK_IMPORTED_MODULE_27__.getExpandedResults)(nextView, {}, dataRow).withNewColumn({
                kind: 'function',
                function: ['count', '', undefined, undefined]
              });
              react_router__WEBPACK_IMPORTED_MODULE_6__.browserHistory.push(nextView.getResultsViewUrlTarget(organization.slug));
              return;
            }

          default:
            {
              (0,_cellAction__WEBPACK_IMPORTED_MODULE_28__.updateQuery)(query, action, column, value);
            }
        }

        nextView.query = query.formatString();
        const target = nextView.getResultsViewUrlTarget(organization.slug); // Get yAxis from location

        target.query.yAxis = (0,sentry_utils_queryString__WEBPACK_IMPORTED_MODULE_22__.decodeList)(location.query.yAxis);
        react_router__WEBPACK_IMPORTED_MODULE_6__.browserHistory.push(target);
      };
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "handleUpdateColumns", columns => {
      const {
        organization,
        eventView,
        location
      } = this.props; // metrics

      (0,sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_16__.trackAnalyticsEvent)({
        eventKey: 'discover_v2.update_columns',
        eventName: 'Discoverv2: Update columns',
        organization_id: parseInt(organization.id, 10)
      });
      const nextView = eventView.withColumns(columns);
      const resultsViewUrlTarget = nextView.getResultsViewUrlTarget(organization.slug); // Need to pull yAxis from location since eventView only stores 1 yAxis field at time

      const previousYAxis = (0,sentry_utils_queryString__WEBPACK_IMPORTED_MODULE_22__.decodeList)(location.query.yAxis);
      resultsViewUrlTarget.query.yAxis = previousYAxis.filter(yAxis => nextView.getYAxisOptions().find(_ref => {
        let {
          value
        } = _ref;
        return value === yAxis;
      }));
      react_router__WEBPACK_IMPORTED_MODULE_6__.browserHistory.push(resultsViewUrlTarget);
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "renderHeaderButtons", () => {
      const {
        organization,
        title,
        eventView,
        isLoading,
        error,
        tableData,
        location,
        onChangeShowTags,
        showTags
      } = this.props;
      return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(_tableActions__WEBPACK_IMPORTED_MODULE_30__["default"], {
        title: title,
        isLoading: isLoading,
        error: error,
        organization: organization,
        eventView: eventView,
        onEdit: this.handleEditColumns,
        tableData: tableData,
        location: location,
        onChangeShowTags: onChangeShowTags,
        showTags: showTags
      });
    });
  }

  render() {
    const {
      isLoading,
      error,
      location,
      tableData,
      eventView,
      organization
    } = this.props;
    const columnOrder = eventView.getColumns(organization.features.includes('discover-frontend-use-events-endpoint'));
    const columnSortBy = eventView.getSorts();
    const prependColumnWidths = eventView.hasAggregateField() ? ['40px'] : eventView.hasIdField() ? [] : [`minmax(${sentry_components_gridEditable__WEBPACK_IMPORTED_MODULE_8__.COL_WIDTH_MINIMUM}px, max-content)`];
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_32__.jsx)(sentry_components_gridEditable__WEBPACK_IMPORTED_MODULE_8__["default"], {
      isLoading: isLoading,
      error: error,
      data: tableData ? tableData.data : [],
      columnOrder: columnOrder,
      columnSortBy: columnSortBy,
      title: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_14__.t)('Results'),
      grid: {
        renderHeadCell: this._renderGridHeaderCell,
        renderBodyCell: this._renderGridBodyCell,
        onResizeColumn: this._resizeColumn,
        renderPrependColumns: this._renderPrependColumns,
        prependColumnWidths
      },
      headerButtons: this.renderHeaderButtons,
      location: location
    });
  }

}

TableView.displayName = "TableView";

const PrependHeader = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])('span',  true ? {
  target: "ecjx3jw3"
} : 0)("color:", p => p.theme.subText, ";" + ( true ? "" : 0));

const StyledTooltip = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_components_tooltip__WEBPACK_IMPORTED_MODULE_11__["default"],  true ? {
  target: "ecjx3jw2"
} : 0)( true ? {
  name: "168giuu",
  styles: "display:initial"
} : 0);

const StyledLink = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_components_links_link__WEBPACK_IMPORTED_MODULE_10__["default"],  true ? {
  target: "ecjx3jw1"
} : 0)( true ? {
  name: "1p0lxza",
  styles: ">div{display:inline;}"
} : 0);

const StyledIcon = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_icons__WEBPACK_IMPORTED_MODULE_13__.IconStack,  true ? {
  target: "ecjx3jw0"
} : 0)( true ? {
  name: "1989ovb",
  styles: "vertical-align:middle"
} : 0);

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,sentry_utils_withProjects__WEBPACK_IMPORTED_MODULE_24__["default"])(TableView));

/***/ }),

/***/ "./app/views/eventsV2/tags.tsx":
/*!*************************************!*\
  !*** ./app/views/eventsV2/tags.tsx ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Tags": () => (/* binding */ Tags),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "../node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @emotion/styled/base */ "../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "../node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var _sentry_react__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @sentry/react */ "../node_modules/@sentry/hub/esm/exports.js");
/* harmony import */ var sentry_actionCreators_events__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! sentry/actionCreators/events */ "./app/actionCreators/events.tsx");
/* harmony import */ var sentry_components_charts_errorPanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sentry/components/charts/errorPanel */ "./app/components/charts/errorPanel.tsx");
/* harmony import */ var sentry_components_charts_styles__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sentry/components/charts/styles */ "./app/components/charts/styles.tsx");
/* harmony import */ var sentry_components_emptyStateWarning__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sentry/components/emptyStateWarning */ "./app/components/emptyStateWarning.tsx");
/* harmony import */ var sentry_components_placeholder__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sentry/components/placeholder */ "./app/components/placeholder.tsx");
/* harmony import */ var sentry_components_tagDistributionMeter__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! sentry/components/tagDistributionMeter */ "./app/components/tagDistributionMeter.tsx");
/* harmony import */ var sentry_icons__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sentry/icons */ "./app/icons/index.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_styles_space__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! sentry/styles/space */ "./app/styles/space.tsx");
/* harmony import */ var sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! sentry/utils/analytics */ "./app/utils/analytics.tsx");
/* harmony import */ var sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! sentry/utils/discover/eventView */ "./app/utils/discover/eventView.tsx");
/* harmony import */ var sentry_utils_withApi__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! sentry/utils/withApi */ "./app/utils/withApi.tsx");
/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ "../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");




function _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }


















class Tags extends react__WEBPACK_IMPORTED_MODULE_3__.Component {
  constructor() {
    var _this;

    super(...arguments);
    _this = this;

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "state", {
      loading: true,
      tags: [],
      totalValues: null,
      error: ''
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "shouldRefetchData", prevProps => {
      const thisAPIPayload = this.props.eventView.getFacetsAPIPayload(this.props.location);
      const otherAPIPayload = prevProps.eventView.getFacetsAPIPayload(prevProps.location);
      return !(0,sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_14__.isAPIPayloadSimilar)(thisAPIPayload, otherAPIPayload);
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "fetchData", async function () {
      let forceFetchData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
      const {
        api,
        organization,
        eventView,
        location,
        confirmedQuery
      } = _this.props;

      _this.setState({
        loading: true,
        error: '',
        tags: []
      }); // Fetch should be forced after mounting as confirmedQuery isn't guaranteed
      // since this component can mount/unmount via show/hide tags separate from
      // data being loaded for the rest of the page.


      if (!forceFetchData && confirmedQuery === false) {
        return;
      }

      try {
        const tags = await (0,sentry_actionCreators_events__WEBPACK_IMPORTED_MODULE_4__.fetchTagFacets)(api, organization.slug, eventView.getFacetsAPIPayload(location));

        _this.setState({
          loading: false,
          tags
        });
      } catch (err) {
        _sentry_react__WEBPACK_IMPORTED_MODULE_16__.captureException(err);

        _this.setState({
          loading: false,
          error: err
        });
      }
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "handleTagClick", tag => {
      const {
        organization
      } = this.props; // metrics

      (0,sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_13__.trackAnalyticsEvent)({
        eventKey: 'discover_v2.facet_map.clicked',
        eventName: 'Discoverv2: Clicked on a tag on the facet map',
        tag,
        organization_id: parseInt(organization.id, 10)
      });
    });

    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])(this, "renderBody", () => {
      const {
        loading,
        error,
        tags
      } = this.state;

      if (loading) {
        return this.renderPlaceholders();
      }

      if (error) {
        return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(sentry_components_charts_errorPanel__WEBPACK_IMPORTED_MODULE_5__["default"], {
          height: "132px",
          children: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(sentry_icons__WEBPACK_IMPORTED_MODULE_10__.IconWarning, {
            color: "gray300",
            size: "lg"
          })
        });
      }

      if (tags.length > 0) {
        return tags.map(tag => this.renderTag(tag));
      }

      return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(StyledEmptyStateWarning, {
        small: true,
        children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_11__.t)('No tags found')
      });
    });
  }

  componentDidMount() {
    this.fetchData(true);
  }

  componentDidUpdate(prevProps) {
    if (this.shouldRefetchData(prevProps) || prevProps.confirmedQuery !== this.props.confirmedQuery) {
      this.fetchData();
    }
  }

  renderTag(tag) {
    const {
      generateUrl,
      totalValues
    } = this.props;
    const segments = tag.topValues.map(segment => {
      segment.url = generateUrl(tag.key, segment.value);
      return segment;
    }); // Ensure we don't show >100% if there's a slight mismatch between the facets
    // endpoint and the totals endpoint

    const maxTotalValues = segments.length > 0 ? Math.max(Number(totalValues), segments[0].count) : totalValues;
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(sentry_components_tagDistributionMeter__WEBPACK_IMPORTED_MODULE_9__["default"], {
      title: tag.key,
      segments: segments,
      totalValues: Number(maxTotalValues),
      renderLoading: () => (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(StyledPlaceholder, {
        height: "16px"
      }),
      onTagClick: this.handleTagClick,
      showReleasePackage: true
    }, tag.key);
  }

  renderPlaceholders() {
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)(react__WEBPACK_IMPORTED_MODULE_3__.Fragment, {
      children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(StyledPlaceholderTitle, {}, "title-1"), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(StyledPlaceholder, {}, "bar-1"), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(StyledPlaceholderTitle, {}, "title-2"), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(StyledPlaceholder, {}, "bar-2"), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(StyledPlaceholderTitle, {}, "title-3"), (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(StyledPlaceholder, {}, "bar-3")]
    });
  }

  render() {
    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)(react__WEBPACK_IMPORTED_MODULE_3__.Fragment, {
      children: [(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(sentry_components_charts_styles__WEBPACK_IMPORTED_MODULE_6__.SectionHeading, {
        children: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_11__.t)('Tag Summary')
      }), this.renderBody()]
    });
  }

}

Tags.displayName = "Tags";

const StyledEmptyStateWarning = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_components_emptyStateWarning__WEBPACK_IMPORTED_MODULE_7__["default"],  true ? {
  target: "e1pu9veq2"
} : 0)( true ? {
  name: "rtpdsm",
  styles: "height:132px;padding:54px 15%"
} : 0);

const StyledPlaceholder = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_components_placeholder__WEBPACK_IMPORTED_MODULE_8__["default"],  true ? {
  target: "e1pu9veq1"
} : 0)("border-radius:", p => p.theme.borderRadius, ";height:16px;margin-bottom:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_12__["default"])(1.5), ";" + ( true ? "" : 0));

const StyledPlaceholderTitle = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_1__["default"])(sentry_components_placeholder__WEBPACK_IMPORTED_MODULE_8__["default"],  true ? {
  target: "e1pu9veq0"
} : 0)("width:100px;height:12px;margin-bottom:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_12__["default"])(0.5), ";" + ( true ? "" : 0));


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,sentry_utils_withApi__WEBPACK_IMPORTED_MODULE_15__["default"])(Tags));

/***/ }),

/***/ "./app/views/performance/transactionSummary/utils.tsx":
/*!************************************************************!*\
  !*** ./app/views/performance/transactionSummary/utils.tsx ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SidebarSpacer": () => (/* binding */ SidebarSpacer),
/* harmony export */   "TransactionFilterOptions": () => (/* binding */ TransactionFilterOptions),
/* harmony export */   "generateTraceLink": () => (/* binding */ generateTraceLink),
/* harmony export */   "generateTransactionLink": () => (/* binding */ generateTransactionLink),
/* harmony export */   "generateTransactionSummaryRoute": () => (/* binding */ generateTransactionSummaryRoute),
/* harmony export */   "normalizeSearchConditions": () => (/* binding */ normalizeSearchConditions),
/* harmony export */   "normalizeSearchConditionsWithTransactionName": () => (/* binding */ normalizeSearchConditionsWithTransactionName),
/* harmony export */   "transactionSummaryRouteWithQuery": () => (/* binding */ transactionSummaryRouteWithQuery)
/* harmony export */ });
/* harmony import */ var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/styled/base */ "../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");
/* harmony import */ var sentry_styles_space__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sentry/styles/space */ "./app/styles/space.tsx");
/* harmony import */ var sentry_utils_discover_urls__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! sentry/utils/discover/urls */ "./app/utils/discover/urls.tsx");
/* harmony import */ var sentry_utils_performance_urls__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sentry/utils/performance/urls */ "./app/utils/performance/urls.ts");
/* harmony import */ var sentry_utils_tokenizeSearch__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! sentry/utils/tokenizeSearch */ "./app/utils/tokenizeSearch.tsx");
/* harmony import */ var sentry_views_performance_traceDetails_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sentry/views/performance/traceDetails/utils */ "./app/views/performance/traceDetails/utils.tsx");






let TransactionFilterOptions;

(function (TransactionFilterOptions) {
  TransactionFilterOptions["FASTEST"] = "fastest";
  TransactionFilterOptions["SLOW"] = "slow";
  TransactionFilterOptions["OUTLIER"] = "outlier";
  TransactionFilterOptions["RECENT"] = "recent";
})(TransactionFilterOptions || (TransactionFilterOptions = {}));

function generateTransactionSummaryRoute(_ref) {
  let {
    orgSlug
  } = _ref;
  return `/organizations/${orgSlug}/performance/summary/`;
} // normalizes search conditions by removing any redundant search conditions before presenting them in:
// - query strings
// - search UI

function normalizeSearchConditions(query) {
  const filterParams = normalizeSearchConditionsWithTransactionName(query); // no need to include transaction as its already in the query params

  filterParams.removeFilter('transaction');
  return filterParams;
} // normalizes search conditions by removing any redundant search conditions, but retains any transaction name

function normalizeSearchConditionsWithTransactionName(query) {
  const filterParams = new sentry_utils_tokenizeSearch__WEBPACK_IMPORTED_MODULE_4__.MutableSearch(query); // remove any event.type queries since it is implied to apply to only transactions

  filterParams.removeFilter('event.type');
  return filterParams;
}
function transactionSummaryRouteWithQuery(_ref2) {
  let {
    orgSlug,
    transaction,
    projectID,
    query,
    unselectedSeries = 'p100()',
    display,
    trendFunction,
    trendColumn,
    showTransactions,
    additionalQuery
  } = _ref2;
  const pathname = generateTransactionSummaryRoute({
    orgSlug
  });
  let searchFilter;

  if (typeof query.query === 'string') {
    searchFilter = normalizeSearchConditions(query.query).formatString();
  } else {
    searchFilter = query.query;
  }

  return {
    pathname,
    query: {
      transaction,
      project: projectID,
      environment: query.environment,
      statsPeriod: query.statsPeriod,
      start: query.start,
      end: query.end,
      query: searchFilter,
      unselectedSeries,
      showTransactions,
      display,
      trendFunction,
      trendColumn,
      ...additionalQuery
    }
  };
}
function generateTraceLink(dateSelection) {
  return (organization, tableRow, _query) => {
    const traceId = `${tableRow.trace}`;

    if (!traceId) {
      return {};
    }

    return (0,sentry_views_performance_traceDetails_utils__WEBPACK_IMPORTED_MODULE_5__.getTraceDetailsUrl)(organization, traceId, dateSelection, {});
  };
}
function generateTransactionLink(transactionName) {
  return (organization, tableRow, query, spanId) => {
    const eventSlug = (0,sentry_utils_discover_urls__WEBPACK_IMPORTED_MODULE_2__.generateEventSlug)(tableRow);
    return (0,sentry_utils_performance_urls__WEBPACK_IMPORTED_MODULE_3__.getTransactionDetailsUrl)(organization.slug, eventSlug, transactionName, query, spanId);
  };
}
const SidebarSpacer = /*#__PURE__*/(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__["default"])('div',  true ? {
  target: "e1radvp0"
} : 0)("margin-top:", (0,sentry_styles_space__WEBPACK_IMPORTED_MODULE_1__["default"])(3), ";" + ( true ? "" : 0));

/***/ }),

/***/ "./app/views/performance/trends/types.tsx":
/*!************************************************!*\
  !*** ./app/views/performance/trends/types.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TrendChangeType": () => (/* binding */ TrendChangeType),
/* harmony export */   "TrendColumnField": () => (/* binding */ TrendColumnField),
/* harmony export */   "TrendFunctionField": () => (/* binding */ TrendFunctionField)
/* harmony export */ });
let TrendChangeType;

(function (TrendChangeType) {
  TrendChangeType["IMPROVED"] = "improved";
  TrendChangeType["REGRESSION"] = "regression";
})(TrendChangeType || (TrendChangeType = {}));

let TrendFunctionField;

(function (TrendFunctionField) {
  TrendFunctionField["P50"] = "p50";
  TrendFunctionField["P75"] = "p75";
  TrendFunctionField["P95"] = "p95";
  TrendFunctionField["P99"] = "p99";
  TrendFunctionField["AVG"] = "avg";
})(TrendFunctionField || (TrendFunctionField = {}));

let TrendColumnField;

(function (TrendColumnField) {
  TrendColumnField["DURATION"] = "transaction.duration";
  TrendColumnField["LCP"] = "measurements.lcp";
  TrendColumnField["FCP"] = "measurements.fcp";
  TrendColumnField["FID"] = "measurements.fid";
  TrendColumnField["CLS"] = "measurements.cls";
  TrendColumnField["SPANS_DB"] = "spans.db";
  TrendColumnField["SPANS_HTTP"] = "spans.http";
  TrendColumnField["SPANS_BROWSER"] = "spans.browser";
  TrendColumnField["SPANS_RESOURCE"] = "spans.resource";
})(TrendColumnField || (TrendColumnField = {}));

/***/ }),

/***/ "./app/views/performance/trends/utils.tsx":
/*!************************************************!*\
  !*** ./app/views/performance/trends/utils.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DEFAULT_MAX_DURATION": () => (/* binding */ DEFAULT_MAX_DURATION),
/* harmony export */   "DEFAULT_TRENDS_STATS_PERIOD": () => (/* binding */ DEFAULT_TRENDS_STATS_PERIOD),
/* harmony export */   "TRENDS_FUNCTIONS": () => (/* binding */ TRENDS_FUNCTIONS),
/* harmony export */   "TRENDS_PARAMETERS": () => (/* binding */ TRENDS_PARAMETERS),
/* harmony export */   "generateTrendFunctionAsString": () => (/* binding */ generateTrendFunctionAsString),
/* harmony export */   "getCurrentTrendFunction": () => (/* binding */ getCurrentTrendFunction),
/* harmony export */   "getCurrentTrendParameter": () => (/* binding */ getCurrentTrendParameter),
/* harmony export */   "getSelectedQueryKey": () => (/* binding */ getSelectedQueryKey),
/* harmony export */   "getTrendProjectId": () => (/* binding */ getTrendProjectId),
/* harmony export */   "getUnselectedSeries": () => (/* binding */ getUnselectedSeries),
/* harmony export */   "modifyTrendView": () => (/* binding */ modifyTrendView),
/* harmony export */   "modifyTrendsViewDefaultPeriod": () => (/* binding */ modifyTrendsViewDefaultPeriod),
/* harmony export */   "movingAverage": () => (/* binding */ movingAverage),
/* harmony export */   "normalizeTrends": () => (/* binding */ normalizeTrends),
/* harmony export */   "performanceTypeToTrendParameterLabel": () => (/* binding */ performanceTypeToTrendParameterLabel),
/* harmony export */   "replaceSeriesName": () => (/* binding */ replaceSeriesName),
/* harmony export */   "replaceSmoothedSeriesName": () => (/* binding */ replaceSmoothedSeriesName),
/* harmony export */   "resetCursors": () => (/* binding */ resetCursors),
/* harmony export */   "smoothTrend": () => (/* binding */ smoothTrend),
/* harmony export */   "transformDeltaSpread": () => (/* binding */ transformDeltaSpread),
/* harmony export */   "transformEventStatsSmoothed": () => (/* binding */ transformEventStatsSmoothed),
/* harmony export */   "transformValueDelta": () => (/* binding */ transformValueDelta),
/* harmony export */   "trendCursorNames": () => (/* binding */ trendCursorNames),
/* harmony export */   "trendSelectedQueryKeys": () => (/* binding */ trendSelectedQueryKeys),
/* harmony export */   "trendToColor": () => (/* binding */ trendToColor),
/* harmony export */   "trendUnselectedSeries": () => (/* binding */ trendUnselectedSeries)
/* harmony export */ });
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "../node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "../node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var downsample_methods_ASAP__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! downsample/methods/ASAP */ "../node_modules/downsample/methods/ASAP.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "../node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var sentry_components_charts_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! sentry/components/charts/utils */ "./app/components/charts/utils.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_utils_discover_fields__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sentry/utils/discover/fields */ "./app/utils/discover/fields.tsx");
/* harmony import */ var sentry_utils_queryString__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sentry/utils/queryString */ "./app/utils/queryString.tsx");
/* harmony import */ var sentry_utils_theme__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sentry/utils/theme */ "./app/utils/theme.tsx");
/* harmony import */ var sentry_utils_tokenizeSearch__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! sentry/utils/tokenizeSearch */ "./app/utils/tokenizeSearch.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils */ "./app/views/performance/utils.tsx");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./types */ "./app/views/performance/trends/types.tsx");












const DEFAULT_TRENDS_STATS_PERIOD = '14d';
const DEFAULT_MAX_DURATION = '15min';
const TRENDS_FUNCTIONS = [{
  label: 'p50',
  field: _types__WEBPACK_IMPORTED_MODULE_11__.TrendFunctionField.P50,
  alias: 'percentile_range',
  legendLabel: 'p50'
}, {
  label: 'p75',
  field: _types__WEBPACK_IMPORTED_MODULE_11__.TrendFunctionField.P75,
  alias: 'percentile_range',
  legendLabel: 'p75'
}, {
  label: 'p95',
  field: _types__WEBPACK_IMPORTED_MODULE_11__.TrendFunctionField.P95,
  alias: 'percentile_range',
  legendLabel: 'p95'
}, {
  label: 'p99',
  field: _types__WEBPACK_IMPORTED_MODULE_11__.TrendFunctionField.P99,
  alias: 'percentile_range',
  legendLabel: 'p99'
}, {
  label: 'average',
  field: _types__WEBPACK_IMPORTED_MODULE_11__.TrendFunctionField.AVG,
  alias: 'avg_range',
  legendLabel: 'average'
}];
const TRENDS_PARAMETERS = [{
  label: 'Duration',
  column: _types__WEBPACK_IMPORTED_MODULE_11__.TrendColumnField.DURATION
}, {
  label: 'LCP',
  column: _types__WEBPACK_IMPORTED_MODULE_11__.TrendColumnField.LCP
}, {
  label: 'FCP',
  column: _types__WEBPACK_IMPORTED_MODULE_11__.TrendColumnField.FCP
}, {
  label: 'FID',
  column: _types__WEBPACK_IMPORTED_MODULE_11__.TrendColumnField.FID
}, {
  label: 'CLS',
  column: _types__WEBPACK_IMPORTED_MODULE_11__.TrendColumnField.CLS
}, {
  label: 'Spans (http)',
  column: _types__WEBPACK_IMPORTED_MODULE_11__.TrendColumnField.SPANS_HTTP
}, {
  label: 'Spans (db)',
  column: _types__WEBPACK_IMPORTED_MODULE_11__.TrendColumnField.SPANS_DB
}, {
  label: 'Spans (browser)',
  column: _types__WEBPACK_IMPORTED_MODULE_11__.TrendColumnField.SPANS_BROWSER
}, {
  label: 'Spans (resource)',
  column: _types__WEBPACK_IMPORTED_MODULE_11__.TrendColumnField.SPANS_RESOURCE
}];
const trendToColor = {
  [_types__WEBPACK_IMPORTED_MODULE_11__.TrendChangeType.IMPROVED]: {
    lighter: sentry_utils_theme__WEBPACK_IMPORTED_MODULE_8__["default"].green200,
    default: sentry_utils_theme__WEBPACK_IMPORTED_MODULE_8__["default"].green300
  },
  [_types__WEBPACK_IMPORTED_MODULE_11__.TrendChangeType.REGRESSION]: {
    lighter: sentry_utils_theme__WEBPACK_IMPORTED_MODULE_8__["default"].red200,
    default: sentry_utils_theme__WEBPACK_IMPORTED_MODULE_8__["default"].red300
  }
};
const trendSelectedQueryKeys = {
  [_types__WEBPACK_IMPORTED_MODULE_11__.TrendChangeType.IMPROVED]: 'improvedSelected',
  [_types__WEBPACK_IMPORTED_MODULE_11__.TrendChangeType.REGRESSION]: 'regressionSelected'
};
const trendUnselectedSeries = {
  [_types__WEBPACK_IMPORTED_MODULE_11__.TrendChangeType.IMPROVED]: 'improvedUnselectedSeries',
  [_types__WEBPACK_IMPORTED_MODULE_11__.TrendChangeType.REGRESSION]: 'regressionUnselectedSeries'
};
const trendCursorNames = {
  [_types__WEBPACK_IMPORTED_MODULE_11__.TrendChangeType.IMPROVED]: 'improvedCursor',
  [_types__WEBPACK_IMPORTED_MODULE_11__.TrendChangeType.REGRESSION]: 'regressionCursor'
};
function resetCursors() {
  const cursors = {};
  Object.values(trendCursorNames).forEach(cursor => cursors[cursor] = undefined); // Resets both cursors

  return cursors;
}
function getCurrentTrendFunction(location, _trendFunctionField) {
  var _location$query;

  const trendFunctionField = _trendFunctionField !== null && _trendFunctionField !== void 0 ? _trendFunctionField : (0,sentry_utils_queryString__WEBPACK_IMPORTED_MODULE_7__.decodeScalar)(location === null || location === void 0 ? void 0 : (_location$query = location.query) === null || _location$query === void 0 ? void 0 : _location$query.trendFunction);
  const trendFunction = TRENDS_FUNCTIONS.find(_ref => {
    let {
      field
    } = _ref;
    return field === trendFunctionField;
  });
  return trendFunction || TRENDS_FUNCTIONS[0];
}

function getDefaultTrendParameter(projects, projectIds) {
  const performanceType = (0,_utils__WEBPACK_IMPORTED_MODULE_10__.platformToPerformanceType)(projects, projectIds);
  const trendParameter = performanceTypeToTrendParameterLabel(performanceType);
  return trendParameter;
}

function getCurrentTrendParameter(location, projects, projectIds) {
  var _location$query2;

  const trendParameterLabel = (0,sentry_utils_queryString__WEBPACK_IMPORTED_MODULE_7__.decodeScalar)(location === null || location === void 0 ? void 0 : (_location$query2 = location.query) === null || _location$query2 === void 0 ? void 0 : _location$query2.trendParameter);
  const trendParameter = TRENDS_PARAMETERS.find(_ref2 => {
    let {
      label
    } = _ref2;
    return label === trendParameterLabel;
  });

  if (trendParameter) {
    return trendParameter;
  }

  const defaultTrendParameter = getDefaultTrendParameter(projects, projectIds);
  return defaultTrendParameter;
}
function performanceTypeToTrendParameterLabel(performanceType) {
  switch (performanceType) {
    case _utils__WEBPACK_IMPORTED_MODULE_10__.PROJECT_PERFORMANCE_TYPE.FRONTEND:
      return {
        label: 'LCP',
        column: _types__WEBPACK_IMPORTED_MODULE_11__.TrendColumnField.LCP
      };

    case _utils__WEBPACK_IMPORTED_MODULE_10__.PROJECT_PERFORMANCE_TYPE.ANY:
    case _utils__WEBPACK_IMPORTED_MODULE_10__.PROJECT_PERFORMANCE_TYPE.BACKEND:
    case _utils__WEBPACK_IMPORTED_MODULE_10__.PROJECT_PERFORMANCE_TYPE.FRONTEND_OTHER:
    default:
      return {
        label: 'Duration',
        column: _types__WEBPACK_IMPORTED_MODULE_11__.TrendColumnField.DURATION
      };
  }
}
function generateTrendFunctionAsString(trendFunction, trendParameter) {
  return (0,sentry_utils_discover_fields__WEBPACK_IMPORTED_MODULE_6__.generateFieldAsString)({
    kind: 'function',
    function: [trendFunction, trendParameter, undefined, undefined]
  });
}
function transformDeltaSpread(from, to) {
  const fromSeconds = from / 1000;
  const toSeconds = to / 1000;
  const showDigits = from > 1000 || to > 1000 || from < 10 || to < 10; // Show digits consistently if either has them

  return {
    fromSeconds,
    toSeconds,
    showDigits
  };
}
function getTrendProjectId(trend, projects) {
  if (!trend.project || !projects) {
    return undefined;
  }

  const transactionProject = projects.find(project => project.slug === trend.project);
  return transactionProject === null || transactionProject === void 0 ? void 0 : transactionProject.id;
}
function modifyTrendView(trendView, location, trendsType, projects, isProjectOnly) {
  const trendFunction = getCurrentTrendFunction(location);
  const trendParameter = getCurrentTrendParameter(location, projects, trendView.project);
  const transactionField = isProjectOnly ? [] : ['transaction'];
  const fields = [...transactionField, 'project'].map(field => ({
    field
  }));
  const trendSort = {
    field: 'trend_percentage()',
    kind: 'asc'
  };
  trendView.trendType = trendsType;

  if (trendsType === _types__WEBPACK_IMPORTED_MODULE_11__.TrendChangeType.REGRESSION) {
    trendSort.kind = 'desc';
  }

  if (trendFunction && trendParameter) {
    trendView.trendFunction = generateTrendFunctionAsString(trendFunction.field, trendParameter.column);
  }

  trendView.query = getLimitTransactionItems(trendView.query);
  trendView.interval = getQueryInterval(location, trendView);
  trendView.sorts = [trendSort];
  trendView.fields = fields;
}
function modifyTrendsViewDefaultPeriod(eventView, location) {
  const {
    query
  } = location;
  const hasStartAndEnd = query.start && query.end;

  if (!query.statsPeriod && !hasStartAndEnd) {
    eventView.statsPeriod = DEFAULT_TRENDS_STATS_PERIOD;
  }

  return eventView;
}

function getQueryInterval(location, eventView) {
  var _location$query3;

  const intervalFromQueryParam = (0,sentry_utils_queryString__WEBPACK_IMPORTED_MODULE_7__.decodeScalar)(location === null || location === void 0 ? void 0 : (_location$query3 = location.query) === null || _location$query3 === void 0 ? void 0 : _location$query3.interval);
  const {
    start,
    end,
    statsPeriod
  } = eventView;
  const datetimeSelection = {
    start: start || null,
    end: end || null,
    period: statsPeriod
  };
  const intervalFromSmoothing = (0,sentry_components_charts_utils__WEBPACK_IMPORTED_MODULE_4__.getInterval)(datetimeSelection, 'high');
  return intervalFromQueryParam || intervalFromSmoothing;
}

function transformValueDelta(value, trendType) {
  const absoluteValue = Math.abs(value);
  const changeLabel = trendType === _types__WEBPACK_IMPORTED_MODULE_11__.TrendChangeType.REGRESSION ? (0,sentry_locale__WEBPACK_IMPORTED_MODULE_5__.t)('slower') : (0,sentry_locale__WEBPACK_IMPORTED_MODULE_5__.t)('faster');
  const seconds = absoluteValue / 1000;
  const fixedDigits = absoluteValue > 1000 || absoluteValue < 10 ? 1 : 0;
  return {
    seconds,
    fixedDigits,
    changeLabel
  };
}
/**
 * This will normalize the trends transactions while the current trend function and current data are out of sync
 * To minimize extra renders with missing results.
 */

function normalizeTrends(data) {
  const received_at = moment__WEBPACK_IMPORTED_MODULE_3___default()(); // Adding the received time for the transaction so calls to get baseline always line up with the transaction

  return data.map(row => {
    return { ...row,
      received_at,
      transaction: row.transaction
    };
  });
}
function getSelectedQueryKey(trendChangeType) {
  return trendSelectedQueryKeys[trendChangeType];
}
function getUnselectedSeries(trendChangeType) {
  return trendUnselectedSeries[trendChangeType];
}
function movingAverage(data, index, size) {
  return data.slice(index - size, index).map(a => a.value).reduce((a, b) => a + b, 0) / size;
}
/**
 * This function applies defaults for trend and count percentage, and adds the confidence limit to the query
 */

function getLimitTransactionItems(query) {
  const limitQuery = new sentry_utils_tokenizeSearch__WEBPACK_IMPORTED_MODULE_9__.MutableSearch(query);

  if (!limitQuery.hasFilter('count_percentage()')) {
    limitQuery.addFilterValues('count_percentage()', ['>0.25', '<4']);
  }

  if (!limitQuery.hasFilter('trend_percentage()')) {
    limitQuery.addFilterValues('trend_percentage()', ['>0%']);
  }

  if (!limitQuery.hasFilter('confidence()')) {
    limitQuery.addFilterValues('confidence()', ['>6']);
  }

  return limitQuery.formatString();
}

const smoothTrend = function (data) {
  let resolution = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;
  return (0,downsample_methods_ASAP__WEBPACK_IMPORTED_MODULE_2__.ASAP)(data, resolution);
};
const replaceSeriesName = seriesName => {
  return ['p50', 'p75'].find(aggregate => seriesName.includes(aggregate));
};
const replaceSmoothedSeriesName = seriesName => {
  return `Smoothed ${['p50', 'p75'].find(aggregate => seriesName.includes(aggregate))}`;
};
function transformEventStatsSmoothed(data, seriesName) {
  let minValue = Number.MAX_SAFE_INTEGER;
  let maxValue = 0;

  if (!data) {
    return {
      maxValue,
      minValue,
      smoothedResults: undefined
    };
  }

  const smoothedResults = [];

  for (const current of data) {
    const currentData = current.data;
    const resultData = [];
    const smoothed = smoothTrend(currentData.map(_ref3 => {
      let {
        name,
        value
      } = _ref3;
      return [Number(name), value];
    }));

    for (let i = 0; i < smoothed.length; i++) {
      const point = smoothed[i];
      const value = point.y;
      resultData.push({
        name: point.x,
        value
      });

      if (!isNaN(value)) {
        const rounded = Math.round(value);
        minValue = Math.min(rounded, minValue);
        maxValue = Math.max(rounded, maxValue);
      }
    }

    smoothedResults.push({
      seriesName: seriesName || current.seriesName || 'Current',
      data: resultData,
      lineStyle: current.lineStyle,
      color: current.color
    });
  }

  return {
    minValue,
    maxValue,
    smoothedResults
  };
}

/***/ }),

/***/ "./app/views/performance/utils.tsx":
/*!*****************************************!*\
  !*** ./app/views/performance/utils.tsx ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EXCLUDE_METRICS_UNPARAM_CONDITIONS": () => (/* binding */ EXCLUDE_METRICS_UNPARAM_CONDITIONS),
/* harmony export */   "PROJECT_PERFORMANCE_TYPE": () => (/* binding */ PROJECT_PERFORMANCE_TYPE),
/* harmony export */   "QUERY_KEYS": () => (/* binding */ QUERY_KEYS),
/* harmony export */   "UNPARAMETERIZED_TRANSACTION": () => (/* binding */ UNPARAMETERIZED_TRANSACTION),
/* harmony export */   "addRoutePerformanceContext": () => (/* binding */ addRoutePerformanceContext),
/* harmony export */   "areMultipleProjectsSelected": () => (/* binding */ areMultipleProjectsSelected),
/* harmony export */   "createUnnamedTransactionsDiscoverTarget": () => (/* binding */ createUnnamedTransactionsDiscoverTarget),
/* harmony export */   "getPerformanceDuration": () => (/* binding */ getPerformanceDuration),
/* harmony export */   "getPerformanceLandingUrl": () => (/* binding */ getPerformanceLandingUrl),
/* harmony export */   "getPerformanceTrendsUrl": () => (/* binding */ getPerformanceTrendsUrl),
/* harmony export */   "getSelectedProjectPlatforms": () => (/* binding */ getSelectedProjectPlatforms),
/* harmony export */   "getSelectedProjectPlatformsArray": () => (/* binding */ getSelectedProjectPlatformsArray),
/* harmony export */   "getTransactionName": () => (/* binding */ getTransactionName),
/* harmony export */   "getTransactionSearchQuery": () => (/* binding */ getTransactionSearchQuery),
/* harmony export */   "handleTrendsClick": () => (/* binding */ handleTrendsClick),
/* harmony export */   "isSummaryViewFrontend": () => (/* binding */ isSummaryViewFrontend),
/* harmony export */   "isSummaryViewFrontendPageLoad": () => (/* binding */ isSummaryViewFrontendPageLoad),
/* harmony export */   "platformAndConditionsToPerformanceType": () => (/* binding */ platformAndConditionsToPerformanceType),
/* harmony export */   "platformToPerformanceType": () => (/* binding */ platformToPerformanceType),
/* harmony export */   "removeTracingKeysFromSearch": () => (/* binding */ removeTracingKeysFromSearch),
/* harmony export */   "trendsTargetRoute": () => (/* binding */ trendsTargetRoute)
/* harmony export */ });
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ "../node_modules/core-js/modules/web.dom-collections.iterator.js");
/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ "../node_modules/core-js/modules/es.array.includes.js");
/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-router */ "../node_modules/react-router/es/index.js");
/* harmony import */ var sentry_constants_pageFilters__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sentry/constants/pageFilters */ "./app/constants/pageFilters.tsx");
/* harmony import */ var sentry_data_platformCategories__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! sentry/data/platformCategories */ "./app/data/platformCategories.tsx");
/* harmony import */ var sentry_locale__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sentry/locale */ "./app/locale.tsx");
/* harmony import */ var sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sentry/utils/analytics */ "./app/utils/analytics.tsx");
/* harmony import */ var sentry_utils_dates__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sentry/utils/dates */ "./app/utils/dates.tsx");
/* harmony import */ var sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sentry/utils/discover/eventView */ "./app/utils/discover/eventView.tsx");
/* harmony import */ var sentry_utils_discover_fields__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! sentry/utils/discover/fields */ "./app/utils/discover/fields.tsx");
/* harmony import */ var sentry_utils_formatters__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sentry/utils/formatters */ "./app/utils/formatters.tsx");
/* harmony import */ var sentry_utils_getCurrentSentryReactTransaction__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! sentry/utils/getCurrentSentryReactTransaction */ "./app/utils/getCurrentSentryReactTransaction.tsx");
/* harmony import */ var sentry_utils_queryString__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! sentry/utils/queryString */ "./app/utils/queryString.tsx");
/* harmony import */ var sentry_utils_tokenizeSearch__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! sentry/utils/tokenizeSearch */ "./app/utils/tokenizeSearch.tsx");
/* harmony import */ var _trends_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./trends/utils */ "./app/views/performance/trends/utils.tsx");















const QUERY_KEYS = ['environment', 'project', 'query', 'start', 'end', 'statsPeriod'];
const UNPARAMETERIZED_TRANSACTION = '<< unparameterized >>'; // Represents 'other' transactions with high cardinality names that were dropped on the metrics dataset.

const UNPARAMETRIZED_TRANSACTION = '<< unparametrized >>'; // Old spelling. Can be deleted in the future when all data for this transaction name is gone.

const EXCLUDE_METRICS_UNPARAM_CONDITIONS = `(!transaction:"${UNPARAMETERIZED_TRANSACTION}" AND !transaction:"${UNPARAMETRIZED_TRANSACTION}")`;
const SHOW_UNPARAM_BANNER = 'showUnparameterizedBanner';
function createUnnamedTransactionsDiscoverTarget(props) {
  const fields = ['transaction', 'project', 'transaction.source', 'epm()', 'p50()', 'p95()'];
  const query = {
    id: undefined,
    name: (0,sentry_locale__WEBPACK_IMPORTED_MODULE_5__.t)('Performance - Unparameterized Transactions '),
    query: 'event.type:transaction transaction.source:"url"',
    projects: [],
    fields,
    version: 2
  };
  const discoverEventView = sentry_utils_discover_eventView__WEBPACK_IMPORTED_MODULE_8__["default"].fromNewQueryWithLocation(query, props.location).withSorts([{
    field: 'epm',
    kind: 'desc'
  }]);
  const target = discoverEventView.getResultsViewUrlTarget(props.organization.slug);
  target.query[SHOW_UNPARAM_BANNER] = 'true';
  return target;
}
/**
 * Performance type can used to determine a default view or which specific field should be used by default on pages
 * where we don't want to wait for transaction data to return to determine how to display aspects of a page.
 */

let PROJECT_PERFORMANCE_TYPE; // The native SDK is equally used on clients and end-devices as on
// backend, the default view should be "All Transactions".

(function (PROJECT_PERFORMANCE_TYPE) {
  PROJECT_PERFORMANCE_TYPE["ANY"] = "any";
  PROJECT_PERFORMANCE_TYPE["FRONTEND"] = "frontend";
  PROJECT_PERFORMANCE_TYPE["BACKEND"] = "backend";
  PROJECT_PERFORMANCE_TYPE["FRONTEND_OTHER"] = "frontend_other";
  PROJECT_PERFORMANCE_TYPE["MOBILE"] = "mobile";
})(PROJECT_PERFORMANCE_TYPE || (PROJECT_PERFORMANCE_TYPE = {}));

const FRONTEND_PLATFORMS = [...sentry_data_platformCategories__WEBPACK_IMPORTED_MODULE_4__.frontend];
const BACKEND_PLATFORMS = sentry_data_platformCategories__WEBPACK_IMPORTED_MODULE_4__.backend.filter(platform => platform !== 'native');
const MOBILE_PLATFORMS = [...sentry_data_platformCategories__WEBPACK_IMPORTED_MODULE_4__.mobile];
function platformToPerformanceType(projects, projectIds) {
  if (projectIds.length === 0 || projectIds[0] === sentry_constants_pageFilters__WEBPACK_IMPORTED_MODULE_3__.ALL_ACCESS_PROJECTS) {
    return PROJECT_PERFORMANCE_TYPE.ANY;
  }

  const selectedProjects = projects.filter(p => projectIds.includes(parseInt(`${p.id}`, 10)));

  if (selectedProjects.length === 0 || selectedProjects.some(p => !p.platform)) {
    return PROJECT_PERFORMANCE_TYPE.ANY;
  }

  if (selectedProjects.every(project => FRONTEND_PLATFORMS.includes(project.platform))) {
    return PROJECT_PERFORMANCE_TYPE.FRONTEND;
  }

  if (selectedProjects.every(project => BACKEND_PLATFORMS.includes(project.platform))) {
    return PROJECT_PERFORMANCE_TYPE.BACKEND;
  }

  if (selectedProjects.every(project => MOBILE_PLATFORMS.includes(project.platform))) {
    return PROJECT_PERFORMANCE_TYPE.MOBILE;
  }

  return PROJECT_PERFORMANCE_TYPE.ANY;
}
/**
 * Used for transaction summary to determine appropriate columns on a page, since there is no display field set for the page.
 */

function platformAndConditionsToPerformanceType(projects, eventView) {
  const performanceType = platformToPerformanceType(projects, eventView.project);

  if (performanceType === PROJECT_PERFORMANCE_TYPE.FRONTEND) {
    const conditions = new sentry_utils_tokenizeSearch__WEBPACK_IMPORTED_MODULE_13__.MutableSearch(eventView.query);
    const ops = conditions.getFilterValues('!transaction.op');

    if (ops.some(op => op === 'pageload')) {
      return PROJECT_PERFORMANCE_TYPE.FRONTEND_OTHER;
    }
  }

  return performanceType;
}
/**
 * Used for transaction summary to check the view itself, since it can have conditions which would exclude it from having vitals aside from platform.
 */

function isSummaryViewFrontendPageLoad(eventView, projects) {
  return platformAndConditionsToPerformanceType(projects, eventView) === PROJECT_PERFORMANCE_TYPE.FRONTEND;
}
function isSummaryViewFrontend(eventView, projects) {
  return platformAndConditionsToPerformanceType(projects, eventView) === PROJECT_PERFORMANCE_TYPE.FRONTEND || platformAndConditionsToPerformanceType(projects, eventView) === PROJECT_PERFORMANCE_TYPE.FRONTEND_OTHER;
}
function getPerformanceLandingUrl(organization) {
  return `/organizations/${organization.slug}/performance/`;
}
function getPerformanceTrendsUrl(organization) {
  return `/organizations/${organization.slug}/performance/trends/`;
}
function getTransactionSearchQuery(location) {
  let query = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
  return (0,sentry_utils_queryString__WEBPACK_IMPORTED_MODULE_12__.decodeScalar)(location.query.query, query).trim();
}
function handleTrendsClick(_ref) {
  let {
    location,
    organization,
    projectPlatforms
  } = _ref;
  (0,sentry_utils_analytics__WEBPACK_IMPORTED_MODULE_6__.trackAnalyticsEvent)({
    eventKey: 'performance_views.change_view',
    eventName: 'Performance Views: Change View',
    organization_id: parseInt(organization.id, 10),
    view_name: 'TRENDS',
    project_platforms: projectPlatforms
  });
  const target = trendsTargetRoute({
    location,
    organization
  });
  react_router__WEBPACK_IMPORTED_MODULE_2__.browserHistory.push(target);
}
function trendsTargetRoute(_ref2) {
  let {
    location,
    organization,
    initialConditions,
    additionalQuery
  } = _ref2;
  const newQuery = { ...location.query,
    ...additionalQuery
  };
  const query = (0,sentry_utils_queryString__WEBPACK_IMPORTED_MODULE_12__.decodeScalar)(location.query.query, '');
  const conditions = new sentry_utils_tokenizeSearch__WEBPACK_IMPORTED_MODULE_13__.MutableSearch(query);
  const modifiedConditions = initialConditions !== null && initialConditions !== void 0 ? initialConditions : new sentry_utils_tokenizeSearch__WEBPACK_IMPORTED_MODULE_13__.MutableSearch([]);

  if (conditions.hasFilter('tpm()')) {
    modifiedConditions.setFilterValues('tpm()', conditions.getFilterValues('tpm()'));
  } else {
    modifiedConditions.setFilterValues('tpm()', ['>0.01']);
  }

  if (conditions.hasFilter('transaction.duration')) {
    modifiedConditions.setFilterValues('transaction.duration', conditions.getFilterValues('transaction.duration'));
  } else {
    modifiedConditions.setFilterValues('transaction.duration', ['>0', `<${_trends_utils__WEBPACK_IMPORTED_MODULE_14__.DEFAULT_MAX_DURATION}`]);
  }

  newQuery.query = modifiedConditions.formatString();
  return {
    pathname: getPerformanceTrendsUrl(organization),
    query: { ...newQuery
    }
  };
}
function removeTracingKeysFromSearch(currentFilter) {
  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
    excludeTagKeys: new Set([// event type can be "transaction" but we're searching for issues
    'event.type', // the project is already determined by the transaction,
    // and issue search does not support the project filter
    'project'])
  };
  currentFilter.getFilterKeys().forEach(tagKey => {
    const searchKey = tagKey.startsWith('!') ? tagKey.substr(1) : tagKey; // Remove aggregates and transaction event fields

    if ( // aggregates
    searchKey.match(/\w+\(.*\)/) || // transaction event fields
    sentry_utils_discover_fields__WEBPACK_IMPORTED_MODULE_9__.TRACING_FIELDS.includes(searchKey) || // tags that we don't want to pass to pass to issue search
    options.excludeTagKeys.has(searchKey)) {
      currentFilter.removeFilter(tagKey);
    }
  });
  return currentFilter;
}
function addRoutePerformanceContext(selection) {
  const transaction = (0,sentry_utils_getCurrentSentryReactTransaction__WEBPACK_IMPORTED_MODULE_11__["default"])();
  const days = (0,sentry_utils_dates__WEBPACK_IMPORTED_MODULE_7__.statsPeriodToDays)(selection.datetime.period, selection.datetime.start, selection.datetime.end);
  const oneDay = 86400;
  const seconds = Math.floor(days * oneDay);
  transaction === null || transaction === void 0 ? void 0 : transaction.setTag('query.period', seconds.toString());
  let groupedPeriod = '>30d';

  if (seconds <= oneDay) {
    groupedPeriod = '<=1d';
  } else if (seconds <= oneDay * 7) {
    groupedPeriod = '<=7d';
  } else if (seconds <= oneDay * 14) {
    groupedPeriod = '<=14d';
  } else if (seconds <= oneDay * 30) {
    groupedPeriod = '<=30d';
  }

  transaction === null || transaction === void 0 ? void 0 : transaction.setTag('query.period.grouped', groupedPeriod);
}
function getTransactionName(location) {
  const {
    transaction
  } = location.query;
  return (0,sentry_utils_queryString__WEBPACK_IMPORTED_MODULE_12__.decodeScalar)(transaction);
}
function getPerformanceDuration(milliseconds) {
  return (0,sentry_utils_formatters__WEBPACK_IMPORTED_MODULE_10__.getDuration)(milliseconds / 1000, milliseconds > 1000 ? 2 : 0, true);
}
function areMultipleProjectsSelected(eventView) {
  if (!eventView.project.length) {
    return true; // My projects
  }

  if (eventView.project.length === 1 && eventView.project[0] === sentry_constants_pageFilters__WEBPACK_IMPORTED_MODULE_3__.ALL_ACCESS_PROJECTS) {
    return true; // All projects
  }

  return false;
}
function getSelectedProjectPlatformsArray(location, projects) {
  const projectQuery = location.query.project;
  const selectedProjectIdSet = Array.isArray(projectQuery) ? new Set(projectQuery) : new Set([projectQuery]);
  const selectedProjectPlatforms = projects.reduce((acc, project) => {
    if (selectedProjectIdSet.has(project.id)) {
      var _project$platform;

      acc.push((_project$platform = project.platform) !== null && _project$platform !== void 0 ? _project$platform : 'undefined');
    }

    return acc;
  }, []);
  return selectedProjectPlatforms;
}
function getSelectedProjectPlatforms(location, projects) {
  const selectedProjectPlatforms = getSelectedProjectPlatformsArray(location, projects);
  return selectedProjectPlatforms.join(', ');
}

/***/ }),

/***/ "../node_modules/core-js/internals/a-constructor.js":
/*!**********************************************************!*\
  !*** ../node_modules/core-js/internals/a-constructor.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var isConstructor = __webpack_require__(/*! ../internals/is-constructor */ "../node_modules/core-js/internals/is-constructor.js");
var tryToString = __webpack_require__(/*! ../internals/try-to-string */ "../node_modules/core-js/internals/try-to-string.js");

var $TypeError = TypeError;

// `Assert: IsConstructor(argument) is true`
module.exports = function (argument) {
  if (isConstructor(argument)) return argument;
  throw $TypeError(tryToString(argument) + ' is not a constructor');
};


/***/ }),

/***/ "../node_modules/core-js/internals/species-constructor.js":
/*!****************************************************************!*\
  !*** ../node_modules/core-js/internals/species-constructor.js ***!
  \****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var anObject = __webpack_require__(/*! ../internals/an-object */ "../node_modules/core-js/internals/an-object.js");
var aConstructor = __webpack_require__(/*! ../internals/a-constructor */ "../node_modules/core-js/internals/a-constructor.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "../node_modules/core-js/internals/well-known-symbol.js");

var SPECIES = wellKnownSymbol('species');

// `SpeciesConstructor` abstract operation
// https://tc39.es/ecma262/#sec-speciesconstructor
module.exports = function (O, defaultConstructor) {
  var C = anObject(O).constructor;
  var S;
  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? defaultConstructor : aConstructor(S);
};


/***/ }),

/***/ "../node_modules/core-js/modules/es.string.match-all.js":
/*!**************************************************************!*\
  !*** ../node_modules/core-js/modules/es.string.match-all.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

/* eslint-disable es-x/no-string-prototype-matchall -- safe */
var $ = __webpack_require__(/*! ../internals/export */ "../node_modules/core-js/internals/export.js");
var call = __webpack_require__(/*! ../internals/function-call */ "../node_modules/core-js/internals/function-call.js");
var uncurryThis = __webpack_require__(/*! ../internals/function-uncurry-this */ "../node_modules/core-js/internals/function-uncurry-this.js");
var createIteratorConstructor = __webpack_require__(/*! ../internals/create-iterator-constructor */ "../node_modules/core-js/internals/create-iterator-constructor.js");
var requireObjectCoercible = __webpack_require__(/*! ../internals/require-object-coercible */ "../node_modules/core-js/internals/require-object-coercible.js");
var toLength = __webpack_require__(/*! ../internals/to-length */ "../node_modules/core-js/internals/to-length.js");
var toString = __webpack_require__(/*! ../internals/to-string */ "../node_modules/core-js/internals/to-string.js");
var anObject = __webpack_require__(/*! ../internals/an-object */ "../node_modules/core-js/internals/an-object.js");
var classof = __webpack_require__(/*! ../internals/classof-raw */ "../node_modules/core-js/internals/classof-raw.js");
var isRegExp = __webpack_require__(/*! ../internals/is-regexp */ "../node_modules/core-js/internals/is-regexp.js");
var getRegExpFlags = __webpack_require__(/*! ../internals/regexp-get-flags */ "../node_modules/core-js/internals/regexp-get-flags.js");
var getMethod = __webpack_require__(/*! ../internals/get-method */ "../node_modules/core-js/internals/get-method.js");
var defineBuiltIn = __webpack_require__(/*! ../internals/define-built-in */ "../node_modules/core-js/internals/define-built-in.js");
var fails = __webpack_require__(/*! ../internals/fails */ "../node_modules/core-js/internals/fails.js");
var wellKnownSymbol = __webpack_require__(/*! ../internals/well-known-symbol */ "../node_modules/core-js/internals/well-known-symbol.js");
var speciesConstructor = __webpack_require__(/*! ../internals/species-constructor */ "../node_modules/core-js/internals/species-constructor.js");
var advanceStringIndex = __webpack_require__(/*! ../internals/advance-string-index */ "../node_modules/core-js/internals/advance-string-index.js");
var regExpExec = __webpack_require__(/*! ../internals/regexp-exec-abstract */ "../node_modules/core-js/internals/regexp-exec-abstract.js");
var InternalStateModule = __webpack_require__(/*! ../internals/internal-state */ "../node_modules/core-js/internals/internal-state.js");
var IS_PURE = __webpack_require__(/*! ../internals/is-pure */ "../node_modules/core-js/internals/is-pure.js");

var MATCH_ALL = wellKnownSymbol('matchAll');
var REGEXP_STRING = 'RegExp String';
var REGEXP_STRING_ITERATOR = REGEXP_STRING + ' Iterator';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(REGEXP_STRING_ITERATOR);
var RegExpPrototype = RegExp.prototype;
var $TypeError = TypeError;
var stringIndexOf = uncurryThis(''.indexOf);
var un$MatchAll = uncurryThis(''.matchAll);

var WORKS_WITH_NON_GLOBAL_REGEX = !!un$MatchAll && !fails(function () {
  un$MatchAll('a', /./);
});

var $RegExpStringIterator = createIteratorConstructor(function RegExpStringIterator(regexp, string, $global, fullUnicode) {
  setInternalState(this, {
    type: REGEXP_STRING_ITERATOR,
    regexp: regexp,
    string: string,
    global: $global,
    unicode: fullUnicode,
    done: false
  });
}, REGEXP_STRING, function next() {
  var state = getInternalState(this);
  if (state.done) return { value: undefined, done: true };
  var R = state.regexp;
  var S = state.string;
  var match = regExpExec(R, S);
  if (match === null) return { value: undefined, done: state.done = true };
  if (state.global) {
    if (toString(match[0]) === '') R.lastIndex = advanceStringIndex(S, toLength(R.lastIndex), state.unicode);
    return { value: match, done: false };
  }
  state.done = true;
  return { value: match, done: false };
});

var $matchAll = function (string) {
  var R = anObject(this);
  var S = toString(string);
  var C = speciesConstructor(R, RegExp);
  var flags = toString(getRegExpFlags(R));
  var matcher, $global, fullUnicode;
  matcher = new C(C === RegExp ? R.source : R, flags);
  $global = !!~stringIndexOf(flags, 'g');
  fullUnicode = !!~stringIndexOf(flags, 'u');
  matcher.lastIndex = toLength(R.lastIndex);
  return new $RegExpStringIterator(matcher, S, $global, fullUnicode);
};

// `String.prototype.matchAll` method
// https://tc39.es/ecma262/#sec-string.prototype.matchall
$({ target: 'String', proto: true, forced: WORKS_WITH_NON_GLOBAL_REGEX }, {
  matchAll: function matchAll(regexp) {
    var O = requireObjectCoercible(this);
    var flags, S, matcher, rx;
    if (regexp != null) {
      if (isRegExp(regexp)) {
        flags = toString(requireObjectCoercible(getRegExpFlags(regexp)));
        if (!~stringIndexOf(flags, 'g')) throw $TypeError('`.matchAll` does not allow non-global regexes');
      }
      if (WORKS_WITH_NON_GLOBAL_REGEX) return un$MatchAll(O, regexp);
      matcher = getMethod(regexp, MATCH_ALL);
      if (matcher === undefined && IS_PURE && classof(regexp) == 'RegExp') matcher = $matchAll;
      if (matcher) return call(matcher, regexp, O);
    } else if (WORKS_WITH_NON_GLOBAL_REGEX) return un$MatchAll(O, regexp);
    S = toString(O);
    rx = new RegExp(regexp, 'g');
    return IS_PURE ? call($matchAll, rx, S) : rx[MATCH_ALL](S);
  }
});

IS_PURE || MATCH_ALL in RegExpPrototype || defineBuiltIn(RegExpPrototype, MATCH_ALL, $matchAll);


/***/ }),

/***/ "../node_modules/lodash/assign.js":
/*!****************************************!*\
  !*** ../node_modules/lodash/assign.js ***!
  \****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var assignValue = __webpack_require__(/*! ./_assignValue */ "../node_modules/lodash/_assignValue.js"),
    copyObject = __webpack_require__(/*! ./_copyObject */ "../node_modules/lodash/_copyObject.js"),
    createAssigner = __webpack_require__(/*! ./_createAssigner */ "../node_modules/lodash/_createAssigner.js"),
    isArrayLike = __webpack_require__(/*! ./isArrayLike */ "../node_modules/lodash/isArrayLike.js"),
    isPrototype = __webpack_require__(/*! ./_isPrototype */ "../node_modules/lodash/_isPrototype.js"),
    keys = __webpack_require__(/*! ./keys */ "../node_modules/lodash/keys.js");

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Assigns own enumerable string keyed properties of source objects to the
 * destination object. Source objects are applied from left to right.
 * Subsequent sources overwrite property assignments of previous sources.
 *
 * **Note:** This method mutates `object` and is loosely based on
 * [`Object.assign`](https://mdn.io/Object/assign).
 *
 * @static
 * @memberOf _
 * @since 0.10.0
 * @category Object
 * @param {Object} object The destination object.
 * @param {...Object} [sources] The source objects.
 * @returns {Object} Returns `object`.
 * @see _.assignIn
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 * }
 *
 * function Bar() {
 *   this.c = 3;
 * }
 *
 * Foo.prototype.b = 2;
 * Bar.prototype.d = 4;
 *
 * _.assign({ 'a': 0 }, new Foo, new Bar);
 * // => { 'a': 1, 'c': 3 }
 */
var assign = createAssigner(function(object, source) {
  if (isPrototype(source) || isArrayLike(source)) {
    copyObject(source, keys(source), object);
    return;
  }
  for (var key in source) {
    if (hasOwnProperty.call(source, key)) {
      assignValue(object, key, source[key]);
    }
  }
});

module.exports = assign;


/***/ }),

/***/ "../node_modules/lodash/maxBy.js":
/*!***************************************!*\
  !*** ../node_modules/lodash/maxBy.js ***!
  \***************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var baseExtremum = __webpack_require__(/*! ./_baseExtremum */ "../node_modules/lodash/_baseExtremum.js"),
    baseGt = __webpack_require__(/*! ./_baseGt */ "../node_modules/lodash/_baseGt.js"),
    baseIteratee = __webpack_require__(/*! ./_baseIteratee */ "../node_modules/lodash/_baseIteratee.js");

/**
 * This method is like `_.max` except that it accepts `iteratee` which is
 * invoked for each element in `array` to generate the criterion by which
 * the value is ranked. The iteratee is invoked with one argument: (value).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Math
 * @param {Array} array The array to iterate over.
 * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
 * @returns {*} Returns the maximum value.
 * @example
 *
 * var objects = [{ 'n': 1 }, { 'n': 2 }];
 *
 * _.maxBy(objects, function(o) { return o.n; });
 * // => { 'n': 2 }
 *
 * // The `_.property` iteratee shorthand.
 * _.maxBy(objects, 'n');
 * // => { 'n': 2 }
 */
function maxBy(array, iteratee) {
  return (array && array.length)
    ? baseExtremum(array, baseIteratee(iteratee, 2), baseGt)
    : undefined;
}

module.exports = maxBy;


/***/ }),

/***/ "../node_modules/lodash/negate.js":
/*!****************************************!*\
  !*** ../node_modules/lodash/negate.js ***!
  \****************************************/
/***/ ((module) => {

/** Error message constants. */
var FUNC_ERROR_TEXT = 'Expected a function';

/**
 * Creates a function that negates the result of the predicate `func`. The
 * `func` predicate is invoked with the `this` binding and arguments of the
 * created function.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Function
 * @param {Function} predicate The predicate to negate.
 * @returns {Function} Returns the new negated function.
 * @example
 *
 * function isEven(n) {
 *   return n % 2 == 0;
 * }
 *
 * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));
 * // => [1, 3, 5]
 */
function negate(predicate) {
  if (typeof predicate != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  return function() {
    var args = arguments;
    switch (args.length) {
      case 0: return !predicate.call(this);
      case 1: return !predicate.call(this, args[0]);
      case 2: return !predicate.call(this, args[0], args[1]);
      case 3: return !predicate.call(this, args[0], args[1], args[2]);
    }
    return !predicate.apply(this, args);
  };
}

module.exports = negate;


/***/ }),

/***/ "../node_modules/lodash/omitBy.js":
/*!****************************************!*\
  !*** ../node_modules/lodash/omitBy.js ***!
  \****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var baseIteratee = __webpack_require__(/*! ./_baseIteratee */ "../node_modules/lodash/_baseIteratee.js"),
    negate = __webpack_require__(/*! ./negate */ "../node_modules/lodash/negate.js"),
    pickBy = __webpack_require__(/*! ./pickBy */ "../node_modules/lodash/pickBy.js");

/**
 * The opposite of `_.pickBy`; this method creates an object composed of
 * the own and inherited enumerable string keyed properties of `object` that
 * `predicate` doesn't return truthy for. The predicate is invoked with two
 * arguments: (value, key).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Object
 * @param {Object} object The source object.
 * @param {Function} [predicate=_.identity] The function invoked per property.
 * @returns {Object} Returns the new object.
 * @example
 *
 * var object = { 'a': 1, 'b': '2', 'c': 3 };
 *
 * _.omitBy(object, _.isNumber);
 * // => { 'b': '2' }
 */
function omitBy(object, predicate) {
  return pickBy(object, negate(baseIteratee(predicate)));
}

module.exports = omitBy;


/***/ })

}]);
//# sourceMappingURL=../sourcemaps/app_views_eventsV2_results_tsx-node_modules_core-js_modules_es_string_match-all_js-node_modul-9f2406.fab01649af18b40fec4704da8eae9b3e.js.map